import { ICON_NAME, Icon } from '@ovhcloud/ods-react';
import { Canvas, Meta } from '@storybook/blocks';
import * as SwitchStories from './switch.stories';
import { Banner } from '../../../base-documents/components/banner/Banner';
import { BestPractices } from '../../../base-documents/components/bestPractices/BestPractices';
import { Canvas as OdsCanvas } from '../../../base-documents/components/canvas/Canvas';
import { ExternalLink } from '../../../base-documents/components/externalLink/ExternalLink';
import { Heading } from '../../../base-documents/components/heading/Heading';
import { IdentityCard } from '../../../base-documents/components/identityCard/IdentityCard';

<Meta of={ SwitchStories } name="Documentation" />

<Banner of={ SwitchStories } />

_A **Switch** allows users to quickly and easily switch between several states, actions or options in a row._

<Canvas of={ SwitchStories.Overview } sourceState="none" />

<Heading label="Overview" level={ 2 } />

<IdentityCard aliases={ ['Button group', 'Segmented control', 'Toggle group'] }
              figmaLink="https://www.figma.com/design/9jDDTcR4a9jPRFcdjawAlf/ODS---UI-Kit?node-id=52-10578"
              githubUrl="@ovhcloud/ods-react"
              name="Switch">
  A **Switch** allows users to quickly and easily switch between several states, actions or options in a row.
</IdentityCard>

<Heading label="Usage" level={ 2 } />

A **Switch** is used to switch between multiple states, actions or options (up-to 4).

It can be used for many use cases such as selecting a state within a group of states or filtering.

<Heading label="Dos & Don'ts" level={ 3 } />

<BestPractices
  donts={[
    '- Don\'t use a Switch for more than 4 options. Prefer Radio Group, Checkbox, or Select instead depending on your use case',
    '- Don\'t use a Switch for unrelated options, they should belong to a common category or context',
    '- Don\'t use a Switch if selecting an option does not produce an immediate effect. Use a Checkbox or another control instead',
    '- Don\'t rely solely on icons, add text for clarity',
  ]}
  dos={[
    '- Use a Switch when the user must choose one active option among 2 to 4 closely related states or actions',
    '- Ensure each Switch item has a clear, descriptive label',
    '- Use a Switch when immediate feedback or real-time filtering is expected upon selection',
  ]}
/>

<Heading label="Best Practices in Context" level={ 3 } />

![Component anatomy](./base-assets/components/switch/anatomy.png "Component anatomy")

1. **Switch**
2. **Active toggle button**
3. **Toggle button**
4. **Label**

<Heading label="Placement" level={ 2 } />

A **Switch** can be used in a page when the user needs to select a choice from multiple states or items.
It may replace two radio buttons or a single checkbox to allow users to choose between several states.

By default, the width of a **Switch** item is defined by the length of content.
A custom width can be set so all items on the track will have the same size regardless of content length.

<Heading label="Behavior" level={ 2 } />

The user can switch between states by clicking the **Switch** items, and it has an immediate effect.

<Heading label="Navigation" level={ 2 } />

<Heading label="Focus Management" level={ 3 } />

When the **Switch** receives focus, it is set on the currently selected item, or on the first item if none is selected.

Each individual **Switch** item is focusable unless disabled. A disabled item cannot receive focus or be activated.

Focus remains within the group when navigating between items using arrow keys.

<Heading label="General Keyboard Shortcuts" level={ 3 } />

Pressing `Tab` moves focus to the selected item or the first item in the group.

Pressing `Shift` + `Tab` moves focus to the previous focusable element outside the **Switch** group.

Pressing `Arrow Right` or `Arrow Down` moves focus to the next item in the group.

Pressing `Arrow Left` or `Arrow Up` moves focus to the previous item in the group.

Pressing `Home` (or `fn` + `Arrow Left`) moves focus to the first item.

Pressing `End` (or `fn` + `Arrow Right`) moves focus to the last item.

Pressing `Space` or `Enter` activates or deactivates the focused item, updating the selection immediately.

<Heading label="Accessibility" level={ 2 } />

To ensure proper accessibility, **Switch** must be correctly labeled.

<Heading label="Always provide an explicit label" level={ 3 } />

Every **Switch** must have a clear and explicit label to ensure that users (especially screen reader users) understand its purpose,
using either an <ExternalLink href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Reference/Attributes/aria-label">aria-label</ExternalLink>
or an <ExternalLink href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Reference/Attributes/aria-labelledby">aria-labelledby</ExternalLink> attribute.

<OdsCanvas of={ SwitchStories.AccessibilityAriaLabel } sourceState="shown" />

<Icon name={ ICON_NAME.circleCheck }
      style={{ color: 'var(--ods-color-success-500)' }} /> Screen readers will announce the label and the option information (text, position, selection state).

<OdsCanvas of={ SwitchStories.AccessibilityAriaLabelledby } sourceState="shown" />

<Icon name={ ICON_NAME.circleCheck }
      style={{ color: 'var(--ods-color-success-500)' }} /> Screen readers will announce the label and the option information (text, position, selection state).
