import { Icon, ICON_NAME } from '@ovhcloud/ods-react';
import { Canvas, Meta } from '@storybook/blocks';
import * as ButtonStories from './button.stories';
import { Banner } from '../../../base-documents/components/banner/Banner';
import { BestPractices } from '../../../base-documents/components/bestPractices/BestPractices';
import { Canvas as OdsCanvas } from '../../../base-documents/components/canvas/Canvas';
import { ExternalLink } from '../../../base-documents/components/externalLink/ExternalLink';
import { Heading } from '../../../base-documents/components/heading/Heading';
import { IdentityCard } from '../../../base-documents/components/identityCard/IdentityCard';
import { StorybookLink } from '../../../base-documents/components/storybookLink/StorybookLink';
import { REACT_COMPONENTS_TITLE, STORY } from '../../../base-documents/constants/meta';

<Meta of={ ButtonStories } name="Documentation" />

<Banner of={ ButtonStories } />

_A **Button** component aims to initiate an action. Its text indicates the related intent, its aspect describes the importance and influence level._

<Canvas of={ ButtonStories.Overview } sourceState="none" />

<Heading label="Overview" level={ 2 } />

<IdentityCard aliases={ ['Call To Action', 'CTA'] }
              figmaLink="https://www.figma.com/design/9jDDTcR4a9jPRFcdjawAlf/ODS---UI-Kit?node-id=3-23353"
              githubUrl="@ovhcloud/ods-react"
              name="Button">
  **Buttons** are triggerable elements that are used to set actions. They communicate calls to action to the user and
  allow them to interact with pages.

  **Button** labels express explicitly what action will occur when the user interacts with it. Its aspect describes
  the importance and influence level.

  This component exists in many ways : variants, sizes and colors.
</IdentityCard>

<Heading label="Usage" level={ 2 } />

**Buttons** are mainly used for actions, like adding, removing, validating, etc.
They are used to allow users to interact with the page or its content.

**Buttons** work with other elements on a screen to surface the most important actions the user wants to take in that context.
They must respect the proximity law in order to guide the user on the action to be performed and the expected result.
A **Button** label indicates what happens when the user taps the **Button**, even if it's just to acknowledge something.

**Buttons** don't usually redirect to an external page. For that, see <StorybookLink kind={ REACT_COMPONENTS_TITLE.link } story={ STORY.documentation }>Link</StorybookLink>.

<Heading label="When to use a link or a button?" level={ 3 } />

Links and buttons serve different purposes, and using them correctly improves both accessibility and user experience:

* Use a link when the action navigates the user to another page or resource, either within your application or to an external site
* Use a button when the action performs a function or triggers a behavior on the current page, like submitting a form, opening a modal, or toggling a menu

A button should not mimic a link. It can lead to confusion for users and assistive technologies, as button are not typically expected to handle navigation.

<Heading label="Dos & Don'ts" level={ 3 } />

<BestPractices
  donts={[
    '- Don\'t use a Button as a link, use the Link component instead',
    '- Don\'t show more than one primary button per view',
    '- Don\'t place two identical Buttons side by side (same label and style)',
    '- Don\'t use standalone decorative icons in Buttons unless the action is universally understood',
    '- Don\'t use a ghost Button as the main call to action',
    '- Don\'t overload a Button with too much text or visual clutter',
  ]}
  dos={[
    '- Use a primary Button to highlight the main action on a page or in a form',
    '- Pair an outline Button for complementary actions (e.g., "Cancel", "Learn more")',
    '- Maintain a clear visual hierarchy between Button types (primary, outline, ghost)',
    '- Use icons when they add clarity to the action (e.g., arrow for "Next", trash for "Delete")',
    '- Choose the appropriate size based on context',
  ]}
/>

<Heading label="Best Practices in Context" level={ 3 } />

![Component anatomy](./base-assets/components/button/anatomy.png "Component anatomy")

1. **Button**
2. **Icon** - optional (left or right)
3. **Label** - optional

<Heading label="Behavior" level={ 2 } />

A **Button** can be hovered, focused, clicked and disabled.

When in disabled state, it is impossible to focus or click on it. A "disabled" cursor is shown when hovering the disabled component.

The **Button** supports a loading state.

An icon can be displayed on the left or right of the **Button** label. Icon-only **Button** also exists but it must meet accessibility requirements. See Accessibility section below.

<Heading label="Variation" level={ 2 } />

<Heading label="Color" level={ 3 } />

- **Primary** _(default)_: used for main usage of **Buttons**, and linked to the brand graphical charter.
- **Critical**: alerts users to high-priority actions or warnings that require immediate attention.
- **Neutral**: secondary actions (such as clearing field or close button).

<Heading label="Variant" level={ 3 } />

- **Default**: primary actions, featuring a full background with a matching border to signify important emphasis.
- **Outline**: secondary actions, featuring a transparent background with a visible border to signify less emphasis than primary buttons.
- **Ghost**: tertiary or less prominent actions, blending into the background with minimal styling until hovered or focused to reduce visual dominance.

<Heading label="Size" level={ 3 } />

- **Extra Small**: actions in tiny spaces, such as action button in fields or compact rows in a table.
- **Small**: actions in compact spaces or within densely packed interfaces, providing a more subtle and space-efficient option.
- **Medium** _(default)_: main usage of **Buttons**, when they can be displayed in an important manner.

<Heading label="Navigation" level={ 2 } />

<Heading label="Focus Management" level={ 3 } />

The **Button** component can receive keyboard focus and is part of the standard tab order.

If the **Button** is disabled, it does not receive focus and cannot be activated via keyboard.

<Heading label="General Keyboard Shortcuts" level={ 3 } />

Pressing `Enter` or `Space` while the **Button** is focused activates it, triggering its action.

Pressing `Shift` + `Alt` moves focus to the previous interactive element.

<Heading label="Accessibility" level={ 2 } />

This component complies with the <ExternalLink href="https://www.w3.org/WAI/ARIA/apg/patterns/button/">Button WAI-ARIA design pattern</ExternalLink>.

<Heading label="Always provide an explicit text content" level={ 3 } />

**Button** should always have a clear and descriptive text content to indicate their purpose.

<OdsCanvas of={ ButtonStories.AccessibilityExplicitTextContent } sourceState="shown" />

<Icon name={ ICON_NAME.circleCheck }
      style={{ color: 'var(--ods-color-success-500)' }} /> Screen readers will announce the text content.

<Heading label="Icon Button" level={ 3 } />

If a **Button** contains only an icon, it must include an <ExternalLink href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Reference/Attributes/aria-label">aria-label</ExternalLink> to provide context.

<OdsCanvas of={ ButtonStories.AccessibilityIconOnly } sourceState="shown" />

<Icon name={ ICON_NAME.circleCheck }
      style={{ color: 'var(--ods-color-success-500)' }} /> Screen readers will announce the label.

<Heading label="Using aria-labelledby for additional context" level={ 3 } />

When a **Button** is associated with an existing label, content is read by screen readers when the **Button** receives focus.

<OdsCanvas of={ ButtonStories.AccessibilityLabelledBy } sourceState="shown" />

<Icon name={ ICON_NAME.circleCheck }
      style={{ color: 'var(--ods-color-success-500)' }} /> When the **Button** is focused, the screen reader will announce the linked label.
