import { ICON_NAME, Icon } from '@ovhcloud/ods-react';
import { Canvas, Meta } from '@storybook/blocks';
import * as PasswordStories from './password.stories';
import { Banner } from '../../../base-documents/components/banner/Banner';
import { BestPractices } from '../../../base-documents/components/bestPractices/BestPractices';
import { Canvas as OdsCanvas } from '../../../base-documents/components/canvas/Canvas';
import { Heading } from '../../../base-documents/components/heading/Heading';
import { IdentityCard } from '../../../base-documents/components/identityCard/IdentityCard';
import { StorybookLink } from '../../../base-documents/components/storybookLink/StorybookLink';
import { REACT_COMPONENTS_TITLE, STORY } from '../../../base-documents/constants/meta';

<Meta of={ PasswordStories } name="Documentation" />

<Banner of={ PasswordStories } />

_**Password** component is an <StorybookLink kind={ REACT_COMPONENTS_TITLE.input } story={ STORY.documentation }>Input</StorybookLink> field for entering a password that can be hidden or not._

<Canvas of={ PasswordStories.Overview } sourceState="none" />

<Heading label="Overview" level={ 2 } />

<IdentityCard aliases={ ['Password field', 'Password input'] }
              figmaLink="https://www.figma.com/design/9jDDTcR4a9jPRFcdjawAlf/ODS---UI-Kit?node-id=48-4526"
              githubUrl="@ovhcloud/ods-react"
              name="Password">
  The **Password** component is an Input field of which the content is replaced with middle dot symbol symbols "Â·" by default and
  the masking can be toggled using a show/hide action.
</IdentityCard>

<Heading label="Usage" level={ 2 } />

A **Password** is mainly used to let users enter a password or secret information.

Entered password can be masked or visible as plain text when users need to check what they have entered.

It can also be used for displaying tokens.

<Heading label="Dos & Don'ts" level={ 3 } />

<BestPractices
  donts={[
    '- Don\'t use the Password component when users need to see what they\'re typing by default, use a standard Input instead',
    '- Don\'t hide the label. Users should always know what the Password field is for',
    '- Don\'t use Passwords for non-sensitive or public information; this could cause unnecessary friction',
    '- Don\'t rely only on placeholders to communicate password requirements',
    '- Don\'t remove the toggle visibility option unless there is a strong security or UX reason to do so',
  ]}
  dos={[
    '- Use the Password component for sensitive inputs, such as login credentials, tokens, or API keys',
    '- Use the read-only mode for displaying generated tokens or credentials that users may need to copy, without editing',
    '- Pair Password fields with clear labels and helper texts for expected format or complexity requirements',
  ]}
/>

<Heading label="Best Practices in Context" level={ 3 } />

![Component anatomy](./base-assets/components/password/anatomy.png "Component anatomy")

1. **Password**
2. **Placeholder or input text**
3. **Show/Hide button**
4. **Clearable button** - optional

<Heading label="Placement" level={ 2 } />

**Password** should be vertically aligned with other form components on a same page.

<Heading label="Behavior" level={ 2 } />

**Password** can be used in read-only mode, especially for displaying sensitive tokens.

Users can toggle the password masking (show/hide) by clicking an action button. The selected visibility state remains until the user clicks again.

**Password** supports a clear action to quickly reset its content.

A loading state can be displayed inside the field when needed, for example during validation or processing.

<Heading label="Navigation" level={ 2 } />

<Heading label="Focus Management" level={ 3 } />

When tabbing through the page, the Password field receives focus as part of the natural tab order.

If present, the clear button is focusable immediately after the Password field.

If present, the toggle mask button (show/hide password) is focusable after the clear button.

If the Password field is read-only, it can still receive focus but cannot be edited.

<Heading label="General Keyboard Shortcuts" level={ 3 } />

Pressing `Tab` moves focus forward.

Pressing `Shift` + `Tab` moves focus backward to the previous interactive element.

Pressing any character key while the Password field is focused enters text into the field (unless it is read-only).

Pressing `Backspace` deletes the last character before the cursor position.

Pressing `Enter` while the clear button is focused clears the Password content.

Pressing `Enter` while the toggle mask button is focused toggles between showing and hiding the field content.

<Heading label="Accessibility" level={ 2 } />

To ensure proper accessibility, the **Password** component must be correctly labeled and provide meaningful context when interactive elements (such as icon buttons) are used.

<Heading label="Always provide an explicit label" level={ 3 } />

Every **Password** must have a clear and explicit label to ensure that users (especially screen reader users) understand its purpose, using either **FormField** or a native label tag.

<OdsCanvas of={ PasswordStories.AccessibilityFormField } sourceState="shown" />

<Icon name={ ICON_NAME.circleCheck }
      style={{ color: 'var(--ods-color-success-500)' }} /> Screen readers will announce the label, the field and its content.

<Heading label="Override action context" level={ 3 } />

To provide more context on the interactive elements, you can provide your own custom translations to the component.

<OdsCanvas of={ PasswordStories.AccessibilityI18n } sourceState="shown" />

<Icon name={ ICON_NAME.circleCheck }
      style={{ color: 'var(--ods-color-success-500)' }} /> Screen readers will announce the label, the field, its content and custom label of focused action.
