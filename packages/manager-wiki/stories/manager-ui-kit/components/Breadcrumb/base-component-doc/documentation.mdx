import { Icon, ICON_NAME } from '@ovhcloud/ods-react';
import { Canvas, Meta } from '@storybook/blocks';
import { Canvas as OdsCanvas } from '../../../base-documents/components/canvas/Canvas';
import { ExternalLink } from '../../../base-documents/components/externalLink/ExternalLink';
import * as BreadcrumbStories from './breadcrumb.stories';
import { Banner } from '../../../base-documents/components/banner/Banner';
import { BestPractices } from '../../../base-documents/components/bestPractices/BestPractices';
import { Heading } from '../../../base-documents/components/heading/Heading';
import { IdentityCard } from '../../../base-documents/components/identityCard/IdentityCard';
import { StorybookLink } from '../../../base-documents/components/storybookLink/StorybookLink';
import { REACT_COMPONENTS_TITLE, STORY } from '../../../base-documents/constants/meta';

<Meta of={ BreadcrumbStories } name="Documentation" />

<Banner of={ BreadcrumbStories } />

_A list of <StorybookLink kind={ REACT_COMPONENTS_TITLE.link } story={ STORY.documentation }>Links</StorybookLink> showing the current page location in the navigational hierarchy._

<Canvas of={ BreadcrumbStories.Overview } sourceState="none" />

<Heading label="Overview" level={ 2 } />

<IdentityCard aliases={ ['Breadcrumb trail'] }
              figmaLink="https://www.figma.com/design/9jDDTcR4a9jPRFcdjawAlf/ODS---UI-Kit?node-id=3-22762"
              githubUrl="@ovhcloud/ods-react"
              name="Breadcrumb">
  **Breadcrumb** is used to define the user's position in a site hierarchy, it can also be useful for a finer navigation in
  an inner application.
</IdentityCard>

<Heading label="Usage" level={ 2 } />

It has several usages :
* Displaying subpages of a site structure
* Show step progress of a process
* Simplify site structure navigation in a quicker way

<Heading label="Dos & Don'ts" level={ 3 } />

<BestPractices
  donts={[
    '- Don\'t use Breadcrumbs as a primary navigation method, they are secondary and contextual only',
    '- Don\'t include external links in Breadcrumb items, all links should be internal',
    '- Don\'t nest Breadcrumbs or place more than one Breadcrumb component on the same page',
    '- Don\'t exceed 4 levels of depth. Overly complex paths reduce clarity and usability',
    '- Don\'t make the current page a link. The last item should be plain text to indicate the user\'s location',
    '- Don\'t change the Breadcrumb order to reflect user history or actions, it should always match site structure',
    '- Don\'t use Breadcrumb if the page doesn\'t belong to a clearly hierarchical structure',
  ]}
  dos={[
    '- Start the Breadcrumb trail with a link to the homepage, using a "home" Icon or the "Home" label for example',
    '- Reflect the actual page hierarchy in the Breadcrumb structure (e.g., Section > Subsection > Current page)',
    '- Use Breadcrumb to provide contextual orientation, especially in deep navigation paths',
    '- Ensure that each Breadcrumb item (except the last one) is a clickable link to a parent page',
    '- Add the ellipsis to collapse long paths (more than 4 Links visible)',
  ]}
/>

<Heading label="Best Practices in Context" level={ 3 } />

![Component anatomy](./base-assets/components/breadcrumb/anatomy.png "Component anatomy")

1. **Breadcrumb**
2. **Page link**
3. **Current page**
4. **Ellipsis**

<Heading label="Placement" level={ 2 } />

A **Breadcrumb** is used at the top of a web page, preferably start-aligned.

Its width is automatic, relative to its content and is not adjustable.

<Heading label="Behavior" level={ 2 } />

When the **Breadcrumb** has more than 4 links visible, an ellipsis is displayed as a replacement for the middle link.

A click on the ellipsis will expand all previously hidden links inline, the collapsed state can't be redone afterward.

The **Breadcrumb** links are kept inline, even on mobile viewports.

<Heading label="Navigation" level={ 2 } />

<Heading label="Focus Management" level={ 3 } />

All links within the **Breadcrumb** component are focusable, following the reading order. The last item, which represents the current page, is static text and does not receive focus.

<Heading label="General Keyboard Shortcuts" level={ 3 } />

* Pressing `Tab` moves focus through each link in the **Breadcrumb** trail
* Pressing `Enter` while a link is focused navigates to the corresponding page
* When an ellipsis (...) appears due to a long **Breadcrumb** trail (more than 4 elements), it behaves as a link:
  * Pressing `Enter` expands the full **Breadcrumb** list
  * Once expanded, additional link become accessible via `Tab` navigation

<Heading label="Accessibility" level={ 2 } />

This component complies with the <ExternalLink href="https://www.w3.org/WAI/ARIA/apg/patterns/breadcrumb/">Breadcrumb WAI-ARIA design pattern</ExternalLink>.

<Heading label="Identifying the Breadcrumb with aria-label" level={ 3 } />

**Breadcrumbs** are a form of navigation, but they serve a specific purpose distinct from primary navigation menus. To ensure they are correctly recognized, an <ExternalLink href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Reference/Attributes/aria-label">aria-label</ExternalLink> should be added to explicitly identify them.

**Breadcrumb Links** follow the same accessibility guidelines as a standard <StorybookLink kind={ REACT_COMPONENTS_TITLE.link } story={ STORY.documentation }>Link</StorybookLink>.

<OdsCanvas of={ BreadcrumbStories.AccessibilityWithAriaLabel } sourceState="shown" />

 <Icon name={ ICON_NAME.circleCheck }
       style={{ color: 'var(--ods-color-success-500)' }} /> Screen readers will announce the link, the label of the first link, the list and the number of item.
