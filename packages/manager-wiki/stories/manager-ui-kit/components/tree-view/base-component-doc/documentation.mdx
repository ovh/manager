import { Canvas, Meta } from '@storybook/blocks';
import * as TreeViewStories from './tree-view.stories';
import { Banner } from '../../../base-documents/components/banner/Banner';
import { BestPractices } from '../../../base-documents/components/bestPractices/BestPractices';
import { ExternalLink } from '../../../base-documents/components/externalLink/ExternalLink';
import { Heading } from '../../../base-documents/components/heading/Heading';
import { IdentityCard } from '../../../base-documents/components/identityCard/IdentityCard';
import { StorybookLink } from '../../../base-documents/components/storybookLink/StorybookLink';
import { REACT_COMPONENTS_TITLE, STORY } from '../../../base-documents/constants/meta';

<Meta
  of={ TreeViewStories }
  name="Documentation"
  tags={ ['new'] } />

<Banner of={ TreeViewStories } />

<Canvas of={ TreeViewStories.Overview } sourceState="none" />

<Heading label="Overview" level={ 2 } />

<IdentityCard aliases={ [] }
              figmaLink="https://www.figma.com/design/9jDDTcR4a9jPRFcdjawAlf/branch/8NZfqeptysMQInF02WaIJR"
              githubUrl="@ovhcloud/ods-react"
              name="Tree View"
              startingVersion={ 19 }>
The **Tree View** component displays hierarchical data in a parent-child structure. It allows users to expand, collapse, and interact with nested items.
</IdentityCard>

<Heading label="Anatomy" level={ 2 } />

![Component anatomy](/assets/base-assets/components/tree-view/anatomy.png "Component anatomy")

1. **Tree View**
2. **Node/item**
3. **Checkbox (multi-selection)**
4. **Node/item name**

<Heading label="Usage" level={ 2 } />

The **Tree View** component is used to navigate or manage hierarchical datasets,
for representing file systems, nested categories, any structured dataset that benefits from a collapsible interface.

Common use cases include:
- Directory structures
- Nested navigation menus
- Category selectors
- Configurations and settings with nested options?

<Heading label="Dos & Don'ts" level={ 3 } />

<BestPractices
  donts={[
    '- Donâ€™t use a Tree View if there are no nodes or if the content is too minimal to justify a hierarchical structure',
  ]}
  dos={[
    '- Use a Tree View for hierarchical data where relationships between items are important',
  ]}
/>

<Heading label="Behavior" level={ 2 } />

<Heading label="Expand / Collapse" level={ 3 } />
- Items/Nodes can be expanded or collapsed to show or hide their children
- The Tree View can be rendered with all nodes expanded by default
- Individual nodes can be configured to start in an expanded state when the Tree View is rendered

<Heading label="Selection" level={ 3 } />
<Heading label="Single Selection" level={ 4 } />
- Clicking a node selects it and deselects any previously selected node
<Heading label="Checkbox tree/multi-selection" level={ 4 } />
- Each node/item has a checkbox for selection
- Parent checkbox can represent:
  - Checked: all children are selected
  - Unchecked: no children are selected
  - Indeterminate: partial selection of children
- Selecting a parent node/item selects or deselects all children recursively

<Heading label="Disabling" level={ 3 } />

Disabled nodes cannot be selected, expanded, collapsed, or interact with. They are still display in the hierarchy for context.

<Heading label="Navigation" level={ 2 } />
<Heading label="Focus Management" level={ 3 } />
Only one node in the Tree View is focusable at a time.

Focus remains on a single visible node and moves predictably with keyboard navigation.

If a node contains interactive elements (e.g., a checkbox or link), those elements can receive focus.

<Heading label="General Keyboard Shortcuts" level={ 3 } />
Pressing `Arrow Up / Down` moves focus to the previous or next visible node.

Pressing `Arrow Right`:

- If the focused node is collapsed, expands it
- If the focused node is expanded, moves focus to its first child

Pressing `Arrow Left`:

- If the focused node is expanded, collapses it
- If the focused node is collapsed, moves focus to its parent

Pressing `Home`, or `fn` + `Arrow Left`, moves focus to the first visible node.

Pressing `End`, or `fn` + `Arrow Right` moves focus to the last visible node.

Pressing `Enter` or `Space` activates, expands, or collapses the focused node. If the node has a checkbox, it toggles its state.

Pressing `Enter`or `Space` + `Shift` + `Arrow Up / Down` selects a continuous range of nodes (multi-selection mode).

Pressing `Enter`or `Space` + `Ctrl`or `Cmd` toggles selection of individual node.

Pressing `Ctrl` or `Cmd` + `A` selects all nodes in the tree. When all nodes are already selected, it unselects all nodes.

Typing an alphanumeric character (`A-Z`, `a-z`) changes focus to the next node starting with that character.

<Heading label="Accessibility" level={ 2 } />

This component complies with the <ExternalLink href="https://www.w3.org/WAI/ARIA/apg/patterns/treeview/">Tree View WAI-ARIA design pattern</ExternalLink>
