import { Icon, ICON_NAME } from '@ovhcloud/ods-react';
import { Canvas, Meta } from '@storybook/blocks';
import * as TagStories from './tag.stories';
import { Banner } from '../../../base-documents/components/banner/Banner';
import { BestPractices } from '../../../base-documents/components/bestPractices/BestPractices';
import { Canvas as OdsCanvas } from '../../../base-documents/components/canvas/Canvas';
import { ExternalLink } from '../../../base-documents/components/externalLink/ExternalLink';
import { Heading } from '../../../base-documents/components/heading/Heading';
import { IdentityCard } from '../../../base-documents/components/identityCard/IdentityCard';
import { StorybookLink } from '../../../base-documents/components/storybookLink/StorybookLink';
import { REACT_COMPONENTS_TITLE, STORY } from '../../../base-documents/constants/meta';

<Meta of={ TagStories } name='Documentation' />

<Banner of={ TagStories } />

_A **Tag** component is used to display keywords or categories, with a removal feature._

<Canvas of={ TagStories.Overview } sourceState='none' />

<Heading label="Overview" level={ 2 } />

<IdentityCard aliases={ ['Chip (previous name)', 'Label', 'Pill'] }
              figmaLink="https://www.figma.com/design/9jDDTcR4a9jPRFcdjawAlf/ODS---UI-Kit?node-id=52-11580"
              githubUrl="@ovhcloud/ods-react"
              name="Tag">
  The **Tag** component is a small UI element used to represent metadata, keywords, categories, or other contextual
  information.

  **Tags** are removable and can include an icon as additional prefix element.

  They are commonly used in interfaces for categorizing content, filtering, and adding contextual details.
</IdentityCard>

<Heading label="Usage" level={ 2 } />

Use the **Tag** component to display labels, categories, or metadata that describe or classify content.

**Tags** often appear in contexts like filters and lists.

Ensure that **Tags** are clearly labelled and easily distinguishable from other UI elements.

<Heading label="Dos & Don'ts" level={ 3 } />

<BestPractices
  donts={[
    '- Don\'t use a Tag if there is no interaction expected, prefer the Badge component instead',
    '- Don\'t use full sentences or long text in a Tag label',
    '- Don\'t mix Tags with different behaviors (e.g., some removable, some static) unless necessary and clearly indicated',
    '- Don\'t use Tags as primary action triggers (e.g., "Submit", "Save"), use Buttons instead',
  ]}
  dos={[
    '- Use Tags to represent interactive labels such as filters, categories, or user-defined keywords',
    '- Ensure the label is short, descriptive, and scannable, aim for 1â€“2 words',
    '- Use Tags in search contexts, facet filtering, or content classification',
    '- Allow Tags to be removable or toggleable if the interaction requires it (e.g., deselecting a filter)',
    '- Keep visual distinction between Tags (interactive) and Badges (static)',
  ]}
/>

<Heading label="Best Practices in Context" level={ 3 } />

![Component anatomy](/assets/base-assets/components/tag/anatomy.png "Component anatomy")

1. **Tag**
2. **Icon** - optional (left or right)
3. **Delete icon** - optional
4. **Label** - optional

<Heading label="Placement" level={ 2 } />

Since it provides extra information to a sibling element, in can be used inside components in various places, referring to the nature of its environment.

Multiple **Tags** can be displayed:
- on a single line
- stacked vertically

<Heading label="Behavior" level={ 2 } />

**Tags** can be hovered, focused and disabled.

<Heading label="Variation" level={ 2 } />

<Heading label="Color" level={ 3 } />

- **Neutral**: displaying general labels or metadata without conveying any particular status or urgency.
- **Information** _(default)_: displaying a general information for the user, without conveying any particular urgency.
- **Success**: indicating positive statuses or successful outcomes, providing a visual cue for achievements or completed tasks.
- **Warning**: alerting users to potential issues or cautionary information, signaling that attention is needed.
- **Critical**: highlighting severe issues or urgent information that requires immediate attention, emphasizing high-priority concerns.

<Heading label="Size" level={ 3 } />

- **Medium** _(default)_: main size for displaying **Tags**.
- **Large**: highlighting important labels or metadata with greater visibility and emphasis, making them easily noticeable to users.

<Heading label="Navigation" level={ 2 } />

<Heading label="Focus Management" level={ 3 } />

The **Tag** component is focusable and follows the same keyboard interactions as the Button component.

<Heading label="General Keyboard Shortcuts" level={ 3 } />

Pressing `Tab` moves focus to the **Tag**.

Pressing `Enter` or `Space` triggers the assigned action: removing the **Tag**.

Pressing `Shift` + `Tab` moves focus to the previous interactive element.

<Heading label="Accessibility" level={ 2 } />

Unlike <StorybookLink kind={ REACT_COMPONENTS_TITLE.badge } story={ STORY.documentation }>Badge</StorybookLink>,
**Tags** are interactive and can be removed by the user.
To ensure accessibility, it is important to:

- Group **Tags** properly when they are part of a list.
- Announce the removal action so screen reader users understand the functionality.

<Heading label="Structuring groups of Tags with lists" level={ 3 } />

When multiple **Tags** are displayed together (e.g., a collection of selected filters or labels),
they should be wrapped in an unordered list of items (`<ul>` and `<li>`) to ensure proper announcement by screen readers.

<OdsCanvas of={ TagStories.AccessibilityList } sourceState='shown' />

<Icon name={ ICON_NAME.circleCheck }
      style={{ color: 'var(--ods-color-success-500)' }} /> This allows screen readers to announce a list with the number of items, making it clear that these **Tags** belong to a structured set.

<Heading label="Alternative approach" level={ 3 } />

When modifying the HTML structure is not possible,
use <ExternalLink href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Reference/Roles/list_role">role="list"</ExternalLink> and <ExternalLink href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Reference/Roles/listitem_role">role="listitem"</ExternalLink> to mimic list semantics.

<OdsCanvas of={ TagStories.AccessibilityAriaRoles } sourceState='shown' />

<Icon name={ ICON_NAME.circleCheck }
      style={{ color: 'var(--ods-color-success-500)' }} /> This ensures that screen readers still recognize the **Tags** as a structured list, even without native `<ul>` and `<li>` elements.

<Heading label="Announcing the delete action with aria-label" level={ 3 } />

Since the **Tag** is removable, it should provide clear feedback to assistive technologies.

<OdsCanvas of={ TagStories.AccessibilityAriaLabel } sourceState='shown' />

<Icon name={ ICON_NAME.circleCheck }
      style={{ color: 'var(--ods-color-success-500)' }} /> This ensures that users know the **Tag** can be removed. Screen readers will announce the tag aria label and the button type.
