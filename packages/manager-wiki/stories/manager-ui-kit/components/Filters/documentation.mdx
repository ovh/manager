import {
  StoryBookBanner,
  StorybookHeading,
  StorybookBestPractices,
  StorybookIdentityCard,
  StorybookTable,
} from '../../../../.storybook/docs/components/';
import { Meta, Canvas, Source } from '@storybook/blocks';
import meta, { DefaultProps } from './filters.stories';
import Links from '../../../../.storybook/docs/external-links';

<Meta title="Manager UI Kit/Components/Filters/Documentation" />

<StoryBookBanner of={meta} />

The **Filters** component provides an "interface" to create and manage filters using a combination of user inputs and predefined conditions.

<Canvas of={DefaultProps} sourceState="none" />

<StorybookHeading label="Overview" level={2} />

<StorybookIdentityCard
  aliases={['Filters tags', 'Search Filters']}
  githubUrl={Links.github.filters}
  name="Filters"
  relatedComponents={[{ name: 'odsDatepicker', href: Links.ods.datepicker, }, { name: 'odsFormField', href: Links.ods.formField}, {
    name: 'odsInput', href: Links.ods.input}, { name: 'odsSelect', href: Links.ods.select}, { name: 'odsTag', href: Links.ods.tag }]}
>

It facilitates:

- adding filter tags directly via the main Input and Button
- adding more complexe filters through a Menu (Button + Popover)

</StorybookIdentityCard>

<StorybookHeading label="Anatomy" level={2} />

1. **Input**: ODS Input; Allows the user to type a search term
2. **Button** (magnifying glass icon): ODS Button; Triggers the addition of a tag base on the Input field value
3. **Button** (filter icon): ODS Button; Opens an ODS Popover for advanced filter creation
4. **Popover**: ODS Popover; Contains the following form elements:
5. **Actions**
   1. **An ODS Select**: for choosing the field to filter on (e.g., column)
   2. **A second ODS Select**: for choosing a filetring condition (e.g., "contains", "starts with")
   3. **An ODS Input**: for specifying the value to filter by
   4. **An ODS Button**: for submitting the form elements and adding a filter tag
6. **Tag(s)**: ODS Tag; Display the added filters and allow removal

<StorybookHeading label="Usage" level={2} />

<StorybookBestPractices
  dos={[
    'Do use Filter component to enhance user experience in data exploration and management interfaces',
    "Do ensure proper configuration of Select options and Input fields to align with the application's requirements",
  ]}
  donts={[
    'Do not use the Filter component if tagging functionnality or advanced filtering is unnecessary',
    'Avoid overcomplicating the Popover with unrelated controls or logic',
  ]}
/>

<StorybookHeading label="Placement" level={2} />

The **Filter** component is typically placed above or alongside a Datagrid or data display interface.

It should be easily accessible to users for quick filtering actions.

<StorybookHeading label="Behavior" level={2} />

**States**

- **Default**:
  - The Input and Buttons are ready for user interactions
- **Hover, focus, click**:
  - All inherited from the OVHcloud Design System components

**Interactions**

Direct Input filtering

- User types a value into the Input field
- User clicks the Button (magnifying-glass icon)
- A tag is added below the Input field

**Advanced filtering (via Popover)**

- User clicks the Button (filter icon) to open the Popover
- In the Popover:
  - user selects an option in the first Select
  - user selects a condition in the second Select
  - user types a value into the Input field
  - the Button to submit becomes enabled
- User clicks the Button "add", and a tag is added below the Input field
- The Popover remains open for additional filter creation

**Tag removal**

- Clicking the tag deletes it

<StorybookHeading label="Variation" level={2} />

**Locale and language**

The labels in the Popover (e.g., "Column", "Condition", "Value", "Add") are (or can be) localized to match the application's language.

<StorybookHeading label="Accessibility" level={2} />

_Ensure the component meets accessibility standards.
Describe what should keyboard interaction do to the component
WAI Patterns can help you go though keyboard interaction :_ **[https://www.w3.org/WAI/ARIA/apg/patterns/](https://www.w3.org/WAI/ARIA/apg/patterns/)**

To meet accessibility standards:

- Ensure all form elements in the Popover have clear and descriptive labels
- Users should be able to navigate through the Input, Buttons, and Popover elements using keyboard controls
