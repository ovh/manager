import { ICON_NAME, Icon } from '@ovhcloud/ods-react';
import { Canvas, Meta } from '@storybook/blocks';
import * as QuantityStories from './quantity.stories';
import { Banner } from '../../../base-documents/components/banner/Banner';
import { BestPractices } from '../../../base-documents/components/bestPractices/BestPractices';
import { Canvas as OdsCanvas } from '../../../base-documents/components/canvas/Canvas';
import { ExternalLink } from '../../../base-documents/components/externalLink/ExternalLink';
import { Heading } from '../../../base-documents/components/heading/Heading';
import { IdentityCard } from '../../../base-documents/components/identityCard/IdentityCard';

<Meta of={ QuantityStories } name="Documentation" />

<Banner of={ QuantityStories } />

_**Quantity** is a component used to enter and modify a numeric value in a responsive and easy way_

<Canvas of={ QuantityStories.Overview } sourceState="none" />

<Heading label="Overview" level={ 2 } />

<IdentityCard aliases={ ['Numeric', 'Number input', 'Amount'] }
              figmaLink="https://www.figma.com/design/9jDDTcR4a9jPRFcdjawAlf/ODS---UI-Kit?node-id=49-9160"
              githubUrl="@ovhcloud/ods-react"
              name="Quantity">
  The **Quantity** component provides a user-friendly interface for selecting or entering numerical values.

  It includes an **Input** field combined with increment and decrement **Buttons** to adjust the value easily.
</IdentityCard>

<Heading label="Usage" level={ 2 } />

**Quantity** is used to quickly adjust with a few clicks a numeric value within defined parameters.

Limits can be set as minimum or maximum value. In that case, the numeric value cannot exceed the defined boundaries.

<Heading label="Dos & Don'ts" level={ 3 } />

<BestPractices
  donts={[
    '- Don\'t use the Quantity component for large numeric changes that would require excessive clicking. Prefer a freeform numeric input or slider in those cases',
    '- Don\'t use the component outside of quantitative contexts: it should only be used to adjust measurable numeric values (e.g., quantity, amount)',
  ]}
  dos={[
    '- Use the Quantity component for small, incremental adjustments where users are likely to increase or decrease values with just a few clicks',
    '- Always allow users to manually input a number directly into the field, not just through the increment/decrement buttons',
    '- Set appropriate min/max limits to prevent invalid or unintended values',
    '- Provide contextual labels or grouping when needed to clarify what the quantity refers to',
  ]}
/>

<Heading label="Best Practices in Context" level={ 3 } />

![Component anatomy](./base-assets/components/quantity/anatomy.png "Component anatomy")

1. **Quantity**
2. **Decrement button**
3. **Input field**
4. **Increment button**

<Heading label="Placement" level={ 2 } />

**Quantity** can be used to let users easily change an amount of items, for example, or similar situations.

It should be used with numeric **Input** that are in a fairly narrow range.

<Heading label="Behavior" level={ 2 } />

**Quantity** numeric field can be edited directly by the user.

The user can also decrease or increase the value by clicking on the **Buttons**.

In case that limits have been set to minimum and maximum value, corresponding control will be disabled when this value has been reached.

Each item of the **Quantity** component can be focused; the whole component can be disabled at once.

<Heading label="Navigation" level={ 2 } />

<Heading label="Focus Management" level={ 3 } />

When the **Quantity** component is focused, focus is automatically set to the input if not disabled.

If the **Input** field is read-only, it can still receive focus but cannot be edited.

<Heading label="General Keyboard Shortcuts" level={ 3 } />

Pressing `Tab` moves focus forward the input field.

Pressing `Shift` + `Tab` moves focus backward through the interactive elements.

Pressing `Arrow Up` when focused in the Input field increases the value.

Pressing `Arrow Down` when focused in the Input field decreases the value.

<Heading label="Accessibility" level={ 2 } />

This component complies with the <ExternalLink href="https://www.w3.org/WAI/ARIA/apg/patterns/spinbutton/">Spinbutton WAI-ARIA design pattern</ExternalLink>

<Heading label="Always provide an explicit label" level={ 3 } />

Every **Quantity** must have a clear and explicit label to ensure that users (especially screen reader users) understand its purpose,
using either **FormField** or a native label tag.

<OdsCanvas of={ QuantityStories.AccessibilityLabel } sourceState="shown" />

<Icon name={ ICON_NAME.circleCheck }
      style={{ color: 'var(--ods-color-success-500)' }} /> Screen readers will announce the label and the quantity field.
