import { ICON_NAME, Icon } from '@ovhcloud/ods-react';
import { Canvas, Meta } from '@storybook/blocks';
import * as SkeletonStories from './skeleton.stories';
import { Banner } from '../../../base-documents/components/banner/Banner';
import { BestPractices } from '../../../base-documents/components/bestPractices/BestPractices';
import { Canvas as OdsCanvas } from '../../../base-documents/components/canvas/Canvas';
import { ExternalLink } from '../../../base-documents/components/externalLink/ExternalLink';
import { Heading } from '../../../base-documents/components/heading/Heading';
import { IdentityCard } from '../../../base-documents/components/identityCard/IdentityCard';
import { StorybookLink } from '../../../base-documents/components/storybookLink/StorybookLink';
import { REACT_COMPONENTS_TITLE, STORY } from '../../../base-documents/constants/meta';

<Meta of={ SkeletonStories } name='Documentation' />

<Banner of={ SkeletonStories } />

_**Skeleton** component indicates that data is loading. It improves the perceived loading time for the user._

<Canvas of={ SkeletonStories.Default } sourceState='none' />

<Heading label="Overview" level={ 2 } />

<IdentityCard aliases={ ['Skeleton loader'] }
              figmaLink="https://www.figma.com/design/9jDDTcR4a9jPRFcdjawAlf/ODS---UI-Kit?node-id=52-10250"
              githubUrl="@ovhcloud/ods-react"
              name="Skeleton">
  **Skeleton** indicates, through and animation, that content is loading and that the screen is not frozen.
</IdentityCard>

<Heading label="Usage" level={ 2 } />

A **Skeleton** can be used in a variety of contexts such as in Cards, lists, and table content.

<Heading label="Spinner vs Skeleton" level={ 3 } />

Both <StorybookLink kind={ REACT_COMPONENTS_TITLE.spinner } story={ STORY.documentation }>Spinner</StorybookLink> and **Skeleton** indicate that content is loading, but they serve different purposes:

* Use a Spinner when the content or result is unknown and the user must wait. For example, after clicking a button or loading data from an API

* Use a **Skeleton** when the structure of the content is known, but the actual data hasn't loaded yet. It helps set expectations and makes the wait feel shorter

<Heading label="Dos & Don'ts" level={ 3 } />

<BestPractices
  donts={[
    '- Don\'t use Skeleton for static content that doesn\'t change, load it normally without placeholders',
    '- Don\'t apply Skeleton to interactive elements like buttons or inputs. Use Spinner or loading states instead',
    '- Don\'t show Skeleton for very short loading delays, it may feel like a glitch or visual noise',
    '- Don\'t animate excessively or use distracting visuals. Skeleton should feel smooth and unobtrusive',
  ]}
  dos={[
    '- Use a Skeleton to indicate loading states for dynamic content, such as user data or content blocks',
    '- Prefer Skeleton when content will take more than a moment to load (usually > 500ms)',
    '- Ensure Skeleton is replaced with real content as soon as it is available',
  ]}
/>

<Heading label="Placement" level={ 2 } />

A **Skeleton** can be placed whenever needed to indicate a content is loading.

<Heading label="Behavior" level={ 2 } />

The **Skeleton** component has a linear animation to show to indicates a content is loading.

<Heading label="Navigation" level={ 2 } />

The **Skeleton** component is non-interactive and does not receive keyboard focus. It is purely visual and serves as a placeholder for content loading, without affecting keyboard navigation.

<Heading label="Accessibility" level={ 2 } />

The **Skeleton** component is purely decorative.
Its role is to visually indicate that content is loading, but it does not carry any meaningful information for assistive technologies.
For this reason, it is hidden from screen readers.

<Heading label="Indicating loading state" level={ 3 } />

To ensure screen reader users are aware that content is being loaded, you should set <ExternalLink href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Reference/Attributes/aria-busy">aria-busy</ExternalLink> on the container that will eventually receive the content.

<OdsCanvas of={ SkeletonStories.AccessibilityLoading } sourceState="shown" />

<Icon name={ ICON_NAME.circleCheck }
      style={{ color: 'var(--ods-color-success-500)' }} /> Using this approach ensures that assistive technologies are aware that content is being updated, allowing them to wait before announcing changes.

