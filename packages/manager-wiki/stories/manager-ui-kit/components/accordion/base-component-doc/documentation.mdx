import { Canvas, Meta } from '@storybook/blocks';
import { Banner } from '../../../base-documents/components/banner/Banner';
import { BestPractices } from '../../../base-documents/components/bestPractices/BestPractices';
import { ExternalLink } from '../../../base-documents/components/externalLink/ExternalLink';
import { Heading } from '../../../base-documents/components/heading/Heading';
import { IdentityCard } from '../../../base-documents/components/identityCard/IdentityCard';
import { StorybookLink } from '../../../base-documents/components/storybookLink/StorybookLink';
import * as AccordionStories from './accordion.stories';
import { REACT_COMPONENTS_TITLE, STORY } from '../../../base-documents/constants/meta';

<Meta of={ AccordionStories } name="Documentation" />

<Banner of={ AccordionStories } />

_An **Accordion** is a vertical header that reveals or hides an associated section of content._

<Canvas of={ AccordionStories.Overview } sourceState="none" />

<Heading label="Overview" level={ 2 } />

<IdentityCard aliases={ ['Collapsible', 'FAQ'] }
              figmaLink="https://www.figma.com/design/9jDDTcR4a9jPRFcdjawAlf/ODS---UI-Kit?node-id=1-6634"
              githubUrl="@ovhcloud/ods-react"
              name="Accordion">
  The **Accordion** component delivers large amounts of content in a small space through progressive disclosure.

  The header part gives the user a high-level overview of the content allowing them to decide which sections to
  read.

  **Accordions** can make information processing and discovering more effective. However, it does hide content
  from the users, and it\'s important to account for a user not noticing or reading all the included content. If a user
  is likely to read all the content then then the usage of an **Accordion** would not be recommended as it adds an extra
  interaction to access the content; instead use a full scrolling page with normal headers.
</IdentityCard>

<Heading label="Usage" level={ 2 } />

Use any number of elements to visually display them as a group.
Several collapsible panels can co-exist in a same interface.

Use this component for :
* Organizing related information
* Shortening pages and reducing scrolling when content is not crucial to read in full
* When space is at a premium and long content cannot be displayed all at once, like on a mobile interface or in a side panel

<Heading label="Dos & Don'ts" level={ 3 } />

<BestPractices
  donts={ [
    '- Don\'t nest Accordions inside each other',
    '- Don\'t use Accordion to hide critical information needed for completing a task',
    '- Don\'t use vague or generic titles like "Section 1", they should be descriptive',
    '- Don\'t expose a lot of content in the title',
  ] }
  dos={ [
    '- Use Accordion to progressively disclose content, especially in long or dense pages',
    '- Ensure the summary/title of each Accordion clearly communicates what it contains',
    '- Use Accordions to group related content (e.g., FAQ)',
    '- Keep the content within each panel concise and scannable',
    '- Use Accordion instead of Tab if users need to see multiple sections at once',
  ] }
/>

<Heading label="Best Practices in Context" level={ 3 } />

![Component anatomy](/assets/base-assets/components/accordion/anatomy.png "Component anatomy")

1. **Accordion**
2. **Header**
3. **Panel**

<Heading label="Placement" level={ 2 } />

The **Accordion** component is adjusted to the parent's width. It can vary based on the content, layout, and page design.

By default, the **Accordion** content is left-aligned in its container, as the header does.

It can be placed within main page content or inside a side container (as panels, or tiles).

<Heading label="Behavior" level={ 2 } />

An **Accordion** can be hovered, focused, clicked and disabled.

**Accordion** has two states : collapsed and expanded. It is collapsed by default.

When triggering the header part, the panel part should react as expanding or collapsing, depending on what previous
state it had.

The mouse cursor acts as a clickable area on the Header part of the component.

The **Icon** helps the user to know if the **Accordion** is collapsed or expanded :
  * Collapsed : chevron points down
  * Expanded : chevron points up

The Header part of this component acts like a button, with hover, focus and active styles.

Same behavior and styling applies to both Desktop and Mobile modes.

<Heading label="Navigation" level={ 2 } />

<Heading label="Focus Management" level={ 3 } />

The **Accordion** header can receive keyboard focus and is part of the standard tab order.

Focus remains on the header after toggling the section.

If the **Accordion** is disabled, it does not receive focus and cannot be activated via keyboard.

<Heading label="General Keyboard Shortcuts" level={ 3 } />

Pressing `Enter` or `Space` on a focused **Accordion** header toggles its expansion or collapse.

Pressing `Escape` does not close an expanded **Accordion** section (unless additional custom behavior is implemented).

<Heading label="Navigation between sections" level={ 3 } />

If multiple **Accordions** exist, users can navigate between headers using the `Tab` key.

There is no looping between headers: pressing `Tab` on the last header moves focus to the next interactive element outside the Accordion.

Arrow keys (`Arrow Up` / `Arrow Down`) do not move between **Accordions** by default.

<Heading label="Accessibility" level={ 2 } />

This component complies with the <ExternalLink href="https://www.w3.org/WAI/ARIA/apg/patterns/accordion">Accordion WAI-ARIA design pattern</ExternalLink>.
