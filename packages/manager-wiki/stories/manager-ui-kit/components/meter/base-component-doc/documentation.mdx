import { ICON_NAME, Icon } from '@ovhcloud/ods-react';
import { Canvas, Meta } from '@storybook/blocks';
import * as MeterStories from './meter.stories';
import { Banner } from '../../../base-documents/components/banner/Banner';
import { BestPractices } from '../../../base-documents/components/bestPractices/BestPractices';
import { Canvas as OdsCanvas } from '../../../base-documents/components/canvas/Canvas';
import { ExternalLink } from '../../../base-documents/components/externalLink/ExternalLink';
import { Heading } from '../../../base-documents/components/heading/Heading';
import { IdentityCard } from '../../../base-documents/components/identityCard/IdentityCard';

<Meta
  of={ MeterStories }
  name="Documentation"
  tags={ ['new'] } />

<Banner of={ MeterStories } />

<Canvas of={ MeterStories.Overview } sourceState="none" />

<Heading label="Overview" level={ 2 } />

<IdentityCard aliases={ [] }
              figmaLink="https://www.figma.com/design/9jDDTcR4a9jPRFcdjawAlf/branch/YdqCQ0e4CtGBm7dLbuLl1h/ODS---UI-Kit?node-id=10494-5637&t=9pIeofapdgMDhhF4-0"
              githubUrl="@ovhcloud/ods-react"
              name="Meter"
              startingVersion={ 19 }>
  The **Meter** component visually represents a quantitative value within a defined range.
</IdentityCard>

<Heading label="Usage" level={ 2 } />

The **Meter** component represents a quantitative value such as resource usage, storage availability, or other bounded metrics.
It is distinct from a progress bar due to its focus on measurement and thresholds rather than progress toward a goal.

Additionally, the **Meter** is primarily static, representing a fixed state or measurement, whereas the progress bar is dynamic, reflecting continuous updates or progress over time.

<Heading label="Dos & Don'ts" level={ 3 } />

<BestPractices
  donts={[
    'Don\'t use a Meter to represent unbounded progress (use a progress bar instead)',
    'Avoid separating the Meter and its associated value across different sections of the UI to prevent confusion',
    'Avoid excessive customization that compromises readability or accessibility',
  ]}
  dos={[
    '- Use the Meter to represent bounded measurements, such as disk usage or CPU load',
    '- Customize thresholds and colors to provide meaningful visual cues',
    '- Include appropriate labels when context is not immediately clear',
  ]} />

<Heading label="Best Practices in Context" level={ 3 } />

![Component anatomy](/assets/base-assets/components/meter/anatomy.png "Component anatomy")

1. **Meter**
2. **Track**
3. **Fill**

<Heading label="Placement" level={ 2 } />

The placement of the **Meter** depends on its use case and the context within the UI.

Place the **Meter** close to the element it represents (e.g., near a resource title).

If the **Meter** is tied to a specific numeric value (e.g., "75% used"), display the value nearby for clarity, directly adjacent to the component.

Include appropriate labels when context is not immediately clear:
- inline: labels can be placed above, below or beside the Meter.
- surrounding: labels for minimum and maximum values can be positioned at opposite ends of the track, as needed.
- hidden: for visual-only representation.

<Heading label="Behavior" level={ 2 } />

Value representation supports minimum, maximum, and current value inputs.
The filled portion of the **Meter** is dynamically adjusted based on the value.

Low and high thresholds can be specified to visually indicate important ranges.
Color will change based on those thresholds.

The coloring behavior may be updated through the optimum attribute.
See the <ExternalLink href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/meter#optimum">optimum documentation</ExternalLink> for more information.

<Heading label="Navigation" level={ 2 } />

The **Meter** component is non-interactive and does not receive keyboard focus.

<Heading label="Accessibility" level={ 2 } />

To ensure proper accessibility, **Meter** must be correctly labeled.

<Heading label="Always provide an explicit label" level={ 3 } />

Every **Meter** must have a clear and explicit label to ensure that users (especially screen reader users) understand its purpose,
using either an <ExternalLink href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Reference/Attributes/aria-label">aria-label</ExternalLink>
or an <ExternalLink href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Reference/Attributes/aria-labelledby">aria-labelledby</ExternalLink> attribute.

<OdsCanvas of={ MeterStories.AccessibilityAriaLabel } sourceState="shown" />

<Icon name={ ICON_NAME.circleCheck }
      style={{ color: 'var(--ods-color-success-500)' }} /> Screen readers will announce the label and the meter information.

<OdsCanvas of={ MeterStories.AccessibilityAriaLabelledby } sourceState="shown" />

<Icon name={ ICON_NAME.circleCheck }
      style={{ color: 'var(--ods-color-success-500)' }} /> Screen readers will announce the label and the meter information.

<Heading label="Improve value readability" level={ 3 } />

Numbers aren't always user-friendly.
You can use the <ExternalLink href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Reference/Attributes/aria-valuetext">aria-valuetext</ExternalLink>
attribute to present the current value in a more user-friendly, human-understandable way.

<OdsCanvas of={ MeterStories.AccessibilityAriaValuetext } sourceState="shown" />

<Icon name={ ICON_NAME.circleCheck }
      style={{ color: 'var(--ods-color-success-500)' }} /> Screen readers will announce the label and the meter information in a more user-friendly, human-understandable way.
