import { Icon, ICON_NAME } from '@ovhcloud/ods-react';
import { Canvas, Meta } from '@storybook/blocks';
import * as InputStories from './input.stories';
import { Banner } from '../../../base-documents/components/banner/Banner';
import { BestPractices } from '../../../base-documents/components/bestPractices/BestPractices';
import { Canvas as OdsCanvas } from '../../../base-documents/components/canvas/Canvas';
import { Heading } from '../../../base-documents/components/heading/Heading';
import { IdentityCard } from '../../../base-documents/components/identityCard/IdentityCard';

<Meta of={ InputStories } name="Documentation" />

<Banner of={ InputStories } />

_**Input** component is an **Input** field where users can type into_

<Canvas of={ InputStories.Overview } sourceState="none" />

<Heading label="Overview" level={ 2 } />

<IdentityCard aliases={ ['Text Input', 'Text Field'] }
              figmaLink="https://www.figma.com/design/9jDDTcR4a9jPRFcdjawAlf/ODS---UI-Kit?node-id=93-22570"
              githubUrl="@ovhcloud/ods-react"
              name="Input">
  An **Input** is used to allow the user to enter a single line information in a field.
</IdentityCard>

<Heading label="Usage" level={ 2 } />

An **Input** is used to type a free-form short text in a field. It is often used within a Form Field component that adds its label.

It is commonly used in a form, such as asking the user their name or email address, data entered can be text or numbers.

The **Input** component can be used in addition with an **Autocomplete**.

<Heading label="Dos & Don'ts" level={ 3 } />

<BestPractices
  donts={[
    '- Don\'t use an Input for multi-line content, use a Textarea instead',
    '- Don\'t use an Input when users must choose from a predefined set of answers. Prefer Select, Combobox, or Radio',
    '- Don\'t leave an Input without a label',
    '- Don\'t overload the Input with multiple embedded actions (e.g., clear + search + toggle) since it creates visual clutter',
    '- Don\'t use an Input that is inappropriately sized for its content',
  ]}
  dos={[
    '- Always pair the Input with a clear and explicit label, using the Form Field component for example',
    '- Provide a helper message or validation feedback below the Input when appropriate (e.g., expected format or error state)',
    '- Use the clearable button option when it helps users reset the field quickly and efficiently',
    '- Use the toggle mask button for sensitive inputs to let users show or hide the content',
    '- Include a search button within the Input if a specific action is expected (e.g., triggering a search)',
    '- Choose the appropriate input type (email, password, search, etc.) to support native validation',
  ]}
/>

<Heading label="Best Practices in Context" level={ 3 } />

![Component anatomy](/assets/base-assets/components/input/anatomy.png "Component anatomy")

1. **Input**
2. **Placeholder or input text**
3. **Clearable button** - optional

<Heading label="Placement" level={ 2 } />

**Input** should be vertically aligned with other form components on a same page.

**Inputs** that are strongly related in a form can be grouped. This group can flow horizontally left to right and/or vertically top to bottom.

<Heading label="Behavior" level={ 2 } />

**Inputs** can be hovered, focused and clicked / triggered. They can be disabled or readonly as well.

The user can start typing in the **Input** after clicking or focusing on the field container.

A clearable button can be displayed within the **Input** to clear its content. This button becomes visible as soon as the user types the first character and removes all content when clicked.

A toggle mask button can be displayed within the **Input** to toggle the visibility of its content, such as revealing or hiding a password in a masked input.

A search button can be displayed within the **Input** to trigger a specific action, such as performing a search.

<Heading label="Navigation" level={ 2 } />

<Heading label="Focus Management" level={ 3 } />

The **Input** field receives focus as part of the natural tab order.

If a clear button is present, it becomes focusable immediately after the **Input** field.

If a toggle mask button (show/hide password) is present, it becomes focusable after the clear button.

If a search button is present, it becomes focusable after the other **Input** action buttons.

If the **Input** field is read-only, it can still receive focus but cannot be edited.

If the **Input** is disabled, it is  skipped in the tab order and cannot be edited.

<Heading label="General Keyboard Shortcuts" level={ 3 } />

Pressing `Tab` moves focus forward.

Pressing `Shift` + `Tab` moves focus backward to the previous interactive element.

Typing any character while the **Input** field is focused enters text into the field.

Pressing `Backspace` deletes the character preceding the cursor.

Pressing `Enter` while a clear, toggle mask, or search button is focused triggers the corresponding action.

<Heading label="Accessibility" level={ 2 } />

To ensure proper accessibility, the **Input** component must be correctly labeled and provide meaningful context when interactive elements (such as icon buttons) are used.

<Heading label="Always provide an explicit label" level={ 3 } />

Every **Input** must have a clear and explicit label to ensure that users (especially screen reader users) understand its purpose,
using either **FormField** or a native label tag.

<OdsCanvas of={ InputStories.AccessibilityFormField } sourceState="shown" />

<Icon name={ ICON_NAME.circleCheck }
      style={{ color: 'var(--ods-color-success-500)' }} /> Screen readers will announce the label, the field and its content.

<Heading label="Override action context" level={ 3 } />

To provide more context on the interactive elements, you can provide your own custom translations to the component.

<OdsCanvas of={ InputStories.AccessibilityI18n } sourceState="shown" />

<Icon name={ ICON_NAME.circleCheck }
      style={{ color: 'var(--ods-color-success-500)' }} /> Screen readers will announce the label, the field, its content and custom label of focused action.
