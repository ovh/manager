import { ICON_NAME, Icon } from '@ovhcloud/ods-react';
import { Canvas, Meta } from '@storybook/blocks';
import * as BadgeStories from './badge.stories';
import { Banner } from '../../../base-documents/components/banner/Banner';
import { BestPractices } from '../../../base-documents/components/bestPractices/BestPractices';
import { Canvas as OdsCanvas } from '../../../base-documents/components/canvas/Canvas';
import { ExternalLink } from '../../../base-documents/components/externalLink/ExternalLink';
import { Heading } from '../../../base-documents/components/heading/Heading';
import { IdentityCard } from '../../../base-documents/components/identityCard/IdentityCard';

<Meta of={ BadgeStories } name="Documentation" />

<Banner of={ BadgeStories } />

_**Badge** show concise metadata or the current status for an item, in a compact format._

<Canvas of={ BadgeStories.Overview } sourceState="none" />

<Heading label="Overview" level={ 2 } />

<IdentityCard aliases={ ['Chip (previous name)', 'Label'] }
              figmaLink="https://www.figma.com/design/9jDDTcR4a9jPRFcdjawAlf/ODS---UI-Kit?node-id=3-22285"
              githubUrl="@ovhcloud/ods-react"
              name="Badge">
  A **Badge** component labels an item, a keyword or a status. They are non-interactive and used inline, next to the
  title or text they complete.
</IdentityCard>

<Heading label="Usage" level={ 2 } />

Badges are used for items that need to be labelled or categorized.

It can refer to these examples of enhanced data :
* A notification status
* A marketing category
* Additional product information

<Heading label="Notification Status" level={ 3 } />

The notification status can be used next to a menu entry, a label or an option ; in dashboards, Table or summary panels.

There are four different sub-types of status, in order of severity:
* **Error** : Reserved for errors, malfunctions, as well as critical issues. System is unusable, or an action must be taken immediately.
* **Warning** : Reserved for critical messages that need the user attention and acknowledgment, but might not cause errors.
* **Information** : Provides information to users in context. Shouldn't replace regular content.
* **Success** : Reserved to provide to a static persistent success message.

<Heading label="Marketing category" level={ 3 } />

The marketing category is used in product Tiles or product descriptions; used as - temporary or permanent - marketing highlight.

It can contain categories like _"Promotion", "Summer Deals", "Black Friday", "Limited Edition", "Flash Sales"_, ...

<Heading label="Additional product information" level={ 3 } />

The product status is used in product Tiles or product descriptions, it is bound inside the product structure to add tags and information.

All product statuses are of type "New", "Limited edition", "Sold out"

<Heading label="Dos & Don'ts" level={ 3 } />

<BestPractices
  donts={[
    '- Don\'t use Badge as interactive element (e.g., buttons or filters)',
    '- Don\'t write long sentences or complex phrases inside a Badge',
    '- Don\'t use too many Badges in the same line or component, as this creates visual clutter',
    '- Don\'t place Badge far from the content they describe, proximity reinforces meaning',
  ]}
  dos={[
    '- Keep the label short, specific, and readable (ideally one or two words)',
    '- Use Badge to indicate status, category, or metadata',
    '- Place Badge inline with related content, such as next to titles or list items',
    '- Use Badge to complement information, not replace it. They should add clarity, not create ambiguity',
  ]}
/>

<Heading label="Best Practices in Context" level={ 3 } />

![Component anatomy](./base-assets/components/badge/anatomy.png "Component anatomy")

1. **Badge**
2. **Icon** - optional (left or right)
3. **Label** - optional (specific use case only)

<Heading label="Placement" level={ 2 } />

Since it provides extra information to a sibling element, in can be used inside components in various places, referring to the nature of its environment.

Multiple **Badges** can be displayed:
* on a single line
* stacked vertically

<Heading label="Behavior" level={ 2 } />

As the **Badge** is an informational component, its default behavior is being read-only.

An icon can be displayed on the left or right of the **Badge** label content. Icon-only **Badge** also exists, but it must meet accessibility requirements. See Accessibility section below.

<Heading label="Variation" level={ 2 } />

<Heading label="Color" level={ 3 } />

- **Information** _(default)_: display neutral or informational messages, such as updates, notifications, or general status.
- **Success**: indicate positive outcomes or successful actions, such as completed tasks or achievements.
- **Warning**: alert users to potential issues or cautionary information, signaling that attention is needed.

<Heading label="Size" level={ 3 } />

- **Small**: compact and unobtrusive counts or statuses, suitable for tight spaces and minimalistic designs.
- **Medium** _(default)_: main size for displaying **Badges**.
- **Large**: prominent and easily noticeable counts or statuses, suitable for emphasizing important information.

<Heading label="Navigation" level={ 2 } />

The **Badge** component is non-interactive and does not receive keyboard focus. It is purely decorative and used to label an item, keyword, or status.

<Heading label="Accessibility" level={ 2 } />

**Badges** are read by screen readers as regular text.

Icon-only **Badge** is only used in very specific cases. In that case, it should be accompanied by a tooltip to provide further context.

The accessibility of multiple **Badges** presented as a collection must be considered during its implementation.
Their grouping should be made clear to assistive technologies and proper ARIA attributes must be added to ensure full accessibility.

<Heading label="Icon-only Badge" level={ 3 } />

If a **Badge** contains only an icon, it must include an <ExternalLink href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Reference/Attributes/aria-label">aria-label</ExternalLink> to provide context.

<OdsCanvas of={ BadgeStories.AccessibilityAriaLabel } sourceState="shown" />

<Icon name={ ICON_NAME.circleCheck }
      style={{ color: 'var(--ods-color-success-500)' }} /> Screen readers will announce the aria-label instead of ignoring the **Badge**.

Since an icon-only **Badge** may lack detailed information, attach a tooltip and use an <ExternalLink href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Reference/Attributes/aria-labelledby">aria-labelledby</ExternalLink> when extra context is needed:

<OdsCanvas of={ BadgeStories.AccessibilityWithTooltip } sourceState="shown" />

<Icon name={ ICON_NAME.circleCheck }
      style={{ color: 'var(--ods-color-success-500)' }} /> Screen readers will announce the **Tooltip** content when focusing on the **Badge**.

<Heading label="Structuring groups of Badges with lists" level={ 3 } />

When displaying multiple **Badges** together, they should be wrapped within an unordered list of items (`<ul>` and `<li>`) to ensure a proper announcement by screen readers.

<OdsCanvas of={ BadgeStories.AccessibilityGrouping } sourceState="shown" />

<Icon name={ ICON_NAME.circleCheck }
      style={{ color: 'var(--ods-color-success-500)' }} /> This structure ensures that assistive technologies announce **Badges** as a list, rather than reading them as separate, unrelated announcements.
Screen readers will announce the list, the number of items and the **Badges** content.

<Heading label="Alternative approach with ARIA roles" level={ 3 } />

When modifying the HTML structure is not possible, use <ExternalLink href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Reference/Roles/list_role">role="list"</ExternalLink> and <ExternalLink href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Reference/Roles/listitem_role">role="listitem"</ExternalLink> to mimic list semantics.

<OdsCanvas of={ BadgeStories.AccessibilityAlternativeGrouping } sourceState="shown" />

<Icon name={ ICON_NAME.circleCheck }
      style={{ color: 'var(--ods-color-success-500)' }} /> This ensures that screen readers recognize the **Badges** as a structured list even without native `<ul>` and `<li>` elements.
