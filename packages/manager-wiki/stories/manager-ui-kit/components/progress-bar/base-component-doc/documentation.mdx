import { ICON_NAME, Icon } from '@ovhcloud/ods-react';
import { Canvas, Meta } from '@storybook/blocks';
import * as ProgressBarStories from './progress-bar.stories';
import { Banner } from '../../../base-documents/components/banner/Banner';
import { BestPractices } from '../../../base-documents/components/bestPractices/BestPractices';
import { Canvas as OdsCanvas } from '../../../base-documents/components/canvas/Canvas';
import { ExternalLink } from '../../../base-documents/components/externalLink/ExternalLink';
import { Heading } from '../../../base-documents/components/heading/Heading';
import { IdentityCard } from '../../../base-documents/components/identityCard/IdentityCard';

<Meta of={ ProgressBarStories } name='Documentation' />

<Banner of={ ProgressBarStories } />

_A horizontal bar indicating the current completion status of a long-running task, usually updated continuously as the task progresses, instead of in discrete steps._

<Canvas of={ ProgressBarStories.Overview } sourceState="none" />

<Heading label="Overview" level={ 2 } />

<IdentityCard aliases={ ['Progress', 'Progress Loader', 'Preloader', 'Loading Bar', 'Progress Indicator'] }
              figmaLink="https://www.figma.com/design/9jDDTcR4a9jPRFcdjawAlf/ODS---UI-Kit?node-id=49-8976"
              githubUrl="@ovhcloud/ods-react"
              name="Progress Bar">
  The **Progress Bar** component is used to indicate the progress of a task or process to users. It visually
  represents the completion percentage, providing users with feedback on the status of ongoing operations, such as
  file uploads, downloads, or form submissions.
</IdentityCard>

<Heading label="Usage" level={ 2 } />

**Progress Bar** component is only used in process progression, such as submitting, uploading or saving items.

<Heading label="Dos & Don'ts" level={ 3 } />

<BestPractices
  donts={[
    '- Don\'t use a Progress Bar to visualize static data or compare values, use a chart or graph instead',
    '- Don\'t display all three labels (start value, end value, current value) at the same time',
    '- Don\'t rely solely on color to communicate progress, include text or value where helpful',
    '- Don\'t use Progress Bar for instantaneous actions where progress feedback is not meaningful, use a spinner instead',
  ]}
  dos={[
    '- Use a Progress Bar to represent linear, quantifiable progression in processes like uploads or submissions',
    '- Prefer Progress Bar when the completion state is measurable (e.g. 0â€“100%), and users benefit from visual feedback on progress',
    '- Use clear labels or indicators (like percentage or step descriptions) if it adds clarity to the task',
    '- Pair the Progress Bar with contextual messaging to clarify what is being processed and what happens next',
  ]}
/>

<Heading label="Best Practices in Context" level={ 3 } />

![Component anatomy](/assets/base-assets/components/progress-bar/anatomy.png "Component anatomy")

1. **Progress Bar**
2. **Track**
3. **Progress fill**

<Heading label="Placement" level={ 2 } />

**Progress Bar** is usually centered in its container, and can be stretched to match the container width if necessary.

<Heading label="Behavior" level={ 2 } />

**Progress Bar** is filled from the minimum to the maximum value, depending on the progress described.

<Heading label="Navigation" level={ 2 } />

The **Progress Bar** component is non-interactive and does not receive keyboard focus. It is purely visual and used to indicate progress status without affecting keyboard navigation.

<Heading label="Accessibility" level={ 2 } />

**Progress Bar** component should be properly identified and structured to ensure it is accessible to assistive technologies.

<Heading label="Linking the Progress Bar to loading details" level={ 3 } />

To ensure the **Progress Bar** is correctly recognized, an <ExternalLink href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Reference/Attributes/aria-label">aria-label</ExternalLink> should be added to explicitly identify it.

<OdsCanvas of={ ProgressBarStories.AccessibilityLabel } sourceState="shown" />

<Icon name={ ICON_NAME.circleCheck }
      style={{ color: 'var(--ods-color-success-500)' }} /> Screen readers will announce the label, the value and the progress bar.
