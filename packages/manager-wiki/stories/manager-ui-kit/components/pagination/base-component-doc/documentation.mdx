import { ICON_NAME, Icon } from '@ovhcloud/ods-react';
import { Canvas, Meta } from '@storybook/blocks';
import * as PaginationStories from './pagination.stories';
import { Banner } from '../../../base-documents/components/banner/Banner';
import { BestPractices } from '../../../base-documents/components/bestPractices/BestPractices';
import { Canvas as OdsCanvas } from '../../../base-documents/components/canvas/Canvas';
import { ExternalLink } from '../../../base-documents/components/externalLink/ExternalLink';
import { Heading } from '../../../base-documents/components/heading/Heading';
import { IdentityCard } from '../../../base-documents/components/identityCard/IdentityCard';
import { StorybookLink } from '../../../base-documents/components/storybookLink/StorybookLink';
import { REACT_COMPONENTS_TITLE, STORY } from '../../../base-documents/constants/meta';

<Meta of={ PaginationStories } name="Documentation" />

<Banner of={ PaginationStories } />

_A **Pagination** component allows users to navigate through large sets of data by dividing the content into multiple pages._

<Canvas of={ PaginationStories.Overview } sourceState="none" />

<Heading label="Overview" level={ 2 } />

<IdentityCard aliases={ ['Page navigation'] }
              figmaLink="https://www.figma.com/design/9jDDTcR4a9jPRFcdjawAlf/ODS---UI-Kit?node-id=47-7743"
              githubUrl="@ovhcloud/ods-react"
              name="Pagination">
  The **Pagination** component is used to divide content into discrete pages and provide navigation controls to move between them.

  This component enhances usability by allowing users to browse through large sets of data without overwhelming the interface.

  **Pagination** can include various controls like next/previous buttons and page numbers.
</IdentityCard>

<Heading label="Usage" level={ 2 } />

A **Pagination** component is used in two situations :
* To navigate among a <StorybookLink kind={ REACT_COMPONENTS_TITLE.table } story={ STORY.documentation }>Table</StorybookLink> component
* To browse in a set of items (products list, ...)

<Heading label="Dos & Don'ts" level={ 3 } />

<BestPractices
  donts={[
    '- Don\'t use Pagination when the total content fits into a single page',
    '- Avoid Pagination if the number of pages is unpredictable or constantly changing. In those cases, consider infinite scrolling or "Load more" patterns instead',
    '- Don\'t make Pagination the only method of navigation if users might need to filter or search within the dataset',
  ]}
  dos={[
    '- Use Pagination when users need to navigate through large datasets in a structured and orderly way',
    '- Ensure Pagination is used when the total number of pages is known or predictable',
    '- Display a reasonable number of items per page (typically around 20–30) to balance readability and navigation',
    '- Use Next/Previous buttons and page numbers to help users track their position within the dataset',
  ]}
/>

<Heading label="Best Practices in Context" level={ 3 } />

![Component anatomy](./base-assets/components/pagination/anatomy.png "Component anatomy")

1. **Pagination**
2. **Total items per page select**
3. **Total amount of items**
4. **Previous/Next buttons**
5. **Ellipsis**
6. **Current page button**
7. **Unselected page button**

<Heading label="Placement" level={ 2 } />

**Pagination** is presented to the user near the container it uses for pagination; it can be located just above or below it.

Usually, the **Pagination** is end-aligned horizontally, as its usage is not principal to the container.

<Heading label="Behavior" level={ 2 } />

<Heading label="Amount of items per page" level={ 3 } />

The number of items displayed in **Pagination** is depending on its referential.

However, there are few rules to be applied to display it correctly.

Number of items in the component can be chunked in packs of :
- 10
- 25
- 50
- 100
- 300

This value is conditioning the number of items that will be displayed per page.

By default, 10 items per page are displayed, but it can be set to match your need.

<Heading label="Amount of pages" level={ 3 } />

A maximum of 6 numbered page <StorybookLink kind={ REACT_COMPONENTS_TITLE.button } story={ STORY.documentation }>Buttons</StorybookLink> can be visible at once, with a minimum of 1.

Arrow Buttons are always visible, no matter what the amount of pages.

Depending on the current page number and the amount of pages, here are the different displays of the whole component:
- If amount of pages is less than 7, all numbered page <StorybookLink kind={ REACT_COMPONENTS_TITLE.button } story={ STORY.documentation }>Buttons</StorybookLink> can be visible at once
- If amount of pages is 7 or more :
- If current page is the 4th one or less, the first 5 numbered <StorybookLink kind={ REACT_COMPONENTS_TITLE.button } story={ STORY.documentation }>Buttons</StorybookLink> are present, then an ellipsis and the last numbered <StorybookLink kind={ REACT_COMPONENTS_TITLE.button } story={ STORY.documentation }>Button</StorybookLink> corresponding of the amount of pages
- If current page is the 4th to last or more, the first page <StorybookLink kind={ REACT_COMPONENTS_TITLE.button } story={ STORY.documentation }>Button</StorybookLink> is displayed followed by an ellipsis and the last 5 numbered <StorybookLink kind={ REACT_COMPONENTS_TITLE.button } story={ STORY.documentation }>Buttons</StorybookLink>
- If current page is between the previous bounds are displayed, in order :
- the first page <StorybookLink kind={ REACT_COMPONENTS_TITLE.button } story={ STORY.documentation }>Button</StorybookLink>,
- an ellipsis,
- 3 numbered <StorybookLink kind={ REACT_COMPONENTS_TITLE.button } story={ STORY.documentation }>Buttons</StorybookLink>, corresponding to : previous-to-current / current / next-to-current page,
- an ellipsis,
- the last numbered <StorybookLink kind={ REACT_COMPONENTS_TITLE.button } story={ STORY.documentation }>Button</StorybookLink>

<Heading label="Navigation" level={ 2 } />

<Heading label="Focus Management" level={ 3 } />

When tabbing through the page, focus moves sequentially through all interactive elements in the **Pagination** component.

The current page Button is not interactive.

Disabled navigation Buttons (e.g., “Previous” on the first page) are skipped in the tab order.

<Heading label="General Keyboard Shortcuts" level={ 3 } />

Pressing `Tab` moves focus forward through all interactive elements in the **Pagination** (Select, Buttons).

Pressing `Shift` + `Tab` moves focus backward.

Pressing `Enter` or `Space` on a page button, "Previous", or "Next" triggers the corresponding page change.

The "items per page" Select uses the same keyboard shortcuts as the standard Select component.

<Heading label="Accessibility" level={ 2 } />

**Pagination** component should be properly identified, and correct labels must be implemented to ensure it is accessible to assistive technologies.

<Heading label="Identifying the Pagination with aria-label" level={ 3 } />

**Pagination** is a form of navigation, but it serves a specific purpose distinct from primary navigation menus.
To ensure it is correctly recognized, an <ExternalLink href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Reference/Attributes/aria-label">aria-label</ExternalLink> should be added to explicitly identify it.

<OdsCanvas of={ PaginationStories.AccessibilityLabel } sourceState="shown" />

<Icon name={ ICON_NAME.circleCheck }
      style={{ color: 'var(--ods-color-success-500)' }} /> Screen readers will announce the pagination element correctly.
