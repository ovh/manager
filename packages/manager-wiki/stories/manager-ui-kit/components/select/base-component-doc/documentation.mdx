import { ICON_NAME, Icon } from '@ovhcloud/ods-react';
import { Canvas, Meta } from '@storybook/blocks';
import { ExternalLink } from '../../../base-documents/components/externalLink/ExternalLink';
import * as SelectStories from './select.stories';
import { Banner } from '../../../base-documents/components/banner/Banner';
import { BestPractices } from '../../../base-documents/components/bestPractices/BestPractices';
import { Canvas as OdsCanvas } from '../../../base-documents/components/canvas/Canvas';
import { Heading } from '../../../base-documents/components/heading/Heading';
import { IdentityCard } from '../../../base-documents/components/identityCard/IdentityCard';

<Meta of={ SelectStories } name="Documentation" />

<Banner of={ SelectStories } />

_**Select** component is used to select one or more items from a list of values_

<Canvas of={ SelectStories.Overview } sourceState="none" />

<Heading label="Overview" level={ 2 } />

<IdentityCard aliases={ ['Dropdown'] }
              figmaLink="https://www.figma.com/design/9jDDTcR4a9jPRFcdjawAlf/ODS---UI-Kit?node-id=49-24314"
              githubUrl="@ovhcloud/ods-react"
              name="Select">
  A **Select** is used to allow users to select one or more items from a list that is displayed after clicking on it.
</IdentityCard>

<Heading label="Usage" level={ 2 } />

A **Select** is used to display to the user a list of items or options to choose from.

The order of items or options in the list should be sorted as following, depending on the usage:
- **Frequency** of use: recommended item will be listed first
- **Alpha**: it can be used for countries or city locations for example
- **Numeric**: it can be used for sizes for example

<Heading label="Dos & Don'ts" level={ 3 } />

<BestPractices
  donts={[
   '- Don\'t use a Select for binary choices like "Yes" or "No". Use Radio buttons instead for faster interaction',
   '- Don\'t use Select when users need to compare all available options. Use Radio buttons for better visibility',
   '- Don\'t include very long option labels that wrap multiple lines since it makes scanning and selection harder',
   '- Don\'t rely only on placeholder text to communicate intent. Always pair Select with a label',
   '- Don\'t overload Select with too many items (e.g., hundreds). Consider Combobox or a searchable alternative',
  ]}
  dos={[
    '- Use a Select when users need to choose one option from a list of three or more items',
    '- Order the options logically (e.g., by frequency of use, alphabetical order, or numeric sequence)',
    '- Keep option labels short and scannable, ideally one word or a short phrase that fits on a single line',
    '- Use placeholder text to prompt users when no option is selected',
    '- Consider adding grouping if you have many related options and want to improve clarity',
  ]}
/>

<Heading label="Best Practices in Context" level={ 3 } />

![Component anatomy](./base-assets/components/select/anatomy.png "Component anatomy")

1. **Select**
2. **Field containing placeholder or selection**
3. **Dropdown**
4. **List**
5. **Option**
6. **Group** - optional
7. **Multi-selection** - optional (display a checkbox)

<Heading label="Placement" level={ 2 } />

**Select** should be vertically aligned with other form components on a same page.

It has a width by default, but it can widen to match its container.

<Heading label="Behavior" level={ 2 } />

**Select** can be focused and hovered. It also can be disabled. A single option and a group of options can be disabled to be more precise in inner **Select** items.

<Heading label="Variation" level={ 2 } />

- **Single selection**: Allows the user to select a single item from a dropdown list of options.
- **Multiple selection**: Allows the user to select multiple items from a dropdown list of options. The whole line is clickable.
- **Grouped options**: Related options can be grouped together in both a single and multi **Select**.

<Heading label="Navigation" level={ 2 } />

<Heading label="Focus Management" level={ 3 } />

When the **Select** is enabled, it can receive focus via keyboard interaction.

When the **Select** is opened, focus moves into the dropdown content and highlights the selected option (if any), or the first available option.

When closed, focus returns to the **Select** trigger.

A read-only **Select** can receive focus, but the dropdown cannot be opened or interacted with.

Disabled **Select** or disabled options cannot receive focus or be interacted with.

<Heading label="General Keyboard Shortcuts" level={ 3 } />

Pressing `Space`, `Enter`, `Arrow Down` or `Arrow Up` when the **Select** is focused opens the dropdown and highlights the selected or first option.

While the dropdown is open:
* `Arrow Down` moves the highlight to the next option
* `Arrow Up` moves the highlight to the previous option
* `Enter` or `Tab` selects the currently highlighted option and closes the dropdown
* `Escape` closes the dropdown without making a new selection

Typing an alphanumeric character (A–Z, a–z) changes focus to the next option starting with that character.

<Heading label="Accessibility" level={ 2 } />

This component complies with the <ExternalLink href="https://www.w3.org/WAI/ARIA/apg/patterns/listbox/">Listbox WAI-ARIA design pattern</ExternalLink>.

<Heading label="Always provide an explicit label" level={ 3 } />

Every **Select** must have a clear and explicit label to ensure that users (especially screen reader users) understand its purpose,
using either **FormField** or a native label tag.

<OdsCanvas of={ SelectStories.AccessibilityFormField } sourceState="shown" />

<Icon name={ ICON_NAME.circleCheck }
      style={{ color: 'var(--ods-color-success-500)' }} /> Screen readers will announce the label as well as the select.
