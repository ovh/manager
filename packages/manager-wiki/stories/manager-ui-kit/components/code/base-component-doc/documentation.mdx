import { Icon, ICON_NAME } from '@ovhcloud/ods-react';
import { Canvas, Meta } from '@storybook/blocks';
import * as CodeStories from './code.stories';
import { Banner } from '../../../base-documents/components/banner/Banner';
import { BestPractices } from '../../../base-documents/components/bestPractices/BestPractices';
import { Heading } from '../../../base-documents/components/heading/Heading';
import { IdentityCard } from '../../../base-documents/components/identityCard/IdentityCard';

<Meta of={ CodeStories } name='Documentation' />

<Banner of={ CodeStories } />

_**Code** component highlights strings or small blocks of **Code** so it makes them easier to read and understand_

<Canvas of={ CodeStories.Overview } sourceState='none' />

<Heading label="Overview" level={ 2 } />

<IdentityCard aliases={ ['Code snippet'] }
              figmaLink="https://www.figma.com/design/9jDDTcR4a9jPRFcdjawAlf/ODS---UI-Kit?node-id=26-7720"
              githubUrl="@ovhcloud/ods-react"
              name="Code">
  A **Code** component displays a string of **Code** or a small block of **Code** that can be copied to the clipboard.
</IdentityCard>

<Heading label="Usage" level={ 2 } />

**Code** is mainly used for sharing examples of **Code** that can be a string or a small block of **Code**.

An optional icon **Button** may be added in order to copy its content.

<Heading label="Dos & Don'ts" level={ 3 } />

<BestPractices
  donts={[
    '- Don\'t use the Code component to display very long code blocks',
    '- Don\'t use the Code component for non-code content',
    '- Don\'t overload the UI with code examples in places where documentation would be clearer',
    '- Don\'t use the component if the code can\'t be easily understood, reused, or copied',
    '- Don\'t style code with custom formatting that breaks consistency (e.g., non-monospace fonts, shadows, etc.)',
  ]}
  dos={[
    '- Use the Code component to display short and reusable code snippets (e.g., command lines, config)',
    '- Make sure the code is readable and scannable, with appropriate syntax highlighting',
    '- Use inline code within text blocks for single tokens',
    '- Wrap multiline snippets in a block format only when necessary and still concise',
  ]}
/>

<Heading label="Best Practices in Context" level={ 3 } />

![Component anatomy](./base-assets/components/code/anatomy.png "Component anatomy")

1. **Code**
2. **Content**
3. **Copy button** - optional
4. **Tooltip** (when the copy button is displayed)

<Heading label="Placement" level={ 2 } />

By default, the **Code** content is left-aligned in its container.

It should be vertically aligned with other form components on a same page.

<Heading label="Behavior" level={ 2 } />

The "Copy" icon **Button** can be hovered, focused and clicked.

If the optional icon **Button** exists, when clicking on it, the **Code** content is copied to the user's clipboard.

Copy label and copy success label can be customized.

<Heading label="Navigation" level={ 2 } />

<Heading label="Focus Management" level={ 3 } />

The **Code** component itself is non-interactive and does not receive keyboard focus.

However, if the component includes a "Copy" action, the associated Copy button can be focused.

<Heading label="General Keyboard Shortcuts" level={ 3 } />

Pressing `Tab` moves focus to the "Copy" button if available.

Pressing `Enter` or `Space` while the "Copy" button is focused copies the code to the clipboard.

Pressing `Shift` + `Tab` moves focus to the previous interactive element.

<Heading label="Accessibility" level={ 2 } />

<Icon name={ ICON_NAME.circleCheck }
      style={{ color: 'var(--ods-color-success-500)' }} /> Screen readers will announce the embedded code and the copy button **Tooltip** content.
