<!-- item has sref and allow sub items -->
<a
    class="menu-item"
    title="{{ ItemMenuCtrl.item.getTitle() }}"
    data-ng-if="ItemMenuCtrl.item.state"
    data-ng-click="ItemMenuCtrl.toggleItemOpenState()"
    data-ui-sref="{{ :: ItemMenuCtrl.item.getFullSref() }}"
>
    <!-- ARROW -->
    <span
        class="item-arrow"
        aria-hidden="true"
        data-ng-class="{ 'no-sub' : !ItemMenuCtrl.item.allowSubItems }"
        data-ng-if="!ItemMenuCtrl.item.loading"
    >
        <i
            class="ovh-font"
            data-ng-class="{ 'ovh-font-small-arrow-right' : !ItemMenuCtrl.item.isOpen, 'ovh-font-small-arrow-down' : ItemMenuCtrl.item.isOpen }"
            data-ng-if="ItemMenuCtrl.item.allowSubItems"
        >
        </i>
    </span>

    <!-- LOADING -->
    <span
        class="item-loading"
        aria-hidden="true"
        data-ng-if="ItemMenuCtrl.item.loading"
    >
        <span class="oui-spinner oui-spinner_s">
            <span class="oui-spinner__container">
                <span class="oui-spinner__image"></span>
            </span>
        </span>
    </span>

    <!-- ITEM ICON -->
    <span
        class="item-icon"
        aria-hidden="true"
        data-ng-if="ItemMenuCtrl.item.icon"
    >
        <i data-ng-class="ItemMenuCtrl.item.icon"></i>
    </span>

    <!-- ITEM PREFIX -->
    <span
        class="item-prefix"
        data-ng-if="ItemMenuCtrl.item.prefix"
        data-ng-bind="ItemMenuCtrl.item.prefix"
    >
    </span>

    <!-- ITEM TITLE -->
    <span class="item-title" data-ng-bind="ItemMenuCtrl.item.title"> </span>
</a>

<!-- TOGGLE BUTTON -->
<button
    class="menu-item"
    title="{{ ItemMenuCtrl.item.getTitle() }}"
    type="button"
    data-ng-if="!ItemMenuCtrl.item.state && !ItemMenuCtrl.item.url && ItemMenuCtrl.item.allowSubItems"
    data-ng-click="ItemMenuCtrl.toggleItemOpenState()"
>
    <!-- ARROW -->
    <span
        class="item-arrow"
        aria-hidden="true"
        data-ng-class="{ 'no-sub' : !ItemMenuCtrl.item.allowSubItems }"
        data-ng-if="!ItemMenuCtrl.item.loading"
    >
        <i
            class="ovh-font"
            data-ng-class="{ 'ovh-font-small-arrow-right' : !ItemMenuCtrl.item.isOpen, 'ovh-font-small-arrow-down' : ItemMenuCtrl.item.isOpen }"
            data-ng-if="ItemMenuCtrl.item.allowSubItems"
        >
        </i>
    </span>

    <!-- LOADING -->
    <span
        class="item-loading"
        aria-hidden="true"
        data-ng-if="ItemMenuCtrl.item.loading"
    >
        <div class="oui-spinner oui-spinner_s">
            <div class="oui-spinner__container">
                <div class="oui-spinner__image"></div>
            </div>
        </div>
    </span>

    <!-- ITEM ICON -->
    <span
        class="item-icon"
        aria-hidden="true"
        data-ng-if="ItemMenuCtrl.item.icon"
    >
        <i data-ng-class="ItemMenuCtrl.item.icon"></i>
    </span>

    <!-- ITEM PREFIX -->
    <span
        class="item-prefix"
        data-ng-if="ItemMenuCtrl.item.prefix"
        data-ng-bind="ItemMenuCtrl.item.prefix"
    >
    </span>

    <!-- ITEM TITLE -->
    <span class="item-title" data-ng-bind="ItemMenuCtrl.item.title"> </span>
</button>

<!-- ERROR MESSAGE -->
<div
    class="group-error-wrapper"
    data-ng-if="ItemMenuCtrl.item.error && ItemMenuCtrl.errorVisible"
>
    <div>
        <i class="ovh-font ovh-font-filled-warning"></i>
    </div>
    <div>
        <p data-ng-bind="ItemMenuCtrl.item.error"></p>
        <button
            class="btn btn-default"
            type="button"
            data-ng-click="ItemMenuCtrl.toggleItemOpenState()"
            data-translate="sidebar_menu_error_retry"
        ></button>
    </div>
</div>

<!-- EXTERNAL LINK -->
<a
    class="menu-item"
    title="{{ ItemMenuCtrl.item.getTitle() }}"
    data-ng-if="ItemMenuCtrl.item.url && !ItemMenuCtrl.item.allowSubItems"
    data-ng-href="{{ ItemMenuCtrl.item.url }}"
    target="{{ ItemMenuCtrl.item.target }}"
>
    <!-- ARROW -->
    <span
        class="item-arrow"
        aria-hidden="true"
        data-ng-class="{
            'no-sub' : !ItemMenuCtrl.item.allowSubItems
        }"
        data-ng-if="!ItemMenuCtrl.item.loading"
    >
        <i
            class="ovh-font"
            data-ng-class="{
                'ovh-font-small-arrow-right' : !ItemMenuCtrl.item.isOpen,
                'ovh-font-small-arrow-down' : ItemMenuCtrl.item.isOpen
            }"
            data-ng-if="ItemMenuCtrl.item.allowSubItems"
        >
        </i>
    </span>

    <!-- LOADING -->
    <span
        class="item-loading"
        aria-hidden="true"
        data-ng-if="ItemMenuCtrl.item.loading"
    >
        <div class="oui-spinner oui-spinner_s">
            <div class="oui-spinner__container">
                <div class="oui-spinner__image"></div>
            </div>
        </div>
    </span>

    <!-- ITEM ICON -->
    <span
        class="item-icon"
        aria-hidden="true"
        data-ng-if="ItemMenuCtrl.item.icon"
    >
        <i data-ng-class="ItemMenuCtrl.item.icon"></i>
    </span>

    <!-- ITEM PREFIX -->
    <span
        class="item-prefix"
        data-ng-if="ItemMenuCtrl.item.prefix"
        data-ng-bind="ItemMenuCtrl.item.prefix"
    >
    </span>

    <!-- ITEM TITLE -->
    <span class="item-title" data-ng-bind="ItemMenuCtrl.item.title"> </span>
</a>

<!-- SLIDING CONTENT -->
<div
    class="group-content-wrapper"
    data-ng-slide-down="ItemMenuCtrl.item.isOpen"
    data-duration="0.3"
>
    <div class="group-toggle-content">
        <!-- GROUP SEARCH -->
        <div data-ng-if="ItemMenuCtrl.isSearchEnabled()" class="group-search">
            <form
                class="group-search-form"
                data-ng-submit="ItemMenuCtrl.launchSearch()"
            >
                <div class="group-search-wrapper">
                    <i class="ovh-font ovh-font-search"></i>
                    <input
                        type="text"
                        placeholder="{{ 'sidebar_menu_search' | translate }}"
                        data-ng-change="ItemMenuCtrl.launchSearch()"
                        data-ng-model="ItemMenuCtrl.model.search"
                        data-ng-model-options="{ debounce: 300 }"
                    />
                </div>
            </form>
            <em
                data-translate="sidebar_menu_search_no_results"
                data-ng-if="ItemMenuCtrl.item.noSearchResults"
            >
            </em>
        </div>

        <div class="group-scroll-content">
            <!-- GROUP ITEMS -->
            <nav class="menu-sub-items"></nav>
        </div>
        <div
            class="menu-view-all"
            data-ng-if="ItemMenuCtrl.item.viewMore.enabled"
        >
            <div class="menu-view-all-inner">
                <button
                    class="menu-item text-left"
                    title="{{ ItemMenuCtrl.item.viewMore.title }}"
                    type="button"
                    data-ng-click="ItemMenuCtrl.viewMore()"
                    data-ng-disabled="ItemMenuCtrl.item.viewMore.loading"
                >
                    <div
                        class="oui-spinner oui-spinner_s"
                        data-ng-if="ItemMenuCtrl.item.viewMore.loading"
                    >
                        <div class="oui-spinner__container">
                            <div class="oui-spinner__image"></div>
                        </div>
                    </div>
                    <span>{{ ItemMenuCtrl.item.viewMore.title }}</span>
                </button>
            </div>
        </div>
        <div class="menu-view-all" data-ng-if="ItemMenuCtrl.item.viewAllItem">
            <div class="menu-view-all-inner">
                <a
                    class="menu-item"
                    data-ng-href="{{ ItemMenuCtrl.item.viewAllItem.url }}"
                    target="{{ ItemMenuCtrl.item.viewAllItem.target }}"
                >
                    <span
                        data-ng-bind="ItemMenuCtrl.item.viewAllItem.title"
                    ></span>
                </a>
            </div>
        </div>
    </div>
</div>
