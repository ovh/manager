import apiClient from '@ovh-ux/manager-core-api';
import { queryClient } from '@ovh-ux/manager-react-core-application';

{{#if unknownTypeList}}
{{#each unknownTypeList}}
type {{this}} = unknown;
{{/each}}

{{/if}}
{{#if params}}
type Params = {
  {{#each params}}
  /** {{this.description}} */
  {{this.name}}{{#if this.required}}?{{/if}}: {{this.type}};
  {{/each}}
};

{{/if}}
const fetchData = async ({{#if params}}params: Params{{/if}}) => {
  const response = await apiClient.v6.{{httpMethod}}('{{apiPath}}'{{#if params}}, { data: params }{{/if}});
  return response.data;
};

const QUERY_KEY = ['{{apiPath}}'];

export const {{httpMethod}}{{pascalCase fileName}}QueryKey = QUERY_KEY;

{{#if description}}
/**
 * {{description}}
 */
{{/if}}
export const {{httpMethod}}{{pascalCase fileName}} = async ({{#if params}}params: Params{{/if}}): Promise<{{ responseType }}> => {
  return queryClient.fetchQuery(QUERY_KEY, fetchData{{#if params}}.bind(params){{/if}});
};
