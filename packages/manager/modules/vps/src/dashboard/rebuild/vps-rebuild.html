<oui-modal
    class="my-0"
    data-primary-label="{{:: 'vps_configuration_rebuild_confirm' | translate }}"
    data-primary-action="$ctrl.rebuildVps($ctrl.vpsOptions)"
    data-primary-disabled="$ctrl.rebuild.$invalid"
    data-secondary-action="$ctrl.goBack()"
    data-secondary-label="{{:: 'vps_configuration_rebuild_cancel' | translate }}"
    data-on-dismiss="$ctrl.goBack()"
    data-loading="$ctrl.isLoading"
    data-heading="{{:: 'vps_configuration_reinstall_title' | translate}}"
>
    <form novalidate name="$ctrl.rebuild">
        <oui-field
            data-label="{{:: 'vps_configuration_reinstall_step1_question' | translate }}"
        >
            <oui-select
                id="imageId"
                name="imageId"
                data-items="$ctrl.availableImages"
                data-match="name"
                data-model="$ctrl.image"
                data-on-change="$ctrl.vpsOptions.imageId = modelValue.id"
                data-required
            >
            </oui-select>
        </oui-field>

        <ovh-manager-ssh-key-selector
            data-public-key="$ctrl.vpsOptions.publicSshKey"
            data-required="false"
        >
        </ovh-manager-ssh-key-selector>

        <oui-field data-ng-if="$ctrl.vpsOptions.publicSshKey">
            <oui-checkbox
                id="sendPassword"
                name="sendPassword"
                data-description="{{:: 'vps_configuration_reinstall_step2_alert2' | translate }}"
                data-model="$ctrl.vpsOptions.doNotSendPassword"
            >
                <span
                    data-translate="vps_configuration_rebuild_doNotSendPassword"
                ></span>
            </oui-checkbox>
        </oui-field>
    </form>

    <oui-message type="warning">
        <strong
            data-translate="vps_configuration_rebuild_warning_part_1"
        ></strong>
        <p
            data-translate="vps_configuration_rebuild_warning_part_2"
            data-translate-values="{href: $ctrl.VPS_SNAPSHOT_GUIDE_URL}"
        ></p>
    </oui-message>
</oui-modal>
