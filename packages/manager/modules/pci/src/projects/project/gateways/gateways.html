<div data-ui-view>
    <oui-header
        data-heading="{{ 'pci_projects_project_public_gateway_title' | translate}}"
    >
        <oui-guide-menu
            data-text="{{:: 'pci_project_guides_header' | translate }}"
        >
            <oui-guide-menu-item href="{{ $ctrl.guideUrl }}" data-external>
                <span
                    data-translate="pci_project_guides_header_all_guides"
                ></span>
            </oui-guide-menu-item>
        </oui-guide-menu>
    </oui-header>
    <div class="row">
        <p
            class="col-md-8"
            data-translate="pci_projects_project_public_gateways_intro_part_1"
        ></p>
        <ul>
            <li>
                <span
                    data-translate="pci_projects_project_public_gateways_intro_part_2"
                ></span>
            </li>
            <li>
                <span
                    data-translate="pci_projects_project_public_gateways_intro_part_3"
                ></span>
            </li>
        </ul>
    </div>
    <cui-message-container
        data-messages="$ctrl.messages"
    ></cui-message-container>
    <oui-datagrid
        data-rows="$ctrl.gateways"
        data-ng-if="$ctrl.gateways.length > 0"
    >
        <oui-datagrid-topbar>
            <button
                class="oui-button oui-button_secondary oui-button_icon-left mb-2"
                data-ng-click="$ctrl.onAddPublicGatewayClick()"
                type="button"
            >
                <span class="oui-icon oui-icon-add" aria-hidden="true"></span>
                <span
                    data-translate="pci_projects_project_public_gateway_create"
                ></span>
            </button>
        </oui-datagrid-topbar>
        <oui-datagrid-column
            data-title=":: 'pci_projects_project_public_gateway_name' | translate"
            data-property="name"
            data-searchable
            data-type="string"
            data-filterable
        >
            <span
                class="d-block font-weight-bold"
                data-ng-bind="$row.name"
            ></span>
            <span class="d-block" data-ng-bind="$row.id"></span>
        </oui-datagrid-column>
        <oui-datagrid-column
            data-title=":: 'pci_projects_project_public_gateway_region' | translate"
            data-property="region"
            data-type="string"
            data-searchable
            data-filterable
        ></oui-datagrid-column>
        <oui-datagrid-column
            data-title=":: 'pci_projects_project_public_gateway_networks_connected' | translate"
            data-property="connectedNetworkCount"
        >
            <oui-button
                class="btn btn-link"
                data-ng-bind="$row.connectedNetworkCount"
                data-ng-click="$ctrl.onGoToPrivateNetworkClick($row)"
            ></oui-button>
        </oui-datagrid-column>

        <oui-datagrid-column
            data-title=":: 'pci_projects_project_public_gateway_public_ip' | translate"
            data-property="formattedIps"
            data-type="string"
            data-searchable
            data-filterable
        >
            <span
                class="d-block ellipsis"
                oui-tooltip="{{ $row.formattedIps }}"
                data-oui-tooltip-placement="top-end"
                ng-bind="$row.formattedIps"
            ></span>
        </oui-datagrid-column>
        <oui-datagrid-column
            data-title=":: 'pci_projects_project_public_gateway_flavour' | translate"
            data-property="flavour"
            data-type="string"
            data-searchable
            data-filterable
        >
        </oui-datagrid-column>
        <oui-datagrid-column
            data-title=":: 'pci_projects_project_public_gateway_status' | translate"
            data-property="status"
            data-type="string"
            data-searchable
            data-filterable
        ></oui-datagrid-column>
        <oui-action-menu data-compact data-placement="end">
            <oui-action-menu-item
                on-click="$ctrl.goToEditGateway($row.id, $row.region)"
            >
                <span
                    data-translate="pci_projects_project_public_gateway_modify"
                ></span>
            </oui-action-menu-item>
            <oui-action-menu-item
                data-on-click="$ctrl.onGoToPrivateNetworkClick()"
            >
                <span
                    data-translate="pci_projects_project_public_gateway_go_to_private_networks"
                ></span>
            </oui-action-menu-item>
            <oui-action-menu-item
                data-on-click="$ctrl.goToDeleteGateway($row.id, $row.name, $row.region)"
            >
                <span
                    data-translate="pci_projects_project_public_gateway_delete"
                ></span>
            </oui-action-menu-item>
        </oui-action-menu>
        <oui-datagrid-row-detail>
            <div class="text-center" data-ng-if="$row.interfaces.length === 0">
                <span
                    class="oui-datagrid-empty__placeholder"
                    data-translate="pci_projects_project_public_gateway_no_data"
                ></span>
            </div>
            <div class="d-flex" data-ng-if="$row.interfaces.length > 0">
                <div class="font-weight-bold">
                    <span
                        data-translate="pci_projects_project_public_gateway_private_ip"
                    ></span>
                </div>
                <div class="d-flex flex-wrap ml-5">
                    <span
                        class="mr-3"
                        data-ng-repeat="interface in $row.interfaces"
                        data-ng-bind="interface.ip"
                    ></span>
                </div>
            </div>
        </oui-datagrid-row-detail>
    </oui-datagrid>
</div>
