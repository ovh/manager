<div data-ui-view>
    <cui-message-container
        data-messages="$ctrl.messages"
    ></cui-message-container>
    <oui-datagrid id="publicCloudAppsDatagrid" data-rows="$ctrl.apps">
        <oui-datagrid-column
            title=":: 'pci_ai_app_list_name' | translate"
            data-property="name"
            data-type="string"
            data-searchable
            data-filterable
            data-sortable="asc"
        >
            <a
                data-ng-href="{{:: $ctrl.appLink($row) }}"
                data-ng-bind=":: $value"
            ></a>
        </oui-datagrid-column>
        <oui-datagrid-column
            data-title=":: 'pci_ai_app_list_image' | translate"
            data-type="string"
            data-searchable
            data-filterable
            data-sortable
        >
            <div class="d-flex flex-column">
                <span
                    class="text-image-truncated"
                    title="{{$row.spec.image}}"
                    data-ng-bind="$row.spec.image"
                ></span>
                <small
                    data-ng-if="$row.partner"
                    data-translate="pci_ai_app_list_image_provided_by"
                    data-translate-values="{partnerName: $row.partner.name}"
                ></small>
            </div>
        </oui-datagrid-column>
        <oui-datagrid-column
            data-title=":: 'pci_ai_app_list_region' | translate"
            data-property="region"
            data-type="string"
            data-searchable
            data-filterable
            data-sortable
        >
            <span
                data-ng-bind=":: $ctrl.ovhManagerRegionService.getTranslatedMacroRegion($row.region)"
            ></span>
        </oui-datagrid-column>
        <oui-datagrid-column
            data-title=":: 'pci_ai_app_list_resources' | translate"
            data-property="specScore"
            data-type="number"
            data-sortable
            data-filterable
        >
            <div data-ng-if="!$row.gpu" class="d-flex">
                <span
                    class="oui-icon oui-icon-component_concept mr-1"
                    aria-hidden="true"
                ></span>
                <span
                    data-translate="pci_ai_app_list_resources_cpu"
                    data-translate-values="{cpu: $row.cpu, replicas: $row.replicas}"
                ></span>
            </div>
            <div data-ng-if="$row.gpu" class="d-flex">
                <span
                    class="oui-icon oui-icon-hardware-gpu_concept mr-1"
                    aria-hidden="true"
                ></span>
                <span
                    data-translate="pci_ai_app_list_resources_gpu"
                    data-translate-values="{gpu: $row.gpu, replicas: $row.replicas}"
                ></span>
            </div>
        </oui-datagrid-column>
        <oui-datagrid-column
            data-title=":: 'pci_ai_app_list_creation_date' | translate"
            data-property="createdAt"
            data-type="date"
            data-sortable
            data-filterable
        >
            <span data-ng-bind=":: $value | date: 'short'"></span>
        </oui-datagrid-column>
        <oui-datagrid-column
            data-title=":: 'pci_ai_app_list_last_update_date' | translate"
            data-property="updatedAt"
            data-type="date"
            data-sortable
            data-filterable
        >
            <span data-ng-bind=":: $value | date: 'short'"></span>
        </oui-datagrid-column>
        <oui-datagrid-column
            data-title=":: 'pci_ai_app_list_status' | translate"
            data-property="state"
            data-sortable
        >
            <span
                class="oui-badge"
                data-ng-class="{
                    'oui-badge_success': $row.stateInfo.stateGroup.success,
                    'oui-badge_warning': $row.stateInfo.stateGroup.warning,
                    'oui-badge_error': $row.stateInfo.stateGroup.error,
                }"
            >
                <span
                    data-ng-bind="('pci_ai_app_list_status_' + $row.state) | translate"
                ></span>
            </span>
        </oui-datagrid-column>
        <oui-action-menu data-compact data-placement="left-start">
            <oui-action-menu-item data-on-click="$ctrl.goToAppDetails($row)">
                <span data-translate="pci_ai_app_list_details"></span>
            </oui-action-menu-item>
            <oui-action-menu-item data-on-click="$ctrl.goToCreateToken($row)">
                <span data-translate="pci_ai_app_list_generate_token"></span>
            </oui-action-menu-item>
            <oui-action-menu-item
                data-on-click="$ctrl.onStartAppClick($row)"
                data-disabled="!$row.isStopped()"
            >
                <span data-translate="pci_ai_app_list_start_app"></span>
            </oui-action-menu-item>
            <oui-action-menu-item
                data-on-click="$ctrl.onStopAppClick($row)"
                data-disabled="!$row.isStoppable()"
            >
                <span data-translate="pci_ai_app_list_stop_app"></span>
            </oui-action-menu-item>
            <oui-action-menu-item
                data-on-click="$ctrl.onDeleteAppClick($row)"
                data-disabled="!$row.isStopped()"
            >
                <span data-translate="pci_ai_app_list_delete_app"></span>
            </oui-action-menu-item>
        </oui-action-menu>
        <oui-datagrid-topbar>
            <button
                type="button"
                class="oui-button oui-button_secondary oui-button_icon-left"
                data-ng-click="$ctrl.createApp()"
            >
                <span class="oui-icon oui-icon-add" aria-hidden="true"></span>
                <span data-translate="pci_ai_app_list_create_app"></span>
            </button>
        </oui-datagrid-topbar>
    </oui-datagrid>
</div>
