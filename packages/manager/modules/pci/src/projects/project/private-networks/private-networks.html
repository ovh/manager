<div data-ui-view>
    <oui-header
        data-heading="{{:: 'pci_projects_project_network_private' | translate }}"
        class="mb-3"
    >
        <oui-guide-menu
            data-text="{{:: 'pci_project_guides_header' | translate }}"
        >
            <oui-guide-menu-item
                data-ng-repeat="guide in $ctrl.guideUrl.instances track by $index"
                data-href="{{:: guide.url }}"
                data-on-click="$ctrl.trackClick($ctrl.guideTrackingSectionTags.private_network + guide.tracking)"
                data-external
            >
                <span
                    data-translate="{{:: 'pci_project_guides_header_' + guide.key }}"
                ></span>
            </oui-guide-menu-item>
        </oui-guide-menu>
    </oui-header>

    <pci-maintenance-banner
        data-steins="$ctrl.steins"
        data-customer-regions="$ctrl.customerRegions"
        data-product-regions="$ctrl.privateNetworksRegions"
        data-is-list-page="true"
        data-product-name=":: 'pci_projects_project_network_private' | translate"
    ></pci-maintenance-banner>

    <pci-announcement-banner
        data-get-state-name="$ctrl.getStateName()"
        data-on-go-to-region="$ctrl.goToRegion()"
    ></pci-announcement-banner>

    <cui-message-container
        data-messages="$ctrl.messages"
    ></cui-message-container>

    <pci-project-private-networks-empty
        data-ng-if="$ctrl.privateNetworks.length === 0"
    >
        <oui-button
            data-variant="primary"
            data-on-click="$ctrl.createNetwork()"
        >
            <span
                data-translate="pci_projects_project_network_private_create"
            ></span>
        </oui-button>
    </pci-project-private-networks-empty>
    <div class="oui-datagrid-responsive private-network-data-grid">
        <table class="oui-datagrid">
            <thead>
                <tr>
                    <th
                        scope="col"
                        class="oui-datagrid__header oui-datagrid__cell_s"
                    ></th>
                    <th
                        scope="col"
                        class="oui-datagrid__header oui-datagrid__cell_s"
                        data-translate="pci_projects_project_network_private_vlan_id"
                    ></th>
                    <th
                        scope="col"
                        class="oui-datagrid__header"
                        data-translate="pci_projects_project_network_private_name"
                    ></th>
                </tr>
            </thead>
            <tbody>
                <tr
                    class="oui-datagrid__row oui-datagrid__row_expandable"
                    data-ng-repeat-start="$row in $ctrl.privateNetworks track by $row.id"
                    data-ng-click="$ctrl.expandRow($row)"
                >
                    <td class="oui-datagrid__cell">
                        <button
                            class="oui-button oui-button_ghost oui-button_s"
                            type="button"
                        >
                            <span
                                class="oui-icon"
                                data-ng-class="{
                                    'oui-icon-chevron-up': $ctrl.isRowExpanded[$row.id],
                                    'oui-icon-chevron-down': !$ctrl.isRowExpanded[$row.id]
                                }"
                            ></span>
                        </button>
                    </td>
                    <td class="oui-datagrid__cell">
                        <span data-ng-bind="$row.vlanId"></span>
                    </td>
                    <td class="oui-datagrid__cell">
                        <span data-ng-bind="$row.name"></span>
                    </td>
                </tr>
                <tr
                    class="oui-datagrid__cell text-center my-2"
                    data-ng-if="$ctrl.isSubnetsLoading && $ctrl.isRowExpanded[$row.id] && !$row.subnets"
                >
                    <td colspan="4">
                        <oui-spinner data-size="m"></oui-spinner>
                    </td>
                </tr>
                <tr
                    class="oui-datagrid__row text-center my-2"
                    data-ng-if="$ctrl.isRowExpanded[$row.id] && $row.subnets.length === 0"
                >
                    <td
                        colspan="4"
                        class="oui-datagrid__cell oui-datagrid-empty__placeholder"
                        data-translate="pci_projects_project_network_private_no_data"
                    ></td>
                </tr>
                <tr
                    ng-repeat-end
                    data-ng-if="$ctrl.isRowExpanded[$row.id] && $row.subnets.length > 0"
                >
                    <td class="oui-datagrid__cell p-0">
                        <table class="oui-table m-0 border-0">
                            <thead>
                                <tr>
                                    <th class="oui-table__cell"></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr
                                    data-ng-repeat="subnetDetail in $row.subnets track by $index"
                                >
                                    <td class="oui-table__cell"></td>
                                </tr>
                            </tbody>
                        </table>
                    </td>
                    <td class="oui-datagrid__cell p-0">
                        <table class="oui-table m-0 border-0">
                            <thead>
                                <tr>
                                    <th class="oui-table__cell"></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr
                                    data-ng-repeat="subnetDetail in $row.subnets track by $index"
                                >
                                    <td class="oui-table__cell"></td>
                                </tr>
                            </tbody>
                        </table>
                    </td>
                    <td class="oui-datagrid__cell p-0">
                        <table class="oui-table m-0 border-0">
                            <thead>
                                <tr>
                                    <th
                                        scope="col"
                                        class="oui-table__cell"
                                        data-translate="pci_projects_project_network_private_region"
                                    ></th>
                                    <th
                                        scope="col"
                                        class="oui-table__cell"
                                        data-ng-bind="$ctrl.PRIVATE_NETWORK_LIST.CIDR"
                                    ></th>
                                    <th
                                        scope="col"
                                        class="oui-table__cell"
                                        data-translate="pci_projects_project_network_private_gateway"
                                    ></th>
                                    <th
                                        scope="col"
                                        class="oui-table__cell"
                                        data-ng-bind="$ctrl.PRIVATE_NETWORK_LIST.DHCP"
                                    ></th>
                                    <th
                                        scope="col"
                                        class="oui-table__cell"
                                        data-translate="pci_projects_project_network_private_ip_allocation"
                                    ></th>
                                    <th
                                        scope="col"
                                        class="oui-table__cell"
                                    ></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr
                                    class="oui-table__row"
                                    data-ng-repeat="subnetDetail in $row.subnets track by $index"
                                >
                                    <td
                                        class="oui-datagrid__cell"
                                        data-ng-bind="subnetDetail.ipPools[0].region"
                                    ></td>
                                    <td
                                        class="oui-table__cell"
                                        data-ng-bind="subnetDetail.cidr"
                                    ></td>
                                    <td
                                        class="oui-table__cell"
                                        data-ng-bind="subnetDetail.gateway"
                                    ></td>
                                    <td
                                        class="oui-table__cell"
                                        data-ng-bind="subnetDetail.dhcp"
                                    ></td>
                                    <td
                                        class="oui-table__cell"
                                        data-ng-bind="subnetDetail.allocatedIp"
                                    ></td>
                                    <td class="oui-datagrid__cell">
                                        <button
                                            data-ng-if="!subnetDetail.gateway"
                                            class="oui-button oui-button_ghost"
                                            data-ng-click="$ctrl.goToAddPublicGateway($row, subnetDetail)"
                                            data-oui-tooltip="{{:: 'pci_projects_project_network_private_assign_gateway' | translate}}"
                                            data-oui-tooltip-placement="left"
                                        >
                                            <i
                                                class="oui-icon oui-icon-gear"
                                                aria-hidden="true"
                                            ></i>
                                        </button>
                                        <button
                                            class="oui-button oui-button_ghost"
                                            data-ng-click="$ctrl.deleteSubnet($row.id, subnetDetail.id)"
                                            data-oui-tooltip="{{:: 'pci_projects_project_network_private_delete' | translate}}"
                                            data-oui-tooltip-placement="left"
                                        >
                                            <i
                                                class="oui-icon oui-icon-bin"
                                                aria-hidden="true"
                                            ></i>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </td>
                </tr>
                <tr data-ng-repeat-end aria-hidden="true"></tr>
            </tbody>
        </table>
    </div>
    <oui-pagination
        data-current-offset="$ctrl.offset"
        data-page-size="$ctrl.pageSize"
        data-total-items="$ctrl.originalList.length"
        data-on-change="$ctrl.onChange($event)"
    >
    </oui-pagination>
</div>
