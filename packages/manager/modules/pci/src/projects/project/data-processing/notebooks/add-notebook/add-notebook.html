<section>
    <!-- page header -->
    <oui-header
        class="mb-2"
        data-heading="{{:: 'data_processing_add_notebook_title' | translate }}"
    ></oui-header>

    <div class="row">
        <div class="col-lg-9">
            <!-- page content -->
            <p data-translate="data_processing_add_notebook_description"></p>
            <oui-message data-type="info">
                <span
                    data-translate="data_processing_add_notebook_description_warning_ai"
                >
                </span>
                <a
                    class="oui-link oui-link_icon"
                    data-ng-href="{{:: $ctrl.aiNotebookLink()}}"
                >
                    <span
                        data-translate="data_processing_add_notebook_description_warning_ai_link"
                    ></span>
                </a>
            </oui-message>
            <form novalidate>
                <!-- step 1 - select notebook name -->
                <h2
                    id="name"
                    data-translate="data_processing_add_notebook_stepper_name_title"
                ></h2>
                <oui-field
                    data-label="{{:: 'data_processing_add_notebook_spec_config_name' | translate  }}"
                    data-label-popover="{{:: 'data_processing_add_notebook_spec_config_name_help' | translate }}"
                >
                    <input
                        class="oui-input minw-0 mb-0 ml-l-2"
                        type="text"
                        id="notebook-name"
                        name="notebook-name"
                        data-ng-model="$ctrl.state.name"
                        required
                        minlength="3"
                        maxlength="32"
                    />
                </oui-field>
                <!-- step 2 - select notebook type -->
                <h2
                    id="engine"
                    data-translate="data_processing_add_notebook_stepper_notebook_type_title"
                ></h2>
                <pci-project-data-processing-add-notebook-type-selector
                    data-notebook-engines="$ctrl.capabilities"
                    data-on-change-handler="$ctrl.onChangeNotebookTypeHandler"
                >
                </pci-project-data-processing-add-notebook-type-selector>
                <!-- step 2 - select region -->
                <h2
                    id="region"
                    data-translate="data_processing_add_notebook_stepper_region_title"
                ></h2>
                <pci-project-data-processing-add-notebook-region-selector
                    data-regions="$ctrl.regions"
                    data-selected-region="$ctrl.state.region"
                    data-on-change-handler="$ctrl.onChangeRegionHandler"
                >
                </pci-project-data-processing-add-notebook-region-selector>

                <!-- step 3 - configure notebook -->
                <h2
                    id="privacy"
                    data-translate="data_processing_add_notebook_stepper_privacy_title"
                ></h2>
                <pci-project-data-processing-add-notebook-privacy-selector
                    data-selected-privacy="$ctrl.state.privacy"
                    data-on-change-handler="$ctrl.onChangePrivacyHandler"
                >
                </pci-project-data-processing-add-notebook-privacy-selector>
                <!-- step 4 - notebook sizing -->
                <h2
                    id="sizing"
                    data-translate="data_processing_add_notebook_stepper_sizing_title"
                ></h2>
                <pci-project-data-processing-add-notebook-notebook-sizing
                    data-on-change-handler="$ctrl.onChangeSizingHandler"
                    data-available-cluster-template="$ctrl.state.notebookEngine.templates"
                >
                </pci-project-data-processing-add-notebook-notebook-sizing>
                <!-- step 5 - API -->
                <h2
                    id="API"
                    data-translate="data_processing_add_notebook_stepper_api_title"
                ></h2>

                <oui-collapsible
                    heading="{{:: 'data_processing_add_notebook_api_equivalent' | translate }}"
                >
                    <pci-order-command
                        data-order-api-url="$ctrl.orderAPIUrl"
                        data-order-data="$ctrl.orderData"
                        data-help-link="$ctrl.addNotebookGuideUrl"
                        data-auto-height="true"
                        data-user="$ctrl.user"
                    >
                        <p
                            data-translate="data_processing_add_notebook_command_description"
                        ></p>
                        <a
                            class="oui-link_icon"
                            target="_blank"
                            rel="noopener"
                            data-ng-href="{{$ctrl.apiGuideUrl}}"
                        >
                            <span
                                data-translate="data_processing_add_notebook_command_documentation_link"
                            ></span>
                            <span
                                class="oui-icon oui-icon-external-link"
                                aria-hidden="true"
                            ></span>
                        </a>
                    </pci-order-command>
                </oui-collapsible>
            </form>
        </div>
        <div class="col-lg-3">
            <div class="order-summary sticky-top mb-3">
                <oui-tile
                    data-heading="{{:: 'data_processing_add_notebook_spec_heading' | translate }}"
                >
                    <oui-tile-definition>
                        <oui-tile-description>
                            <!-- Nom -->
                            <div class="mt-2">
                                <a
                                    href=""
                                    data-ng-click="$ctrl.scrollTo('name')"
                                    data-translate="data_processing_add_notebook_spec_name"
                                ></a>
                                <span data-ng-bind="$ctrl.state.name"></span>
                            </div>
                            <!-- notebook type -->
                            <div class="d-flex align-items-center mt-2">
                                <div class="mr-2">
                                    <a
                                        href=""
                                        data-ng-click="$ctrl.scrollTo('engine')"
                                        data-translate="data_processing_add_notebook_spec_engine"
                                    ></a>
                                    <span
                                        class="text-capitalize"
                                        data-ng-bind="$ctrl.state.notebookEngine.engine"
                                    ></span>
                                </div>
                            </div>
                            <div class="d-flex flex-column mb-2 pl-2">
                                <div class="d-flex">
                                    <span
                                        class="oui-icon oui-icon-hashtag_concept mr-2"
                                    ></span>
                                    <span
                                        data-translate="data_processing_add_notebook_spec_engine_version"
                                        data-translate-values="{
                                            version: $ctrl.state.notebookEngine.version
                                        }"
                                    ></span>
                                </div>
                            </div>
                            <!-- Region -->
                            <div class="mt-2">
                                <a
                                    href=""
                                    data-ng-click="$ctrl.scrollTo('region')"
                                    data-translate="data_processing_add_notebook_spec_region"
                                ></a>
                                <span
                                    data-ng-bind="$ctrl.ovhManagerRegionService.getTranslatedMacroRegion($ctrl.state.region.name)"
                                ></span>
                            </div>
                            <!-- ConfidentialitÃ© -->
                            <div class="d-flex align-items-center mt-2">
                                <div class="mr-2">
                                    <a
                                        href=""
                                        data-ng-click="$ctrl.scrollTo('privacy')"
                                        data-translate="data_processing_add_notebook_spec_privacy"
                                    ></a>
                                </div>
                            </div>
                            <span
                                class="pl-2"
                                data-translate="{{'data_processing_add_notebook_spec_privacy_' + $ctrl.state.privacy.toLowerCase()}}"
                            ></span>
                            <!-- Sizing -->
                            <div class="d-flex align-items-center mt-2">
                                <div class="mr-2">
                                    <a
                                        href=""
                                        data-ng-click="$ctrl.scrollTo('sizing')"
                                        data-translate="data_processing_add_notebook_spec_sizing"
                                    ></a>
                                </div>
                            </div>
                            <div class="d-flex flex-column pl-2">
                                <div class="d-flex">
                                    <span
                                        class="font-weight-bold"
                                        data-translate="data_processing_add_notebook_spec_sizing_notebook"
                                    ></span>
                                    <span
                                        data-ng-bind="$ctrl.state.notebookSizing.notebook"
                                    ></span>
                                </div>
                            </div>

                            <div class="d-flex flex-column mb-2 pl-2">
                                <div class="d-flex">
                                    <span
                                        class="font-weight-bold"
                                        data-translate="data_processing_add_notebook_spec_sizing_cluster"
                                    ></span>
                                    <span
                                        data-ng-bind="$ctrl.state.notebookSizing.cluster"
                                    ></span>
                                </div>
                            </div>
                        </oui-tile-description>
                    </oui-tile-definition>
                    <oui-tile-definition>
                        <oui-tile-description>
                            <div class="break-word">
                                <a
                                    href=""
                                    data-ng-click="$ctrl.scrollTo('prices')"
                                    data-translate="data_processing_add_notebook_spec_price"
                                ></a>
                                <strong>
                                    <ovh-manager-catalog-price
                                        data-price="0.01"
                                        data-tax="0.01"
                                        data-user="$ctrl.user"
                                        data-perform-rounding="false"
                                        data-maximum-fraction-digits="5"
                                    >
                                    </ovh-manager-catalog-price>
                                    /min</strong
                                >
                            </div>
                        </oui-tile-description>
                    </oui-tile-definition>
                    <oui-button
                        data-variant="primary"
                        block
                        data-on-click="$ctrl.onAddNotebookHandler()"
                        data-disabled="!$ctrl.state.name"
                    >
                        <span
                            data-translate="data_processing_add_notebook_stepper_add_notebook_button"
                        ></span>
                    </oui-button>
                </oui-tile>
            </div>
        </div>
    </div>
</section>
