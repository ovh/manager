<div class="pci-projects-project-training-jobs-submit">
    <h2>
        {{:: 'pci_projects_project_training_jobs_list_submit' | translate }}
    </h2>
    <oui-message type="error" data-ng-if="$ctrl.error">
        <span data-ng-bind="$ctrl.error"></span>
    </oui-message>

    <!--Banner for Object container / usertoken-->
    <oui-message data-type="info" dismissable>
        <span
            data-translate="pci_projects_project_training_jobs_add_banner_object_storage_description"
        ></span>
        <p class="mb-2">
            <a
                rel="noopener"
                data-translate="pci_projects_project_training_jobs_add_banner_object_storage_description_link"
                data-ng-click="$ctrl.createObjectStorage()"
            ></a>
        </p>
        <span
            data-translate="pci_projects_project_training_jobs_add_banner_user_token_description"
        ></span>
        <p class="m-0">
            <a
                rel="noopener"
                data-translate="pci_projects_project_training_jobs_add_banner_user_token_description_link"
                data-ng-click="$ctrl.goToUsersAndTokens()"
            ></a>
        </p>
    </oui-message>

    <oui-stepper data-on-finish="$ctrl.onStepperFinish()">
        <oui-step-form
            data-header="{{:: 'pci_projects_project_training_jobs_submit_select_region' | translate  }}"
            data-editable="!$ctrl.isSubmit"
        >
            <pci-project-regions-list
                data-regions="$ctrl.regions"
                data-selected-region="$ctrl.job.region"
                data-on-change="$ctrl.onChangeRegion(region)"
            >
            </pci-project-regions-list>
        </oui-step-form>

        <oui-step-form
            data-header="{{ :: 'pci_projects_project_training_jobs_submit_select_image' | translate }}"
            data-editable="!$ctrl.isSubmit"
            data-valid="$ctrl.job.image.id"
        >
            <div class="container-fluid px-0">
                <div class="row">
                    <div
                        class="col-md-6 col-xl-4 my-3"
                        data-ng-repeat="preset in $ctrl.presetImages track by preset.id"
                    >
                        <oui-select-picker
                            data-name="{{:: preset.id }}"
                            data-description="{{:: preset.description }}"
                            data-model="$ctrl.job.image"
                            data-picture="{{:: preset.logo }}"
                            data-label="{{:: preset.name }}"
                            data-variant="light"
                            data-on-change="$ctrl.generateName()"
                            data-values="[preset]"
                            data-required
                        >
                            <oui-select-picker-section
                                class="oui-select-picker__section"
                            >
                                <a
                                    target="_blank"
                                    class="oui-button oui-button_ghost"
                                    rel="noopener"
                                    data-ng-href="{{:: preset.link }}"
                                >
                                    <span
                                        data-translate="pci_projects_project_training_jobs_submit_select_image_preset_info"
                                    ></span>
                                    <span
                                        class="oui-icon oui-icon-external-link"
                                        aria-hidden="true"
                                    ></span>
                                </a>
                            </oui-select-picker-section>
                        </oui-select-picker>
                    </div>
                    <div class="col-md-6 col-xl-4 my-3">
                        <oui-select-picker
                            data-name="missing"
                            data-description="{{:: 'pci_projects_project_training_jobs_submit_select_image_preset_request' | translate }}"
                            data-label="{{:: 'pci_projects_project_training_jobs_submit_select_image_preset_missing_framework' | translate }}"
                            data-variant="light"
                            data-values="[preset]"
                            data-required
                            data-model="$ctrl.job.image"
                            data-on-change="$ctrl.generateName()"
                        >
                            <oui-select-picker-section
                                class="oui-select-picker__section"
                            >
                                <a
                                    target="_blank"
                                    class="oui-button oui-button_ghost"
                                    rel="noopener"
                                    data-ng-href="{{ $ctrl.discordUrl }}"
                                >
                                    <span>OVHcloud Discord</span>
                                    <span
                                        class="oui-icon oui-icon-external-link"
                                        aria-hidden="true"
                                    ></span>
                                </a>
                            </oui-select-picker-section>
                        </oui-select-picker>
                    </div>
                </div>
            </div>
            <button
                class="oui-button sizing__advanced-button oui-button_ghost mb-3"
                oui-tooltip="{{:: 'pci_projects_project_training_jobs_submit_select_image_advanced_tips' | translate  }}"
                oui-tooltip-placement="top"
                type="button"
                data-ng-click="$ctrl.onClickAdvancedImage()"
            >
                <span
                    data-translate="pci_projects_project_training_jobs_submit_select_image_advanced"
                ></span>
            </button>
            <oui-field
                data-size="xl"
                data-help-text="{{:: 'pci_projects_project_training_jobs_submit_select_image_tips' | translate  }}"
                data-label="{{:: 'pci_projects_project_training_jobs_submit_select_image_name' | translate }}"
                data-ng-if="$ctrl.showAdvancedImage"
            >
                <input
                    class="oui-input"
                    type="text"
                    id="image"
                    name="image"
                    data-ng-model="$ctrl.job.image.id"
                    data-required
                    data-ng-change="$ctrl.generateName()"
                />
                <button
                    type="button"
                    class="oui-popover-button"
                    data-oui-popover="{{:: 'pci_projects_project_training_jobs_submit_select_image_tips_help' | translate }}"
                ></button>
                <a
                    target="_blank"
                    class="oui-button oui-button_ghost"
                    rel="noopener"
                    data-ng-href="{{ $ctrl.docDockerBuildUrl }}"
                >
                    <span
                        data-translate="pci_projects_project_training_jobs_submit_select_image_custom_doc"
                    ></span>
                    <span
                        class="oui-icon oui-icon-external-link"
                        aria-hidden="true"
                    ></span>
                </a>
            </oui-field>
        </oui-step-form>

        <oui-step-form
            data-header="{{ :: 'pci_projects_project_training_jobs_submit_select_privacy' | translate }}"
            data-editable="!$ctrl.isSubmit"
        >
            <div class="row">
                <!--Settings restricted-->
                <oui-select-picker
                    class="d-inline-block col-md-6 col-xl-3 my-3"
                    data-name="privacyNetworkRestricted"
                    data-label="{{:: 'pci_projects_project_training_jobs_submit_select_privacy_settings_item_restricted' | translate}}"
                    data-model="$ctrl.job.privacy"
                    data-values="[$ctrl.PRIVACY_SETTINGS.RESTRICTED]"
                >
                    <oui-select-picker-section>
                        <span
                            data-translate="pci_projects_project_training_jobs_submit_select_privacy_settings_item_restricted_description"
                        ></span>
                    </oui-select-picker-section>
                </oui-select-picker>

                <!--Settings public-->
                <oui-select-picker
                    class="d-inline-block col-md-6 col-xl-3 my-3"
                    data-name="privacyNetworkPublic"
                    data-label="{{:: 'pci_projects_project_training_jobs_submit_select_privacy_settings_item_public' | translate}}"
                    data-model="$ctrl.job.privacy"
                    data-values="[$ctrl.PRIVACY_SETTINGS.PUBLIC]"
                >
                    <oui-select-picker-section>
                        <span
                            data-translate="pci_projects_project_training_jobs_submit_select_privacy_settings_item_public_description"
                        ></span>
                    </oui-select-picker-section>
                    <oui-select-picker-section class="text-danger">
                        <span class="oui-icon oui-icon-warning"></span>
                        <span
                            data-translate="pci_projects_project_training_jobs_submit_select_privacy_settings_item_public_warning"
                        ></span>
                    </oui-select-picker-section>
                </oui-select-picker>
            </div>
        </oui-step-form>

        <oui-step-form
            data-header="{{:: 'pci_projects_project_training_jobs_submit_select_data' | translate  }}"
            data-editable="!$ctrl.isSubmit"
            valid="$ctrl.validateVolume() || !$ctrl.job.addVolume"
            data-on-submit="$ctrl.submitVolume()"
        >
            <oui-message type="info" dismissable="true">
                <span
                    class="d-block"
                    data-translate="pci_projects_project_training_jobs_submit_select_data_tips_1"
                ></span>
                <span
                    class="d-block"
                    data-translate="pci_projects_project_training_jobs_submit_select_data_tips_2"
                ></span>
            </oui-message>
            <div data-ng-if="!$ctrl.containers.length">
                <div
                    class="text-danger"
                    data-translate="pci_projects_project_training_jobs_submit_select_no_data"
                ></div>
                <button
                    class="oui-button sizing__advanced-button oui-button_ghost mb-3"
                    type="button"
                    ng-click="$ctrl.goToData()"
                >
                    <span
                        data-translate="pci_projects_project_training_jobs_submit_select_no_data_create"
                    ></span>
                </button>
            </div>
            <oui-field
                data-ng-if="$ctrl.containers.length"
                data-size="xl"
                data-label="{{:: 'pci_projects_project_training_jobs_submit_select_data_select' | translate  }}"
            >
                <oui-switch
                    data-model="$ctrl.job.addVolume"
                    name="addVolume"
                    on-change="$ctrl.changeAddVolume(modelValue)"
                >
                </oui-switch>
            </oui-field>
            <div class="oui-field__control" data-ng-if="$ctrl.job.addVolume">
                <div class="oui-inline-adder mb-2">
                    <div
                        class="oui-inline-adder__form"
                        data-ng-class="{ 'oui-inline-adder__form_added': $ctrl.httpHeader[$index].added }"
                        data-ng-repeat="httpHeader in $ctrl.httpHeader track by $index"
                    >
                        <fieldset class="oui-inline-adder__fieldset">
                            <div class="oui-inline-adder__row">
                                <div class="oui-inline-adder__field">
                                    <oui-field
                                        data-label="{{:: 'pci_projects_project_training_jobs_submit_data_container' | translate  }}"
                                    >
                                        <oui-select
                                            name="container"
                                            data-model="$ctrl.httpHeader[$index].model.container"
                                            data-items="$ctrl.filteredContainers"
                                            data-match="description"
                                            data-searchable
                                            data-required="$ctrl.httpHeader[$index].model.container"
                                            data-disabled="$ctrl.httpHeader[$index].added"
                                        >
                                        </oui-select>
                                    </oui-field>
                                </div>
                                <div class="oui-inline-adder__field">
                                    <oui-field
                                        data-label="{{:: 'pci_projects_project_training_jobs_submit_data_prefix' | translate  }}"
                                        data-label-popover="{{:: 'pci_projects_project_training_jobs_submit_data_prefix_help' | translate }}"
                                    >
                                        <input
                                            type="text"
                                            class="oui-input"
                                            placeholder=""
                                            data-ng-init="$ctrl.httpHeader[$index].model.prefix = ''"
                                            name="prefix"
                                            data-ng-model="$ctrl.httpHeader[$index].model.prefix"
                                            data-ng-pattern="/\S*/"
                                            data-ng-model-options="{ debounce: 500 }"
                                            data-ng-required="$ctrl.httpHeader[$index].model.prefix"
                                            data-ng-disabled="$ctrl.httpHeader[$index].added"
                                        />
                                    </oui-field>
                                </div>
                                <div class="oui-inline-adder__field">
                                    <oui-field
                                        data-label="{{:: 'pci_projects_project_training_jobs_submit_data_mount_path' | translate  }}"
                                    >
                                        <input
                                            type="text"
                                            class="oui-input"
                                            placeholder="/workspace/demo"
                                            data-ng-init="$ctrl.httpHeader[$index].model.mountPath = '/workspace/container_' + ($ctrl.httpHeader.length - 1)"
                                            name="mountPath"
                                            data-valid-mount="$ctrl.job.volumes"
                                            data-ng-model="$ctrl.httpHeader[$index].model.mountPath"
                                            data-ng-pattern="/^\/(\S)*/"
                                            data-ng-model-options="{ debounce: 500 }"
                                            data-ng-required="$ctrl.httpHeader[$index].model.mountPath"
                                            data-ng-disabled="$ctrl.httpHeader[$index].added"
                                        />
                                    </oui-field>
                                </div>
                                <div class="oui-inline-adder__field">
                                    <oui-field
                                        data-label="{{:: 'pci_projects_project_training_jobs_submit_data_permission' | translate  }}"
                                        data-label-popover="{{:: 'pci_projects_project_training_jobs_submit_data_permission_help' | translate }}"
                                        size="m"
                                    >
                                        <label class="oui-select">
                                            <select
                                                name="permission"
                                                ng-model="$ctrl.httpHeader[$index].model.permission"
                                                class="oui-select__input"
                                                data-ng-required="$ctrl.httpHeader[$index].model.permission"
                                                data-ng-disabled="$ctrl.httpHeader[$index].added"
                                            >
                                                <option
                                                    data-ng-bind="'pci_projects_project_training_jobs_submit_data_permission_select' | translate"
                                                    selected
                                                ></option>
                                                <option
                                                    ng-repeat="perm in $ctrl.volumesPermissions"
                                                    value="{{perm}}"
                                                    data-ng-bind="::'pci_projects_project_training_jobs_submit_data_permission_'+ perm | translate"
                                                >
                                                </option>
                                            </select>
                                            <span
                                                class="oui-icon oui-icon-chevron-down"
                                                aria-hidden="true"
                                            ></span>
                                        </label>
                                    </oui-field>
                                </div>
                                <div class="oui-inline-adder__field">
                                    <oui-field
                                        data-label="{{:: 'pci_projects_project_training_jobs_submit_data_cache' | translate  }}"
                                        data-label-popover="{{:: 'pci_projects_project_training_jobs_submit_data_cache_help' | translate }}"
                                        size="auto"
                                    >
                                        <oui-checkbox
                                            class="oui-checkbox"
                                            name="cache"
                                            data-ng-init="$ctrl.httpHeader[$index].model.cache=false"
                                            data-model="$ctrl.httpHeader[$index].model.cache"
                                            data-ng-disabled="$ctrl.httpHeader[$index].added"
                                        ></oui-checkbox>
                                    </oui-field>
                                </div>
                            </div>
                        </fieldset>
                        <footer class="oui-inline-adder__footer">
                            <button
                                type="button"
                                class="oui-inline-adder__action oui-button oui-button_primary oui-button_s"
                                data-translate-attr="{title: 'dedicated_server_install_image_config_http_header_add'}"
                                data-ng-click="$ctrl.onHttpHeaderAddBtnClick($index)"
                                data-ng-if="!$ctrl.httpHeader[$index].added"
                                data-ng-disabled="!$ctrl.httpHeader[$index].model.container || !$ctrl.httpHeader[$index].model.mountPath ||!$ctrl.httpHeader[$index].model.permission"
                            >
                                <span
                                    data-translate="pci_projects_project_training_jobs_submit_add_volume"
                                ></span>
                            </button>
                            <button
                                type="button"
                                class="oui-inline-adder__action oui-button oui-button_primary oui-button_s"
                                data-translate-attr="{title: 'dedicated_server_install_image_config_http_header_delete'}"
                                data-ng-click="$ctrl.onHttpHeaderDeleteBtnClick($index)"
                                data-ng-if="$ctrl.httpHeader[$index].added"
                            >
                                <span
                                    class="oui-icon oui-icon-trash"
                                    aria-hidden="true"
                                ></span>
                            </button>
                        </footer>
                    </div>
                    <oui-message
                        type="warning"
                        data-ng-if="!$ctrl.job.validNextStep"
                    >
                        <span
                            data-translate="pci_projects_project_training_jobs_submit_add_volume_warning"
                        ></span>
                    </oui-message>
                </div>
            </div>
        </oui-step-form>

        <oui-step-form
            data-header="{{ :: 'pci_projects_project_training_jobs_submit_select_command' | translate }}"
            data-editable="!$ctrl.isSubmit"
            data-valid="$ctrl.job.command || !$ctrl.job.customCommand"
        >
            <div class="row d-lg-flex">
                <div class="col-md-8">
                    <oui-field
                        data-size="xl"
                        data-label="{{:: 'pci_projects_project_training_jobs_submit_command_default_select' | translate  }}"
                    >
                        <oui-switch
                            data-model="$ctrl.job.customCommand"
                            name="customCommand"
                        >
                        </oui-switch>
                    </oui-field>
                    <oui-field
                        data-size="xl"
                        data-help-text="{{:: 'pci_projects_project_training_jobs_submit_select_command_tips' | translate  }}"
                        data-ng-if="$ctrl.job.customCommand"
                    >
                        <input
                            class="oui-input"
                            type="text"
                            id="command"
                            name="command"
                            data-ng-model="$ctrl.job.command"
                            data-required
                        />
                    </oui-field>
                </div>
                <div class="col-md-4">
                    <oui-tile
                        class="h-100"
                        data-heading="{{:: 'pci_projects_project_training_jobs_submit_select_command_tile_title' | translate  }}"
                        data-ng-if="$ctrl.job.customCommand && $ctrl.splitStringCommandIntoArray().length > 0"
                    >
                        <oui-tile-definition
                            data-term="{{:: 'pci_projects_project_training_jobs_submit_select_command_tile_command' | translate  }}"
                        >
                            <oui-tile-description>
                                <ul>
                                    <li
                                        ng-repeat="cmd in $ctrl.splitStringCommandIntoArray()"
                                        class="api-list-item"
                                    >
                                        {{ cmd }}
                                    </li>
                                </ul>
                            </oui-tile-description>
                        </oui-tile-definition>
                    </oui-tile>
                </div>
            </div>
        </oui-step-form>
        <oui-step-form
            data-header="{{ :: 'pci_projects_project_training_jobs_submit_select_ssh' | translate }}"
            data-editable="!$ctrl.isSubmit"
        >
            <oui-message type="info" dismissable="true">
                <span
                    class="d-block"
                    data-translate="pci_projects_project_training_jobs_submit_select_ssh_tips_1"
                ></span>
            </oui-message>
            <oui-field
                data-size="xl"
                data-label="{{:: 'pci_projects_project_training_jobs_submit_select_ssh_default_select' | translate  }}"
            >
                <oui-switch
                    data-model="$ctrl.enabledSshPublicKey"
                    name="enabledSshPublicKey"
                    on-change="$ctrl.changeEnabledSshPublicKey(modelValue)"
                >
                </oui-switch>
            </oui-field>
            <div
                class="oui-field__control"
                data-ng-if="$ctrl.enabledSshPublicKey"
            >
                <div class="oui-inline-adder mb-2">
                    <div
                        class="oui-inline-adder__form"
                        data-ng-repeat="sshKey in $ctrl.addedSshKeys track by $index"
                    >
                        <fieldset class="oui-inline-adder__fieldset">
                            <legend
                                data-translate="pci_projects_project_training_jobs_submit_select_ssh_legend"
                            ></legend>
                            <div class="oui-inline-adder__row">
                                <div class="oui-inline-adder__field">
                                    <oui-field
                                        data-size="m"
                                        data-label="{{:: 'pci_projects_project_training_jobs_submit_select_ssh_name_tips' | translate  }}"
                                        data-ng-if="$ctrl.allKeyNames.length > 0"
                                    >
                                        <oui-select
                                            name="savedKeyName"
                                            data-model="$ctrl.addedSshKeys[$index].keyName"
                                            data-items="$ctrl.allKeyNames"
                                            on-change="$ctrl.changeSavedSshKey($index)"
                                        >
                                        </oui-select>
                                    </oui-field>
                                    <oui-field
                                        data-label="{{:: 'pci_projects_project_training_jobs_submit_select_ssh_input_tips' | translate  }}"
                                    >
                                        <textarea
                                            type="textarea"
                                            class="oui-input"
                                            placeholder="{{:: $ctrl.JOB_SSH_KEYS_CONSTANTS.PLACEHOLDER }}"
                                            name="sshPublicKey"
                                            rows="{{:: $ctrl.JOB_SSH_KEYS_CONSTANTS.NB_ROWS }}"
                                            data-ng-model="$ctrl.addedSshKeys[$index].model"
                                            data-ng-required
                                            data-ng-disabled="$ctrl.addedSshKeys[$index].disabled"
                                        />
                                    </oui-field>
                                </div>
                            </div>
                        </fieldset>
                        <footer class="oui-inline-adder__footer">
                            <button
                                type="button"
                                class="oui-inline-adder__action oui-button oui-button_primary oui-button_s"
                                data-translate-attr="{title: 'pci_projects_project_training_jobs_submit_select_ssh_delete_message'}"
                                data-ng-click="$ctrl.onSshPublickeysDeleteBtnClick($index)"
                                data-ng-disabled="$ctrl.addedSshKeys.length === 1"
                            >
                                <span
                                    class="oui-icon oui-icon-trash"
                                    aria-hidden="true"
                                ></span>
                            </button>
                        </footer>
                    </div>
                </div>
                <oui-button
                    data-icon-left="oui-icon-plus"
                    data-variant="secondary"
                    data-disabled="!$ctrl.canAddNewSshPublicKey()"
                    data-on-click="$ctrl.addNewSshPublicKey()"
                >
                    <span
                        data-translate="pci_projects_project_training_jobs_submit_select_ssh_add"
                    ></span>
                </oui-button>
                <div class="oui-field__control py-2">
                    <span
                        data-translate="pci_projects_project_training_jobs_submit_select_ssh_quantity"
                        data-translate-values="{ numberOfSshKeys: $ctrl.getAllSshKeys().length, maxSshKeys: $ctrl.JOB_SSH_KEYS_CONSTANTS.MAX}"
                    ></span>
                </div>
            </div>
        </oui-step-form>

        <oui-step-form
            data-header="{{:: 'pci_projects_project_training_jobs_submit_select_config' | translate  }}"
            data-editable="!$ctrl.isSubmit"
        >
            <div class="row d-lg-flex" data-ng-if="$ctrl.flavors.length">
                <div class="col-md-8">
                    <oui-field
                        data-label="{{:: 'pci_projects_project_training_jobs_submit_select_config_name' | translate }}"
                        data-help-text="{{:: 'pci_projects_project_training_jobs_submit_select_config_name_tips' | translate }}"
                        size="xl"
                    >
                        <input
                            class="oui-input"
                            type="text"
                            id="name"
                            name="name"
                            data-ng-model="$ctrl.job.name"
                            required
                            minlength="3"
                            maxlength="64"
                        />
                    </oui-field>
                    <oui-field data-label="Resource type" data-size="auto">
                        <oui-radio-toggle-group
                            model="$ctrl.flavorsTypeSelected"
                            on-change="$ctrl.onResourceTypeChange()"
                        >
                            <oui-radio
                                data-value="type"
                                data-ng-repeat="type in $ctrl.flavorsType track by type"
                            >
                                {{ type | uppercase }}
                            </oui-radio>
                        </oui-radio-toggle-group>
                    </oui-field>
                    <div class="ajust-flavors">
                        <oui-select-picker
                            class="d-inline-block col-md-6 col-xl-3 my-3"
                            data-ng-repeat="flavor in $ctrl.flavors | filter: { type: $ctrl.flavorsTypeSelected } track by flavor.id"
                            data-name="{{:: flavor.id }}"
                            data-model="$ctrl.flavorSelected"
                            data-values="[flavor]"
                            data-variant="light"
                            data-on-change="$ctrl.onFlavorChange(modelValue)"
                            data-required
                        >
                            <oui-select-picker-label>
                                <strong
                                    data-ng-bind=":: flavor.id | uppercase"
                                ></strong>
                            </oui-select-picker-label>
                            <oui-select-picker-description>
                                <div
                                    class="d-flex flex-column"
                                    data-ng-if="flavor.gpuInformation.gpuMemory"
                                >
                                    <span
                                        data-translate="pci_projects_project_training_jobs_submitresources_proposed_description_gpu_description"
                                        data-translate-values="{ nbResources: $ctrl.resourceN, description: flavor.description }"
                                    ></span>
                                    <span
                                        data-translate="pci_projects_project_training_jobs_submitresources_proposed_description_gpu_ram"
                                        data-translate-values="{ nbResources: $ctrl.resourceN, ram: (flavor.gpuInformation.gpuMemory | bytes:0:true:'B') }"
                                    ></span>
                                </div>
                                <div
                                    class="d-flex flex-column"
                                    data-ng-if="!flavor.gpuInformation.gpuMemory"
                                >
                                    <span
                                        data-translate="pci_projects_project_training_jobs_submitresources_proposed_description_cpu"
                                        data-translate-values="{ description: flavor.description }"
                                    ></span>
                                </div>
                            </oui-select-picker-description>
                            <oui-select-picker-section>
                                <div class="d-flex">
                                    <span
                                        ng-if="($ctrl.resourceN * flavor.resourcesPerUnit.cpu) <= 1"
                                        data-translate="pci_projects_project_training_jobs_submitresources_proposed_cpu"
                                        data-translate-values="{ vcores: $ctrl.resourceN * flavor.resourcesPerUnit.cpu }"
                                    ></span>
                                    <span
                                        ng-if="($ctrl.resourceN * flavor.resourcesPerUnit.cpu) > 1"
                                        data-translate="pci_projects_project_training_jobs_submitresources_proposed_cpu_plural"
                                        data-translate-values="{ vcores: $ctrl.resourceN * flavor.resourcesPerUnit.cpu }"
                                    ></span>
                                </div>
                                <div class="d-flex">
                                    <span
                                        data-translate="pci_projects_project_training_jobs_submitresources_proposed_ram"
                                        data-translate-values="{ ram: ($ctrl.resourceN * flavor.resourcesPerUnit.memory | bytes:0:true:'B') }"
                                    ></span>
                                </div>
                                <div>
                                    <span
                                        data-translate="pci_projects_project_training_jobs_submitresources_proposed_storage"
                                        data-translate-values="{ memory: (($ctrl.resourceN * flavor.resourcesPerUnit.ephemeralStorage) | bytes:2:true:'B') }"
                                    ></span>
                                </div>
                                <div>
                                    <span
                                        data-translate="pci_projects_project_training_jobs_submitresources_proposed_public_bandwidth"
                                        data-translate-values="{ bandwidth : (($ctrl.resourceN * flavor.resourcesPerUnit.publicNetwork) | bytes:2:false:'B') }"
                                    ></span>
                                </div>
                                <div
                                    class="d-flex"
                                    data-ng-if="flavor.resourcesPerUnit.privateNetwork"
                                >
                                    <span
                                        data-translate="pci_projects_project_training_jobs_submitresources_proposed_private_bandwidth"
                                        data-translate-values="{ bandwidth : (($ctrl.resourceN * flavor.resourcesPerUnit.privateNetwork) | bytes:2:false:'B') }"
                                    ></span>
                                </div>
                            </oui-select-picker-section>
                            <oui-select-picker-section>
                                <strong
                                    class="d-block"
                                    data-translate="pci_projects_project_training_jobs_submitresources_proposed_resource_price_by_ressource"
                                    data-translate-values="{ price: $ctrl.getFlavorPrice(flavor) }"
                                >
                                </strong>
                                <ovh-manager-catalog-price
                                    data-price="$ctrl.flavorPrice"
                                    data-tax="$ctrl.flavorPriceTax"
                                    data-user="$ctrl.user"
                                    data-perform-rounding="false"
                                    data-maximum-fraction-digits="3"
                                    data-interval="'hour'"
                                >
                                </ovh-manager-catalog-price>
                            </oui-select-picker-section>
                        </oui-select-picker>
                    </div>
                    <div>
                        <oui-field data-size="auto">
                            <oui-numeric
                                data-min="1"
                                data-max="$ctrl.flavorSelected.max"
                                data-model="$ctrl.resourceN"
                                data-on-change="$ctrl.computePrice(modelValue)"
                                name="count"
                            >
                            </oui-numeric>
                        </oui-field>
                    </div>
                </div>
            </div>
        </oui-step-form>
        <oui-step-form
            data-header="{{:: 'pci_projects_project_training_jobs_submit_validation' | translate  }}"
            data-submit-text="{{:: 'pci_projects_project_training_jobs_list_submit_button' | translate  }}"
            data-editable="!$ctrl.isSubmit"
            data-loading="$ctrl.isSubmit || $ctrl.loading"
            data-on-focus="$ctrl.cliCommand()"
        >
            <div>
                <div class="row d-lg-flex mb-3">
                    <div class="col-md-8">
                        <oui-tile
                            class="h-100"
                            data-heading="{{:: 'pci_projects_project_training_jobs_submit_validation_job_summary' | translate  }}"
                        >
                            <oui-tile-definition
                                data-term="{{:: 'pci_projects_project_training_jobs_image' | translate  }}"
                            >
                                <oui-tile-description
                                    data-ng-bind="$ctrl.job.image.id"
                                ></oui-tile-description>
                            </oui-tile-definition>
                            <oui-tile-definition
                                data-term="{{:: 'pci_projects_project_training_jobs_region' | translate  }}"
                            >
                                <oui-tile-description
                                    data-ng-bind="$ctrl.job.region.name"
                                ></oui-tile-description>
                            </oui-tile-definition>
                            <oui-tile-definition
                                data-term="{{:: 'pci_projects_project_training_jobs_submit_select_privacy' | translate  }}"
                            >
                                <oui-tile-description
                                    data-ng-bind="'pci_projects_project_training_jobs_submit_select_privacy_settings_item_' + $ctrl.job.privacy | translate"
                                ></oui-tile-description>
                            </oui-tile-definition>
                        </oui-tile>
                    </div>
                    <div class="col-md-4">
                        <oui-tile
                            class="h-100"
                            data-heading="{{:: 'pci_projects_project_training_jobs_info_title_3' | translate  }}"
                        >
                            <oui-tile-definition
                                data-term="{{:: 'pci_projects_project_training_jobs_submit_select_config_resources_tips_gpu' | translate  }}"
                            >
                                <oui-tile-description
                                    data-ng-if="$ctrl.flavorSelected.gpuInformation"
                                >
                                    <span data-ng-bind="$ctrl.resourceN"></span>
                                    <span>x</span>
                                    <span
                                        class="oui-badge oui-badge_info"
                                        data-ng-bind="$ctrl.flavorSelected.gpuInformation.gpuModel"
                                    ></span>
                                </oui-tile-description>
                            </oui-tile-definition>
                            <oui-tile-definition
                                data-term="{{:: 'pci_projects_project_training_jobs_submit_select_config_resources_tips_cpu' | translate  }}"
                            >
                                <oui-tile-description>
                                    <span
                                        data-ng-bind="$ctrl.resourceN * $ctrl.flavorSelected.resourcesPerUnit.cpu"
                                    ></span>
                                </oui-tile-description>
                            </oui-tile-definition>
                            <oui-tile-definition
                                data-term="{{:: 'pci_projects_project_training_jobs_submit_select_config_resources_tips_ram' | translate  }}"
                            >
                                <oui-tile-description>
                                    <span>
                                        {{$ctrl.resourceN *
                                        $ctrl.flavorSelected.resourcesPerUnit.memory
                                        | bytes:2:true:'B' }}
                                    </span>
                                </oui-tile-description>
                            </oui-tile-definition>
                            <oui-tile-definition
                                data-term="{{:: 'pci_projects_project_training_jobs_submit_select_config_resources_tips_per_hour' | translate  }}"
                            >
                                <oui-tile-description>
                                    <ovh-manager-catalog-price
                                        data-price="$ctrl.flavorPrice"
                                        data-tax="$ctrl.flavorPriceTax"
                                        data-user="$ctrl.user"
                                        data-perform-rounding="false"
                                        data-maximum-fraction-digits="3"
                                    >
                                    </ovh-manager-catalog-price>
                                </oui-tile-description>
                            </oui-tile-definition>
                        </oui-tile>
                    </div>
                </div>
                <div class="row d-lg-flex mb-3">
                    <div class="col-md-12">
                        <oui-tile
                            class="h-100"
                            data-heading="{{:: 'pci_projects_project_training_jobs_submit_validation_equivalent_command' | translate  }}"
                        >
                            <span
                                data-translate="pci_projects_project_training_jobs_submit_ovhai_info"
                            ></span>
                            <pre>{{ $ctrl.cliCommandValue }}</pre>
                            <span
                                data-translate="pci_projects_project_training_jobs_submit_ovhai_help"
                            ></span>
                            <pre>ovhai job run --help</pre>
                        </oui-tile>
                    </div>
                </div>
            </div>
        </oui-step-form>
    </oui-stepper>
</div>
