<oui-back-button
    data-previous-page="{{:: 'pci_projects_project_users_title' | translate }}"
    data-on-click="$ctrl.goBack()"
></oui-back-button>

<h2 data-translate="pci_databases_users_add"></h2>
<oui-field
    data-label="{{:: 'pci_databases_users_add_username_label' | translate }}"
    data-size="xl"
>
    <input
        class="oui-input"
        type="text"
        id="username"
        name="username"
        ng-model="$ctrl.model.username"
        maxlength="255"
        required
    />
</oui-field>

<div ng-if="!$ctrl.isRolesReadOnly">
    <h2 data-translate="pci_databases_users_add_roles"></h2>
    <oui-dual-list
        data-source="$ctrl.availableRoles"
        data-target="$ctrl.model.selectedRoles"
        disabled="$ctrl.isFeatureActivated('getRoles')"
        property="name"
    >
        <oui-dual-list-source
            data-heading="{{:: 'pci_databases_users_add_roles_available' | translate }}"
            data-searchable="true"
        >
        </oui-dual-list-source>
        <oui-dual-list-target
            data-heading="{{:: 'pci_databases_users_add_roles_selected' | translate }}"
            data-searchable="true"
        >
        </oui-dual-list-target>
    </oui-dual-list>
</div>

<div ng-if="$ctrl.database.engine === 'redis'">
    <tags-input
        name="keys"
        data-model="$ctrl.model.keys"
        data-label="{{:: 'pci_databases_users_add_keys_label' | translate }}"
        data-button-label="{{:: 'pci_databases_users_add_keys_button_label' | translate }}"
    ></tags-input>
    <tags-input
        name="categories"
        data-model="$ctrl.model.categories"
        data-label="{{:: 'pci_databases_users_add_categories_label' | translate }}"
        data-button-label="{{:: 'pci_databases_users_add_categories_button_label' | translate }}"
    ></tags-input>
    <tags-input
        name="commands"
        data-model="$ctrl.model.commands"
        data-label="{{:: 'pci_databases_users_add_commands_label' | translate }}"
        data-button-label="{{:: 'pci_databases_users_add_commands_button_label' | translate }}"
    ></tags-input>
    <tags-input
        name="channels"
        data-model="$ctrl.model.channels"
        data-label="{{:: 'pci_databases_users_add_channels_label' | translate }}"
        data-button-label="{{:: 'pci_databases_users_add_channels_button_label' | translate }}"
    ></tags-input>
</div>
<div class="text-right">
    <oui-button size="l">
        <span
            data-translate="pci_databases_users_add_cancel"
            ng-click="$ctrl.goBack()"
        ></span>
    </oui-button>
    <oui-button
        size="l"
        variant="primary"
        icon-right="oui-icon-arrow-right"
        disabled="$ctrl.processing || !$ctrl.model.username"
        ng-click="$ctrl.addUser()"
    >
        <span data-translate="pci_databases_users_add_create"></span>
    </oui-button>
</div>
