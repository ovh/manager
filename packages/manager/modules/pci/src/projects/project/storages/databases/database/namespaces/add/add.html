<oui-back-button
    data-previous-page="{{:: 'pci_databases_namespaces_add_back' | translate }}"
    data-on-click="$ctrl.trackAndGoBack()"
></oui-back-button>

<h2 data-translate="pci_databases_namespaces_add_title"></h2>

<form name="$ctrl.addNamespaceForm" ng-submit="$ctrl.add()">
    <div class="row">
        <div class="col">
            <oui-field>
                <label class="oui-field__label">
                    <span
                        data-translate="{{:: 'pci_databases_namespaces_add_name_label' | translate }}"
                    ></span>
                    <small class="text-danger">*</small>
                </label>
                <input
                    class="oui-input"
                    type="text"
                    id="namespace_name"
                    name="namespace_name"
                    ng-model="$ctrl.model.name"
                    ng-pattern="$ctrl.FORM_RULES.name.pattern"
                    ng-maxlength="$ctrl.FORM_RULES.name.max"
                    ng-minlength="$ctrl.FORM_RULES.name.min"
                    placeholder="{{:: 'pci_databases_namespaces_add_name_placeholder' | translate }}"
                    required
                />
            </oui-field>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <oui-field>
                <label class="oui-field__label">
                    <span
                        data-translate="{{:: 'pci_databases_namespaces_add_type_label' | translate }}"
                    ></span>
                    <small class="text-danger">*</small>
                </label>
                <button
                    type="button"
                    class="oui-popover-button"
                    aria-label="Help"
                    oui-popover="{{:: 'pci_databases_namespaces_add_type_popover' | translate }}"
                    oui-popover-id="popover-name"
                    oui-popover-placement="right"
                ></button>
                <oui-radio-group model="$ctrl.model.type">
                    <oui-radio
                        inline
                        value="$ctrl.NAMESPACES_TYPES.AGGREGATED"
                        disabled
                    >
                        <span>Aggregated</span>
                    </oui-radio>
                    <oui-radio
                        inline
                        value="$ctrl.NAMESPACES_TYPES.UNAGGREGATED"
                        disabled
                    >
                        <span>Unaggregated</span>
                    </oui-radio>
                </oui-radio-group>
            </oui-field>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <oui-field>
                <label class="oui-field__label">
                    <span
                        data-translate="{{:: 'pci_databases_namespaces_add_retention_period_duration_label' | translate }}"
                    ></span>
                    <small class="text-danger">*</small>
                </label>
                <button
                    type="button"
                    class="oui-popover-button"
                    aria-label="Help"
                    oui-popover="{{:: 'pci_databases_namespaces_add_retention_period_duration_popover' | translate }}"
                    oui-popover-id="popover-name"
                    oui-popover-placement="right"
                ></button>
                <input
                    class="oui-input"
                    type="text"
                    id="retention_period"
                    name="retention_period"
                    placeholder="{{:: 'pci_databases_namespaces_add_retention_period_duration_placeholder' | translate }}"
                    ng-model="$ctrl.model.retention.periodDuration"
                    ng-model-options="{allowInvalid: true}"
                    ng-pattern="$ctrl.FORM_RULES.periodDuration.pattern"
                    ng-maxlength="$ctrl.FORM_RULES.periodDuration.max"
                    required
                />
            </oui-field>
        </div>
        <div class="col">
            <oui-field>
                <label class="oui-field__label">
                    <span
                        data-translate="{{:: 'pci_databases_namespaces_add_resolution_label' | translate }}"
                    ></span>
                    <small class="text-danger">*</small>
                </label>
                <button
                    type="button"
                    class="oui-popover-button"
                    aria-label="Help"
                    oui-popover="{{:: 'pci_databases_namespaces_add_resolution_popover' | translate }}"
                    oui-popover-id="popover-name"
                    oui-popover-placement="right"
                ></button>
                <input
                    class="oui-input"
                    type="text"
                    id="resolution_period"
                    name="resolution_period"
                    placeholder="{{:: 'pci_databases_namespaces_add_resolution_placeholder' | translate }}"
                    ng-model="$ctrl.model.resolution"
                    ng-model-options="{allowInvalid: true}"
                    ng-pattern="$ctrl.FORM_RULES.resolution.pattern"
                    ng-maxlength="$ctrl.FORM_RULES.resolution.max"
                    required
                />
            </oui-field>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <oui-collapsible
                class="overflow-collapsible"
                heading="{{:: 'pci_databases_namespaces_add_advanced_label' | translate }}"
            >
                <div class="row">
                    <div class="col">
                        <oui-field
                            data-label="writesToCommitLogEnabled"
                            label-popover="{{:: 'pci_databases_namespaces_add_writes_commitlog_popover' | translate }}"
                        >
                            <label class="oui-select">
                                <select
                                    class="oui-select__input"
                                    name="writesCommitlog"
                                    id="writesCommitlog"
                                    data-ng-model="$ctrl.model.writesToCommitLogEnabled"
                                >
                                    <option ng-value="{{null}}">Default</option>
                                    <option ng-value="{{true}}">True</option>
                                    <option ng-value="{{false}}">False</option>
                                </select>
                                <span
                                    class="oui-icon oui-icon-chevron-down"
                                    aria-hidden="true"
                                ></span>
                            </label>
                        </oui-field>
                    </div>
                    <div class="col">
                        <oui-field
                            data-label="snapshotEnabled"
                            label-popover="{{:: 'pci_databases_namespaces_add_snaphot_enabled_popover' | translate }}"
                        >
                            <label class="oui-select">
                                <select
                                    class="oui-select__input"
                                    name="snapshotEnabled"
                                    id="snapshotEnabled"
                                    data-ng-model="$ctrl.model.snapshotEnabled"
                                >
                                    <option ng-value="{{null}}">Default</option>
                                    <option ng-value="{{true}}">True</option>
                                    <option ng-value="{{false}}">False</option>
                                </select>
                                <span
                                    class="oui-icon oui-icon-chevron-down"
                                    aria-hidden="true"
                                ></span>
                            </label>
                        </oui-field>
                    </div>
                    <div class="col">
                        <oui-field
                            data-label="retention.blockSizeDuration"
                            label-popover="{{:: 'pci_databases_namespaces_add_blocksize_duration_popover' | translate }}"
                        >
                            <input
                                ng-model="$ctrl.model.retention.blockSizeDuration"
                                class="oui-input"
                                type="text"
                                id="blocksize_duration"
                                name="blocksize_duration"
                                placeholder="{{:: 'pci_databases_namespaces_add_blocksize_duration_placeholder' | translate }}"
                                ng-model-options="{allowInvalid: true}"
                                ng-pattern="$ctrl.FORM_RULES.blockSizeDuration.pattern"
                                ng-maxlength="$ctrl.FORM_RULES.blockSizeDuration.max"
                            />
                        </oui-field>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <oui-field
                            data-label="retention.bufferPastDuration"
                            label-popover="{{:: 'pci_databases_namespaces_add_buffer_past_duration_popover' | translate }}"
                        >
                            <input
                                ng-model="$ctrl.model.retention.bufferPastDuration"
                                class="oui-input"
                                type="text"
                                id="buffer_past_duration"
                                name="buffer_past_duration"
                                placeholder="{{:: 'pci_databases_namespaces_add_buffer_past_duration_placeholder' | translate }}"
                                ng-model-options="{allowInvalid: true}"
                                ng-pattern="$ctrl.FORM_RULES.bufferPastDuration.pattern"
                                ng-maxlength="$ctrl.FORM_RULES.bufferPastDuration.max"
                            />
                        </oui-field>
                    </div>
                    <div class="col">
                        <oui-field
                            data-label="retention.bufferFutureDuration"
                            label-popover="{{:: 'pci_databases_namespaces_add_buffer_future_duration_popover' | translate }}"
                        >
                            <input
                                ng-model="$ctrl.model.retention.bufferFutureDuration"
                                class="oui-input"
                                type="text"
                                id="buffer_future_duration"
                                name="buffer_future_duration"
                                placeholder="{{:: 'pci_databases_namespaces_add_buffer_future_duration_placeholder' | translate }}"
                                ng-model-options="{allowInvalid: true}"
                                ng-pattern="$ctrl.FORM_RULES.bufferFutureDuration.pattern"
                                ng-maxlength="$ctrl.FORM_RULES.bufferFutureDuration.max"
                            />
                        </oui-field>
                    </div>
                    <div class="col">
                        <oui-field
                            data-label="retention.blockDataExpirationDuration"
                            label-popover="{{:: 'pci_databases_namespaces_add_block_data_expiry_duration_popover' | translate }}"
                        >
                            <input
                                ng-model="$ctrl.model.retention.blockDataExpirationDuration"
                                class="oui-input"
                                type="text"
                                id="block_data_expiry_duration"
                                name="block_data_expiry_duration"
                                placeholder="{{:: 'pci_databases_namespaces_add_block_data_expiry_duration_placeholder' | translate }}"
                                ng-model-options="{allowInvalid: true}"
                                ng-pattern="$ctrl.FORM_RULES.blockDataExpirationDuration.pattern"
                                ng-maxlength="$ctrl.FORM_RULES.blockDataExpirationDuration.max"
                            />
                        </oui-field>
                    </div>
                </div>
            </oui-collapsible>
            <p>
                <small class="text-danger">*</small>
                <small
                    data-translate="pci_databases_namespaces_add_required_fields"
                ></small>
            </p>
            <div class="text-right">
                <oui-button
                    type="submit"
                    size="l"
                    variant="primary"
                    disabled="$ctrl.addNamespaceForm.$invalid || $ctrl.processing"
                >
                    <span
                        data-translate="pci_databases_namespaces_add_button_label"
                    ></span>
                </oui-button>
            </div>
        </div>
    </div>
</form>
