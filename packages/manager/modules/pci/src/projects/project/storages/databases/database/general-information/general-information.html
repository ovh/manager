<div data-ui-view>
    <div class="mt-4">
        <cui-message-container
            data-messages="$ctrl.messages"
        ></cui-message-container>
    </div>
    <oui-message
        data-ng-if="$ctrl.isFeatureActivated('usersTab') && $ctrl.newDatabases[$ctrl.database.id]"
        data-type="info"
        data-dismissable
    >
        <span
            data-translate="pci_databases_general_information_generate_password"
        ></span>
    </oui-message>

    <pci-project-databases-warning
        data-ng-if="$ctrl.showPaymentWarning([$ctrl.database])"
    ></pci-project-databases-warning>

    <oui-message
        data-ng-if="$ctrl.getWarningMessage()"
        data-type="warning"
        data-dismissable
    >
        <span data-translate="{{$ctrl.getWarningMessage().message}}"></span>
        <button
            class="oui-link"
            type="button"
            data-ng-if="$ctrl.getWarningMessage().userLink"
            data-ng-click="$ctrl.manageUsers()"
            data-ng-disabled="!$ctrl.database.isActive()"
            data-translate="{{$ctrl.getWarningMessage().linkMessage}}"
        ></button>
    </oui-message>

    <div class="row py-4">
        <div class="col-md">
            <oui-tile
                data-heading="{{:: 'pci_databases_general_information_info_title' | translate }}"
                class="mb-3"
            >
                <oui-tile-definition
                    data-term="{{:: 'pci_databases_general_information_name' | translate }}"
                >
                    <oui-tile-description>
                        <span data-ng-bind="$ctrl.database.description"></span>
                        <button
                            class="oui-button oui-button_ghost"
                            data-ng-click="$ctrl.goToEditName()"
                            data-ng-disabled="!$ctrl.database.isActive()"
                        >
                            <span
                                class="oui-icon oui-icon-pen"
                                aria-hidden="true"
                            ></span>
                        </button>
                    </oui-tile-description>
                </oui-tile-definition>
                <oui-tile-definition
                    data-term="{{:: 'pci_databases_general_information_cluster_id' | translate }}"
                    data-description="{{:: $ctrl.database.id }}"
                >
                </oui-tile-definition>
                <oui-tile-definition
                    data-term="{{:: 'pci_databases_general_information_status_label' | translate }}"
                >
                    <oui-tile-description>
                        <span
                            class="oui-badge"
                            data-ng-class="{
                                'oui-badge_success': ($ctrl.database.statusGroup === 'READY'),
                                'oui-badge_warning': ($ctrl.database.statusGroup === 'PENDING'),
                                'oui-badge_error': ($ctrl.database.statusGroup === 'ERROR'),
                            }"
                        >
                            <span
                                data-ng-bind="('pci_database_common_status_' + $ctrl.database.status) | translate"
                            ></span>
                        </span>
                    </oui-tile-description>
                </oui-tile-definition>
                <oui-tile-definition
                    data-term="{{:: 'pci_databases_general_information_service_label' | translate }}"
                >
                    <oui-tile-description>
                        <p
                            class="mb-1"
                            data-ng-bind=":: $ctrl.database.getEngineLabel()"
                        ></p>
                        <p
                            class="mb-0"
                            data-ng-bind="$ctrl.database.version"
                        ></p>
                        <button
                            class="oui-tile__button oui-button oui-button_ghost oui-button_block"
                            data-ng-if="$ctrl.database.version !== $ctrl.latestVersion"
                            data-ng-click="$ctrl.upgradeVersion()"
                            data-ng-disabled="!$ctrl.database.isActive() || $ctrl.database.isOldMongoPlan"
                        >
                            <span
                                data-translate="pci_databases_general_information_upgrade_version"
                            ></span>
                            <span
                                class="oui-icon oui-icon-arrow-right ml-1"
                                aria-hidden="true"
                            ></span>
                        </button>
                    </oui-tile-description>
                </oui-tile-definition>
                <oui-tile-definition
                    data-term="{{:: 'pci_databases_general_information_plan_label' | translate }}"
                >
                    <oui-tile-description>
                        <p
                            class="mb-0"
                            data-ng-bind="$ctrl.capitalize($ctrl.database.plan)"
                        ></p>
                        <button
                            class="oui-tile__button oui-button oui-button_ghost oui-button_block"
                            data-ng-if="$ctrl.database.plan !== $ctrl.latestPlan"
                            data-ng-click="$ctrl.upgradePlan()"
                            data-ng-disabled="!$ctrl.database.isActive()"
                        >
                            <span
                                data-translate="pci_databases_general_information_upgrade_plan"
                            ></span>
                            <span
                                class="oui-icon oui-icon-arrow-right ml-1"
                                aria-hidden="true"
                            ></span>
                        </button>
                    </oui-tile-description>
                </oui-tile-definition>
                <oui-tile-definition
                    data-term="{{:: 'pci_databases_general_information_nodes_label' | translate }}"
                >
                    <oui-tile-description>
                        <div>
                            <span
                                data-ng-repeat="node in $ctrl.database.nodes track by node.id"
                            >
                                <p
                                    data-ng-if="$ctrl.database.nodes.length > $ctrl.nodesPerRow && $index % $ctrl.nodesPerRow === 0"
                                ></p>
                                <database-node data-node="node">
                                </database-node>
                            </span>
                        </div>
                    </oui-tile-description>

                    <oui-action-menu
                        data-compact
                        data-placement="end"
                        ng-if="$ctrl.database.nodes.length < $ctrl.getCurrentPlan().maxNodes
                        || $ctrl.database.nodes.length > $ctrl.getCurrentPlan().minNodes"
                    >
                        <oui-action-menu-item
                            data-on-click="$ctrl.addNode()"
                            data-ng-if="$ctrl.database.nodes.length < $ctrl.getCurrentPlan().maxNodes"
                            data-disabled="!$ctrl.database.isActive() || $ctrl.database.isOldMongoPlan"
                        >
                            <span
                                data-translate="pci_databases_general_information_add_nodes"
                            ></span>
                        </oui-action-menu-item>
                        <oui-action-menu-item
                            data-on-click="$ctrl.deleteNode()"
                            data-ng-if="$ctrl.database.nodes.length > $ctrl.getCurrentPlan().minNodes"
                            data-disabled="!$ctrl.database.isActive() || $ctrl.database.isOldMongoPlan"
                        >
                            <span
                                data-translate="pci_databases_general_information_delete_nodes"
                            ></span>
                        </oui-action-menu-item>
                    </oui-action-menu>
                </oui-tile-definition>
                <oui-tile-definition
                    data-term="{{:: 'pci_databases_general_information_node_type_label' | translate }}"
                >
                    <oui-tile-description>
                        <oui-tile-description>
                            <span
                                data-ng-if="$ctrl.getCurrentFlavor().core > 0"
                                data-translate="pci_databases_general_information_node_type_cpu"
                                data-translate-values="{
                                coreNumber: $ctrl.getCurrentFlavor().core
                            }"
                            ></span>
                            <span
                                data-ng-if="$ctrl.getCurrentFlavor().core > 0 && $ctrl.getCurrentFlavor().memory > 0"
                                >/</span
                            >
                            <span
                                data-ng-if="$ctrl.getCurrentFlavor().memory > 0"
                                data-translate="pci_databases_general_information_node_type_memory"
                                data-translate-values="{
                                    memorySize: ($ctrl.getCurrentFlavor().memory | bytes:2:false:'GB')
                                }"
                            ></span>
                            <span
                                data-ng-if="($ctrl.getCurrentFlavor().core > 0 || $ctrl.getCurrentFlavor().memory > 0) && $ctrl.getCurrentFlavor().hasStorage"
                                >/</span
                            >
                            <span
                                data-ng-if="$ctrl.getCurrentFlavor().hasStorage && !$ctrl.getCurrentFlavor().isStorageRange"
                                data-translate="pci_databases_general_information_node_type_storage"
                                data-translate-values="{
                                    storage: ($ctrl.getCurrentFlavor().minDiskSize | bytes:2:false:'GB')
                                }"
                            ></span>
                            <span
                                data-ng-if="$ctrl.getCurrentFlavor().hasStorage && $ctrl.getCurrentFlavor().isStorageRange"
                                data-translate="pci_databases_general_information_node_type_storage_range"
                                data-translate-values="{
                                    minStorage: ($ctrl.getCurrentFlavor().minDiskSize | bytes:2:false:'GB'),
                                    maxStorage: ($ctrl.getCurrentFlavor().maxDiskSize | bytes:2:false:'GB'),
                                }"
                            ></span>
                            <button
                                class="oui-tile__button oui-button oui-button_ghost oui-button_block"
                                data-ng-if="$ctrl.database.flavor !== $ctrl.highestFlavor"
                                data-ng-click="$ctrl.upgradeNode()"
                                data-ng-disabled="!$ctrl.database.isActive() || $ctrl.database.isOldMongoPlan"
                            >
                                <span
                                    data-translate="pci_databases_general_information_upgrade_node"
                                ></span>
                                <span
                                    class="oui-icon oui-icon-arrow-right ml-1"
                                    aria-hidden="true"
                                ></span>
                            </button>
                        </oui-tile-description>
                    </oui-tile-description>
                </oui-tile-definition>
                <oui-tile-definition
                    data-term="{{:: 'pci_databases_general_information_storage_label' | translate }}"
                    data-ng-if="$ctrl.database.storage.size.value > 0"
                >
                    <oui-tile-description>
                        <span
                            class="mb-1"
                            data-ng-bind="($ctrl.database.storage.size.value | bytes:2:false:$ctrl.database.storage.size.unit)"
                        ></span>
                        <span
                            data-ng-if="$ctrl.getCurrentFlavor().isStorageRange && $ctrl.database.storage.size.value > $ctrl.getCurrentFlavor().minDiskSize"
                            data-translate="pci_databases_general_information_storage_range_included"
                            data-translate-values="{ includedStorage: ($ctrl.getCurrentFlavor().minDiskSize | bytes:2:false:'GB')}"
                        ></span>
                        <p
                            class="mb-0"
                            data-ng-if="$ctrl.database.disk.type"
                            data-ng-bind="('pci_databases_general_information_storage_type_' + $ctrl.database.disk.type) | translate"
                        ></p>
                        <button
                            class="oui-tile__button oui-button oui-button_ghost oui-button_block"
                            data-ng-if="$ctrl.database.disk.type !== $ctrl.DISK_TYPE.LOCAL_SSD && $ctrl.getCurrentFlavor().isStorageRange"
                            data-ng-click="$ctrl.upgradeStorage()"
                            data-ng-disabled="!$ctrl.database.isActive() || $ctrl.database.isOldMongoPlan"
                        >
                            <span
                                data-translate="pci_databases_general_information_storage_upgrade_link"
                            ></span>
                            <span
                                class="oui-icon oui-icon-arrow-right ml-1"
                                aria-hidden="true"
                            ></span>
                        </button>
                    </oui-tile-description>
                </oui-tile-definition>
                <oui-tile-definition
                    data-term="{{:: 'pci_databases_general_information_region_label' | translate }}"
                >
                    <oui-tile-description>
                        <p
                            class="mb-0"
                            data-ng-bind=":: $ctrl.ovhManagerRegionService.getTranslatedMacroRegion($ctrl.database.region)"
                        ></p>
                    </oui-tile-description>
                </oui-tile-definition>
            </oui-tile>
        </div>
        <div class="col-md" data-ng-if="$ctrl.database.endpoints.length > 0">
            <oui-tile
                data-heading="{{:: 'pci_databases_general_information_connection_information' | translate }}"
                class="mb-3"
            >
                <oui-tile-definition
                    data-term="{{:: 'pci_databases_general_information_endpoint_label' | translate }}"
                    data-ng-if="$ctrl.database.endpoints.length > 1"
                >
                    <oui-tile-description>
                        <oui-select
                            match="component"
                            model="$ctrl.endpoint"
                            items="$ctrl.database.endpoints"
                            on-change="$ctrl.trackEndpointChange(modelValue)"
                        >
                        </oui-select>
                    </oui-tile-description>
                </oui-tile-definition>
                <oui-tile-definition
                    data-term="{{:: 'pci_databases_general_information_service_URI_label' | translate }}"
                    data-ng-if="$ctrl.endpoint.uri"
                >
                    <oui-tile-description>
                        <oui-tile-description>
                            <oui-clipboard
                                model="$ctrl.endpoint.uri"
                            ></oui-clipboard>
                            <span
                                class="word-break"
                                data-ng-if="$ctrl.privateNetwork"
                                data-translate="pci_databases_general_information_uri_network_info"
                            ></span>
                        </oui-tile-description>
                    </oui-tile-description>
                </oui-tile-definition>
                <oui-tile-definition
                    data-term="{{:: 'pci_databases_general_information_database_host' | translate }}"
                    data-ng-if="$ctrl.endpoint.domain"
                >
                    <oui-tile-description>
                        <span data-ng-bind="$ctrl.endpoint.domain"></span>
                    </oui-tile-description>
                </oui-tile-definition>
                <oui-tile-definition
                    data-term="{{:: 'pci_databases_general_information_database_port' | translate }}"
                    data-ng-if="$ctrl.endpoint.port"
                >
                    <oui-tile-description>
                        <span data-ng-bind="$ctrl.endpoint.port"></span>
                    </oui-tile-description>
                </oui-tile-definition>
                <oui-tile-definition
                    data-term="{{:: 'pci_databases_general_information_scheme_label' | translate }}"
                    data-ng-if="$ctrl.endpoint.scheme"
                >
                    <oui-tile-description>
                        <span data-ng-bind="$ctrl.endpoint.scheme"></span>
                    </oui-tile-description>
                </oui-tile-definition>
                <oui-tile-definition
                    data-term="{{:: 'pci_databases_general_information_path_label' | translate }}"
                    data-ng-if="$ctrl.endpoint.path"
                >
                    <oui-tile-description>
                        <span data-ng-bind="$ctrl.endpoint.path"></span>
                    </oui-tile-description>
                </oui-tile-definition>
                <oui-tile-definition
                    data-term="{{:: 'pci_databases_general_information_ssl_mode' | translate }}"
                    data-description="{{:: $ctrl.endpoint.sslMode }}"
                    data-ng-if="$ctrl.endpoint.sslMode"
                >
                    <oui-tile-description>
                        <span
                            data-translate="{{$ctrl.getSSLKeyTranslation()}}"
                        ></span>
                    </oui-tile-description>
                </oui-tile-definition>
                <oui-tile-definition
                    data-term="{{:: 'pci_databases_general_information_user_label' | translate }}"
                    data-ng-if="$ctrl.isFeatureActivated('usersTab')"
                >
                    <oui-tile-description>
                        <span
                            class="oui-badge"
                            data-ng-class="{
                                'oui-badge_success': ($ctrl.users.length >= 1),
                                'oui-badge_warning': ($ctrl.users.length < 1),
                            }"
                        >
                            <span
                                data-ng-pluralize
                                data-count="$ctrl.users.length"
                                data-when="{
                                    '0': ('pci_databases_general_information_users_no_users' | translate),
                                    '1': ('pci_databases_general_information_user' | translate),
                                    'other': ('pci_databases_general_information_users' | translate:{ userNumber: $ctrl.users.length }),
                                }"
                            ></span>
                        </span>
                        <button
                            class="oui-tile__button oui-button oui-button_ghost oui-button_block"
                            data-ng-click="$ctrl.manageUsers()"
                            data-ng-disabled="!$ctrl.database.isActive()"
                        >
                            <span
                                data-translate="pci_databases_general_information_manage_users"
                            ></span>
                            <span
                                class="oui-icon oui-icon-arrow-right ml-1"
                                aria-hidden="true"
                            ></span>
                        </button>
                    </oui-tile-description>
                </oui-tile-definition>
                <oui-tile-definition
                    data-term="{{:: 'pci_databases_general_information_user_label' | translate }}"
                    data-ng-if="$ctrl.isFeatureActivated('resetAdminUserFromDashboard')"
                >
                    <oui-tile-description>
                        <span data-ng-bind="$ctrl.users[0].username"></span>
                        <button
                            type="button"
                            class="oui-tile__button oui-button oui-button_ghost oui-button_block"
                            data-ng-click="$ctrl.resetPassword()"
                            data-ng-disabled="!$ctrl.database.isActive()"
                        >
                            <span
                                data-translate="pci_databases_general_information_reset_password"
                            ></span>
                            <span
                                class="oui-icon oui-icon-arrow-right ml-1"
                                aria-hidden="true"
                            ></span>
                        </button>
                    </oui-tile-description>
                </oui-tile-definition>
                <oui-tile-definition
                    data-term="{{:: 'pci_databases_general_information_certificate_label' | translate }}"
                    data-ng-if="$ctrl.isFeatureActivated('certificate')"
                >
                    <oui-tile-description>
                        <oui-clipboard
                            data-model="$ctrl.database.certificate.ca"
                            data-id="certificata-ca"
                            data-name="certificata-ca"
                        ></oui-clipboard>
                    </oui-tile-description>
                    <oui-action-menu data-compact data-placement="end">
                        <oui-action-menu-item
                            data-on-click="$ctrl.downloadCertificate()"
                        >
                            <span
                                data-translate="pci_databases_general_information_certificate_download"
                            ></span>
                        </oui-action-menu-item>
                    </oui-action-menu>
                </oui-tile-definition>
                <oui-tile-definition
                    data-term="{{:: 'pci_databases_general_information_kafka_rest_api_label' | translate }}"
                    data-ng-if="$ctrl.isFeatureActivated('restApi')"
                >
                    <oui-tile-description>
                        <p
                            data-ng-click="$ctrl.trackKarapace($event)"
                            data-translate="pci_databases_general_information_kafka_rest_api_content"
                            data-translate-values="{
                                projectLink: '<a href=&quot' + $ctrl.KARAPACE_URL + '&quot rel=&quotnoopener noreferrer&quot target=&quot_blank&quot>Karapace</a>'
                            }"
                        ></p>
                        <div class="mb-3">
                            <oui-switch
                                class="d-inline-block"
                                name="rest-api-switch"
                                model="$ctrl.enableRestApi"
                                on-change="$ctrl.onRestApiStatusChange(modelValue)"
                                data-disabled="$ctrl.loading.restApi || !$ctrl.database.isActive()"
                            >
                            </oui-switch>
                            <span
                                class="d-inline-block mx-2"
                                data-ng-bind="($ctrl.enableRestApi ? 'pci_databases_general_information_kafka_rest_api_enable' : 'pci_databases_general_information_kafka_rest_api_disable') | translate"
                            >
                            </span>
                        </div>
                        <oui-field
                            data-ng-if="$ctrl.enableRestApi && $ctrl.restApiServiceUri"
                        >
                            <label
                                data-translate="pci_databases_general_information_kafka_rest_service_uri_label"
                            ></label>
                            <oui-clipboard
                                data-model="$ctrl.restApiServiceUri"
                                data-id="rest-api-service-uri"
                                data-name="rest-api-service-uri"
                                data-ng-click="$ctrl.onRestApiServiceUriCopy($event)"
                            ></oui-clipboard>
                        </oui-field>
                    </oui-tile-description>
                </oui-tile-definition>
                <oui-tile-definition
                    data-term="{{:: 'pci_databases_general_information_kafka_schema_registry_label' | translate }}"
                    data-ng-if="$ctrl.isFeatureActivated('schemaRegistry')"
                >
                    <oui-tile-description>
                        <p
                            data-ng-click="$ctrl.trackKarapace($event)"
                            data-translate="pci_databases_general_information_kafka_schema_registry_content"
                            data-translate-values="{
                                projectLink: '<a href=&quot' + $ctrl.KARAPACE_URL + '&quot rel=&quotnoopener noreferrer&quot target=&quot_blank&quot>Karapace</a>'
                            }"
                        ></p>
                        <div class="mb-3">
                            <oui-switch
                                class="d-inline-block"
                                name="schema-registry-switch"
                                data-model="$ctrl.enableSchemaRegistry"
                                data-on-change="$ctrl.onSchemaRegistryStatusChange(modelValue)"
                                data-disabled="$ctrl.loading.schemaRegistry || !$ctrl.database.isActive()"
                            >
                            </oui-switch>
                            <span
                                class="d-inline-block mx-2"
                                data-ng-bind="($ctrl.enableSchemaRegistry ? 'pci_databases_general_information_kafka_schema_registry_enable' : 'pci_databases_general_information_kafka_schema_registry_disable') | translate"
                            >
                            </span>
                        </div>
                        <oui-field
                            data-ng-if="$ctrl.enableSchemaRegistry && $ctrl.schemaRegistryServiceUri"
                        >
                            <label
                                data-translate="pci_databases_general_information_kafka_schema_registry_service_uri_label"
                            ></label>
                            <oui-clipboard
                                data-model="$ctrl.schemaRegistryServiceUri"
                                data-id="schema-registry-service-uri"
                                data-name="schema-registry-service-uri"
                                data-ng-click="$ctrl.onSchemaRegistryServiceUriCopy($event)"
                            ></oui-clipboard>
                        </oui-field>
                    </oui-tile-description>
                </oui-tile-definition>
            </oui-tile>
        </div>
        <div class="col-md">
            <dashboard-integration
                data-disabled="!$ctrl.database.isActive()"
                data-ng-if="$ctrl.isFeatureActivated('serviceIntegrationTab')"
                data-integrations="$ctrl.serviceIntegration"
                data-on-manage-button-click="$ctrl.manageIntegrations()"
            ></dashboard-integration>
            <oui-tile
                class="mb-3"
                data-heading="{{:: 'pci_databases_general_information_configuration_title' | translate }}"
            >
                <oui-tile-definition
                    data-term="{{:: 'pci_databases_general_information_maintenance_time_label' | translate }}"
                >
                    <oui-tile-description>
                        <pci-databases-calendar-edit
                            data-model="$ctrl.maintenanceTime"
                            data-init-value="$ctrl.database.maintenanceTime"
                            data-callback="$ctrl.updateMaintenanceTime()"
                            data-callback-success="$ctrl.handleMaintenanceTimeSuccess()"
                            data-callback-error="$ctrl.showMaintenanceError()"
                            data-disabled="!$ctrl.database.isActive()"
                        ></pci-databases-calendar-edit>
                        <button
                            class="oui-tile__button oui-button oui-button_ghost oui-button_block"
                            type="button"
                            data-ng-click="$ctrl.goToMaintenances()"
                            data-ng-if="$ctrl.maintenances.length > 0"
                            data-ng-disabled="!$ctrl.database.isActive()"
                        >
                            <span
                                data-translate="pci_databases_general_information_manage_maintenances"
                            ></span>
                            <span
                                class="oui-icon oui-icon-arrow-right ml-1"
                                aria-hidden="true"
                            ></span>
                        </button>
                    </oui-tile-description>
                </oui-tile-definition>
                <oui-tile-definition
                    data-ng-if="$ctrl.isFeatureActivated('backupTab') && !$ctrl.PLANS_WITHOUT_BACKUP.includes($ctrl.database.plan)"
                    data-term="{{:: 'pci_databases_general_information_backup_time_label' | translate }}"
                >
                    <oui-tile-description>
                        <pci-databases-calendar-edit
                            data-model="$ctrl.backupTime"
                            data-init-value="$ctrl.database.backupTime"
                            data-callback="$ctrl.updateBackupTime()"
                            data-callback-success="$ctrl.handleBackupTimeSuccess()"
                            data-callback-error="$ctrl.showBackupError()"
                            data-disabled="!$ctrl.database.isActive()"
                            data-readonly="!$ctrl.isFeatureActivated('editBackupTime')"
                        ></pci-databases-calendar-edit>
                        <button
                            class="oui-tile__button oui-button oui-button_ghost oui-button_block"
                            type="button"
                            data-ng-click="$ctrl.goToBackups()"
                            data-ng-disabled="!$ctrl.database.isActive()"
                        >
                            <span
                                data-translate="pci_databases_general_information_manage_backups"
                            ></span>
                            <span
                                class="oui-icon oui-icon-arrow-right ml-1"
                                aria-hidden="true"
                            ></span>
                        </button>
                        <button
                            class="oui-tile__button oui-button oui-button_ghost oui-button_block"
                            type="button"
                            data-ng-disabled="!$ctrl.database.isActive() || !$ctrl.isForkButtonEnabled"
                            data-ng-click="$ctrl.goToFork()"
                        >
                            <span
                                data-translate="pci_databases_general_information_fork"
                            ></span>
                            <span
                                class="oui-icon oui-icon-arrow-right ml-1"
                                aria-hidden="true"
                            ></span>
                        </button>
                    </oui-tile-description>
                </oui-tile-definition>
                <oui-tile-definition
                    data-term="{{:: 'pci_databases_general_information_private_network_label' | translate }}"
                >
                    <oui-tile-description>
                        <span
                            data-ng-if="!$ctrl.privateNetwork"
                            data-translate="pci_databases_general_information_public_network_link"
                        ></span>
                        <div data-ng-if="$ctrl.privateNetwork">
                            <a
                                data-ng-if="$ctrl.vRack"
                                class="mb-0"
                                data-ng-href="{{:: $ctrl.vRackLink}}"
                                data-ng-click="$ctrl.trackManageVRack()"
                                target="_top"
                            >
                                <span
                                    data-translate="pci_databases_general_information_private_network_link"
                                    data-translate-values="{
                                        vRackId: $ctrl.vRack.id
                                    }"
                                ></span>
                                <span
                                    class="oui-icon oui-icon-arrow-right ml-1"
                                    aria-hidden="true"
                                ></span>
                            </a>
                            <span
                                data-ng-if="!$ctrl.vRack"
                                data-translate="pci_databases_general_information_private_network_none"
                            ></span>
                        </div>
                    </oui-tile-description>
                </oui-tile-definition>
                <oui-tile-definition
                    data-term="{{:: 'pci_databases_general_information_allowed_ips_label' | translate }}"
                    data-ng-if="$ctrl.isFeatureActivated('allowedIpsTab')"
                >
                    <oui-tile-description>
                        <span
                            class="oui-badge oui-badge_warning"
                            data-ng-if="$ctrl.allowedIps.length === 0"
                            data-translate="pci_databases_general_information_allowed_ips_none"
                        ></span>

                        <p
                            data-ng-if="$ctrl.allowedIps.length !== 0 && $index < $ctrl.maxAllowedIpsToShow"
                            data-ng-repeat="allowedIp in $ctrl.allowedIps track by allowedIp.ip"
                        >
                            <span
                                class="oui-badge oui-badge_success"
                                data-ng-bind="allowedIp.ip"
                            ></span>
                            <span
                                data-ng-if="$ctrl.allowedIps.length > $ctrl.maxAllowedIpsToShow && $index === ($ctrl.maxAllowedIpsToShow-1)"
                                >...</span
                            >
                        </p>
                        <button
                            class="oui-tile__button oui-button oui-button_ghost oui-button_block"
                            type="button"
                            data-ng-click="$ctrl.manageAllowedIps()"
                            data-ng-disabled="!$ctrl.database.isActive()"
                        >
                            <span
                                data-translate="pci_databases_general_information_manage_ips"
                            ></span>
                            <span
                                class="oui-icon oui-icon-arrow-right ml-1"
                                aria-hidden="true"
                            ></span>
                        </button>
                    </oui-tile-description>
                </oui-tile-definition>
            </oui-tile>
            <oui-tile
                data-heading="{{:: 'pci_databases_general_information_subscription_title' | translate }}"
            >
                <oui-tile-definition
                    data-term="{{:: 'pci_databases_general_information_manage_billing_label' | translate }}"
                >
                    <oui-tile-description>
                        <a
                            class="oui-tile__button oui-button oui-button_ghost oui-button_block"
                            rel="noopener"
                            data-ng-href="{{:: $ctrl.billingLink }}"
                            target="_top"
                        >
                            <span
                                data-translate="pci_databases_general_information_display_billing"
                            ></span>
                            <span
                                class="oui-icon oui-icon-arrow-right ml-1"
                                aria-hidden="true"
                            ></span>
                        </a>
                    </oui-tile-description>
                </oui-tile-definition>
                <oui-tile-definition
                    data-term="{{:: 'pci_databases_general_information_creation_date' | translate }}"
                >
                    <oui-tile-description>
                        <span
                            data-ng-bind=":: $ctrl.database.createdAt | date"
                        ></span>
                    </oui-tile-description>
                    <oui-action-menu data-compact data-placement="end">
                        <oui-action-menu-item
                            data-on-click="$ctrl.deleteDatabase()"
                            data-disabled="!$ctrl.database.isActive()"
                        >
                            <span
                                data-translate="pci_database_common_delete_database"
                            ></span>
                        </oui-action-menu-item>
                    </oui-action-menu>
                </oui-tile-definition>
            </oui-tile>
        </div>
    </div>
</div>

<div class="oui-box oui-box_light">
    <p class="mt-4" data-translate="pci_database_footer_part_1"></p>
</div>
