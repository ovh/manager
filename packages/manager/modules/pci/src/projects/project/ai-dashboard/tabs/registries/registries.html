<div class="mt-3">
    <cui-message-container
        data-messages="$ctrl.messages"
    ></cui-message-container>
    <h3 class="mb-3" data-translate="pci_ai_dashboard_registries_title"></h3>
    <p data-translate="pci_ai_dashboard_registries_description"></p>
    <h4
        class="mb-3"
        data-translate="pci_ai_dashboard_private_docker_registries_title"
    ></h4>
    <p
        data-translate="pci_ai_dashboard_private_docker_registries_description_1"
    ></p>
    <p
        data-translate="pci_ai_dashboard_private_docker_registries_description_2"
    ></p>
    <oui-button
        class="mb-4"
        data-variant="secondary"
        data-on-click="$ctrl.goToPrivateRegistry()"
    >
        <span
            data-translate="pci_ai_dashboard_managed_private_registries_button"
        ></span>
    </oui-button>
    <p
        class="mb-3"
        data-translate="pci_ai_dashboard_private_docker_registries_description_3"
    ></p>
    <oui-datagrid
        id="publicCloudTrainingRegistrysDatagrid"
        data-rows="$ctrl.registryList"
    >
        <oui-datagrid-column
            data-title=":: 'pci_pai_dashboard_private_docker_registries_id' | translate"
            data-property="id"
            data-type="string"
            data-searchable
            data-filterable
            data-sortable
        >
            <a data-ng-href="{{:: $ctrl.jobInfoLink($value) }}" target="_top">
                <span data-ng-bind="::$value"></span>
            </a>
        </oui-datagrid-column>
        <oui-datagrid-column
            data-title=":: 'pci_ai_dashboard_private_docker_registries_region' | translate"
            data-property="region"
            data-type="string"
            data-searchable
            data-filterable
            data-sortable
        >
        </oui-datagrid-column>
        <oui-datagrid-column
            data-title=":: 'pci_ai_dashboard_private_docker_registries_url' | translate"
            data-property="url"
            data-type="string"
            data-searchable
            data-filterable
            data-sortable
        >
        </oui-datagrid-column>
        <oui-datagrid-column
            data-title=":: 'pci_ai_dashboard_private_docker_registries_username' | translate"
            data-property="username"
            data-type="string"
            data-searchable
            data-filterable
            data-sortable
        >
        </oui-datagrid-column>
        <oui-datagrid-column
            data-title=":: 'pci_ai_dashboard_private_docker_registries_creator' | translate"
            data-property="user"
            data-type="string"
            data-searchable
            data-filterable
            data-sortable
        >
        </oui-datagrid-column>
        <oui-datagrid-column
            data-title=":: 'pci_ai_dashboard_private_docker_registries_created' | translate"
            data-property="createdAt"
            data-type="date"
            data-searchable
            data-filterable
            data-sortable
        >
            <span data-ng-bind="$value | date:'medium'"></span>
        </oui-datagrid-column>

        <oui-action-menu data-align="end" data-compact>
            <oui-action-menu-item data-on-click="$ctrl.deleteRegistry($row.id)">
                <span
                    data-translate="pci_ai_dashboard_private_docker_registries_delete"
                ></span>
            </oui-action-menu-item>
        </oui-action-menu>
        <oui-datagrid-topbar>
            <button
                data-ng-click="$ctrl.goToRegistryAdd()"
                data-title="{{:: 'pci_ai_dashboard_private_docker_registries_list_submit' | translate }}"
                class="oui-button oui-button_secondary oui-button_icon-left"
            >
                <span
                    class="oui-icon oui-icon-add pr-1"
                    aria-hidden="true"
                ></span>
                <span
                    data-translate="pci_ai_dashboard_private_docker_registries_list_add"
                ></span>
            </button>
            <button
                class="float-right oui-button oui-button_secondary oui-button_icon-only oui-button_s"
                data-title="{{:: 'pci_ai_dashboard_private_docker_registries_data_refresh' | translate }}"
                data-ng-click="$ctrl.refreshState()"
            >
                <span
                    class="oui-icon oui-icon-refresh"
                    aria-hidden="true"
                ></span>
            </button>
        </oui-datagrid-topbar>
    </oui-datagrid>
    <h4
        class="mb-2"
        data-translate="pci_ai_dashboard_shared_registries_title"
    ></h4>
    <oui-message type="warning">
        {{:: 'pci_ai_dashboard_sared_registries_description'| translate }}
    </oui-message>
    <div class="mb-1">
        <span
            data-translate="pci_ai_dashboard_shared_registry_select_region"
        ></span>
        <label class="oui-select oui-select_inline" for="region">
            <select
                class="oui-select__input"
                data-ng-model="$ctrl.currentRegion"
                id="region"
                data-ng-change="$ctrl.onRegionChange()"
            >
                <option ng-repeat="region in $ctrl.regions" ng-value="region"
                    >{{region.id}}</option
                >
            </select>
            <span
                class="oui-icon oui-icon-chevron-down"
                aria-hidden="true"
            ></span>
        </label>

        <dl class="oui-description">
            <dt>
                Docker Registry
                <button
                    type="button"
                    class="oui-popover-button"
                    oui-popover="{{:: 'pci_ai_dashboard_shared_registry_help' | translate }}"
                    oui-popover-placement="right"
                ></button>
            </dt>
            <dd>{{ $ctrl.currentRegion.registryUrl }}</dd>
            <dt
                data-translate="pci_ai_dashboard_shared_registry_public_cloud_project"
            ></dt>
            <dd>{{ $ctrl.projectId }}</dd>
        </dl>

        <p
            data-translate="pci_ai_dashboard_shared_registry_section_1_message_1"
        ></p>
        <div class="row d-lg-flex">
            <div class="col-md-7">
                <pre><code>docker login {{ $ctrl.currentRegion.registryUrl }}/{{$ctrl.projectId }}</code></pre>
            </div>
        </div>
        <p class="mb-0">
            <span
                data-translate="pci_ai_dashboard_shared_registry_section_1_message_2"
            ></span>
            <a
                data-ng-href="{{:: $ctrl.userLink }}"
                target="_top"
                class="align-baseline"
            >
                <span
                    data-translate="pci_ai_dashboard_shared_registry_section_1_message_3"
                ></span>
            </a>
            <span
                data-translate="pci_ai_dashboard_shared_registry_section_1_message_4"
            ></span>
        </p>
        <p
            data-translate="pci_ai_dashboard_shared_registry_section_1_message_5"
        ></p>
        <div class="row d-lg-flex">
            <div class="col-md-7">
                <pre><code>docker tag &lt;image&gt;{{ $ctrl.currentRegion.registryUrl }}/{{$ctrl.projectId }}/&lt;image&gt;<br/>docker push {{ $ctrl.currentRegion.registryUrl }}/{{$ctrl.projectId }}/&lt;image&gt;</code></pre>
                <p
                    data-translate="pci_ai_dashboard_shared_registry_section_1_message_6"
                ></p>
            </div>
        </div>
    </div>
</div>
