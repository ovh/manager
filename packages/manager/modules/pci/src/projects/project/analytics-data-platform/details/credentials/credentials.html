<div>
    <p
        data-translate="analytics_data_platform_service_credentials_description"
    ></p>
    <form
        class="mb-4"
        novalidate
        name="$ctrl.form"
        data-ng-submit="$ctrl.generatePasswords()"
    >
        <oui-field
            data-label="{{ ::'analytics_data_platform_common_master_password' | translate }}"
            data-help-text="{{ ::'analytics_data_platform_service_credentials_master_password_help' | translate }}"
            data-size="xl"
        >
            <oui-password
                data-id="masterPassword"
                data-name="masterPassword"
                data-model="$ctrl.credentialsInfo.masterPassword"
                data-minlength="5"
                data-required
            >
            </oui-password>
        </oui-field>
        <oui-form-actions
            data-submit-text="{{ ::'analytics_data_platform_service_credentials_generate_passwords' | translate }}"
        ></oui-form-actions>
    </form>
    <div
        class="text-center"
        data-ng-if="$ctrl.credentialsInfo.generatingPasswords"
    >
        <oui-spinner data-size="m"></oui-spinner>
    </div>
    <div data-ng-if="!$ctrl.credentialsInfo.generatingPasswords">
        <h5
            data-translate="analytics_data_platform_service_credentials_users_table_title"
        ></h5>
        <oui-datagrid data-rows="$ctrl.users">
            <oui-datagrid-column
                data-title="::'analytics_data_platform_service_credentials_service' | translate"
                data-sortable="asc"
                data-type="string"
            >
                <span
                    data-translate="analytics_data_platform_service_credentials_all_services"
                ></span>
            </oui-datagrid-column>
            <oui-datagrid-column
                data-title="::'analytics_data_platform_service_credentials_username' | translate"
                data-type="string"
            >
                <span
                    data-translate="analytics_data_platform_service_credentials_admin"
                ></span>
            </oui-datagrid-column>
            <oui-datagrid-column
                data-title="::'analytics_data_platform_common_password' | translate"
                data-property="password"
                data-type="string"
            >
            </oui-datagrid-column>
        </oui-datagrid>
        <h5
            data-translate="analytics_data_platform_service_credentials_service_cred_title"
        ></h5>
        <oui-datagrid data-rows="$ctrl.credentials">
            <oui-datagrid-column
                data-title="::'analytics_data_platform_service_credentials_service' | translate"
                data-property="service"
                data-sortable="asc"
                data-type="string"
            >
            </oui-datagrid-column>
            <oui-datagrid-column
                data-title="::'analytics_data_platform_service_credentials_login' | translate"
                data-property="login"
                data-type="string"
            >
            </oui-datagrid-column>
            <oui-datagrid-column
                data-title="::'analytics_data_platform_common_password' | translate"
                data-property="password"
                data-type="string"
            >
            </oui-datagrid-column>
        </oui-datagrid>
    </div>
</div>
