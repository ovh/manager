<div data-ng-if="$ctrl.displayNotebookSshKeys">
    <oui-message type="info" dismissable="true">
        <span
            class="d-block"
            data-translate="pci_projects_project_training_notebook_add_select_ssh_tips_1"
        ></span>
    </oui-message>
    <oui-field
        data-size="xl"
        data-label="{{:: 'pci_projects_project_training_notebook_add_select_ssh_default_select' | translate  }}"
    >
        <oui-switch
            data-model="$ctrl.enabledSshPublicKey"
            name="enabledSshPublicKey"
            on-change="$ctrl.changeEnabledSshPublicKey(modelValue)"
        >
        </oui-switch>
    </oui-field>
    <div class="oui-field__control" data-ng-if="$ctrl.enabledSshPublicKey">
        <div class="oui-inline-adder mb-2">
            <div
                class="oui-inline-adder__form"
                data-ng-repeat="sshKey in $ctrl.addedSshKeys track by $index"
            >
                <fieldset class="oui-inline-adder__fieldset">
                    <legend
                        data-translate="pci_projects_project_training_notebook_add_select_ssh_legend"
                    ></legend>
                    <div class="oui-inline-adder__row">
                        <div class="oui-inline-adder__field">
                            <oui-field
                                data-size="m"
                                data-label="{{:: 'pci_projects_project_training_notebook_add_select_ssh_name_tips' | translate  }}"
                                data-ng-if="$ctrl.allKeyNames.length > 0"
                            >
                                <oui-select
                                    name="savedKeyName"
                                    data-model="$ctrl.addedSshKeys[$index].keyName"
                                    data-items="$ctrl.allKeyNames"
                                    on-change="$ctrl.changeSavedSshKey($index)"
                                >
                                </oui-select>
                            </oui-field>
                            <oui-field
                                data-label="{{:: 'pci_projects_project_training_notebook_add_select_ssh_input_tips' | translate  }}"
                            >
                                <textarea
                                    type="textarea"
                                    class="oui-input"
                                    placeholder="{{:: $ctrl.NOTEBOOK_SSH_KEYS_CONSTANTS.PLACEHOLDER }}"
                                    name="sshPublicKey"
                                    rows="{{:: $ctrl.NOTEBOOK_SSH_KEYS_CONSTANTS.NB_ROWS }}"
                                    data-ng-model="$ctrl.addedSshKeys[$index].model"
                                    data-ng-required
                                    data-ng-disabled="$ctrl.addedSshKeys[$index].disabled"
                                    data-ng-change="$ctrl.textareaChanged()"
                                />
                            </oui-field>
                        </div>
                    </div>
                </fieldset>
                <footer class="oui-inline-adder__footer">
                    <button
                        type="button"
                        class="oui-inline-adder__action oui-button oui-button_primary oui-button_s"
                        data-translate-attr="{title: 'pci_projects_project_training_notebook_add_select_ssh_delete_message'}"
                        data-ng-click="$ctrl.onSshPublickeysDeleteBtnClick($index)"
                        data-ng-disabled="$ctrl.addedSshKeys.length === 1"
                    >
                        <span
                            class="oui-icon oui-icon-trash"
                            aria-hidden="true"
                        ></span>
                    </button>
                </footer>
            </div>
        </div>
        <oui-button
            data-icon-left="oui-icon-plus"
            data-variant="secondary"
            data-disabled="!$ctrl.canAddNewSshPublicKey()"
            data-on-click="$ctrl.addNewSshPublicKey()"
        >
            <span
                data-translate="pci_projects_project_training_notebook_add_select_ssh_add"
            ></span>
        </oui-button>
        <div class="oui-field__control py-2">
            <span
                data-translate="pci_projects_project_training_notebook_add_select_ssh_quantity"
                data-translate-values="{ numberOfSshKeys: $ctrl.getAllSshKeys().length, maxSshKeys: $ctrl.NOTEBOOK_SSH_KEYS_CONSTANTS.MAX}"
            ></span>
        </div>
    </div>
</div>
