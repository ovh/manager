<div data-ui-view>
    <oui-header
        data-heading="{{:: 'pci_projects_project_streams_title' | translate }}"
        class="mb-3"
    ></oui-header>

    <cui-message-container
        data-messages="$ctrl.messages"
    ></cui-message-container>

    <oui-datagrid
        data-rows="$ctrl.streams"
        data-row-loader="$ctrl.getStreamDetails($row)"
    >
        <oui-datagrid-column
            title=":: 'pci_projects_project_streams_name_label' | translate"
            data-property="name"
            data-type="string"
            data-searchable
            data-filterable
            data-sortable="asc"
        >
            <a
                data-ng-href="{{:: $ctrl.streamLink($row) }}"
                data-ng-bind="$value"
            ></a>
        </oui-datagrid-column>

        <oui-datagrid-column
            data-title=":: 'pci_projects_project_streams_kind_label' | translate"
            data-property="kind"
            data-type="options"
            data-type-options="$ctrl.kindOptions"
            data-sortable
            data-filterable
        >
            <span
                data-ng-bind=":: 'pci_projects_project_streams_kind_' + $row.kind | translate"
            ></span>
        </oui-datagrid-column>

        <oui-datagrid-column
            data-title=":: 'pci_projects_project_streams_usage_label' | translate"
            data-property="stats.usage"
            data-type="number"
            data-sortable
            data-filterable
        >
            <span data-ng-bind="{{:: $row.stats.usage.toFixed(2) }}"></span>
        </oui-datagrid-column>

        <oui-datagrid-column
            data-title=":: 'pci_projects_project_streams_status_label' | translate"
            data-property="status"
            data-type="options"
            data-type-options="$ctrl.statusOptions"
            data-filterable
        >
            <span
                class="oui-badge"
                data-ng-class="{
                    'oui-badge_success': $row.isRunning(),
                    'oui-badge_warning': $row.isInstalling(),
                    'oui-badge_error': $row.isInError(),
                }"
            >
                <span
                    data-ng-bind=":: 'pci_projects_project_streams_status_' + $row.status | translate"
                ></span>
            </span>
        </oui-datagrid-column>

        <oui-action-menu data-compact data-placement="left-start">
            <oui-action-menu-item data-on-click="$ctrl.viewStream($row)"
                ><span
                    data-translate="pci_projects_project_streams_view_label"
                ></span>
            </oui-action-menu-item>
            <oui-action-menu-item data-on-click="$ctrl.deleteStream($row)"
                ><span
                    data-translate="pci_projects_project_streams_delete_label"
                ></span>
            </oui-action-menu-item>
        </oui-action-menu>

        <oui-datagrid-topbar>
            <a
                data-ng-href="{{ $ctrl.addStreamLink }}"
                class="oui-button oui-button_secondary oui-button_icon-left"
            >
                <span
                    class="oui-icon oui-icon-add pr-1"
                    aria-hidden="true"
                ></span>
                <span
                    data-translate="pci_projects_project_streams_add_label"
                ></span>
            </a>
        </oui-datagrid-topbar>
    </oui-datagrid>
</div>
