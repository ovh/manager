<ng-form class="kubernetes-proxy-form" name="$ctrl.proxyForm">
    <h5
        class="d-flex align-items-center"
        data-ng-if="$ctrl.collapsible"
        data-ng-class="{ 'oui-field__label': $ctrl.dense }"
        data-ng-click="!$ctrl.frozen && $ctrl.toggleForm()"
    >
        <span data-translate="kubernetes_proxy_form"></span>
        <span
            class="kubernetes-proxy-form-toggler oui-icon ml-2"
            aria-hidden="true"
            data-ng-class="{
                'oui-icon-chevron-up': $ctrl.isFormShown,
                'oui-icon-chevron-down': !$ctrl.isFormShown,
            }"
        ></span>
    </h5>
    <h5
        data-ng-if="!$ctrl.collapsible"
        data-ng-class="{ 'oui-field__label': $ctrl.dense }"
        data-translate="kubernetes_proxy_form"
    ></h5>
    <div data-ng-if="$ctrl.isFormShown">
        <p data-ng-if="!$ctrl.dense">
            <span data-translate="kubernetes_proxy_form_description"></span>
            <a
                data-ng-href="{{:: $ctrl.DOCUMENTATION_LINK }}"
                target="_blank"
                rel="noopener"
            >
                <span data-translate="kubernetes_proxy_form_link"></span>
                <span
                    class="oui-icon oui-icon-external-link"
                    aria-hidden="true"
                ></span>
            </a>
        </p>

        <oui-field class="kubernetes-proxy-form-radio-field">
            <oui-radio-group
                data-model="$ctrl.model.mode"
                data-on-change="$ctrl.onModeChanged()"
            >
                <oui-radio data-value="$ctrl.MODE.iptables">
                    <strong>IPTables</strong>
                </oui-radio>
                <oui-radio data-value="$ctrl.MODE.ipvs">
                    <strong>IPVS</strong>
                </oui-radio>
            </oui-radio-group>
        </oui-field>

        <!-- iptables -->
        <div
            class="kubernetes-proxy-form-field"
            data-ng-if="$ctrl.isIPTablesMode"
        >
            <div>
                <div>min sync period</div>
                <div>
                    <oui-numeric
                        data-id="minSyncPeriod"
                        data-name="minSyncPeriod"
                        data-model="$ctrl.model.values.minSyncPeriod"
                        data-min="0"
                    />
                </div>
            </div>
            <div>
                <div>sync period</div>
                <div>
                    <oui-numeric
                        data-id="syncPeriod"
                        data-name="syncPeriod"
                        data-model="$ctrl.model.values.syncPeriod"
                        data-min="1"
                    />
                </div>
            </div>
        </div>

        <!-- ipvs -->
        <div data-ng-if="$ctrl.isIPVSMode">
            <oui-message data-type="warning">
                <span data-translate="kubernetes_proxy_form_ipvs_warn"></span>
            </oui-message>
            <div class="kubernetes-proxy-form-field">
                <div>
                    <div>min sync period</div>
                    <div>
                        <oui-numeric
                            data-id="minSyncPeriod"
                            data-name="minSyncPeriod"
                            data-model="$ctrl.model.values.minSyncPeriod"
                            data-min="0"
                        />
                    </div>
                </div>
                <div>
                    <div>scheduler</div>
                    <div>
                        <oui-select
                            data-name="scheduler"
                            data-model="$ctrl.model.values.scheduler"
                            data-items="$ctrl.schedulerItems"
                            data-match="label"
                            data-inline
                        />
                    </div>
                </div>
                <div>
                    <div>sync period</div>
                    <div>
                        <oui-numeric
                            data-id="syncPeriod"
                            data-name="syncPeriod"
                            data-model="$ctrl.model.values.syncPeriod"
                            data-min="1"
                        />
                    </div>
                </div>
                <div>
                    <div>tcpfin timeout</div>
                    <div>
                        <oui-field
                            data-error-messages="{ timeout: ('kubernetes_proxy_form_ipvs_timeout_invalid'|translate) }"
                        >
                            <oui-numeric
                                data-id="tcpFinTimeout"
                                data-name="tcpFinTimeout"
                                data-model="$ctrl.model.values.tcpFinTimeout"
                                data-min="0"
                                data-max="$ctrl.maxTimeout"
                            />
                        </oui-field>
                    </div>
                </div>
                <div>
                    <div>tcp timeout</div>
                    <div>
                        <oui-field
                            data-error-messages="{ timeout: ('kubernetes_proxy_form_ipvs_timeout_invalid'|translate) }"
                        >
                            <oui-numeric
                                data-id="tcpTimeout"
                                data-name="tcpTimeout"
                                data-model="$ctrl.model.values.tcpTimeout"
                                data-min="0"
                                data-max="$ctrl.maxTimeout"
                            />
                        </oui-field>
                    </div>
                </div>
                <div>
                    <div>udp timeout</div>
                    <div>
                        <oui-field
                            data-error-messages="{ timeout: ('kubernetes_proxy_form_ipvs_timeout_invalid'|translate) }"
                        >
                            <oui-numeric
                                data-id="udpTimeout"
                                data-name="udpTimeout"
                                data-model="$ctrl.model.values.udpTimeout"
                                data-min="0"
                                data-max="$ctrl.maxTimeout"
                            />
                        </oui-field>
                    </div>
                </div>
            </div>
        </div>
    </div>
</ng-form>
