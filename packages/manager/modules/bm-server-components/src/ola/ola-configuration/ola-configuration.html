<oui-back-button data-on-click="$ctrl.goBack()">
    <span data-translate="dedicated_server_interfaces_ola_title"></span>
</oui-back-button>

<div data-ovh-alert></div>

<p data-translate="dedicated_server_interfaces_ola_description"></p>

<oui-message class="mb-3" data-type="info">
    <p class="mb-0">
        <span
            data-translate="dedicated_server_interfaces_ola_alert_configuration_needed"
        ></span>
        <a
            class="oui-link_icon"
            target="_blank"
            rel="noopener"
            data-ng-href="{{::$ctrl.guideUrl}}"
        >
            <span
                data-translate="server_ola_alert_configuration_needed_link"
            ></span>
            <span
                class="oui-icon oui-icon-external-link"
                aria-hidden="true"
            ></span>
            <span
                class="sr-only"
                data-translate="dedicated_server_interface_ola_new_tab"
            ></span>
        </a>
    </p>
</oui-message>

<oui-message class="mb-3" data-type="warning">
    <p
        class="mb-0"
        data-translate="dedicated_server_interfaces_ola_alert_configuration_reset"
    ></p>
</oui-message>

<form
    novalidate
    name="olaConfigurationForm"
    data-ng-if="!$ctrl.isLoading"
    data-ng-submit="$ctrl.onFinish()"
>
    <!-- Obsolete bandwidth option -->
    <oui-message
        class="mb-3"
        data-ng-if="$ctrl.hasObsoleteBandwithOption"
        data-type="warning"
    >
        <p
            class="mb-0"
            data-translate="dedicated_server_interfaces_ola_alert_obsolete_option"
        ></p>
    </oui-message>

    <!-- Forbidden interface -->
    <oui-message
        class="mb-3"
        data-ng-if="$ctrl.notAllowedInterfaces.length"
        data-type="warning"
    >
        <p
            data-translate="dedicated_server_interfaces_ola_alert_not_allowed"
        ></p>
        <ul class="mb-0">
            <li
                data-ng-repeat="interface in $ctrl.notAllowedInterfaces track by $index"
                data-ng-bind="interface.name"
            ></li>
        </ul>
    </oui-message>
    <div class="d-flex align-items-center justify-content-between">
        <div class="mr-2">
            <strong
                data-translate="dedicated_server_interfaces_ola_network_interfaces"
            ></strong>
            <dedicated-server-interfaces-ola-configuration-table
                data-interfaces="$ctrl.displayedInterfaces"
            />
        </div>
        <div class="mr-2">
            <span class="oui-icon oui-icon-arrow-right"></span>
        </div>
        <div>
            <strong
                data-translate="dedicated_server_interfaces_ola_network_interfaces_after"
            ></strong>
            <dedicated-server-interfaces-ola-configuration-table
                data-interfaces="$ctrl.previewAggregatedInterfaces"
            />
        </div>
    </div>
    <oui-field
        data-label="{{:: 'dedicated_server_interfaces_ola_field_name_label' | translate}}"
        data-size="xl"
    >
        <input
            class="oui-input"
            name="name"
            type="text"
            autocomplete="off"
            placeholder="{{:: 'dedicated_server_interfaces_ola_field_name_placeholder' | translate }}"
            data-ng-model="$ctrl.configurationName"
            data-required
        />
    </oui-field>
    <oui-button
        data-type="submit"
        data-variant="primary"
        data-disabled="olaConfigurationForm.$invalid || !$ctrl.isAggregationValid()"
        data-size="l"
    >
        <span data-translate="dedicated_server_interfaces_ola_activate"></span>
    </oui-button>
</form>
<div class="text-center" data-ng-if="$ctrl.isLoading">
    <oui-spinner data-size="l"> </oui-spinner>
</div>
