<oui-tile
    class="h-100"
    heading="{{:: 'server_support_heading' | translate }}"
    loading="$ctrl.loading"
>
    <!-- level -->
    <oui-tile-definition term="{{:: 'server_support_level' | translate }}">
        <oui-tile-description>
            <protected-data is-hidden="$ctrl.isHidden">
                <span data-ng-bind=":: $ctrl.getFormatedSupportLevel()"></span>
            </protected-data>
        </oui-tile-description>
    </oui-tile-definition>
    <!-- open tickets -->
    <oui-tile-definition
        term="{{:: 'server_support_open_tickets' | translate }}"
    >
        <oui-tile-description data-ng-if="!$ctrl.isSupportExternalWithLinks">
            <protected-data is-hidden="$ctrl.isHidden">
                <span data-ng-if="$ctrl.numberOfTickets === 0">0</span>
                <a
                    class="oui-link_icon"
                    data-ng-if="$ctrl.numberOfTickets > 0"
                    data-ng-href="{{ $ctrl.viewTicketsUrl }}"
                    data-ng-click="$ctrl.trackClick('go-to-view-tickets')"
                >
                    <span data-ng-bind="$ctrl.numberOfTickets"></span>
                </a>
            </protected-data>
            <div class="mt-1">
                <a
                    class="oui-link_icon"
                    data-ng-href="{{:: $ctrl.createNewTicketUrl }}"
                    data-ng-click="$ctrl.trackClick('create-ticket')"
                >
                    <span data-translate="server_support_create_ticket"></span>
                    <span
                        class="oui-icon oui-icon-arrow-right align-middle d-inline-block"
                        aria-hidden="true"
                    ></span>
                </a>
            </div>
        </oui-tile-description>
        <oui-tile-description data-ng-if="$ctrl.isSupportExternalWithLinks">
            <protected-data is-hidden="$ctrl.isHidden">
                <span data-ng-if="!$ctrl.numberOfTickets">0</span>
                <a
                    class="oui-link_icon"
                    data-ng-if="$ctrl.numberOfTickets > 0"
                    data-ng-href="{{ $ctrl.viewTicketsUrl }}"
                    data-on-click="$ctrl.trackClick('go-to-view-tickets')"
                    target="_blank"
                    rel="noopener"
                >
                    <span data-ng-bind="$ctrl.numberOfTickets"></span>
                    <span
                        class="oui-icon oui-icon-external-link"
                        aria-hidden="true"
                    ></span>
                </a>
            </protected-data>
            <div class="mt-1">
                <a
                    class="oui-link_icon"
                    data-ng-href="{{:: $ctrl.createNewTicketUrl }}"
                    data-on-click="$ctrl.trackClick('go-to-create-ticket')"
                    target="_blank"
                    rel="noopener"
                >
                    <span data-translate="server_support_create_ticket"></span>
                    <span
                        class="oui-icon oui-icon-external-link"
                        aria-hidden="true"
                    ></span>
                </a>
            </div>
        </oui-tile-description>
    </oui-tile-definition>

    <!-- interventions -->
    <div data-ng-if="$ctrl.viewInterventionsUrl">
        <oui-tile-definition term="{{:: 'server_interventions' | translate }}">
        </oui-tile-definition>
        <oui-tile-button
            class="ml-1"
            data-href="{{:: $ctrl.viewInterventionsUrl }}"
        >
            <span data-ng-bind="$ctrl.numberOfInterventions"></span>
        </oui-tile-button>
    </div>
    <!-- link to Travaux -->
    <div data-ng-if="$ctrl.travauxUrl">
        <oui-tile-definition
            term="{{:: 'server_problem_with_your_product' | translate }}"
        >
            <oui-tile-description>
                <a
                    class="oui-link_icon"
                    data-ng-href="{{:: $ctrl.travauxUrl }}"
                    data-ng-click="$ctrl.trackClick('status-tasks')"
                    target="_blank"
                >
                    <span data-translate="server_consult_travaux"></span>
                    <span
                        class="oui-icon oui-icon-external-link"
                        aria-hidden="true"
                    ></span>
                </a>
            </oui-tile-description>
        </oui-tile-definition>
    </div>
</oui-tile>
