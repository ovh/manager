<oui-modal
    data-primary-action=":: $ctrl.primaryAction()"
    data-primary-label="{{  $ctrl.primaryLabel | translate }}"
    data-primary-disabled="!$ctrl.currentAgreement.accepted && $ctrl.agreements.length"
    data-secondary-action=":: $ctrl.goBack(false, 'success', true)"
    data-secondary-label="{{ $ctrl.secondaryLabel | translate }}"
    data-loading="$ctrl.AgreementUnderProcess"
    data-on-dismiss=":: $ctrl.goBack(false, 'success', true)"
>
    <div
        class="d-flex justify-content-center align-items-center"
        data-ng-if="$ctrl.loading"
    >
        <oui-spinner size="l" data-ng-if="$ctrl.loading"></oui-spinner>
    </div>
    <div data-ng-if="!$ctrl.loading && $ctrl.agreements.length && !$ctrl.error">
        <strong
            data-ng-if="$ctrl.agreements.length > 1"
            data-ng-bind="'user_agreements_accept_all_count' | translate: {
      current: $ctrl.currentAgreementIndex + 1,
      total: $ctrl.agreements.length
  }"
        ></strong>
        <h3 data-ng-bind=":: $ctrl.currentAgreement.name"></h3>
        <oui-textarea
            data-name="agreement"
            data-model="$ctrl.currentAgreement.text"
            data-rows="10"
            data-readonly
        ></oui-textarea>
        <div class="oui-checkbox mt-3">
            <input
                class="oui-checkbox__input"
                id="agreement-checkbox"
                name="agreement-checkbox"
                type="checkbox"
                data-ng-model="$ctrl.currentAgreement.accepted"
            />
            <label
                class="oui-checkbox__label-container"
                for="agreement-checkbox"
            >
                <span class="oui-checkbox__label">
                    <span class="oui-checkbox__icon"></span>
                    <span
                        class="oui-checkbox__text"
                        data-translate="user_agreements_accept_all_read_and_accepted"
                        data-translate-values="{
                      contractTitle: $ctrl.currentAgreement.name
                  }"
                    ></span>
                </span>
                <span
                    class="oui-checkbox__description"
                    data-ng-bind-html="'user_agreements_accept_all_annexes' | translate: { url: $ctrl.currentAgreement.pdfUrl }"
                ></span>
            </label>
        </div>
    </div>
    <div
        data-ng-if="!$ctrl.loading && !$ctrl.agreements.length && !$ctrl.error"
    >
        <h3 data-translate="user_agreements_accept_all_no_contract"></h3>
    </div>
    <div data-ng-if="$ctrl.error">
        <oui-message type="error">
            <span
                data-translate="user_agreements_accept_all_error"
            ></span> </oui-message
        >`,
    </div>
</oui-modal>
