<div>
    <h3 class="oui-heading_3" data-translate="metrics_token_add_token"></h3>
    <oui-back-button
        data-on-click="$ctrl.$state.go('metrics.detail.token')"
        previous-page="{{:: 'metrics_token_add_token' | translate }}"
    >
    </oui-back-button>

    <form name="MetricsTokenAddForm" data-ng-submit="$ctrl.confirm()">
        <div class="text-center" data-ng-if="$ctrl.loading">
            <oui-spinner data-size="l"></oui-spinner>
        </div>
        <div data-ng-if="!$ctrl.loading">
            <oui-field label="{{'metrics_token_add_name' | translate }}">
                <div class="oui-field-control oui-field-control_4">
                    <input
                        class="oui-input"
                        type="text"
                        id="description"
                        name="description"
                        data-ng-model="$ctrl.token.description"
                    />
                </div>
            </oui-field>

            <oui-field label="{{'metrics_token_add_permission' | translate }}">
                <div class="oui-field-control oui-field-control_5">
                    <oui-radio-toggle-group data-model="$ctrl.token.permission">
                        <oui-radio
                            data-ng-repeat="permission in $ctrl.permissions"
                            value="permission.value"
                            ><span data-ng-bind="permission.text"></span>
                        </oui-radio>
                    </oui-radio-toggle-group>
                </div>
            </oui-field>

            <oui-field label="{{'metrics_token_add_labels' | translate }}">
                <div
                    class="oui-field-control oui-field-control_5"
                    data-ng-repeat="label in $ctrl.token.labels"
                >
                    <div class="oui-input-group oui-input-group_inline">
                        <div>
                            <label
                                class="oui-field__label"
                                data-translate="metrics_token_add_labels_key"
                            ></label>
                            <input
                                class="oui-input"
                                type="text"
                                name="key"
                                data-ng-model="label.key"
                            />
                        </div>
                        <div>
                            <label
                                class="oui-field__label"
                                data-translate="metrics_token_add_labels_value"
                            ></label>
                            <input
                                class="oui-input"
                                type="text"
                                name="value"
                                data-ng-model="label.value"
                            />
                        </div>
                        <div class="align-self-end" data-ng-show="$last">
                            <button
                                class="oui-button oui-button_secondary"
                                data-ng-click="$ctrl.addLabel()"
                                type="button"
                            >
                                +
                            </button>
                        </div>
                        <div class="align-self-end" data-ng-show="!$last">
                            <button
                                class="oui-button oui-button_secondary"
                                data-ng-click="$ctrl.removeLabel(label)"
                                type="button"
                            >
                                -
                            </button>
                        </div>
                    </div>
                </div>
            </oui-field>

            <oui-form-actions
                data-on-cancel="$ctrl.constructor.cancel()"
                data-submit-text="{{'metrics_token_add_confirmation' | translate}}"
                data-cancel-text="{{'metrics_token_cancel' | translate}}"
                data-disabled="MetricsTokenAddForm.$invalid || $ctrl.loading"
            ></oui-form-actions>
        </div>
    </form>
</div>
