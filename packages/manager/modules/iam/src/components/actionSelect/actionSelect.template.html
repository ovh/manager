<div>
    <!-- <Wildcard> -->
    <div class="d-flex mt-4">
        <p
            class="mr-3 mb-1"
            data-translate="iam_action_select_all_actions_label"
        ></p>
        <oui-switch
            data-name="wildcard"
            data-model="$ctrl.isWildcardActive"
            data-on-change="$ctrl.onModelChanged()"
        ></oui-switch>
    </div>
    <small
        class="d-block mb-4"
        data-translate="iam_action_select_all_actions_description"
    ></small>
    <!-- </Wildcard> -->

    <!-- <CustomAction> -->
    <ng-form name="$ctrl.form">
        <input
            type="hidden"
            name="{{ $ctrl.name }}"
            data-ng-model="$ctrl.ngModel"
        />

        <oui-field
            data-label="{{:: 'iam_action_select_custom_action_label' | translate }}"
            data-error-messages="{
                exist: ('iam_action_select_custom_action_error_exist' | translate)
            }"
        >
            <div class="d-flex align-items-start">
                <input
                    data-ng-model="$ctrl.customActionModel"
                    data-ng-keypress="$ctrl.onCustomActionKeyPressed($event)"
                    class="oui-input mr-3"
                    name="customAction"
                    type="text"
                    data-ng-disabled="$ctrl.isWildcardActive"
                />
                <button
                    type="button"
                    class="iam-action-select__custom-action_button flex oui-button oui-button_ghost"
                    data-ng-disabled="!$ctrl.canAddCustomAction"
                    data-ng-click="$ctrl.addCustomAction()"
                >
                    <span
                        data-translate="iam_action_select_custom_action_button"
                    ></span>
                    <span
                        class="oui-icon oui-icon-plus mr-2"
                        aria-hidden="true"
                    ></span>
                </button>
            </div>
        </oui-field>
    </ng-form>
    <oui-message
        class="mb-3"
        data-ng-if="$ctrl.customActionSuccessMessage"
        data-type="success"
        data-dismissable="true"
        data-on-dismiss="$ctrl.customActionSuccessMessage = ''"
    >
        <span data-ng-bind-html="$ctrl.customActionSuccessMessage"></span>
    </oui-message>
    <!-- </CustomAction> -->

    <!-- <Actions> -->
    <oui-collapsible
        data-ng-repeat="actionTree in $ctrl.actionTrees track by actionTree.value"
        data-heading="{{ 'iam_action_select_action_' + actionTree.value + '_heading' | translate }}"
        data-expanded="actionTree.expanded"
    >
        <!-- <Search> -->
        <oui-field
            data-ng-if="actionTree.searchable"
            data-label="{{:: 'iam_action_select_action_search_label' | translate }}"
        >
            <input
                class="oui-input mr-3"
                name="actionTree_{{ actionTree.value }}"
                type="text"
                data-ng-model="actionTree.searchQuery"
                data-ng-disabled="$ctrl.isWildcardActive"
            />
        </oui-field>
        <!-- </Search> -->

        <!-- <NoCategoryActions> -->
        <oui-checkbox
            class="ml-4"
            data-ng-repeat="action in actionTree.actions track by action.value"
            data-model="action.selected"
            data-on-change="$ctrl.onModelChanged()"
            data-disabled="$ctrl.isWildcardActive"
        >
            <oui-checkbox-label>
                <span data-ng-bind="action.value"></span>
            </oui-checkbox-label>
        </oui-checkbox>
        <!-- </NoCategoryActions> -->

        <!-- <Categories> -->
        <div
            data-ng-repeat="category in actionTree.categories track by category.value"
            data-ng-class="{ 'mt-3': !$first }"
        >
            <div class="d-flex justify-content-start">
                <!-- <CategoryCheckbox> -->
                <oui-checkbox
                    class="mb-3"
                    data-disabled="$ctrl.isWildcardActive"
                    data-model="category.selected"
                    data-on-change="$ctrl.toggleActions(category.actions)"
                >
                    <oui-checkbox-label>
                        <strong data-ng-bind="category.value"></strong>
                        <span
                            data-translate="{{ $ctrl.constructor.getCategoryLabel(category) }}"
                            data-translate-values="{
                                selected: category.selection.length,
                                total: category.actions.length,
                            }"
                        ></span>
                    </oui-checkbox-label>
                </oui-checkbox>
                <!-- </CategoryCheckbox> -->

                <!-- <CategoryToggler> -->
                <span
                    aria-hidden="true"
                    class="oui-icon oui-collapsible__toggle-icon ml-4"
                    data-ng-click="$ctrl.toggleCategory(category)"
                    data-ng-class="{
                        'oui-icon-chevron-down': !category.expanded,
                        'oui-icon-chevron-up': category.expanded,
                    }"
                ></span>
                <!-- </CategoryToggler> -->
            </div>
            <div data-ng-show="category.expanded">
                <!-- <CategoryActions> -->
                <oui-checkbox
                    class="ml-4"
                    data-disabled="$ctrl.isWildcardActive"
                    data-ng-repeat="action in category.actions track by action.value"
                    data-model="action.selected"
                    data-on-change="$ctrl.onModelChanged()"
                >
                    <oui-checkbox-label>
                        <div
                            data-iam-highlight-text="{{ actionTree.searchQuery }}"
                            data-iam-highlight-text-change="$ctrl.toggleCategory(category, true)"
                        >
                            <span data-ng-bind="action.value"></span>
                        </div>
                    </oui-checkbox-label>
                </oui-checkbox>
                <!-- </CategoryActions> -->
            </div>
        </div>
        <!-- </Categories> -->
    </oui-collapsible>
    <!-- </Actions> -->

    <!-- </Error> -->
    <p
        class="d-block mb-4 text-danger"
        data-ng-if="$ctrl.isRequired"
        data-translate="iam_action_select_error_required"
    ></p>
    <!-- </Error> -->
</div>
