<ng-form name="$ctrl.form">
    <!-- <ResourceTypes> -->
    <div data-ng-transclude="resourceTypesHeaderSlot"></div>
    <oui-field
        data-label="{{:: $ctrl.resourceTypesLabel }}"
        data-help-text="{{
            !$ctrl.required && $ctrl.hasNoAssociatedResources
                ? ('iam_resource_select_resource_types_error_resources' | translate)
                : ''
        }}"
        data-error-messages="{
            resources: ('iam_resource_select_resource_types_error_resources' | translate),
            required: ('iam_resource_select_resource_types_error_required' | translate)
        }"
    >
        <oui-select
            data-load="{{:: $ctrl.URL.RESOURCE_TYPE }}"
            data-load-options="{ global: { serviceType: 'apiv2' } }"
            data-model="$ctrl.resourceTypesModel"
            data-multiple="true"
            data-name="{{:: $ctrl.resourceTypesName }}"
            data-on-change="$ctrl.onResourceTypesChanged(modelValue)"
            data-on-confirm-remove="$ctrl.onResourceTypesConfirmRemove({ item, index })"
            data-on-error="$ctrl.onError(error)"
            data-on-load="response.data.sort()"
            data-required="$ctrl.isResourceTypesRequired"
            data-disabled="$ctrl.readOnly"
        ></oui-select>
    </oui-field>
    <!-- </ResourceTypes> -->

    <!-- <Resources> -->
    <div data-ng-transclude="resourcesHeaderSlot"></div>
    <div
        class="iam-resource_select--resources_container d-flex flex-column flex-sm-row"
    >
        <oui-field
            class="w-100"
            data-label="{{:: $ctrl.resourcesLabel }}"
            data-error-messages="{
                required: $ctrl.resourcesRequiredMessage || ('iam_resource_select_resources_error_required' | translate)
            }"
        >
            <oui-select
                data-disabled="$ctrl.isResourcesDisabled"
                data-load="{{ $ctrl.hasSelectedResourceTypes ? $ctrl.resourceUrl : '' }}"
                data-load-options="{ global: { serviceType: 'apiv2' } }"
                data-match="displayName"
                data-model="$ctrl.resourcesModel"
                data-multiple="true"
                data-name="{{:: $ctrl.resourcesName }}"
                data-on-change="$ctrl.onResourcesChanged(modelValue)"
                data-on-load="$ctrl.onResourcesLoaded(response)"
                data-on-error="$ctrl.onError(error)"
                data-required="$ctrl.isResourcesRequired"
            ></oui-select>
        </oui-field>
        <div
            class="w-100"
            data-ng-if="$ctrl.hasResourcesSiblingSlot"
            data-ng-transclude="resourcesSiblingSlot"
        ></div>
    </div>
    <!-- </Resources> -->
</ng-form>
