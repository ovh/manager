<div data-ng-controller="MicrosoftOfficePasswordEditCtrl as editPwdCtrl">
    <div
        data-wizard
        data-wizard-on-cancel="resetAction"
        data-wizard-on-finish="changePassword"
        data-wizard-title="'microsoft_office_license_user_edit_password' | translate"
    >
        <div
            data-wizard-step
            data-wizard-step-valid="formEditPassword.$valid && (!editPwdCtrl.model.password || editPwdCtrl.model.password === editPwdCtrl.password.confirm) && !editPwdCtrl.loaders.edit"
        >
            <oui-spinner
                data-ng-if="editPwdCtrl.loaders.infos || editPwdCtrl.loaders.edit"
            ></oui-spinner>

            <div
                data-ng-show="!editPwdCtrl.loaders.infos && !editPwdCtrl.loaders.edit"
            >
                <p
                    data-ng-bind-html="'microsoft_office_license_user_edit_password_heading' | translate"
                ></p>

                <form
                    class="form-horizontal mt-4"
                    name="$parent.formEditPassword"
                >
                    <!-- Password-->
                    <div
                        class="form-group"
                        data-ng-class="{'has-error': $parent.formEditPassword.password.$dirty && $parent.formEditPassword.password.$invalid}"
                    >
                        <label
                            class="control-label col-md-4"
                            for="txt-account-password"
                            data-translate="microsoft_office_license_user_edit_password_info"
                        ></label>
                        <div class="col-md-6">
                            <input
                                type="password"
                                autocomplete="off"
                                class="form-control"
                                id="txt-account-password"
                                name="password"
                                minlength="8"
                                maxlength="16"
                                data-ng-minlength="8"
                                data-ng-maxlength="16"
                                data-ng-model="editPwdCtrl.model.password"
                                data-ng-pattern="editPwdCtrl.pwdPattern"
                            />

                            <small
                                class="help-block"
                                data-translate="microsoft_office_license_user_edit_password_error"
                                data-ng-if="$parent.formEditPassword.password.$dirty && $parent.formEditPassword.password.$invalid"
                            >
                            </small>
                        </div>
                    </div>

                    <!-- confirmPassword-->
                    <div
                        class="form-group"
                        data-ng-class="{'has-error': $parent.formEditPassword.confirmPassword.$dirty &&
                            ($parent.formEditPassword.confirmPassword.$invalid || editPwdCtrl.model.password !== editPwdCtrl.password.confirm)}"
                    >
                        <label
                            class="control-label col-md-4"
                            for="txt-account-password-confirm"
                            data-translate="microsoft_office_license_user_edit_password_confirm"
                        ></label>
                        <div class="col-md-6">
                            <input
                                type="password"
                                autocomplete="off"
                                class="form-control"
                                id="txt-account-password-confirm"
                                name="confirmPassword"
                                data-ng-model="editPwdCtrl.password.confirm"
                            />
                            <small
                                class="help-block"
                                data-translate="microsoft_office_license_user_edit_password_error"
                                data-ng-if="$parent.formEditPassword.confirmPassword.$dirty && $parent.formEditPassword.confirmPassword.$invalid"
                            >
                            </small>
                            <small
                                class="help-block"
                                data-translate="microsoft_office_license_user_edit_confirm_error"
                                data-ng-if="editPwdCtrl.model.password && editPwdCtrl.model.password !== editPwdCtrl.password.confirm"
                            >
                            </small>
                        </div>
                    </div>

                    <div class="row">
                        <small
                            class="d-block col-md-8 col-md-offset-4"
                            data-ng-bind-html="'microsoft_office_license_user_edit_password_conditions' | translate"
                        ></small>
                    </div>

                    <p
                        class="font-weight-bold"
                        data-translate="microsoft_office_license_user_edit_password_email_notify"
                    ></p>

                    <!-- Email-->
                    <div class="form-group">
                        <label
                            class="control-label col-md-4"
                            for="email-user-notify"
                            data-translate="microsoft_office_license_user_edit_password_email_field"
                        ></label>
                        <div class="col-md-6">
                            <div
                                class="input-group"
                                data-ng-show="editPwdCtrl.edit.value"
                            >
                                <input
                                    type="email"
                                    class="form-control"
                                    id="email-user-notify"
                                    name="notifyEmail"
                                    data-ng-model="editPwdCtrl.model.notifyEmail"
                                />
                                <div class="input-group-btn">
                                    <button
                                        class="btn btn-default"
                                        type="button"
                                        data-ng-click="editPwdCtrl.edit.value = !editPwdCtrl.edit.value"
                                    >
                                        <span
                                            class="fa fa-times"
                                            aria-hidden="true"
                                        ></span>
                                        <span
                                            class="sr-only"
                                            data-translate="microsoft_office_license_user_edit_password_default_email"
                                        ></span>
                                    </button>
                                </div>
                            </div>
                            <div
                                class="input-group"
                                data-ng-if="!editPwdCtrl.edit.value"
                            >
                                <span
                                    class="form-control disabled"
                                    data-translate="microsoft_office_license_user_edit_password_nic_admin"
                                ></span>
                                <div class="input-group-btn">
                                    <button
                                        class="btn btn-default"
                                        type="button"
                                        data-ng-click="editPwdCtrl.edit.value = !editPwdCtrl.edit.value"
                                    >
                                        <span
                                            class="fa fa-pencil"
                                            aria-label="true"
                                        ></span>
                                        <span
                                            class="sr-only"
                                            data-translate="microsoft_office_license_user_edit_password_email"
                                        ></span>
                                    </button>
                                </div>
                            </div>

                            <!-- sendEmail-->
                            <oui-checkbox
                                id="email-admin"
                                name="email-admin"
                                disabled="!editPwdCtrl.model.password && !editPwdCtrl.password.confirm"
                                data-model="editPwdCtrl.model.shouldSendMail"
                                ><span
                                    data-translate="microsoft_office_license_user_edit_password_email"
                                ></span>
                            </oui-checkbox>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
