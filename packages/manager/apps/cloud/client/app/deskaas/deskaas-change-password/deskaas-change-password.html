<form
    novalidate
    name="form"
    class="deskaas-change-password"
    data-ng-submit="(form.$valid || vm.values.generatePwd) && vm.ok()"
>
    <oui-modal
        data-primary-label="{{ ::'common_modal_ok' | translate }}"
        data-secondary-action="vm.cancel()"
        data-secondary-label="{{ ::'common_modal_cancel' | translate }}"
        data-on-dismiss="vm.cancel()"
        data-loading="vm.flags.init"
        data-heading="{{ ::'vdi_pwd_title' | translate }}"
    >
        <div class="oui-field__content">
            <div class="oui-field-control oui-field-control_3">
                <input
                    type="text"
                    id="vdi-new-password"
                    name="password"
                    class="oui-input"
                    data-ng-class="{ 'oui-input_error': form.$submitted && form.password.$invalid }"
                    data-ng-model="vm.values.password"
                    cui-password
                    data-ng-pattern="vm.policies.pattern"
                    value="DeskaasDetailsCtrl.stateParams.token"
                    data-ng-disabled="vm.values.generatePwd"
                    cuc-autofocus
                    required
                />
            </div>
        </div>
        <ul>
            <li
                data-translate="vdi_pwd_policy_length"
                data-translate-values="{
                    min: vm.policies.minLength,
                    max: vm.policies.maxLength
                }"
            ></li>
            <li
                data-ng-if="vm.policies.letterMandatory"
                data-translate="vdi_pwd_policy_letterMandatory"
            ></li>
            <li
                data-ng-if="vm.policies.lowercaseLetterMandatory"
                data-translate="vdi_pwd_policy_lowerMandatory"
            ></li>
            <li
                data-ng-if="vm.policies.uppercaseLetterMandatory"
                data-translate="vdi_pwd_policy_upperMandatory"
            ></li>
            <li
                data-ng-if="vm.policies.digitMandatory"
                data-translate="vdi_pwd_policy_digitMandatory"
            ></li>
            <li
                data-ng-if="vm.policies.specialMandatory"
                data-translate="vdi_pwd_policy_specialMandatory"
            ></li>
            <li
                data-translate="vdi_pwd_policy_deniedChars"
                data-translate-values="{ chars: vm.policies.deniedCharsString }"
            ></li>
        </ul>
        <oui-checkbox
            id="vdi-gen-password"
            name="vdi-gen-password"
            data-model="vm.values.generatePwd"
            ><span data-translate="vdi_pwd_password_generated"></span>
        </oui-checkbox>
    </oui-modal>
</form>
