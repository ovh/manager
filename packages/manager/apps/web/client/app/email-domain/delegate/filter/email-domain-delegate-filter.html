<div
    class="row"
    data-ng-controller="EmailDelegateFilterCtrl as ctrlEmailDelegateFilter"
>
    <div class="col-md-9">
        <div data-ovh-alert="{{alerts.main}}"></div>

        <oui-back-button data-on-click="ctrlEmailDelegate.resetInitialView()">
            <span data-translate="common_back"></span>
        </oui-back-button>
        <h2>
            <span data-translate="email_tab_filters_management_heading"></span>
            <strong
                class="word-break"
                data-ng-bind="ctrlEmailDelegateFilter.currentAccount.email"
            ></strong>
        </h2>

        <oui-datagrid
            data-rows="ctrlEmailDelegateFilter.filters"
            data-row-loader="ctrlEmailDelegateFilter.transformItem($row)"
        >
            <oui-datagrid-column
                data-title="'email_tab_table_header_filter_name' | translate"
                data-property="name"
                data-sortable="asc"
            ></oui-datagrid-column>
            <oui-datagrid-column
                data-title="'email_tab_table_header_filter_priority' | translate"
                data-property="priority"
                data-sortable
            ></oui-datagrid-column>
            <oui-datagrid-column
                data-title="'emails_common_status' | translate"
            >
                <span
                    class="oui-badge"
                    data-ng-class="{'oui-badge_success': $row.active, 'oui-badge_error': !$row.active}"
                    data-ng-bind="'email_tab_filters_status_' + $row.active | translate"
                ></span>
            </oui-datagrid-column>
            <oui-action-menu data-compact data-placement="end">
                <oui-action-menu-item
                    data-on-click="setAction('email-domain/email/filter/edit/email-domain-email-filter-edit', { account: ctrlEmailDelegateFilter.currentAccount, filter: $row, accounts: ctrlEmailDelegate.emails, delegate: true })"
                    ><span
                        data-translate="email_tab_popover_filter_edit"
                    ></span>
                </oui-action-menu-item>
                <oui-action-menu-item
                    data-ng-click="setAction('email-domain/email/filter/delete/email-domain-email-filter-delete', { account: ctrlEmailDelegateFilter.currentAccount, filter: $row, delegate: true })"
                    ><span
                        data-translate="email_tab_popover_filter_delete"
                    ></span>
                </oui-action-menu-item>
            </oui-action-menu>
        </oui-datagrid>
    </div>

    <div class="col-md-3 mt-5 mt-lg-0">
        <button
            class="btn btn-block btn-default"
            type="button"
            data-translate="email_tab_button_emails_create_filter"
            data-ng-click="setAction('email-domain/email/filter/create/email-domain-email-filter-create', {
                    account: ctrlEmailDelegateFilter.currentAccount,
                    accounts: ctrlEmailDelegateFilter.accounts,
                    filterNames: ctrlEmailDelegateFilter.filters,
                    delegate: true
                })"
        ></button>
    </div>
</div>
