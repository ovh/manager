<div data-ng-controller="HostingFtpUserUpdateCtrl as ctrl">
    <div
        data-wizard
        data-wizard-on-cancel="resetAction"
        data-wizard-on-finish="updateUser"
        data-wizard-title="'hosting_tab_FTP_configuration_user_modify_title' | translate"
    >
        <div
            data-wizard-step
            data-wizard-step-on-next="onNextStep"
            data-wizard-step-valid="ctrl.isStep1Valid()"
        >
            <p
                data-translate="hosting_tab_FTP_configuration_user_modify_step1_question"
            ></p>

            <div class="text-center" data-ng-if="!ctrl.model.capabilities">
                <oui-spinner></oui-spinner>
            </div>

            <form
                class="form-horizontal"
                name="hostingUserUpdateForm"
                data-ng-if="ctrl.model.capabilities"
            >
                <div class="form-group">
                    <label
                        class="control-label col-md-4"
                        for="hostingUserUpdateLogin"
                        data-translate="hosting_tab_FTP_configuration_user_modify_step1_user"
                    ></label>
                    <div class="col-md-6">
                        <input
                            type="text"
                            class="form-control"
                            id="hostingUserUpdateLogin"
                            name="hostingUserUpdateLogin"
                            data-ng-model="ctrl.model.user.login"
                            disabled
                        />
                    </div>
                </div>

                <div
                    class="form-group"
                    data-ng-class="{'has-error': hostingUserUpdateForm.hostingUserUpdateHome.$dirty && !ctrl.isPathValid()}"
                >
                    <label
                        class="control-label col-md-4"
                        for="hostingUserUpdateHome"
                        data-translate="hosting_tab_FTP_configuration_user_modify_step1_home_label"
                    ></label>
                    <div class="col-md-6">
                        <div class="input-group">
                            <span class="input-group-addon">./</span>
                            <input
                                type="text"
                                class="form-control"
                                id="hostingUserUpdateHome"
                                name="hostingUserUpdateHome"
                                data-ng-disabled="ctrl.model.user.isPrimaryAccount"
                                data-ng-model="ctrl.model.user.home"
                            />
                        </div>
                        <small
                            class="help-block"
                            data-translate="hosting_common_path_help_inline"
                            data-ng-if="!ctrl.isPathValid()"
                        ></small>
                    </div>
                </div>
                <div
                    class="form-group"
                    data-ng-if="ctrl.model.operatingSystem === 'linux'"
                >
                    <span
                        class="control-label col-md-4 oui-label"
                        data-translate="hosting_tab_FTP_configuration_user_modify_step1_ssh_state_label"
                    ></span>
                    <div class="col-md-8">
                        <div
                            class="oui-radio"
                            data-ng-repeat="protocol in ctrl.CONNECTION_PROTOCOLS"
                        >
                            <input
                                type="radio"
                                class="oui-radio__input"
                                id="protocol-{{ protocol }}"
                                name="connectionProtocol"
                                data-ng-value="protocol"
                                data-ng-model="ctrl.connectionProtocol"
                            />
                            <label
                                class="oui-radio__label-container"
                                for="protocol-{{protocol}}"
                            >
                                <span class="oui-radio__label">
                                    <span class="oui-radio__icon"></span>
                                    <span
                                        class="oui-radio__text"
                                        data-translate="hosting_tab_FTP_multiftp_table_connection_protocol_{{protocol}}"
                                    ></span>
                                </span>
                            </label>
                        </div>
                    </div>
                </div>
            </form>
        </div>

        <div data-wizard-step>
            <p
                data-translate="hosting_tab_FTP_configuration_user_modify_step2_question"
            ></p>
            <dl class="dl-horizontal dl-lg">
                <dt
                    data-translate="hosting_tab_FTP_configuration_user_modify_step2_user"
                ></dt>
                <dd data-ng-bind="ctrl.model.userLogin"></dd>

                <dt
                    data-translate="hosting_tab_FTP_configuration_user_modify_step2_home_label"
                ></dt>
                <dd data-ng-bind="ctrl.getSelectedHome()"></dd>

                <dt
                    data-translate="hosting_tab_FTP_configuration_user_modify_step2_state_label"
                ></dt>
                <dd
                    data-ng-bind="'hosting_tab_FTP_configuration_user_modify_state_' + ctrl.model.user.state | translate"
                ></dd>
                <dt
                    data-translate="hosting_tab_FTP_configuration_user_modify_step2_protocols_label"
                ></dt>
                <dd
                    data-ng-bind="'hosting_tab_FTP_multiftp_table_connection_protocol_' + ctrl.connectionProtocol | translate"
                ></dd>
            </dl>
        </div>
    </div>
</div>
