<oui-back-button data-on-click="$ctrl.goBack()"></oui-back-button>

<oui-message data-type="error" data-ng-if="$ctrl.errorMessage">
    <p
        data-ng-if="$ctrl.statusCode===500"
        data-translate="hosting_multisite_git_association_ssh_key_internal_error_message"
    ></p>
    <p
        data-ng-if="$ctrl.statusCode!==500"
        data-ng-bind-html="$ctrl.errorMessage"
    ></p>
</oui-message>

<oui-message data-type="success" data-ng-if="!$ctrl.errorMessagee">
    <p
        data-translate="hosting_multisite_git_association_ssh_key_success_message"
        data-translate-values="{href: $ctrl.ongoingTasksHref}"
    ></p>
</oui-message>

<h1
    data-translate="hosting_multisite_git_association_title"
    data-translate-value="{path: $ctrl.PATH_PREFIX}"
></h1>
<p data-translate="hosting_multisite_git_association_configure_description"></p>

<form class="form-inline" name="$ctrl.gitAssociationForm">
    <h3 data-translate="hosting_multisite_git_association_ssh_key"></h3>
    <p
        data-translate="hosting_multisite_git_association_ssh_key_description"
    ></p>
    <div class="row">
        <oui-field
            class="col-md-4"
            data-label="{{ ::'hosting_multisite_git_association_ssh_key' | translate }}"
        >
            <oui-clipboard data-model=":: $ctrl.sshKey"></oui-clipboard>
        </oui-field>
    </div>
    <h3 data-translate="hosting_multisite_git_association_configure"></h3>

    <oui-message type="info">
        <p
            class="font-weight-bold"
            data-translate="hosting_multisite_git_association_configure_info_title"
        ></p>
        <ul>
            <li
                data-translate="hosting_multisite_git_association_configure_info_description"
            ></li>
            <li
                data-translate="hosting_multisite_git_association_configure_info_https"
            ></li>
            <li
                data-translate="hosting_multisite_git_association_configure_info_ssh"
            ></li>
        </ul>
        <strong
            data-translate="hosting_multisite_git_association_configure_info_empty_repo"
        ></strong>
        <span
            class="mb-2"
            data-translate="hosting_multisite_git_association_configure_info_not_empty_repo"
        ></span>
        <p
            class="font-weight-bold"
            data-translate="hosting_multisite_git_association_configure_info_add_in_paremeters"
        ></p>
    </oui-message>

    <div class="row">
        <oui-field
            class="col-md-4"
            data-label="{{ ::'hosting_multisite_git_association_repository' | translate }}"
        >
            <div class="d-flex oui-input-group oui-input-group_inline">
                <input
                    type="url"
                    id="repository_url"
                    name="repository_url"
                    class="oui-input mr-2"
                    data-ng-pattern="$ctrl.REGEX_GIT_REPO"
                    data-ng-model="$ctrl.model.repositoryUrl"
                    data-ng-class="{'oui-field_error': $ctrl.gitAssociationForm.repository_url.$invalid}"
                    placeholder="{{ $ctrl.REPOSITORY_PLACEHOLDER }}"
                    required
                />
            </div>
            <div class="d-flex">
                <small
                    class="w-100"
                    data-translate="hosting_multisite_git_association_ssh_url_repo_help"
                    data-translate-values="{ httpsRepo: $ctrl.EXAMPLE_HTTPS_REPOSITORY_URL, sshRepo: $ctrl.EXAMPLE_SSH_REPOSITORY_URL }"
                ></small>
            </div>
        </oui-field>
    </div>

    <div class="row">
        <oui-field
            class="col-md-4"
            data-label="{{ ::'hosting_multisite_git_association_branch' | translate }}"
        >
            <div class="d-flex oui-input-group oui-input-group_inline">
                <input
                    type="text"
                    id="branch"
                    name="branch"
                    required
                    class="oui-input mr-2"
                    data-ng-model="$ctrl.model.branchName"
                    data-ui-validate="$ctrl.gitAssociationForm.branch.$valid"
                    placeholder="{{ 'hosting_multisite_git_association_branch' | translate }}"
                />
            </div>
            <div class="d-flex">
                <small
                    class="w-100"
                    data-translate="hosting_multisite_git_association_ssh_branches_names"
                    data-translate-values="{ branchesNames: $ctrl.EXAMPLE_BRANCHES_NAMES}"
                ></small>
            </div>
        </oui-field>
    </div>

    <h3 data-translate="hosting_multisite_git_association_configure_auto"></h3>
    <p
        data-translate="hosting_multisite_git_association_webhook_description"
    ></p>
    <div class="row">
        <oui-field
            class="col-md-4"
            data-label="{{ ::'hosting_multisite_git_association_webhook_url' | translate }}"
        >
            <oui-clipboard data-model="$ctrl.model.webhookUrl"></oui-clipboard>
        </oui-field>
    </div>
</form>

<oui-form-actions
    data-submit-text="{{ ::'hosting_multisite_git_association_apply_configuration' | translate}}"
    data-disabled="$ctrl.errorMessage || $ctrl.gitAssociationForm.$pristine || $ctrl.gitAssociationForm.$invalid"
    data-on-submit="$ctrl.applyConfiguration()"
>
</oui-form-actions>
