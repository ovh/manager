<div data-ng-controller="IncidentCtrl as IncidentCtrl">
    <div
        data-wizard
        data-wizard-on-cancel="resetAction"
        data-wizard-on-finish="resetAction"
        data-wizard-title="'common_incident_tracking' | translate"
    >
        <div data-wizard-step>
            <div
                class="text-center"
                data-ng-if="!IncidentCtrl.informations.tasks"
            >
                <oui-spinner></oui-spinner>
            </div>
            <div data-ng-if="IncidentCtrl.informations.tasks">
                <div
                    class="mb-4"
                    data-ng-repeat="informations in IncidentCtrl.informations.tasks track by $index"
                >
                    <h3
                        class="d-block mt-0 mb-2"
                        data-ng-bind="informations.item_summary"
                    ></h3>
                    <div class="p-2 incident-task">
                        <div data-ng-if="informations.comments">
                            <div
                                class="mb-4"
                                data-ng-repeat="comment in informations.comments track by $index"
                            >
                                <p class="font-weight-bold mb-2 text-danger">
                                    <span
                                        data-translate="common_new_update"
                                    ></span>
                                    (<span
                                        data-ng-bind="(comment.date_added * 1000) | date:'medium'"
                                    ></span
                                    >)
                                </p>
                                <div
                                    class="task"
                                    data-ng-bind-html="comment.comment_text"
                                ></div>
                                <hr />
                            </div>
                        </div>
                        <div
                            class="task"
                            data-ng-bind-html="informations.detailed_desc"
                        ></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
