<div
    data-wizard
    data-wizard-title=":: 'dedicatedCloud_vm_encryption_delete_kms_title' | translate"
    data-wizard-on-cancel="$ctrl.goBack.bind($ctrl)"
    data-wizard-on-finish="$ctrl.finishDeletion.bind($ctrl)"
    data-wizard-confirm-button-text=":: 'wizard_close' | translate"
    data-wizard-hide-cancel-button="$ctrl.kmsDeletionTask.name && $ctrl.kmsDeletionTask.state !== 'error' && !$ctrl.error"
    data-wizard-hide-previous-button="true"
    data-wizard-bread-crumb
>
    <div data-wizard-step>
        <p
            data-translate="dedicatedCloud_vm_encryption_delete_kms_question"
            data-translate-values="{ 'kmsToDelete': '<strong>' + $ctrl.kmsToDelete.description + '</strong>'}"
        ></p>
    </div>

    <div
        data-wizard-step
        data-wizard-step-on-load="$ctrl.deleteKms.bind($ctrl)"
        data-wizard-step-valid="$ctrl.isDeletionStepValid()"
    >
        <strong
            data-ng-if="$ctrl.kmsDeletionTask.name"
            data-translate="dedicatedCloud_vm_encryption_kms_current_operation"
            data-translate-values="{
                    'currentOperation': $ctrl.kmsDeletionTask.name,
                    'state': $ctrl.kmsDeletionTask.state
                }"
        ></strong>
        <oui-progress class="mb-4 text-nowrap text-truncate">
            <oui-progress-bar
                data-type="info"
                data-value="$ctrl.kmsDeletionTask.progress"
            >
                <span data-ng-bind="$ctrl.getTaskDetails()"></span>
            </oui-progress-bar>
        </oui-progress>
        <p
            class="oui-paragraph"
            data-ng-if="$ctrl.error && $ctrl.error.data"
            data-translate="dedicatedCloud_vm_encryption_kms_edit_error"
            data-translate-values="{ 'error' : $ctrl.error.data.message }"
        ></p>
    </div>
</div>
