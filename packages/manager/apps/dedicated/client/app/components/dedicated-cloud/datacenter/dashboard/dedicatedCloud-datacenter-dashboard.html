<div data-ovh-alert="dedicated-cloud-datacenter-dashboard-alert"></div>

<ovh-manager-dedicated-cloud-datacenter-zerto-alerts
    data-current-zerto="$ctrl.currentZerto"
    data-current-user="$ctrl.currentUser"
    data-go-to-vpn-configuration="$ctrl.goToVpnConfiguration"
    data-pcc-type="$ctrl.pccType"
></ovh-manager-dedicated-cloud-datacenter-zerto-alerts>

<div class="mb-5 px-0">
    <div class="row d-md-flex mb-5">
        <div class="col-md-4">
            <oui-tile
                data-heading="{{:: 'dedicatedCloud_information_title' | translate }}"
                data-loading="$ctrl.loading"
            >
                <oui-tile-definition
                    data-term="{{:: 'dedicatedCloud_description' | translate }}"
                    data-description="{{ $ctrl.datacenter.model.name }}"
                >
                    <oui-action-menu
                        aria-label="{{:: 'menu_action_label' | translate:{ t0: ('common_change' | translate) } }}"
                        data-compact
                        data-placement="end"
                    >
                        <oui-action-menu-item
                            aria-label="{{:: 'common_change' | translate }}"
                            data-ng-click="$ctrl.editDescription($ctrl.datacenter.model.name, 'dedicatedCloud_datacenter_name')"
                            ><span data-translate="common_change"></span>
                        </oui-action-menu-item>
                        <oui-action-menu-item
                            aria-label="{{:: 'dedicatedCloud_datacenter_delete' | translate }}"
                            data-on-click="$ctrl.deleteDatacenter()"
                            ><span
                                data-translate="dedicatedCloud_datacenter_delete"
                            ></span>
                        </oui-action-menu-item>
                    </oui-action-menu>
                </oui-tile-definition>
                <oui-tile-definition
                    data-term="{{:: 'dedicatedCloud_datacenter_description' | translate }}"
                    data-description="{{:: $ctrl.datacenter.model.description }}"
                >
                    <oui-action-menu
                        aria-label="{{:: 'menu_action_label' | translate:{ t0: ('dedicatedCloud_description' | translate) } }}"
                        data-compact
                        data-placement="end"
                    >
                        <oui-action-menu-item
                            aria-label="{{:: 'common_change' | translate }}"
                            data-ng-click="$ctrl.editDescription($ctrl.datacenter.model.description, 'dedicatedCloud_datacenter_description')"
                            ><span data-translate="common_change"></span>
                        </oui-action-menu-item>
                    </oui-action-menu>
                </oui-tile-definition>
                <oui-tile-definition
                    data-term="{{:: 'dedicatedCloud_datacenter_commercial_name' | translate }}"
                    data-description="{{:: ('dedicatedCloud_datacenter_commercial_name_' + $ctrl.datacenter.model.commercialName) | translate }}"
                ></oui-tile-definition>
                <oui-tile-definition
                    data-term="{{:: 'dedicatedCloud_datacenter_host' | translate }}"
                    data-description="{{:: $ctrl.datacenter.model.hosts }}"
                ></oui-tile-definition>
                <oui-tile-definition
                    data-term="{{:: 'dedicatedCloud_datacenter_datastore' | translate }}"
                    data-description="{{:: $ctrl.datacenter.model.filers }}"
                ></oui-tile-definition>
                <oui-tile-definition
                    data-term="{{:: 'dedicatedCloud_subscription_links' | translate }}"
                >
                    <oui-tile-description class="oui-link">
                        <a
                            class="d-block"
                            target="_blank"
                            rel="noopener"
                            title="{{:: 'dedicatedCloud_datacenter_go_vscope' | translate }}"
                            data-ng-href="{{:: $ctrl.dedicatedCloud.vScopeUrl }}"
                        >
                            <span
                                data-translate="dedicatedCloud_datacenter_go_vscope"
                            ></span>
                            <span
                                class="fa fa-external-link"
                                aria-hidden="true"
                            >
                            </span>
                        </a>
                        <a
                            class="d-block"
                            target="_blank"
                            rel="noopener"
                            title="{{:: 'dedicatedCloud_datacenter_go_web_interface' | translate }}"
                            data-ng-if="$ctrl.dedicatedCloud.webInterfaceUrl"
                            data-ng-href="{{:: $ctrl.dedicatedCloud.webInterfaceUrl }}"
                        >
                            <span
                                data-translate="dedicatedCloud_datacenter_go_web_interface"
                            ></span>
                            <span
                                class="fa fa-external-link"
                                aria-hidden="true"
                            >
                            </span>
                        </a>
                        <a
                            class="d-block"
                            target="_blank"
                            rel="noopener"
                            title="{{:: 'dedicatedCloud_datacenter_go_certified_web_interface' | translate }}"
                            data-ng-if="$ctrl.dedicatedCloud.certifiedInterfaceUrl && $ctrl.dedicatedCloud.advancedSecurity"
                            data-ng-href="{{:: $ctrl.dedicatedCloud.certifiedInterfaceUrl }}"
                        >
                            <span
                                data-translate="dedicatedCloud_datacenter_go_certified_web_interface"
                            ></span>
                            <span
                                class="fa fa-external-link"
                                aria-hidden="true"
                            >
                            </span>
                        </a>
                    </oui-tile-description>
                </oui-tile-definition>
            </oui-tile>
        </div>

        <div class="col-md-4">
            <oui-tile
                data-heading="{{:: 'dedicatedCloud_options_title' | translate }}"
                data-loading="$ctrl.loading"
                class="mb-3"
            >
                <oui-tile-definition
                    data-ng-if="$ctrl.zertoAvailability"
                    data-term="{{:: $ctrl.LABELS.ZERTO }}"
                >
                    <oui-tile-description>
                        <span
                            class="oui-badge"
                            data-ng-class="{
                                  'oui-badge_error': $ctrl.zertoGlobalStatus.error,
                                  'oui-badge_warning': $ctrl.zertoGlobalStatus.warning,
                                  'oui-badge_success': $ctrl.zertoGlobalStatus.success
                            }"
                        >
                            <span
                                data-translate="{{:: 'dedicatedCloud_options_zerto_status_' + $ctrl.currentZerto.state }}"
                            ></span>
                        </span>

                        <ul
                            data-ng-if="$ctrl.isZertoTypeOnPremise"
                            class="pl-0 list-unstyled"
                        >
                            <li
                                data-ng-if="$ctrl.zertoSiteByState.success !== 0"
                            >
                                <span
                                    class="oui-badge mt-2 oui-badge_success text-nowrap"
                                    data-translate-values="{ numbers: $ctrl.zertoSiteByState.success }"
                                    data-ng-pluralize
                                    data-count="$ctrl.zertoSiteByState.success"
                                    data-when="{
                                    'one': (('dedicatedCloud_datacenter_zerto_one_site_state_delivered') | translate),
                                    'other': (('dedicatedCloud_datacenter_zerto_multiple_site_state_delivered') | translate:{ numbers: $ctrl.zertoSiteByState.success}),
                                }"
                                >
                                </span>
                            </li>
                            <li
                                data-ng-if="$ctrl.zertoSiteByState.warning !== 0"
                            >
                                <span
                                    class="oui-badge mt-2 oui-badge_warning text-nowrap"
                                    data-translate-values="{ numbers: $ctrl.zertoSiteByState.warning }"
                                    data-ng-pluralize
                                    data-count="$ctrl.zertoSiteByState.warning"
                                    data-when="{
                                    'one': (('dedicatedCloud_datacenter_zerto_one_site_state_wait_action') | translate),
                                    'other': (('dedicatedCloud_datacenter_zerto_multiple_site_state_wait_action') | translate:{ numbers: $ctrl.zertoSiteByState.warning}),
                                }"
                                >
                                </span>
                            </li>
                            <li data-ng-if="$ctrl.zertoSiteByState.error !== 0">
                                <span
                                    class="oui-badge mt-2 oui-badge_error text-nowrap"
                                    data-translate-values="{ numbers: $ctrl.zertoSiteByState.error }"
                                    data-ng-pluralize
                                    data-count="$ctrl.zertoSiteByState.error"
                                    data-when="{
                                    'one': (('dedicatedCloud_datacenter_zerto_one_site_state_error') | translate),
                                    'other': (('dedicatedCloud_datacenter_zerto_multiple_site_state_error') | translate:{ numbers: $ctrl.zertoSiteByState.error}),
                                }"
                                >
                                </span>
                            </li>
                        </ul>
                    </oui-tile-description>
                </oui-tile-definition>
            </oui-tile>
            <oui-tile
                data-heading="{{:: 'dedicatedCloud_nsx_edge_title' | translate }}"
                data-loading="$ctrl.loading"
                data-ng-if="$ctrl.isNsxEdgeAvailable && $ctrl.datacenter.model.isNsxCommercialRangeName"
            >
                <oui-tile-definition
                    data-term="{{:: 'dedicatedCloud_nsx_edge_level' | translate }}"
                    data-ng-if="!$ctrl.pollNsxTaskId"
                >
                    <oui-tile-description>
                        <span
                            data-ng-bind="$ctrl.datacenter.model.edgesLevel"
                        ></span>
                    </oui-tile-description>
                    <oui-action-menu data-compact data-placement="end">
                        <oui-action-menu-item
                            aria-label="{{:: 'dedicatedCloud_datacenter_activate' | translate }}"
                            data-ng-click="$ctrl.goToDatacenterNetwork()"
                            data-ng-if="!$ctrl.isNsxtEnabled"
                        >
                            <span
                                data-translate="dedicatedCloud_datacenter_activate"
                            ></span>
                        </oui-action-menu-item>
                        <oui-action-menu-item
                            aria-label="{{:: 'dedicatedCloud_datacenter_resize' | translate }}"
                            data-ng-click="$ctrl.goToResizeNsxEdge()"
                            data-disabled="!$ctrl.isNsxtEnabled"
                        >
                            <span
                                data-translate="dedicatedCloud_datacenter_resize"
                            ></span>
                        </oui-action-menu-item>
                        <oui-action-menu-item
                            aria-label="{{:: 'dedicatedCloud_datacenter_add_edge' | translate }}"
                            data-disabled="!$ctrl.isNsxtEnabled || $ctrl.hasMaximumNsx"
                            data-ng-click="$ctrl.goToAddNsx()"
                        >
                            <span
                                data-translate="dedicatedCloud_datacenter_add_edge"
                            ></span>
                        </oui-action-menu-item>
                        <oui-action-menu-item
                            data-ng-if=":: $ctrl.isNsxEdgeRelocateAvailable"
                            aria-label="{{:: 'dedicatedCloud_datacenter_relocate_datastore' | translate }}"
                            data-ng-click="$ctrl.goToRelocateNsxtEdge()"
                        >
                            <span
                                data-translate="dedicatedCloud_datacenter_relocate_datastore"
                            ></span>
                        </oui-action-menu-item>
                    </oui-action-menu>
                </oui-tile-definition>

                <oui-tile-definition
                    data-term="{{:: 'dedicatedCloud_nsx_edge_level' | translate }}"
                    data-ng-if="$ctrl.pollNsxTaskId"
                >
                    <oui-tile-description>
                        <span class="oui-badge oui-badge_warning">
                            <span
                                data-translate="dedicatedCloud_nsx_task_progress"
                            ></span>
                        </span>
                    </oui-tile-description>
                </oui-tile-definition>
                <oui-tile-definition
                    data-term="{{:: 'dedicatedCloud_nsx_edge_quantity' | translate }}"
                    data-description="{{ $ctrl.datacenter.model.edgesCount }}"
                    data-ng-if="!$ctrl.pollNsxTaskId"
                >
                </oui-tile-definition>
            </oui-tile>
        </div>
    </div>
</div>
