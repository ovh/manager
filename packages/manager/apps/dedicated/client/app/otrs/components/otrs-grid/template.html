<oui-datagrid
    data-criteria=":: $ctrl.criteria"
    id="tickets"
    data-on-criteria-change=":: $ctrl.onCriteriaChange($criteria)"
    data-on-page-change=":: $ctrl.onPageChange($pagination)"
    data-on-sort-change=":: $ctrl.onSortChange($sort)"
    data-page-size="{{:: $ctrl.pageSize }}"
    data-page-size-max="100"
    data-rows-loader=":: $ctrl.getTickets()"
>
    <oui-datagrid-column
        data-filterable
        data-property="ticketNumber"
        data-searchable
        data-sortable
        data-title=":: 'ovhManagerSupport_tickets_grid_column_ticketNumber_header' | translate"
        data-type-options=":: $ctrl.ticketNumberTypeOptions"
        data-type="number"
    ></oui-datagrid-column>
    <oui-datagrid-column
        data-filterable
        data-property="serviceName.value"
        data-searchable
        data-title=":: 'ovhManagerSupport_tickets_grid_column_serviceName_header' | translate"
        data-type="string"
    >
        <span data-ng-bind=":: $row.serviceName.display"></span>
    </oui-datagrid-column>
    <oui-datagrid-column
        data-filterable
        data-property="subject"
        data-searchable
        data-title=":: 'ovhManagerSupport_tickets_grid_column_subject_header' | translate"
        data-type="string"
    ></oui-datagrid-column>
    <oui-datagrid-column
        data-filterable
        data-property="lastMessageFrom.value"
        data-title=":: 'ovhManagerSupport_tickets_grid_column_lastMessageFrom_header' | translate"
        data-type="options"
        data-type-options=":: $ctrl.gridColumnLastMessageFromTypeOptions"
    >
        <span data-ng-bind=":: $row.lastMessageFrom.display"></span>
    </oui-datagrid-column>
    <oui-datagrid-column
        data-filterable
        data-property="creationDate"
        data-sortable
        data-title=":: 'ovhManagerSupport_tickets_grid_column_creationDate_header' | translate"
        data-type="date"
    >
        <time
            data-ng-bind=":: $row.creationDate | date: 'short'"
            datetime="{{:: $row.creationDate }}"
        ></time>
    </oui-datagrid-column>
    <oui-datagrid-column
        data-filterable
        data-property="updateDate"
        data-sortable
        data-title=":: 'ovhManagerSupport_tickets_grid_column_updateDate_header' | translate"
        data-type="date"
    >
        <time
            data-ng-bind=":: $row.updateDate | date: 'short'"
            datetime="{{:: $row.updateDate }}"
        ></time>
    </oui-datagrid-column>
    <oui-datagrid-column
        data-filterable
        data-property="state.value"
        data-title=":: 'ovhManagerSupport_tickets_grid_column_state_header' | translate"
        data-type="options"
        data-type-options=":: $ctrl.gridColumnStateTypeOptions"
    >
        <span data-ng-bind=":: $row.state.display"></span>
    </oui-datagrid-column>

    <oui-action-menu data-compact data-placement="end">
        <oui-action-menu-item data-on-click=":: $ctrl.goToTicket($row.ticketId)"
            ><span
                data-translate="ovhManagerSupport_tickets_grid_action_goToTicket"
            ></span
        ></oui-action-menu-item>
    </oui-action-menu>

    <oui-datagrid-topbar>
        <button
            class="oui-button oui-button_secondary oui-button_icon-left "
            type="button"
            data-ng-click="$ctrl.goToTicketCreation()"
        >
            <span class="oui-icon oui-icon-add pr-1" aria-hidden="true"></span>
            <span
                data-translate="ovhManagerSupport_tickets_grid_top_createTicket"
            ></span>
        </button>

        <oui-checkbox
            class="mt-2"
            model="$ctrl.displayArchived"
            on-change="$ctrl.onDisplayArchiveChange(modelValue)"
        >
            <oui-checkbox-label
                data-translate="ovhManagerSupport_tickets_grid_top_archived"
            ></oui-checkbox-label>
        </oui-checkbox>
    </oui-datagrid-topbar>
</oui-datagrid>
