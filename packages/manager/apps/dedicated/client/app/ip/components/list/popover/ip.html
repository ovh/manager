<!-- ACTIONS FOR UNIQ IPV4 AND UNIQ IPV6 -->
<oui-action-menu
    compact
    aria-label="{{:: 'common_actions' | translate }}"
    data-placement="bottom-end"
>
    <!-- DESCRIPTION -->
    <oui-action-menu-item
        data-on-click="goToEditDescription(ipBlock)"
        data-ng-if="ipBlock.isUniq"
    >
        <span
            data-ng-bind="ipBlock.description && ('ip_description_edit_title' | translate) || ('ip_description_new_title' | translate)"
        ></span>
    </oui-action-menu-item>

    <!-- REVERSE -->
    <oui-action-menu-item data-on-click="goToUpdateReverse(ipBlock, ip)">
        <span data-translate="ip_table_manage_reverse"></span>
    </oui-action-menu-item>

    <!-- UNDER THIS LINE ACTIONS ARE ONLY FOR UNIQ IPV4 -->
    <div data-ng-if="ipBlock.version === IP_TYPE.V4">
        <oui-action-menu-divider
            data-ng-if="ipBlock.service.category !== 'CLOUD' || ipBlock.type === FAILOVER"
        ></oui-action-menu-divider>

        <!-- VMAC SECTION -->
        <!-- ADD VIRTUAL MAC -->
        <oui-action-menu-item
            data-ng-if="ipBlock.type === FAILOVER"
            data-on-click="setAction('ip/virtual-mac/add/ip-ip-virtual-mac-add', { ipBlock: ipBlock, ip: ip ,tracking : tracking['mac-add']})"
            data-disabled="ipBlock.service.category !== 'DEDICATED' || (ipBlock.virtualMac && ipBlock.virtualMac.status !== 'OK') || ipBlock.virtualMac.virtualMacs[ip.ip]"
            data-oui-tooltip-placement="left"
            data-oui-tooltip="{{ ipBlock.service.category === 'DEDICATED' && ipBlock.virtualMac.status === 'OK' && ipBlock.virtualMac.virtualMacs[ip.ip] ? getVirtualMacMessage(ipBlock) : '' }}"
        >
            <span data-translate="ip_table_manage_add_virtualmac"></span>
        </oui-action-menu-item>

        <!-- MANAGE VIRTUAL MAC -->
        <oui-action-menu-item
            data-ng-if="ipBlock.service.category === 'DEDICATED' && ipBlock.type == FAILOVER && ipBlock.virtualMac.status === 'OK' && ipBlock.virtualMac.virtualMacs[ip.ip]"
            data-on-click="setAction('ip/virtual-mac/ip-ip-virtual-mac', { ipBlock: ipBlock, ip: ip ,tracking : tracking['mac-details']})"
        >
            <span data-translate="ip_table_manage_view_virtualmac"></span>
        </oui-action-menu-item>

        <!-- DELETE VIRTUAL MAC -->
        <oui-action-menu-item
            data-ng-if="ipBlock.service.category == 'DEDICATED' && ipBlock.type == FAILOVER && ipBlock.virtualMac.status === 'OK' && ipBlock.virtualMac.virtualMacs[ip.ip]"
            data-on-click="setAction('ip/virtual-mac/delete/ip-ip-virtual-mac-delete', { ipBlock: ipBlock, ip: ip,tracking : tracking['mac-delete'] })"
        >
            <span data-translate="ip_table_manage_del_virtualmac"></span>
        </oui-action-menu-item>

        <!-- MITIGATION SECTION -->
        <oui-action-menu-divider
            data-ng-if="ip.mitigation && ipBlock.service.category !== 'HOUSING'"
        ></oui-action-menu-divider>

        <!-- MITIGATION::SWITCH DEFAULT > PERMANENT -->
        <oui-action-menu-item
            data-ng-if="(!ip.mitigation || ip.mitigation == 'DEFAULT') && ipBlock.service.category !== 'HOUSING'"
            data-on-click="setAction('ip/mitigation/update/ip-ip-mitigation-update', { ipBlock: ipBlock, ip: ip,tracking : tracking['enable-permanent-mitigation']})"
        >
            <span
                data-translate="ip_table_manage_mitigation_DEFAULT_to_PERMANENT"
            ></span>
        </oui-action-menu-item>

        <!-- MITIGATION::SWITCH PERMANENT > DEFAULT -->
        <oui-action-menu-item
            data-ng-if="ip.mitigation == 'PERMANENT' && ipBlock.service.category !== 'HOUSING'"
            data-on-click="setAction('ip/mitigation/update/ip-ip-mitigation-update', { ipBlock: ipBlock, ip: ip ,tracking : tracking['switch-auto-mitigation']})"
        >
            <span
                data-translate="ip_table_manage_mitigation_PERMANENT_to_AUTO"
            ></span>
        </oui-action-menu-item>

        <!-- MITIGATION::STATS -->
        <oui-action-menu-item
            data-ng-if="(ip.mitigation == 'PERMANENT' || ip.mitigation == 'FORCED')"
            data-on-click="displayStatistics(ipBlock)"
        >
            <span data-translate="ip_table_manage_mitigation_stats"></span>
        </oui-action-menu-item>

        <oui-action-menu-divider
            data-ng-if="ip.gameMitigation && ipBlock.service.category !== 'HOUSING'"
        ></oui-action-menu-divider>

        <!-- GAME MITIGATION -->
        <oui-action-menu-item
            data-ng-if="ip.gameMitigation && ipBlock.service.category !== 'CLOUD'"
            data-on-click="displayGameFirewall(ipBlock, ip)"
        >
            <span data-translate="ip_table_manage_game_mitigation"></span>
        </oui-action-menu-item>

        <!-- FIREWALL SECTION -->
        <oui-action-menu-divider
            data-ng-if="ip.mitigation !== 'CREATION_PENDING' && ip.mitigation !== 'REMOVAL_PENDING' && ipBlock.service.category !== 'HOUSING'"
        ></oui-action-menu-divider>

        <!-- FIREWALL::NEW -->
        <oui-action-menu-item
            data-ng-if="ip.mitigation != 'FORCED' && ip.firewall == 'NOT_CONFIGURED' && ipBlock.service.category !== 'HOUSING'"
            data-on-click="setAction('ip/firewall/toggle/ip-ip-firewall-toggle', { ipBlock: ipBlock, ip: ip, tracking : tracking['create-firewall']})"
        >
            <span data-translate="ip_table_manage_firewall_configure"></span>
        </oui-action-menu-item>

        <!-- FIREWALL::ENABLE -->
        <oui-action-menu-item
            data-ng-if="ip.mitigation != 'FORCED' && ip.firewall == 'DEACTIVATED'"
            data-on-click="setAction('ip/firewall/toggle/ip-ip-firewall-toggle', { ipBlock: ipBlock, ip: ip , tracking : tracking['enable-firewall']})"
        >
            <span data-translate="ip_table_manage_firewall_enable"></span>
        </oui-action-menu-item>

        <!-- FIREWALL::DISABLE -->
        <oui-action-menu-item
            data-ng-if="(!ip.mitigation || ip.mitigation == 'DEFAULT') && ip.firewall == 'ACTIVATED'"
            data-on-click="setAction('ip/firewall/toggle/ip-ip-firewall-toggle', { ipBlock: ipBlock, ip: ip, tracking : tracking['disable-firewall'] })"
        >
            <span data-translate="ip_table_manage_firewall_disable"></span>
        </oui-action-menu-item>

        <!-- FIREWALL::DISABLED -->
        <oui-action-menu-item
            data-ng-if="ip.mitigation && ip.mitigation != 'DEFAULT'"
            disabled
            data-oui-tooltip-placement="left"
            data-oui-tooltip="{{:: 'ip_table_manage_firewall_disable_tooltip' | translate }}"
        >
            <span data-translate="ip_table_manage_firewall_disable"></span>
        </oui-action-menu-item>

        <!-- FIREWALL::CONFIGURE -->
        <oui-action-menu-item
            data-ng-if="ip.firewall && ip.firewall != 'NOT_CONFIGURED'"
            data-on-click="displayFirewall(ipBlock, ip)"
        >
            <span data-translate="ip_table_manage_firewall_rules"></span>
        </oui-action-menu-item>

        <!-- SPAM SECTION -->
        <oui-action-menu-divider
            data-ng-if="ip.hasSpamAlerts"
        ></oui-action-menu-divider>

        <!-- SPAM::UNBLOCK -->
        <oui-action-menu-item
            data-ng-if="ip.hasSpamAlerts"
            data-on-click="displayAntispam(ipBlock, ip)"
        >
            <span data-translate="ip_table_manage_antispam_unblock"></span>
        </oui-action-menu-item>

        <!-- ANTIHACK::UNBLOCK -->
        <oui-action-menu-item
            data-ng-if="ip.hasAntihackAlerts"
            data-on-click="setAction('ip/antihack/ip-ip-antihack', { ipBlock: ipBlock, ip: ip })"
        >
            <span data-translate="ip_table_manage_view_antihack"></span>
        </oui-action-menu-item>

        <oui-action-menu-divider
            data-ng-if="ipBlock.type == FAILOVER && ipBlock.isUniq"
        ></oui-action-menu-divider>

        <!-- ORGANISATION -->
        <oui-action-menu-item
            data-ng-if="ipBlock.type === FAILOVER && ipBlock.isUniq && ipBlock.organizationId"
            data-on-click="setAction('ip/organisation/view/ip-ip-organisation-view', { ipBlock: ipBlock })"
        >
            <span
                data-translate="ip_table_manage_view_iporganisation_details"
            ></span>
        </oui-action-menu-item>

        <oui-action-menu-item
            data-ng-if="ipBlock.type === FAILOVER && ipBlock.isUniq && ipBlock.organizationId"
            data-on-click="setAction('ip/organisation/change/ip-ip-organisation-change', { ipBlock: ipBlock })"
        >
            <span
                data-translate="ip_table_manage_view_iporganisation_change"
            ></span>
        </oui-action-menu-item>

        <!-- IPMOVE -->
        <oui-action-menu-item
            data-ng-if="ipBlock.type === FAILOVER && ipBlock.isUniq"
            data-on-click="setAction('ip/block/move/ip-ip-block-move', { ipBlock: ipBlock, tracking : tracking['move-failover']})"
        >
            <span
                data-ng-bind=":: ('ip_table_manage_move_ipblock' | translate) + ADDITIONAL_IP"
            ></span>
        </oui-action-menu-item>

        <!-- PCC DELETE / VRACK DELETE-->
        <oui-action-menu-item
            data-ng-if="ipBlock.type === PCC || ipBlock.type === VRACK"
            data-on-click="setAction('ip/block/delete/ip-ip-block-delete', { ipBlock: ipBlock , tracking : (ipBlock.type === PCC ? tracking['delete-pcc'] : tracking['delete-vrack'])})"
        >
            <span
                data-ng-bind=":: ('ip_table_manage_delete_ipblock' | translate) + ADDITIONAL_IP"
            ></span>
        </oui-action-menu-item>

        <!-- Additional IP DELETE -->
        <oui-action-menu-item
            data-ng-if="ipBlock.type === FAILOVER && ipBlock.isUniq"
            data-on-click="setAction('ip/block/delete/ip-ip-block-delete', { ipBlock: ipBlock , tracking : tracking['delete-failover']})"
            data-disabled="!ipBlock.canBeTerminated"
            data-oui-tooltip="{{ !ipBlock.canBeTerminated ? ('ip_failover_impossible_delete' | translate) : '' }}"
            data-oui-tooltip-placement="left"
        >
            <span
                data-ng-bind=":: ('ip_table_manage_delete_ipblock' | translate) + ADDITIONAL_IP"
            ></span>
        </oui-action-menu-item>

        <!-- BYOIP Aggregate -->
        <oui-action-menu-item
            data-ng-if="ipBlock.bringYourOwnIp && !ipBlock.ipBlock.endsWith('/24')"
            data-on-click="setAction('ip/byoip/aggregate/ip-ip-byoip-aggregate', { ipBlock: ipBlock })"
        >
            <span data-translate="ip_table_manage_byoip_aggregate"></span>
        </oui-action-menu-item>
    </div>
</oui-action-menu>
