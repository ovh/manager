<div data-ng-controller="ServerInstallationOvhCtrl">
    <div
        data-wizard
        data-wizard-on-cancel="resetAction"
        data-wizard-on-finish="saveRemainingSize"
        data-wizard-title=":: 'server_configuration_installation_ovh_title' | translate"
        data-wizard-hide-cancel-button="loader.loading"
        data-wizard-bread-crumb
        data-wizard-keydown-disabled
    >
        <div
            data-wizard-step
            data-wizard-step-valid="!loader.loading && installation.selectDistribution && installation.selectLanguage && !installation.warningExistPartition"
            data-wizard-step-on-load="load"
            data-wizard-step-on-next="checkNextStep1"
        >
            <div class="text-center" data-ng-show="loader.loading">
                <oui-spinner></oui-spinner>
            </div>

            <div data-ng-hide="loader.loading">
                <p
                    data-translate="server_configuration_installation_ovh_step1_info"
                    data-translate-values="{ t0: constants.server.name }"
                ></p>
                <div class="form-group">
                    <label
                        for="selectDesktopType"
                        class="control-label"
                        data-translate="server_configuration_installation_ovh_step1_desktop"
                    >
                    </label>
                    <select
                        class="form-control"
                        id="selectDesktopType"
                        name="selectDesktopType"
                        data-ng-options="desktop as ('server_configuration_installation_ovh_desktop_' + desktop | translate) for desktop in installation.desktopType"
                        data-ng-model="installation.selectDesktopType"
                        data-ng-change="installation.hasData = false; setSelectDistribution(null);"
                    >
                    </select>
                </div>
                <p data-ng-if="hasLicencedOs()">
                    <span
                        data-translate="server_configuration_installation_ovh_step1_desktop_licence_info_label"
                    ></span>
                    <i
                        class="fa fa-question-circle"
                        data-oui-tooltip="{{:: 'server_configuration_installation_ovh_step1_desktop_licence_info_text' | translate }}"
                        data-oui-tooltip-placement="bottom"
                    >
                    </i>
                </p>
                <div
                    class="panel-group"
                    id="accordion"
                    role="tablist"
                    aria-multiselectable="true"
                >
                    <div
                        class="panel panel-default panel-accordion"
                        data-ng-repeat="itemFamily in installation.familyType track by $index"
                        data-ng-show="countFilter[itemFamily] > 0"
                    >
                        <div
                            class="panel-heading"
                            role="tab"
                            id="heading-{{ $index }}"
                        >
                            <h4 class="panel-title">
                                <a
                                    class="d-block collapsed"
                                    role="button"
                                    href="#collapse-{{ $index }}"
                                    aria-expanded="true"
                                    aria-controls="collapse-{{ $index }}"
                                    data-ng-click="installation.selectFamily = itemFamily; $event.preventDefault();"
                                    data-toggle="collapse"
                                    data-parent="#accordion"
                                    data-ng-bind="itemFamily + ' (' + countFilter[itemFamily] + ')'"
                                    target="_top"
                                >
                                </a>
                            </h4>
                        </div>
                        <div
                            id="collapse-{{ $index }}"
                            class="panel-collapse collapse"
                            role="tabpanel"
                            aria-labelledby="heading-{{ $index }}"
                        >
                            <div class="panel-body">
                                <div
                                    class="radio mb-4"
                                    data-ng-repeat="distribution in getCountFilter(itemFamily) | orderBy:'displayName' track by $index"
                                >
                                    <label>
                                        <input
                                            type="radio"
                                            id="distribution-{{ $index }}"
                                            name="distribution"
                                            data-ng-click="setSelectDistribution(distribution)"
                                        />
                                        <span
                                            class="d-block"
                                            data-ng-class="{ 'text-danger': distribution.isDeprecated }"
                                            data-ng-bind="distribution.displayName"
                                        >
                                        </span>
                                        <span>
                                            <span
                                                class="text-muted"
                                                data-translate="{{ 'server_configuration_installation' + distribution.bitFormat }}"
                                            >
                                            </span>
                                            <span
                                                class="text-warning"
                                                data-ng-show="distribution.isDeprecated "
                                                data-translate="server_configuration_installation_deprecated"
                                            >
                                            </span>
                                            <span
                                                class="text-warning"
                                                data-ng-show="constants.server.raidController && distribution.hardRaidConfiguration === false"
                                                data-translate="server_configuration_installation_ovh_step1_hardwareRaid_os_not_supported_short"
                                            >
                                            </span>
                                            <i
                                                class="pl-2 fa"
                                                aria-hidden="true"
                                                data-ng-class="{
                                                    'fa-warning' : showEndOfLifeMessage(distribution.endOfInstall,true),
                                                    'fa-info-circle' : showEndOfLifeMessage(distribution.endOfInstall,false),
                                                }"
                                                data-oui-tooltip="{{ getEndOfLifeMessage(distribution)}}"
                                                data-oui-tooltip-placement="bottom"
                                            >
                                            </i>
                                            <span
                                                class="text-danger"
                                                data-ng-if="showEndOfLifeMessage(distribution.endOfInstall,true)"
                                                data-ng-bind="distribution.endOfInstall | date:'mediumDate'"
                                            >
                                            </span>
                                            <span
                                                class="text-muted"
                                                data-ng-if="showEndOfLifeMessage(distribution.endOfInstall,false)"
                                                data-ng-bind="distribution.endOfInstall | date:'mediumDate'"
                                            >
                                            </span>
                                        </span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <p
                    class="text-danger"
                    data-ng-if="!hasVirtualDesktop()"
                    data-ng-bind-html="'server_configuration_installation_ovh_step1_virtual_desktop_not_supported' | translate:{ t0: installation.selectDistribution.displayName, t1: LICENSE_URL }"
                ></p>
                <div
                    class="form-group"
                    data-ng-show="installation.selectDistribution && !installation.warningExistPartition"
                >
                    <label
                        for="selectLanguage"
                        class="control-label"
                        data-translate="server_configuration_installation_step1_language"
                    >
                    </label>
                    <select
                        class="form-control"
                        id="selectLanguage"
                        name="selectLanguage"
                        data-ng-options="language as language for language in installation.selectDistribution.availableLanguages"
                        data-ng-model="installation.selectLanguage"
                    >
                    </select>
                </div>
                <div class="control-group clearfix">
                    <label
                        for="diskGroup"
                        class="control-label"
                        data-translate="server_configuration_installation_ovh_step1_disk_group"
                    >
                    </label>
                    <select
                        class="form-control float-left w-50 mr-4"
                        id="diskGroup"
                        name="diskGroup"
                        data-ng-model="installation.diskGroup"
                        data-ng-options="diskGroup as diskGroup.description for diskGroup in informations.diskGroups track by diskGroup.diskGroupId"
                        data-ng-disabled="!canEditDiskGroup()"
                    >
                    </select>
                    <oui-spinner
                        class="align-middle"
                        aria-label="{{ 'common_loading' | translate }}"
                        data-ng-if="loader.loadingCapabilities"
                        data-size="s"
                    >
                    </oui-spinner>
                </div>
                <span
                    class="text-danger"
                    data-ng-if="canEditDiskGroup() && raidIsPersonnalizable()"
                    data-translate="server_configuration_installation_ovh_step1_disk_group_warning"
                    data-translate-values="{ t0: informations.diskGroups[0].description }"
                >
                </span>

                <div
                    data-ng-hide="installation.warningExistPartition || informations.gabaritName != null"
                >
                    <div
                        class="checkbox"
                        data-ng-class="{
                             'disabled': !canPersonnalizeRaid()
                         }"
                    >
                        <label>
                            <input
                                type="checkbox"
                                data-ng-model="installation.raidSetup"
                                data-ng-disabled="!canPersonnalizeRaid()"
                            />
                            <span
                                data-translate="server_configuration_installation_ovh_step1_hardwareRaid"
                            ></span>
                        </label>
                    </div>
                    <p class="text-danger">
                        <span
                            data-ng-if="installation.selectDistribution.hardRaidConfiguration === false"
                            data-translate="server_configuration_installation_ovh_step1_hardwareRaid_os_not_supported"
                        >
                        </span>
                        <span
                            data-ng-if="informations.hardwareRaid.error.wrongLocation"
                            data-translate="server_configuration_installation_ovh_step1_hardwareRaid_wrong_location"
                        >
                        </span>
                    </p>
                </div>

                <div
                    class="checkbox"
                    data-ng-hide="installation.warningExistPartition || informations.gabaritName != null"
                    data-ng-class="{
                         'disabled': informations.gabaritName != null || installation.noPartitioning
                     }"
                >
                    <label>
                        <input
                            type="checkbox"
                            data-ng-model="installation.customInstall"
                            data-ng-disabled="informations.gabaritName != null || installation.noPartitioning"
                        />
                        <span
                            data-translate="server_configuration_installation_ovh_step1_custom"
                        ></span>
                    </label>
                </div>

                <div data-ng-show="installation.warningExistPartition">
                    <p
                        class="text-danger"
                        data-ng-bind-html="'server_configuration_installation_ovh_step1_warning_exist' | translate:{ t0: installation.selectDistribution.displayName }"
                    ></p>
                    <p class="text-center">
                        <button
                            type="button"
                            class="btn btn-link mb-3"
                            data-ng-click="cancelSetSelectDistribution()"
                            data-translate="server_configuration_installation_ovh_step1_warning_exist_cancel"
                        ></button>
                        <button
                            type="button"
                            class="btn btn-default"
                            data-ng-click="setSelectDistribution(installation.saveSelectDistribution, true)"
                            data-translate="server_configuration_installation_ovh_step1_warning_exist_valid"
                        ></button>
                    </p>
                </div>
            </div>
        </div>

        <div
            data-wizard-step
            data-wizard-step-valid="!loader.loading
                                     && installation.hardwareRaid.controller
                                     && installation.hardwareRaid.raid
                                     && installation.hardwareRaid.disks
                                     && installation.hardwareRaid.arrays
                                     && !installation.hardwareRaid.error"
            data-wizard-step-on-previous="reduceModal"
            data-wizard-step-on-next="checkNextStep2"
        >
            <div class="text-center" data-ng-if="loader.loading">
                <oui-spinner></oui-spinner>
            </div>

            <div data-ng-if="!loader.loading">
                <p
                    data-ng-if="informations.hardwareRaid.profile.controllers.length === 0"
                    data-translate="server_configuration_installation_ovh_stephardraid_error_empty_controller"
                ></p>
                <form
                    id="hardwareRaidForm"
                    name="hardwareRaidForm"
                    data-ng-if="informations.hardwareRaid.profile.controllers.length > 0"
                >
                    <p
                        data-translate="server_configuration_installation_ovh_stephardraid_info"
                    ></p>
                    <div class="form-group">
                        <label
                            for="hardwareRaidController"
                            class="control-label"
                            data-translate="server_configuration_installation_ovh_stephardraid_label_controllers"
                        >
                        </label>
                        <span
                            data-ng-if="informations.hardwareRaid.profile.controllers.length === 1"
                            data-ng-bind="installation.hardwareRaid.controller.model + ' (' + installation.hardwareRaid.controller.type + ')'"
                        >
                        </span>
                        <select
                            class="form-control"
                            id="hardwareRaidController"
                            name="hardwareRaidController"
                            data-ng-if="informations.hardwareRaid.profile.controllers.length !== 1"
                            data-ng-options="controller as (controller.model + ' (' + controller.type + ')') for controller in informations.hardwareRaid.profile.controllers"
                            data-ng-model="installation.hardwareRaid.controller"
                        >
                        </select>
                    </div>

                    <div class="form-group">
                        <label
                            for="hardwareRaidRaidMode"
                            class="control-label"
                            data-translate="server_configuration_installation_ovh_stephardraid_label_raid"
                        >
                        </label>
                        <select
                            class="form-control"
                            id="hardwareRaidRaidMode"
                            name="hardwareRaidRaidMode"
                            data-ng-if="installation.hardwareRaid.controller"
                            data-ng-options="raid as raid for raid in informations.hardwareRaid.availableRaids | orderBy:'toString()'"
                            data-ng-model="installation.hardwareRaid.raid"
                        >
                        </select>
                    </div>

                    <div class="form-group">
                        <label
                            for="hardwareRaidNbDisks"
                            class="control-label"
                            data-translate="server_configuration_installation_ovh_stephardraid_label_disks"
                        >
                        </label>
                        <span
                            data-ng-if="informations.hardwareRaid.availableDisks.length === 1 && installation.hardwareRaid.raid"
                            data-ng-bind="informations.hardwareRaid.availableDisks[0]"
                        >
                        </span>
                        <select
                            class="form-control"
                            id="hardwareRaidNbDisks"
                            name="hardwareRaidNbDisks"
                            data-ng-if="informations.hardwareRaid.availableDisks.length !== 1 && installation.hardwareRaid.raid"
                            data-ng-options="disk as disk for disk in informations.hardwareRaid.availableDisks"
                            data-ng-model="installation.hardwareRaid.disks"
                        >
                        </select>
                    </div>

                    <div class="form-group">
                        <label
                            for="hardwareaRidNbArrays"
                            class="control-label"
                            data-translate="server_configuration_installation_ovh_stephardraid_label_arrays"
                        >
                        </label>
                        <span
                            data-ng-if="informations.hardwareRaid.availableArrays.length === 1 && installation.hardwareRaid.disks"
                            data-ng-bind="informations.hardwareRaid.availableArrays[0]"
                        >
                        </span>
                        <select
                            id="hardwareaRidNbArrays"
                            class="form-control"
                            name="hardwareaRidNbArrays"
                            data-ng-if="informations.hardwareRaid.availableArrays.length !== 1 && installation.hardwareRaid.disks"
                            data-ng-model="installation.hardwareRaid.arrays"
                            data-ng-options="array as array for array in informations.hardwareRaid.availableArrays"
                        >
                        </select>
                    </div>

                    <div class="form-group">
                        <label
                            class="control-label"
                            data-translate="server_configuration_installation_ovh_stephardraid_label_space_total"
                        >
                        </label>
                        <p
                            class="form-control-static"
                            data-ng-if="installation.hardwareRaid.totalSpace"
                            data-ng-bind="getDisplaySize(installation.hardwareRaid.totalSpace)"
                        ></p>
                    </div>

                    <div class="form-group">
                        <label
                            class="control-label"
                            data-translate="server_configuration_installation_ovh_stephardraid_label_space_available"
                        >
                        </label>
                        <p
                            class="form-control-static"
                            data-ng-if="installation.hardwareRaid.availableSpace"
                            data-ng-bind="getDisplaySize(installation.hardwareRaid.availableSpace)"
                        ></p>
                    </div>

                    <div
                        class="alert alert-danger"
                        role="alert"
                        data-ng-if="installation.hardwareRaid.error"
                        data-translate="server_configuration_installation_gabarit_step2_invalid"
                    ></div>
                </form>
            </div>
        </div>

        <div
            data-wizard-step
            data-wizard-step-valid="!loader.loading
                                     && !newPartition.display
                                     && !setPartition.save
                                     && !setPartition.delModel
                                     && !configError.raidDiskUse
                                     && !errorInst.partitionSizeOver"
            data-wizard-step-on-previous="checkPrev1"
            data-wizard-step-on-load="loadPartiton"
        >
            <div class="text-center" data-ng-show="loader.loading">
                <oui-spinner></oui-spinner>
            </div>
            <p
                data-ng-hide="loader.loading || installation.partitionSchemesList.length > 0"
                data-translate="server_configuration_installation_ovh_step2_error_empty_scheme"
                data-translate-values="{ t0: constants.server.name, t1: installation.selectDistribution.displayName }"
            ></p>

            <div
                data-ng-hide="loader.loading || installation.partitionSchemesList.length == 0"
            >
                <div
                    data-ng-bind-html="'server_configuration_installation_ovh_step2_info' | translate:{ t0: installation.selectDistribution.displayName }"
                ></div>

                <p data-ng-if="informations.isCachecade">
                    <span class="icon-info-sign" aria-hidden="true"></span>
                    <span
                        data-translate="server_configuration_installation_ovh_step2_info_partition_cachecade"
                    ></span>
                </p>

                <div class="form-inline">
                    <span
                        data-translate="server_configuration_installation_ovh_step2_type_disk"
                    ></span>
                    <select
                        class="form-control"
                        data-ng-show="informations.nbDisk > 1"
                        data-ng-options="nbdisk as nbdisk for nbdisk in getNbDisqueList(informations.nbDisk)"
                        data-ng-model="installation.nbDiskUse"
                        data-ng-disabled="setPartition.indexSet != -1 || newPartition.display"
                    >
                    </select>
                    <strong
                        data-ng-hide="informations.nbDisk > 1"
                        data-ng-bind="informations.nbPhysicalDisk"
                    ></strong
                    >&nbsp;
                    <strong data-ng-bind="informations.typeDisk"></strong>&nbsp;
                    <strong
                        data-ng-show="informations.raidController"
                        data-translate="server_configuration_installation_ovh_step2_raid_hard"
                    >
                    </strong
                    >&nbsp;
                    <span
                        data-translate="server_configuration_installation_ovh_step2_total_size"
                    ></span>
                    <strong
                        data-ng-bind="getDisplaySize(informations.totalSize)"
                    ></strong
                    >&nbsp;
                    <span
                        data-translate="server_configuration_installation_ovh_step2_remaining_size"
                    ></span>
                    <strong
                        data-ng-bind="getDisplaySize(informations.remainingSize)"
                    ></strong>
                </div>

                <div
                    class="progress"
                    data-ng-hide="errorInst.partitionSizeOver"
                >
                    <div
                        class="progress-bar"
                        data-ng-hide="setPartition.delModel != null && progress.partition == installation.partitionSchemeModels[setPartition.delModel]"
                        data-ng-repeat="progress in bar.progress | orderBy:'partition.order'"
                        data-ng-style="{
                             'background': progress.partition.progressColor,
                             'width': progress.progressSize + '%'
                         }"
                    ></div>
                </div>

                <div
                    class="progress progress-danger progress-striped"
                    data-ng-show="errorInst.partitionSizeOver"
                >
                    <div class="bar" style="width: 100%"></div>
                </div>
                <div
                    data-ng-show="informations.otherDisk.length > 0 && informations.showAllDisk"
                    data-ng-repeat="disk in informations.otherDisk"
                >
                    <div class="text-right">
                        <span
                            data-translate="server_configuration_installation_ovh_step2_type_disk_disable"
                        ></span>
                        <strong data-ng-bind="disk.nbDisk"></strong>&nbsp;
                        <strong data-ng-bind="disk.typeDisk"></strong>&nbsp;
                        (<strong
                            data-ng-bind="getDisplaySize(disk.sizeDisk)"
                        ></strong
                        >)
                    </div>
                    <div class="progress progress-info progress-striped">
                        <div class="bar" style="width: 100%"></div>
                    </div>
                </div>

                <div
                    class="text-right"
                    data-ng-show="informations.otherDisk.length > 0"
                >
                    <button
                        type="button"
                        class="btn btn-default"
                        data-ng-if="!informations.showAllDisk"
                        data-ng-click="informations.showAllDisk = true"
                        data-ng-bind=":: 'server_configuration_installation_ovh_step2_show_all_disk' | translate"
                    ></button>
                    <button
                        type="button"
                        class="btn btn-default"
                        data-ng-if="informations.showAllDisk"
                        data-ng-click="informations.showAllDisk = false"
                        data-ng-bind=":: 'server_configuration_installation_ovh_step2_hide_all_disk' | translate"
                    ></button>
                </div>

                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>
                                    <span
                                        class="fa fa-question-circle"
                                        data-oui-tooltip="{{:: 'server_configuration_installation_ovh_step2_available_order_help' | translate }}"
                                        data-oui-tooltip-placement="right"
                                    >
                                    </span>
                                </th>
                                <th
                                    data-translate="server_configuration_installation_ovh_step2_type"
                                ></th>
                                <th
                                    data-translate="server_configuration_installation_ovh_step2_file_system"
                                ></th>
                                <th
                                    data-translate="server_configuration_installation_ovh_step2_mount_point"
                                ></th>
                                <th
                                    data-translate="server_configuration_installation_ovh_step2_volume_name"
                                ></th>
                                <th
                                    data-ng-show="installation.nbDiskUse > 1 && !informations.raidController"
                                >
                                    <span
                                        data-translate="server_configuration_installation_ovh_step2_raid"
                                    ></span>
                                    <span
                                        class="icon-question-sign icon-white"
                                        data-oui-tooltip="{{:: 'server_configuration_installation_ovh_step2_raid_help' | translate }}"
                                        data-oui-tooltip-placement="left"
                                    >
                                    </span>
                                </th>
                                <th>
                                    <span
                                        data-translate="server_configuration_installation_ovh_step2_available_size"
                                    ></span>
                                    <span
                                        class="icon-question-sign icon-white"
                                        data-oui-tooltip="{{:: 'server_configuration_installation_ovh_step2_available_size_help' | translate }}"
                                        data-oui-tooltip-placement="left"
                                    >
                                    </span>
                                </th>
                                <th
                                    data-ng-show="installation.nbDiskUse > 1 && !informations.raidController"
                                >
                                    <span
                                        data-translate="server_configuration_installation_ovh_step2_size"
                                    ></span>
                                    <span
                                        class="icon-question-sign icon-white"
                                        data-oui-tooltip="{{:: 'server_configuration_installation_ovh_step2_size_help' | translate }}"
                                        data-oui-tooltip-placement="left"
                                    >
                                    </span>
                                </th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr
                                data-ng-repeat="partition in installation.partitionSchemeModels | orderBy:'orderTable'"
                                data-ng-class="{
                                    'deleting': partition == installation.partitionSchemeModels[setPartition.delModel]
                                }"
                            >
                                <td
                                    class="form-group"
                                    data-ng-class="{
                                        'has-error': isSetPartition(partition) && hasErrorOrder()
                                    }"
                                >
                                    <span
                                        data-ng-if="!isSetPartition(partition)"
                                        data-ng-bind="partition.order"
                                    >
                                    </span>
                                    <input
                                        type="number"
                                        class="form-control"
                                        min="1"
                                        max="99"
                                        data-ng-if="isSetPartition(partition)"
                                        data-ng-model="partition.order"
                                        data-ng-change="validationOrder(partition)"
                                    />
                                </td>
                                <td
                                    class="form-group"
                                    data-ng-class="{
                                        'has-error': isSetPartition(partition) && hasErrorType()
                                    }"
                                >
                                    <span
                                        data-ng-if="!isSetPartition(partition)"
                                        data-translate="{{ 'server_configuration_installation_' + partition.typePartition }}"
                                    >
                                    </span>
                                    <select
                                        class="form-control"
                                        data-ng-if="isSetPartition(partition)"
                                        data-ng-options="type as ('server_configuration_installation_' + type | translate) for type in constants.partitionTypeList"
                                        data-ng-model="partition.typePartition"
                                        data-ng-change="validationType(partition)"
                                    >
                                    </select>
                                </td>
                                <td
                                    class="form-group"
                                    data-ng-class="{
                                        'has-error': isSetPartition(partition) && hasErrorFileSystem()
                                    }"
                                >
                                    <span
                                        data-ng-hide="isSetPartition(partition) && partition.fileSystem != constants.warningSwap"
                                        data-translate="{{ 'server_configuration_installation_' + partition.fileSystem }}"
                                    >
                                    </span>
                                    <span
                                        data-ng-if="constants.fileSystemList.length === 1 && isSetPartition(partition) && partition.fileSystem != constants.warningSwap"
                                        data-ng-bind="partition.fileSystem"
                                    >
                                    </span>
                                    <select
                                        class="form-control"
                                        data-ng-if="constants.fileSystemList.length !== 1 && isSetPartition(partition) && partition.fileSystem != constants.warningSwap"
                                        data-ng-options="fileSystem as ('server_configuration_installation_' + fileSystem | translate) for fileSystem in constants.fileSystemList"
                                        data-ng-model="partition.fileSystem"
                                        data-ng-change="validationFileSystem(partition)"
                                    >
                                    </select>
                                </td>
                                <td
                                    class="form-group"
                                    data-ng-class="{
                                        'has-error': isSetPartition(partition) && hasErrorMountPoint()
                                    }"
                                >
                                    <span
                                        data-ng-hide="isSetPartition(partition) && partition.fileSystem != constants.warningSwap"
                                        data-ng-bind="partition.mountPoint"
                                    >
                                    </span>
                                    <input
                                        type="text"
                                        class="form-control"
                                        data-ng-if="isSetPartition(partition) && partition.fileSystem != constants.warningSwap"
                                        data-ng-model="partition.mountPoint"
                                        data-ng-required="true"
                                        data-ng-change="validationMountPoint(partition)"
                                        data-ng-disabled="!validation.hasSwap && partition.fileSystem == constants.warningSwap"
                                    />
                                </td>
                                <td
                                    class="form-group"
                                    data-ng-class="{
                                        'has-error': isSetPartition(partition) && hasErrorVolumeName()
                                    }"
                                >
                                    <span
                                        data-ng-show="partition.typePartition != constants.warningLV || errorInst.typeLvSwap"
                                    >
                                        -
                                    </span>
                                    <span
                                        data-ng-hide="isSetPartition(partition) || partition.typePartition != constants.warningLV"
                                        data-ng-bind="partition.volumeName"
                                    >
                                    </span>
                                    <input
                                        type="text"
                                        data-ng-show="isSetPartition(partition) && partition.typePartition == constants.warningLV && !errorInst.typeLvSwap"
                                        data-ng-model="partition.volumeName"
                                        data-ng-required="partition.typePartition == constants.warningLV"
                                        data-ng-change="validationVolumeName(partition)"
                                    />
                                </td>
                                <td
                                    class="form-group"
                                    data-ng-show="installation.nbDiskUse > 1 && !informations.raidController"
                                    data-ng-class="{
                                        'has-error': isSetPartition(partition) && hasErrorRaid()
                                    }"
                                >
                                    <span
                                        data-ng-show="partition.fileSystem == constants.warningSwap"
                                    >
                                        -
                                    </span>
                                    <span
                                        data-ng-hide="isSetPartition(partition) || partition.fileSystem == constants.warningSwap"
                                        data-ng-bind="partition.raid.replace('_', '')"
                                    >
                                    </span>
                                    <select
                                        class="form-control"
                                        data-ng-if="isSetPartition(partition) && partition.fileSystem != constants.warningSwap"
                                        data-ng-options="raid as raid.replace('_', '') for raid in getRaidList(installation.nbDiskUse)"
                                        data-ng-model="partition.raid"
                                        data-ng-change="validationRaid(partition)"
                                    >
                                    </select>
                                    <span
                                        class="oui-icon oui-icon-warning-circle"
                                        aria-label="{{ 'server_configuration_installation_ovh_step2_error_raid_diskUse_icon' | translate }}"
                                        data-ng-show="partition.hasWarning && !isSetPartition(partition)"
                                        data-oui-tooltip="{{:: 'server_configuration_installation_ovh_step2_error_raid_diskUse_icon' | translate }}"
                                        data-oui-tooltip-placement="top"
                                    >
                                    </span>
                                    <span
                                        class="oui-icon oui-icon-warning-circle"
                                        aria-label="{{ 'server_configuration_installation_ovh_step2_error_raid_0' | translate }}"
                                        data-ng-show="!partition.hasWarning && !isSetPartition(partition) && partition.raid == constants.warningRaid0"
                                        data-oui-tooltip="{{:: 'server_configuration_installation_ovh_step2_error_raid_0' | translate }}"
                                        data-oui-tooltip-placement="top"
                                    >
                                    </span>
                                </td>
                                <td
                                    class="form-group"
                                    data-ng-class="{
                                        'has-error': isSetPartition(partition) && hasErrorSize()
                                    }"
                                >
                                    <span
                                        data-ng-hide="isSetPartition(partition) || partition.fileSystem != constants.warningSwap"
                                        data-ng-bind="installation.nbDiskUse"
                                    >
                                    </span>
                                    <span
                                        data-ng-hide="isSetPartition(partition) || partition.fileSystem != constants.warningSwap"
                                    >
                                        x
                                    </span>
                                    <span
                                        data-ng-hide="isSetPartition(partition) || partition.fileSystem != constants.warningSwap"
                                        data-ng-bind="getDisplaySize(partition.partitionSize)"
                                    >
                                    </span>

                                    <span
                                        data-ng-hide="isSetPartition(partition) || partition.fileSystem == constants.warningSwap"
                                        data-ng-bind="getDisplaySize(partition.partitionSize)"
                                    >
                                    </span>
                                    <div class="input-group">
                                        <span
                                            class="input-group-btn"
                                            data-ng-show="isSetPartition(partition)"
                                        >
                                            <button
                                                type="button"
                                                class="btn btn-default"
                                                data-ng-click="getFullSize(partition)"
                                                title="{{ 'server_configuration_installation_ovh_step2_remaining_size_button' | translate }}"
                                            >
                                                <span
                                                    class="fa fa-expand"
                                                    aria-hidden="true"
                                                ></span>
                                            </button>
                                        </span>
                                        <input
                                            type="number"
                                            class="form-control"
                                            maxlength="10"
                                            max="9999999999"
                                            data-ng-show="isSetPartition(partition)"
                                            data-ng-model="partition.partitionSize"
                                            data-ng-change="validationSize(partition)"
                                        />
                                        <span
                                            class="input-group-addon"
                                            data-ng-show="isSetPartition(partition)"
                                            data-translate="unit_size_MB"
                                        >
                                        </span>
                                    </div>
                                </td>
                                <td
                                    data-ng-show="installation.nbDiskUse > 1 && !informations.raidController"
                                >
                                    <span
                                        data-ng-hide="isSetPartition(partition)"
                                        data-ng-bind="getRealDisplaySize({partition: partition})"
                                    >
                                    </span>
                                    <span
                                        data-ng-show="isSetPartition(partition)"
                                        data-ng-bind="getRealDisplaySize({
                                              partition: partition,
                                              multiplicator: partition.unit.value
                                          })"
                                    >
                                    </span>
                                </td>
                                <td>
                                    <button
                                        type="button"
                                        class="btn btn-link"
                                        data-ng-hide="setPartition.save || newPartition.display || setPartition.delModel != null"
                                        data-ng-click="!setPartition.save && !newPartition.display && setPartition.delModel == null && displaySetPartition(partition)"
                                    >
                                        <span
                                            class="oui-icon oui-icon-pen_concept"
                                            aria-hidden="true"
                                        ></span>
                                    </button>
                                    <button
                                        type="button"
                                        class="btn btn-link"
                                        data-ng-hide="!partition.canBeDelete || setPartition.save || newPartition.display || setPartition.delModel != null"
                                        data-ng-click="partition.canBeDelete && !setPartition.save && !newPartition.display && setPartition.delModel == null && deletePartition(partition)"
                                    >
                                        <span
                                            class="oui-icon oui-icon-trash_concept"
                                            aria-hidden="true"
                                        ></span>
                                    </button>

                                    <button
                                        type="button"
                                        class="btn btn-link"
                                        data-ng-show="!buttonControl.setInProgress && !buttonControl.displayAddConfirmation && isSetPartition(partition) && !newPartition.display && !errorInst.partitionSizeOver"
                                        data-ng-click="!buttonControl.setInProgress && !buttonControl.displayAddConfirmation && isSetPartition(partition) && !newPartition.display && !errorInst.partitionSizeOver && validSetPartition()"
                                    >
                                        <span
                                            class="oui-icon oui-icon-success"
                                            aria-hidden="true"
                                        ></span>
                                    </button>
                                    <button
                                        type="button"
                                        class="btn btn-link"
                                        data-ng-show="!buttonControl.setInProgress && !buttonControl.displayAddConfirmation && isSetPartition(partition) && !newPartition.display"
                                        data-ng-click="!buttonControl.setInProgress && !buttonControl.displayAddConfirmation && isSetPartition(partition) && !newPartition.display && cancelSetPartition()"
                                    >
                                        <span
                                            class="oui-icon oui-icon-close"
                                            aria-hidden="true"
                                        ></span>
                                    </button>
                                    <oui-spinner
                                        data-ng-show="buttonControl.setInProgress && isSetPartition(partition)"
                                        data-size="s"
                                    >
                                    </oui-spinner>
                                </td>
                            </tr>
                            <tr data-ng-show="newPartition.display">
                                <td
                                    class="form-group"
                                    data-ng-class="{
                                        'has-error': hasErrorOrder()
                                    }"
                                >
                                    <input
                                        type="number"
                                        min="1"
                                        max="99"
                                        class="form-control"
                                        data-ng-model="newPartition.order"
                                        data-ng-change="validationOrder(newPartition)"
                                    />
                                </td>
                                <td
                                    class="form-group"
                                    data-ng-class="{
                                        'has-error': hasErrorType()
                                    }"
                                >
                                    <select
                                        class="form-control"
                                        data-ng-options="type as ('server_configuration_installation_' + type | translate) for type in constants.partitionTypeList"
                                        data-ng-model="newPartition.typePartition"
                                        data-ng-change="validationType(newPartition)"
                                    >
                                    </select>
                                </td>
                                <td
                                    class="form-group"
                                    data-ng-class="{
                                        'has-error': hasErrorFileSystem()
                                    }"
                                >
                                    <span
                                        data-ng-if="constants.fileSystemList.length === 1"
                                        data-ng-model="newPartition.fileSystem"
                                    >
                                    </span>
                                    <select
                                        class="form-control"
                                        data-ng-if="constants.fileSystemList.length !== 1"
                                        data-ng-options="fileSystem as ('server_configuration_installation_' + fileSystem | translate) for fileSystem in constants.fileSystemList"
                                        data-ng-model="newPartition.fileSystem"
                                        data-ng-change="validationFileSystem(newPartition)"
                                    >
                                    </select>
                                </td>
                                <td
                                    class="form-group"
                                    data-ng-class="{
                                        'has-error': hasErrorMountPoint()
                                    }"
                                >
                                    <input
                                        type="text"
                                        class="form-control"
                                        data-ng-model="newPartition.mountPoint"
                                        data-ng-required="true"
                                        data-ng-change="validationMountPoint(newPartition)"
                                        data-ng-disabled="!validation.hasSwap && newPartition.fileSystem == constants.warningSwap"
                                    />
                                </td>
                                <td
                                    class="form-group"
                                    data-ng-class="{
                                        'has-error': hasErrorVolumeName()
                                    }"
                                >
                                    <span
                                        data-ng-show="newPartition.typePartition != constants.warningLV"
                                    >
                                        -
                                    </span>
                                    <input
                                        type="text"
                                        class="form-control"
                                        data-ng-show="newPartition.typePartition == constants.warningLV"
                                        data-ng-model="newPartition.volumeName"
                                        data-ng-change="validationVolumeName(newPartition)"
                                        data-ng-disabled="newPartition.typePartition != constants.warningLV"
                                    />
                                </td>
                                <td
                                    class="form-group"
                                    data-ng-show="installation.nbDiskUse > 1 && !informations.raidController"
                                    data-ng-class="{
                                        'has-error': hasErrorRaid()
                                    }"
                                >
                                    <select
                                        class="form-control"
                                        data-ng-options="raid as raid.replace('_','') for raid in getRaidList(installation.nbDiskUse)"
                                        data-ng-model="newPartition.raid"
                                        data-ng-change="validationRaid(newPartition)"
                                    >
                                    </select>
                                </td>
                                <td
                                    class="form-group"
                                    data-ng-class="{
                                        'has-error': hasErrorSize()
                                    }"
                                >
                                    <div class="input-group">
                                        <span class="input-group-btn">
                                            <button
                                                type="button"
                                                class="btn btn-default"
                                                title="{{ 'server_configuration_installation_ovh_step2_remaining_size_button' | translate }}"
                                                data-ng-click="getFullSize(newPartition)"
                                            >
                                                <span
                                                    class="fa fa-expand"
                                                    aria-hidden="true"
                                                ></span>
                                            </button>
                                        </span>
                                        <input
                                            type="number"
                                            class="form-control"
                                            maxlength="10"
                                            max="9999999999"
                                            data-ng-model="newPartition.partitionSize"
                                            data-ng-change="validationSize(newPartition)"
                                        />
                                        <span
                                            class="input-group-addon"
                                            data-translate="unit_size_MB"
                                        >
                                        </span>
                                    </div>
                                </td>
                                <td
                                    data-ng-show="installation.nbDiskUse > 1 && !informations.raidController"
                                    data-ng-bind="getRealDisplaySize({partition: newPartition, multiplicator: newPartition.unit.value})"
                                ></td>
                                <td>
                                    <button
                                        type="button"
                                        class="btn btn-link"
                                        data-ng-hide="buttonControl.displayAddConfirmation || buttonControl.addInProgress"
                                        data-ng-click="!buttonControl.addInProgress && validAddPartition()"
                                    >
                                        <span
                                            class="oui-icon oui-icon-success"
                                            aria-hidden="true"
                                        ></span>
                                    </button>
                                    <button
                                        type="button"
                                        class="btn btn-link"
                                        data-ng-hide="buttonControl.displayAddConfirmation || buttonControl.addInProgress"
                                        data-ng-click="!buttonControl.addInProgress && cancelAddPartition()"
                                    >
                                        <span
                                            class="oui-icon oui-icon-close"
                                            aria-hidden="true"
                                        ></span>
                                    </button>
                                    <oui-spinner
                                        data-ng-show="buttonControl.addInProgress"
                                        data-size="s"
                                    >
                                    </oui-spinner>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="text-center">
                    <button
                        type="button"
                        class="btn btn-default"
                        data-ng-hide="setPartition.delModel != null || setPartition.save || newPartition.display"
                        data-ng-click="displayNewPartition()"
                        data-ng-disabled="configError.raidDiskUse"
                        data-translate="server_configuration_installation_ovh_step2_add"
                    ></button>
                    <button
                        type="button"
                        class="btn btn-danger"
                        data-ng-show="setPartition.delModel != null"
                        data-ng-click="!buttonControl.deleteInProgress && deleteValidPartition()"
                        data-translate="server_configuration_installation_ovh_step2_del"
                    ></button>
                    <button
                        type="button"
                        class="btn btn-default"
                        data-ng-show="setPartition.delModel != null"
                        data-ng-click="!buttonControl.deleteInProgress && deleteCancelPartition()"
                        data-translate="server_configuration_installation_ovh_step2_del_cancel"
                    ></button>

                    <button
                        type="button"
                        class="btn btn-link"
                        data-ng-show="buttonControl.displayAddConfirmation && !buttonControl.setInProgress && !buttonControl.addInProgress"
                        data-ng-click="validPartition()"
                        data-translate="server_configuration_installation_ovh_step2_raid0_add"
                    ></button>
                    <button
                        type="button"
                        class="btn btn-default"
                        data-ng-show="buttonControl.displayAddConfirmation && !buttonControl.setInProgress && !buttonControl.addInProgress"
                        data-ng-click="!buttonControl.setInProgress && !buttonControl.addInProgress && cancelRaid0Partition()"
                        data-translate="server_configuration_installation_ovh_step2_raid0_cancel"
                    ></button>
                </div>

                <div>
                    <ul>
                        <li data-ng-show="warning.raid0">
                            <i
                                style="margin-right: 5px;"
                                class="icon-warning"
                            ></i
                            ><span
                                class="red"
                                data-translate="server_configuration_installation_ovh_step2_warning_partition_raid0"
                            ></span>
                        </li>
                        <li data-ng-show="errorInst.raid0">
                            <span
                                class="red"
                                data-translate="server_configuration_installation_ovh_step2_error_partition_raid0"
                                data-translate-values="{ t0: newPartition.display && newPartition.mountPoint || installation.partitionSchemeModels[setPartition.indexSet].mountPoint }"
                            ></span>
                        </li>
                        <li data-ng-show="errorInst.partitionSizeToAdd">
                            <span
                                class="red"
                                data-translate="server_configuration_installation_ovh_step2_error_partition_size_min_add"
                            ></span>
                        </li>
                        <li data-ng-show="errorInst.partitionSizeOver">
                            <span
                                class="red"
                                data-translate="server_configuration_installation_ovh_step2_error_partition_size_exceed"
                            ></span>
                        </li>
                        <li data-ng-show="errorInst.order">
                            <span
                                class="red"
                                data-translate="server_configuration_installation_ovh_step2_error_partition_order"
                            ></span>
                        </li>
                        <li data-ng-show="errorInst.orderFirst">
                            <span
                                class="red"
                                data-translate="server_configuration_installation_ovh_step2_error_partition_order_first"
                            ></span>
                        </li>
                        <li data-ng-show="errorInst.orderFirstWin">
                            <span
                                class="red"
                                data-translate="server_configuration_installation_ovh_step2_error_partition_order_first_win"
                            ></span>
                        </li>
                        <li data-ng-show="errorInst.typePrimary">
                            <span
                                class="red"
                                data-translate="server_configuration_installation_ovh_step2_error_partition_type_primary"
                            ></span>
                        </li>
                        <li data-ng-show="errorInst.volumeNameEmpty">
                            <span
                                class="red"
                                data-translate="server_configuration_installation_ovh_step2_error_partition_volumename_empty"
                            ></span>
                        </li>
                        <li data-ng-show="errorInst.volumeName">
                            <span
                                class="red"
                                data-translate="server_configuration_installation_ovh_step2_error_partition_volumename_wrong"
                            ></span>
                        </li>
                        <li data-ng-show="errorInst.volumeNameUse">
                            <span
                                class="red"
                                data-translate="server_configuration_installation_ovh_step2_error_partition_volumename_use"
                            ></span>
                        </li>
                        <li data-ng-show="errorInst.mountPointEmpty">
                            <span
                                class="red"
                                data-translate="server_configuration_installation_ovh_step2_error_partition_mountPoint_empty"
                            ></span>
                        </li>
                        <li data-ng-show="errorInst.mountPointUse">
                            <span
                                class="red"
                                data-translate="server_configuration_installation_ovh_step2_error_partition_mountPoint_use"
                            ></span>
                        </li>
                        <li data-ng-show="errorInst.mountPoint">
                            <span
                                class="red"
                                data-translate="server_configuration_installation_ovh_step2_error_partition_mountPoint_wrong"
                            ></span>
                        </li>
                        <li data-ng-show="errorInst.mountPoint2">
                            <span
                                class="red"
                                data-translate="server_configuration_installation_ovh_step2_error_partition_mountPoint_wrong2"
                            ></span>
                        </li>
                        <li data-ng-show="errorInst.mountPointPrimary">
                            <span
                                class="red"
                                data-translate="server_configuration_installation_ovh_step2_error_partition_mountPoint_primary"
                            ></span>
                        </li>
                        <li data-ng-show="errorInst.mountPointWindows">
                            <span
                                class="red"
                                data-translate="server_configuration_installation_ovh_step2_error_partition_mountPoint_windows"
                            ></span>
                        </li>
                        <li data-ng-show="errorInst.fileSystemSwap">
                            <span
                                class="red"
                                data-translate="server_configuration_installation_ovh_step2_error_partition_file_system_swap"
                            ></span>
                        </li>
                        <li data-ng-show="errorInst.fileSystemNoSwap">
                            <span
                                class="red"
                                data-translate="server_configuration_installation_ovh_step2_error_partition_file_system_no_swap"
                            ></span>
                        </li>
                        <li data-ng-show="errorInst.partitionSizeSwap">
                            <span
                                class="red"
                                data-translate="server_configuration_installation_ovh_step2_error_partition_size_swap"
                                data-translate-values="{ t0: getDisplaySize(constants.maxSizeSwap) }"
                            ></span>
                        </li>
                        <li data-ng-show="errorInst.partitionSize">
                            <span
                                class="red"
                                data-translate="server_configuration_installation_ovh_step2_error_partition_size_max"
                                data-translate-values="{ t0: getDisplaySize(constants.maxSizePartition) }"
                            ></span>
                        </li>
                        <li data-ng-show="errorInst.partitionSizeWindows">
                            <span
                                class="red"
                                data-translate="server_configuration_installation_ovh_step2_error_partition_size_min_windows"
                                data-translate-values="{ t0: getDisplaySize(constants.minSizeWindows) }"
                            ></span>
                        </li>
                        <li data-ng-show="errorInst.partitionSizeReiserfs">
                            <span
                                class="red"
                                data-translate="server_configuration_installation_ovh_step2_error_partition_size_min_reiserfs"
                                data-translate-values="{ t0: getDisplaySize(constants.minSizeReiserfs) }"
                            ></span>
                        </li>
                        <li data-ng-show="errorInst.partitionSizeBoot">
                            <span
                                class="red"
                                data-translate="server_configuration_installation_ovh_step2_error_partition_size_min_boot"
                                data-translate-values="{ t0: getDisplaySize(constants.minSizeBoot) }"
                            ></span>
                        </li>
                        <li data-ng-show="errorInst.partitionSizeMin">
                            <span
                                class="red"
                                data-translate="server_configuration_installation_ovh_step2_error_partition_size_min"
                                data-translate-values="{ t0: getDisplaySize(constants.minSizePartition) }"
                            ></span>
                        </li>
                        <li data-ng-show="errorInst.orderType">
                            <span
                                class="red"
                                data-translate="server_configuration_installation_ovh_step2_error_partition_type_order"
                            ></span>
                        </li>
                        <li data-ng-show="errorInst.typeLvSwap">
                            <span
                                class="red"
                                data-translate="server_configuration_installation_ovh_step2_error_partition_type_lv_swap"
                            ></span>
                        </li>
                        <li data-ng-show="errorInst.typeLogicalLv">
                            <span
                                class="red"
                                data-translate="server_configuration_installation_ovh_step2_error_partition_type_logical_lv"
                            ></span>
                        </li>
                        <li data-ng-show="errorInst.raidLv">
                            <span
                                class="red"
                                data-translate="server_configuration_installation_ovh_step2_error_partition_raid_LV"
                            ></span>
                        </li>
                        <li data-ng-show="configError.raidDiskUse">
                            <span
                                class="red"
                                data-translate="server_configuration_installation_ovh_step2_error_raid_diskUse"
                            ></span>
                        </li>
                        <li data-ng-show="errorInst.ws">
                            <span
                                class="red"
                                data-ng-bind-html="errorInst.ws"
                            ></span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div
            data-wizard-step
            data-wizard-step-valid="!errorInst.ws
                                     && !configError.raidDiskUse
                                     && installation.options.validForm
                                     && !loader.loading"
            data-wizard-step-on-previous="checkCustomPrevFinal"
            data-wizard-step-on-load="checkIntegrity"
        >
            <div class="text-center" data-ng-if="loader.loading">
                <oui-spinner></oui-spinner>
            </div>
            <div data-ng-if="!loader.loading">
                <p
                    data-translate="server_configuration_installation_ovh_step3_info"
                ></p>

                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th scope="col">
                                    <span
                                        class="icon-question-sign icon-white"
                                        data-oui-tooltip="{{:: 'server_configuration_installation_ovh_step2_available_order_help' | translate }}"
                                        data-oui-tooltip-placement="right"
                                    >
                                    </span>
                                </th>
                                <th
                                    scope="col"
                                    data-translate="server_configuration_installation_ovh_step2_type"
                                ></th>
                                <th
                                    scope="col"
                                    data-translate="server_configuration_installation_ovh_step2_file_system"
                                ></th>
                                <th
                                    scope="col"
                                    data-translate="server_configuration_installation_ovh_step2_mount_point"
                                ></th>
                                <th
                                    scope="col"
                                    data-translate="server_configuration_installation_ovh_step2_volume_name"
                                ></th>
                                <th
                                    scope="col"
                                    data-ng-if="installation.nbDiskUse > 1 && !informations.raidController"
                                >
                                    <span
                                        data-translate="server_configuration_installation_ovh_step2_raid"
                                    ></span>
                                    <span
                                        class="icon-question-sign icon-white"
                                        data-oui-tooltip="{{:: 'server_configuration_installation_ovh_step2_raid_help' | translate }}"
                                        data-oui-tooltip-placement="left"
                                    >
                                    </span>
                                </th>
                                <th scope="col">
                                    <span
                                        data-translate="server_configuration_installation_ovh_step2_available_size"
                                    ></span>
                                    <span
                                        class="icon-question-sign icon-white"
                                        data-oui-tooltip="{{:: 'server_configuration_installation_ovh_step2_available_size_help' | translate }}"
                                        data-oui-tooltip-placement="left"
                                    >
                                    </span>
                                </th>
                                <th
                                    scope="col"
                                    data-ng-if="installation.nbDiskUse > 1 && !informations.raidController"
                                >
                                    <span
                                        data-translate="server_configuration_installation_ovh_step2_size"
                                    ></span>
                                    <span
                                        class="icon-question-sign icon-white"
                                        data-oui-tooltip="{{:: 'server_configuration_installation_ovh_step2_size_help' | translate }}"
                                        data-oui-tooltip-placement="left"
                                    >
                                    </span>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr
                                data-ng-repeat="partition in installation.partitionSchemeModels | orderBy:'orderTable' track by $index"
                            >
                                <th
                                    scope="row"
                                    data-ng-bind="partition.order"
                                ></th>
                                <td
                                    data-translate="{{ 'server_configuration_installation_' + partition.typePartition }}"
                                ></td>
                                <td
                                    data-translate="{{ 'server_configuration_installation_' + partition.fileSystem }}"
                                ></td>
                                <td data-ng-bind="partition.mountPoint"></td>
                                <td>
                                    <span
                                        data-ng-if="partition.typePartition != constants.warningLV"
                                    >
                                        -
                                    </span>
                                    <span
                                        data-ng-if="partition.typePartition == constants.warningLV"
                                        data-ng-bind="partition.volumeName"
                                    >
                                    </span>
                                </td>
                                <td
                                    data-ng-if="installation.nbDiskUse > 1 && !informations.raidController"
                                >
                                    <span
                                        data-ng-if="partition.fileSystem == constants.warningSwap"
                                    >
                                        -
                                    </span>
                                    <span
                                        data-ng-if="partition.fileSystem != constants.warningSwap"
                                        data-ng-bind="partition.raid.replace('_', '')"
                                    >
                                    </span>
                                    <span
                                        class="icon-warning"
                                        data-ng-if="partition.hasWarning"
                                        data-oui-tooltip="{{:: 'server_configuration_installation_ovh_step2_error_raid_diskUse_icon' | translate }}"
                                        data-oui-tooltip-placement="top"
                                    >
                                    </span>
                                </td>
                                <td>
                                    <span
                                        data-ng-if="partition.fileSystem == constants.warningSwap"
                                        data-ng-bind="installation.nbDiskUse"
                                    >
                                    </span>
                                    <span
                                        data-ng-if="partition.fileSystem == constants.warningSwap"
                                    >
                                        x
                                    </span>
                                    <span
                                        data-ng-if="partition.fileSystem == constants.warningSwap"
                                        data-ng-bind="getDisplaySize(partition.partitionSize)"
                                    >
                                    </span>
                                    <span
                                        data-ng-if="partition.fileSystem != constants.warningSwap"
                                        data-ng-bind="getDisplaySize(partition.partitionSize)"
                                    >
                                    </span>
                                </td>
                                <td
                                    data-ng-if="installation.nbDiskUse > 1 && !informations.raidController"
                                    data-ng-bind="getRealDisplaySize({ partition: partition })"
                                ></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="mt-4">
                    <h5
                        data-translate="server_configuration_installation_resume"
                    ></h5>
                    <dl>
                        <dt
                            data-translate="server_configuration_installation_ovh_step3_server"
                        ></dt>
                        <dd data-ng-bind="constants.server.name"></dd>
                        <dt
                            data-translate="server_configuration_installation_ovh_step3_os"
                        ></dt>
                        <dd
                            data-ng-bind="installation.selectDistribution.displayName"
                        ></dd>
                        <dt
                            data-translate="server_configuration_installation_ovh_step3_lang"
                        ></dt>
                        <dd data-ng-bind="installation.selectLanguage"></dd>
                        <dt
                            data-translate="server_configuration_installation_ovh_step3_disk_group"
                        ></dt>
                        <dd
                            data-ng-bind="installation.diskGroup.description"
                        ></dd>
                        <dt
                            data-translate="server_configuration_installation_ovh_step3_custom"
                        ></dt>
                        <dd>
                            <span
                                data-ng-if="installation.customInstall"
                                data-translate="wizard_yes"
                            >
                            </span>
                            <span
                                data-ng-if="!installation.customInstall"
                                data-translate="wizard_no"
                            >
                            </span>
                        </dd>
                    </dl>

                    <div data-ng-if="installation.hardwareRaid.raid">
                        <h5
                            data-translate="server_configuration_installation_resume_hardwareRaid"
                        ></h5>
                        <dl>
                            <dt
                                data-translate="server_configuration_installation_ovh_stephardraid_label_controllers"
                            ></dt>
                            <dd
                                data-ng-bind="installation.hardwareRaid.controller.model + ' (' + installation.hardwareRaid.controller.type + ')'"
                            ></dd>
                            <dt
                                data-translate="server_configuration_installation_ovh_stephardraid_label_disks"
                            ></dt>
                            <dd
                                data-ng-bind="installation.hardwareRaid.disks"
                            ></dd>
                            <dt
                                data-translate="server_configuration_installation_ovh_stephardraid_label_raid"
                            ></dt>
                            <dd
                                data-ng-bind="installation.hardwareRaid.raid"
                            ></dd>
                        </dl>
                    </div>

                    <!-- installRTM -->
                    <div
                        data-ng-if="isRtmAvailable && installation.selectDistribution.supportsRTM"
                        class="mb-3"
                    >
                        <h5
                            class="mb-0"
                            data-translate="server_configuration_installation_form_rtm"
                        ></h5>

                        <p>
                            <span
                                data-translate="server_configuration_installation_form_rtm_explain"
                            ></span>
                            <a
                                data-ng-href="{{ ::rtmGuideLink }}"
                                target="_blank"
                                rel="noopener"
                                data-track-on="click"
                                data-track-name="dedicated::dedicated::server::system-install::public-catalog::rtm-documentation"
                                data-track-type="action"
                            >
                                <span
                                    data-translate="server_configuration_installation_form_rtm_explain_link_name"
                                ></span>
                            </a>
                        </p>

                        <oui-switch
                            data-model="installation.options.installRTM"
                            data-id="installRTM"
                            data-name="installRTM"
                            data-disabled="$ctrl.loaders.launchInstall"
                        >
                        </oui-switch>
                        <label
                            for="installRTM"
                            class="d-inline-block"
                            data-translate="{{ !installation.options.installRTM ? 'server_configuration_installation_form_rtm_deactivated' : 'server_configuration_installation_form_rtm_activated' }}"
                        >
                        </label>
                    </div>

                    <h5
                        data-translate="server_configuration_installation_form_option"
                    ></h5>
                    <form
                        id="optionForm"
                        name="optionForm"
                        data-ng-controller="ServerInstallationFormCtrl"
                    >
                        <!-- saveGabarit -->
                        <label>
                            <span
                                data-translate="server_configuration_installation_ovh_step3_saveGabarit"
                            ></span>
                            <span
                                class="fa fa-question-circle"
                                aria-label="{{ 'server_configuration_installation_ovh_step3_saveGabarit_help' | translate }}"
                                data-oui-tooltip="{{:: 'server_configuration_installation_ovh_step3_saveGabarit_help' | translate }}"
                                data-oui-tooltip-placement="right"
                            >
                            </span>
                        </label>
                        <oui-switch
                            id="saveGabarit"
                            name="saveGabarit"
                            data-model="installation.options.saveGabarit"
                            data-on-change="nameGabaritValidator()"
                        ></oui-switch>

                        <!-- gabaritNameSave -->
                        <div
                            class="form-group"
                            data-ng-show="installation.options.saveGabarit == true"
                            data-ng-class="{
                                 'has-error': optionForm.gabaritNameSave.$invalid && optionForm.$dirty
                             }"
                        >
                            <label
                                for="gabaritNameSave"
                                class="control-label"
                                data-translate="server_configuration_installation_form_gabaritNameSave"
                            >
                            </label>
                            <input
                                type="text"
                                class="form-control"
                                id="gabaritNameSave"
                                name="gabaritNameSave"
                                data-ng-model="installation.options.gabaritNameSave"
                                data-ng-change="nameGabaritValidator()"
                                data-ng-required="installation.options.saveGabarit"
                                data-ng-trim="true"
                            />
                            <span
                                class="help-block"
                                role="alert"
                                data-ng-if="optionForm.gabaritNameSave.$invalid && optionForm.$dirty"
                                data-translate="server_configuration_installation_form_gabaritNameSave_pattern"
                            >
                            </span>
                        </div>

                        <!-- variablePartition -->
                        <div
                            class="form-group"
                            data-ng-show="installation.customInstall && installation.options.saveGabarit == true && installation.variablePartition != null"
                        >
                            <label
                                for="variablePartition"
                                class="control-label"
                            >
                                <span
                                    data-translate="server_configuration_installation_ovh_step3_partiton_variable"
                                ></span
                                >&nbsp;
                                <span
                                    class="icon-warning"
                                    data-oui-tooltip="{{:: 'server_configuration_installation_ovh_step3_partiton_variable_help' | translate }}"
                                    data-oui-tooltip-placement="right"
                                >
                                </span>
                            </label>
                            <select
                                class="form-control"
                                id="variablePartition"
                                data-ng-options="partition as partition.mountPoint for partition in getMountPoint()"
                                data-ng-model="installation.options.variablePartition"
                            >
                                <option
                                    value
                                    data-ng-bind=":: 'server_configuration_installation_ovh_step3_partiton_none' | translate"
                                >
                                </option>
                            </select>
                        </div>

                        <!-- changeLog -->
                        <div
                            class="form-group"
                            data-ng-show="installation.options.saveGabarit == true"
                        >
                            <label
                                for="changeLog"
                                class="control-label"
                                data-translate="server_configuration_installation_form_changeLog"
                            >
                            </label>
                            <textarea
                                class="form-control"
                                id="changeLog"
                                name="changeLog"
                                rows="1"
                                data-ng-model="installation.options.changeLog"
                            >
                            </textarea>
                        </div>

                        <!-- customHostname -->
                        <div
                            class="form-group"
                            data-ng-class="{
                                'has-error': optionForm.customHostname.$invalid && optionForm.$dirty
                            }"
                        >
                            <label
                                for="customHostname"
                                class="control-label"
                                data-translate="server_configuration_installation_form_customHostname"
                            >
                            </label>
                            <input
                                type="text"
                                class="form-control"
                                id="customHostname"
                                name="customHostname"
                                data-ng-model="installation.options.customHostname"
                                data-ng-pattern="/^[a-zA-Z0-9._-]{1,50}$/"
                                data-ng-trim="true"
                            />
                            <span
                                class="help-block"
                                role="alert"
                                data-ng-if="optionForm.customHostname.$invalid && optionForm.$dirty"
                                data-translate="server_configuration_installation_form_customHostname_pattern"
                            >
                            </span>
                        </div>

                        <!-- postInstallationScriptLink -->
                        <div
                            class="form-group"
                            data-ng-class="{
                                 'has-error': optionForm.postInstallationScriptLink.$invalid && optionForm.$dirty
                             }"
                        >
                            <label
                                for="postInstallationScriptLink"
                                class="control-label"
                            >
                                <span
                                    data-translate="server_configuration_installation_form_postInstallationScriptLink"
                                ></span
                                >&nbsp;
                                <span
                                    class="fa fa-question-circle"
                                    data-oui-tooltip="{{:: 'server_configuration_installation_form_postInstallationScriptLink_help' | translate }}"
                                    data-oui-tooltip-placement="right"
                                >
                                </span>
                            </label>
                            <input
                                type="text"
                                name="postInstallationScriptLink"
                                id="postInstallationScriptLink"
                                class="form-control"
                                data-ng-model="installation.options.postInstallationScriptLink"
                                data-ng-change="postInstallationScriptLinkValidator()"
                                data-ng-trim="true"
                            />
                            <span
                                class="help-block"
                                role="alert"
                                data-ng-if="optionForm.postInstallationScriptLink.$invalid && optionForm.$dirty"
                            >
                                <span
                                    data-ng-if="value"
                                    data-ng-repeat="(error, value) in optionForm.postInstallationScriptLink.$error"
                                >
                                    {{
                                    ('server_configuration_installation_form_postInstallationScriptLink_'
                                    + error) | ducTranslateAlt: error }}
                                </span>
                            </span>
                        </div>

                        <!-- postInstallationScriptReturn -->
                        <div
                            class="form-group"
                            data-ng-show="installation.options.postInstallationScriptLink != null && installation.options.postInstallationScriptLink != ''"
                        >
                            <label
                                for="postInstallationScriptReturn"
                                class="control-label"
                            >
                                <span
                                    data-translate="server_configuration_installation_form_postInstallationScriptLinkReturn"
                                ></span>
                                <span
                                    class="fa fa-question-circle"
                                    data-oui-tooltip="{{:: 'server_configuration_installation_form_postInstallationScriptLinkReturn_help' | translate }}"
                                    data-oui-tooltip-placement="right"
                                >
                                </span>
                            </label>
                            <input
                                type="text"
                                class="form-control"
                                id="postInstallationScriptReturn"
                                name="postInstallationScriptReturn"
                                data-ng-model="installation.options.postInstallationScriptReturn"
                                data-ng-trim="true"
                            />
                        </div>

                        <!-- useDistributionKernel -->
                        <div
                            class="checkbox"
                            data-ng-show="installation.selectDistribution.supportsDistributionKernel"
                        >
                            <label>
                                <input
                                    type="checkbox"
                                    data-ng-model="installation.options.useDistributionKernel"
                                />
                                <span
                                    data-translate="server_configuration_installation_form_useDistribKernel"
                                ></span>
                            </label>
                        </div>

                        <!-- installSqlServer -->
                        <div
                            class="checkbox"
                            data-ng-show="installation.selectDistribution.supportsSqlServer"
                        >
                            <label>
                                <input
                                    type="checkbox"
                                    data-ng-model="installation.options.installSqlServer"
                                />
                                <span
                                    data-translate="server_configuration_installation_form_installSqlServer"
                                ></span>
                            </label>
                        </div>

                        <!-- useSpla -->
                        <div
                            class="checkbox"
                            data-ng-show="installation.selectDistribution.family == constants.warningWindows"
                        >
                            <label>
                                <input
                                    type="checkbox"
                                    data-ng-model="installation.options.useSpla"
                                />
                                <span
                                    data-translate="server_configuration_installation_form_useSpla"
                                ></span>
                            </label>
                        </div>

                        <!-- sshKeyName -->
                        <div
                            class="form-group"
                            data-ng-hide="installation.selectDistribution.family == constants.warningWindows"
                        >
                            <label for="sshKeyName" class="control-label">
                                <span
                                    data-translate="server_configuration_installation_form_ssh"
                                ></span
                                >&nbsp;
                                <span
                                    class="fa fa-question-circle"
                                    data-oui-tooltip="{{:: 'server_configuration_installation_form_ssh_help' | translate }}"
                                    data-oui-tooltip-placement="right"
                                >
                                </span>
                            </label>
                            <select
                                class="form-control"
                                id="sshKeyName"
                                name="sshKeyName"
                                data-ng-if="!sshList.error"
                                data-ng-options="sskkey for sskkey in sshList.model"
                                data-ng-model="installation.options.sshKeyName"
                            >
                                <option
                                    value
                                    data-translate="server_configuration_installation_form_ssh_no"
                                >
                                </option>
                            </select>
                            <p
                                class="form-control-static text-danger"
                                data-ng-if="sshList.error"
                                data-translate="server_configuration_installation_form_ssh_fail"
                            ></p>
                        </div>

                        <!-- nbDisk -->
                        <div
                            class="form-group"
                            data-ng-show="informations.nbDisk > 1 && !installation.customInstall"
                        >
                            <label
                                for="nbDiskUse"
                                class="control-label"
                                data-translate="server_configuration_installation_form_nbdisk"
                            >
                            </label>
                            <select
                                class="form-control"
                                id="nbDiskUse"
                                name="nbDiskUse"
                                data-ng-options="nbdisk as nbdisk for nbdisk in getNbDisqueList(informations.nbDisk)"
                                data-ng-model="installation.nbDiskUse"
                                data-ng-disabled="installation.noPartitioning"
                            >
                            </select>
                        </div>

                        <div
                            data-ng-if="configError.raidDiskUse || (installation.options.variablePartition && installation.options.saveGabarit)"
                        >
                            <p
                                class="text-danger"
                                data-ng-if="configError.raidDiskUse"
                                data-translate="server_configuration_installation_ovh_step2_error_raid_diskUse"
                            ></p>
                            <p
                                class="text-danger"
                                data-ng-if="installation.options.variablePartition && installation.options.saveGabarit"
                                data-translate="server_configuration_installation_ovh_step3_partiton_variable_info"
                                data-translate-values="{ t0: installation.options.variablePartition.mountPoint }"
                            ></p>
                        </div>
                    </form>
                </div>
                <div data-ng-if="errorInst.ws">
                    <p class="text-danger" data-ng-bind-html="errorInst.ws"></p>
                    <p
                        data-ng-if="errorInst.ws"
                        data-translate="server_configuration_installation_ovh_step3_error_integrity_info"
                    ></p>
                </div>
                <p
                    class="text-danger"
                    data-ng-if="errorInst.wsinstall"
                    data-ng-bind-html="errorInst.wsinstall"
                ></p>
            </div>
        </div>
    </div>
</div>
