<section class="telephony-group-fax-consumption-outgoing-calls">
    <div class="widget-presentation">
        <header class="widget-presentation-header">
            <h2
                class="widget-presentation-title"
                data-translate="telephony_service_consumption_outgoing_fax_all"
            ></h2>
        </header>

        <tuc-toast-message></tuc-toast-message>

        <p
            data-translate="telephony_service_consumption_outgoing_fax_period"
            data-translate-values="{
               start: $ctrl.period.start.format('DD/MM/YYYY'),
               end: $ctrl.period.end.format('DD/MM/YYYY')
           }"
        ></p>
        <p
            data-ng-if="$ctrl.consumption.raw.length"
            data-translate="telephony_service_consumption_outgoing_fax_summary"
            data-translate-values="{
               fax: $ctrl.consumption.raw.length,
               pages: $ctrl.consumption.pagesSum,
               price: $ctrl.consumption.priceSum
           }"
        ></p>
        <div class="text-right" data-ng-if="$ctrl.consumption.raw.length">
            <button
                class="btn btn-default"
                type="button"
                data-ng-click="$ctrl.toggleShowFilter()"
            >
                <i
                    data-ng-if="!$ctrl.consumption.showFilter"
                    class="ovh-font ovh-font-search"
                ></i>
                <i
                    data-ng-if="$ctrl.consumption.showFilter"
                    class="ovh-font ovh-font-wrong"
                ></i>
                <span class="ml-1" data-translate="common_search"></span>
            </button>
        </div>
        <div class="mt-2" data-ng-if="$ctrl.consumption.showFilter">
            <div class="row">
                <div class="col-sm-4 col-sm-offset-8">
                    <div class="input-group">
                        <span class="input-group-addon">
                            <i class="ovh-font ovh-font-phone"></i>
                        </span>
                        <input
                            class="form-control"
                            type="text"
                            data-ng-model="$ctrl.consumption.filterBy.called"
                            data-ng-change="$ctrl.applySorting()"
                            placeholder="{{:: 'telephony_service_consumption_destination' | translate }}"
                            autofocus
                        />
                    </div>
                </div>
            </div>
        </div>

        <oui-datagrid data-rows="$ctrl.consumption.sorted">
            <oui-datagrid-column
                data-title="'telephony_service_consumption_date' | translate"
                data-property="creationDatetime"
                data-sortable="desc"
            >
                <span
                    data-ng-bind="::$row.creationDatetime | date: 'dd/MM/yyyy'"
                ></span>
                <span
                    data-ng-bind="::$row.creationDatetime | date: 'HH:mm:ss'"
                ></span>
            </oui-datagrid-column>

            <oui-datagrid-column
                data-title="'telephony_service_consumption_outgoing_fax_pages' | translate"
                data-property="pages"
            >
                <span data-ng-bind="$row.pages"></span>
            </oui-datagrid-column>

            <oui-datagrid-column
                data-title="'telephony_service_consumption_type' | translate"
                data-property="wayType"
                data-sortable
            >
                <span
                    data-ng-bind="::'telephony_service_consumption_type_' + $row.wayType | translate"
                ></span>
            </oui-datagrid-column>

            <oui-datagrid-column
                data-title="'telephony_service_consumption_destination' | translate"
                data-property="called"
                data-sortable
            >
                <span data-ng-bind="::$row.called"></span>
            </oui-datagrid-column>

            <oui-datagrid-column
                data-title="'telephony_service_consumption_price_ht' | translate"
                data-property="priceWithoutTax.value"
                data-sortable
            >
                <span data-ng-bind="::$row.priceWithoutTax.text || '-'"></span>
            </oui-datagrid-column>
        </oui-datagrid>
    </div>
    <!-- /.widget-presentation -->
</section>
<!-- /.telephony-group-fax-consumption-outgoing-calls -->
