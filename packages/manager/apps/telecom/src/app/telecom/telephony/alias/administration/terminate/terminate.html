<section class="telephony-group-alias-redirect">
    <header>
        <oui-back-button
            data-state="telecom.telephony.billingAccount.alias.details.dashboard"
        >
            <span
                data-translate="telephony_alias_administration_terminate_title"
            ></span>
        </oui-back-button>
    </header>

    <div class="text-center" data-ng-if="$ctrl.isLoading">
        <oui-spinner></oui-spinner>
    </div>

    <div data-ng-if="!$ctrl.isLoading">
        <tuc-toast-message></tuc-toast-message>

        <h3
            data-translate="telephony_alias_administration_terminate_info_subtitle"
        ></h3>
        <oui-message type="info">
            <p
                data-translate="telephony_alias_administration_terminate_info1"
            ></p>
            <p
                data-translate="telephony_alias_administration_terminate_info2"
            ></p>
            <p
                data-translate="telephony_alias_administration_terminate_info3"
            ></p>
        </oui-message>

        <oui-message
            data-type="warning"
            data-ng-if="$ctrl.isSvaWalletFeatureAvailable && $ctrl.isSpecialNumber"
        >
            <p
                data-translate="telephony_alias_administration_terminate_sva_warning"
            ></p>

            <a class="oui-link_icon" data-ng-href="{{$ctrl.svaWalletLink}}">
                <span
                    data-translate="telephony_alias_administration_terminate_sva_warning_link"
                ></span>
                <span
                    class="oui-icon oui-icon-arrow-right"
                    aria-hidden="true"
                ></span>
            </a>
        </oui-message>

        <h3
            data-translate="telephony_alias_administration_terminate_subtitle"
        ></h3>

        <div data-ng-if="$ctrl.task">
            <p class="text-danger">
                <i
                    class="ovh-font ovh-font-warning mr-1"
                    aria-hidden="true"
                ></i>
                <span
                    data-translate="telephony_alias_administration_terminate_warning"
                    data-translate-values="{
                        number: ($ctrl.number.serviceName | tucPhoneNumber),
                        date: ($ctrl.task.executionDate | date)
                    }"
                >
                </span>
            </p>
            <button
                type="button"
                class="btn btn-default"
                data-ng-disabled="$ctrl.isCancelling"
                data-ng-click="$ctrl.cancelTermination()"
            >
                <oui-spinner
                    class="mr-2"
                    data-ng-if="$ctrl.isCancelling"
                    data-size="s"
                >
                </oui-spinner>
                <span
                    data-translate="telephony_alias_administration_cancel_termination"
                ></span>
            </button>
        </div>
        <form data-ng-if="!$ctrl.task">
            <span
                data-translate="telephony_alias_administration_terminate_info5"
            ></span>
            <strong
                data-ng-if="$ctrl.number.partOfPool"
                data-ng-bind="$ctrl.number.partOfPool"
            >
            </strong>
            <div class="text-danger" data-ng-if="$ctrl.number.partOfPool">
                <i
                    class="ovh-font ovh-font-warning mr-1"
                    aria-hidden="true"
                ></i>
                <span
                    data-translate="telephony_alias_administration_terminate_pool_warning"
                ></span>
            </div>
            <strong
                data-ng-if="!$ctrl.number.partOfPool"
                data-ng-bind="$ctrl.number.serviceName | tucPhoneNumber"
            >
            </strong>
            <p
                data-translate="telephony_alias_administration_terminate_info4"
            ></p>
            <div class="form-group">
                <select
                    class="form-control"
                    required
                    data-ng-model="$ctrl.reason"
                    data-ng-disabled="$ctrl.isTerminating"
                    data-ng-options="('telephony_alias_administration_terminate_reason_' + reason | translate) for reason in $ctrl.reasonEnum"
                >
                    <option
                        value=""
                        data-translate="telephony_alias_administration_terminate_reason"
                        disabled
                    ></option>
                </select>
            </div>
            <div
                class="form-group"
                data-ng-if="$ctrl.reason === 'missingOptions' || $ctrl.reason === 'other'"
            >
                <textarea
                    class="form-control"
                    rows="5"
                    data-ng-disabled="$ctrl.isTerminating"
                    data-ng-model="$ctrl.details"
                    data-translate-attr="{ 'placeholder': 'telephony_alias_administration_terminate_details' }"
                >
                </textarea>
            </div>
            <button
                type="button"
                class="btn btn-default"
                data-ng-disabled="!$ctrl.hasValidReason() || $ctrl.isTerminating"
                data-ng-click="$ctrl.terminate()"
            >
                <oui-spinner
                    class="mr-2"
                    data-ng-if="$ctrl.isTerminating"
                    data-size="s"
                >
                </oui-spinner>
                <span
                    data-translate="telephony_alias_administration_terminate"
                ></span>
            </button>
        </form>
    </div>
</section>
<!-- /.telephony-group-alias-redirect -->
