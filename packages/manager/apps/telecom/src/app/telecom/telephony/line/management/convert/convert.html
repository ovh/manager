<section class="telecom-telephony-line-management-convert">
    <header>
        <tuc-section-back-link
            data-tuc-section-back-link-to-state="telecom.telephony.billingAccount.line.dashboard"
            data-tuc-section-back-link-title="{{ 'telephony_group_line_section_back_link' | translate }}"
        >
        </tuc-section-back-link>
        <h1 data-translate="telephony_line_convert_title"></h1>
    </header>
</section>

<tuc-toast-message></tuc-toast-message>

<div class="text-center" data-ng-if="LineConvertCtrl.isLoading">
    <oui-spinner></oui-spinner>
</div>

<div class="row" data-ng-if="!LineConvertCtrl.isLoading">
    <div class="col-md-6 widget-presentation">
        <header class="widget-presentation-header">
            <h2
                class="widget-presentation-title"
                data-translate="telephony_line_convert_info_title"
            ></h2>
        </header>
        <p data-translate="telephony_line_convert_info1"></p>
        <p data-translate="telephony_line_convert_info2"></p>
        <p class="mb-2" data-translate="telephony_line_convert_info3"></p>
    </div>
</div>
<div class="row" data-ng-if="!LineConvertCtrl.isLoading">
    <div class="col-md-6 widget-presentation">
        <header class="widget-presentation-header">
            <h2
                class="widget-presentation-title"
                data-translate="telephony_line_convert_title"
            ></h2>
        </header>
        <p class="text-danger" data-ng-if="LineConvertCtrl.task">
            <i class="ovh-font ovh-font-warning mr-1"></i>
            <span
                data-translate="telephony_line_convert_warning"
                data-translate-values="{ line: (LineConvertCtrl.line.serviceName | tucPhoneNumber), date: (LineConvertCtrl.task.executionDate | date) }"
            ></span>
        </p>

        <tuc-telephony-bulk-action
            data-billing-account="{{ LineConvertCtrl.line.billingAccount }}"
            data-service-name="{{ LineConvertCtrl.line.serviceName }}"
            data-custom-class="link d-block pl-0 mb-3"
            data-bulk-infos="LineConvertCtrl.bulkDatas.infos"
            data-filter-services="LineConvertCtrl.filterServices"
            data-on-success="LineConvertCtrl.onBulkSuccess"
            data-on-error="LineConvertCtrl.onBulkError"
        >
        </tuc-telephony-bulk-action>

        <div data-ng-if="!LineConvertCtrl.task">
            <button
                type="button"
                class="btn btn-primary"
                data-ng-disabled="LineConvertCtrl.isInXdslPack || LineConvertCtrl.isConverting"
                data-ng-click="LineConvertCtrl.convertToNumber()"
            >
                <oui-spinner
                    class="mr-2"
                    data-ng-if="LineConvertCtrl.isConverting"
                    data-size="s"
                >
                </oui-spinner>
                <span
                    data-translate="telephony_line_convert_convert"
                    data-translate-values="{ line: (LineConvertCtrl.line.serviceName | tucPhoneNumber) }"
                >
                </span>
            </button>
        </div>

        <div data-ng-if="LineConvertCtrl.task">
            <button
                type="button"
                class="btn btn-default"
                data-ng-disabled="LineConvertCtrl.isCancelling"
                data-ng-click="LineConvertCtrl.cancelConvertToNumber()"
            >
                <oui-spinner
                    class="mr-2"
                    data-ng-if="LineConvertCtrl.isCancelling"
                    data-size="s"
                >
                </oui-spinner>
                <span
                    data-translate="telephony_line_convert_cancel_convert"
                ></span>
            </button>
        </div>
    </div>
</div>
