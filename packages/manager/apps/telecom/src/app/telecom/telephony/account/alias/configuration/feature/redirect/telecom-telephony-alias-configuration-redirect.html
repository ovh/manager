<oui-spinner data-ng-if="$ctrl.loading"></oui-spinner>

<div data-ng-if="!$ctrl.loading">
    <h3
        class="oui-heading_underline"
        data-translate="telephony_alias_config_redirect_incoming_calls_heading"
    ></h3>
    <dl>
        <dt
            data-translate="telephony_alias_config_redirect_line_to_redirect"
        ></dt>
        <dd
            data-ng-if="!$ctrl.newDestination"
            data-ng-bind="$ctrl.destination ? $ctrl.destination.description : ('common_none' | translate)"
        ></dd>
        <dd
            data-ng-if="$ctrl.newDestination"
            data-ng-bind="$ctrl.newDestination.description"
        ></dd>
    </dl>
    <button
        class="oui-button oui-button_secondary oui-button_icon-left"
        data-voip-service-choice-popover="{
                popoverPlacement: 'right auto',
                popoverClass: 'telephony-service-choice-popover pretty-popover',
                popoverAppendToBody: true,
                popoverIsOpen: false
            }"
        data-available-types="['sip', 'trunk', 'plugAndFax', 'fax']"
        data-on-choice-validated="$ctrl.setNewDestination()"
        data-on-choice-cancel=""
    >
        <span class="oui-icon oui-icon-add" aria-hidden="true"></span>
        <span
            data-translate="{{ $ctrl.newDestination ? 'telephony_alias_config_redirect_change_line' : 'telephony_alias_config_redirect_select_line' }}"
        ></span>
    </button>
    <small
        class="d-block my-2"
        data-translate="telephony_alias_config_redirect_alert_forbidden_surcharged_number"
    ></small>
    <span
        data-translate="telephony_alias_config_redirect_convert_to_ccs_helper"
    ></span>
    <a
        class="oui-link"
        data-ui-sref="telecom.telephony.billingAccount.alias.configuration.changeType"
        data-translate="telephony_alias_config_change_type_label_contactCenterSolution"
    >
    </a>
    <div class="my-5" data-ng-if="$ctrl.canDestinationBeUsedForPresentation()">
        <h3 class="oui-heading_underline">
            <span
                data-translate="telephony_alias_config_redirect_outgoing_calls_heading"
            ></span>
            <small
                data-translate="telephony_alias_config_redirect_optionnal"
            ></small>
        </h3>
        <oui-checkbox data-model="$ctrl.destinationUsedAsPresentation">
            <span
                data-translate="telephony_alias_config_sip_line_activate_presentation"
            ></span>
        </oui-checkbox>
        <small
            data-translate="telephony_alias_config_sip_line_activate_presentation_warning"
        ></small>
    </div>

    <div class="my-5">
        <oui-button
            data-variant="secondary"
            data-on-click="$ctrl.$state.go('^')"
        >
            <span data-translate="cancel"></span>
        </oui-button>
        <oui-button
            data-variant="primary"
            data-on-click="$ctrl.updateRedirection()"
            data-disabled="!$ctrl.canUpdateRedirection()"
        >
            <span data-translate="submit"></span>
        </oui-button>
    </div>
</div>
