<form
    name="addPhonecontactForm"
    id="addPhonecontactForm"
    data-ng-submit="ContactAddCtrl.add()"
>
    <div class="modal-header">
        <button
            type="button"
            class="close float-right"
            aria-label="{{ ::'cancel' | translate }}"
            data-ng-click="ContactAddCtrl.cancel()"
        >
            <span aria-hidden="true">&times;</span>
        </button>
    </div>

    <div
        class="modal-body"
        data-ng-if="!ContactAddCtrl.phonecontactForm.isAdding && !ContactAddCtrl.phonecontactForm.hasBeenAdded"
    >
        <h3
            class="modal-title"
            data-translate="telephony_phonebook_contact_add"
        ></h3>
        <!-- SURNAME -->
        <div
            class="form-group"
            data-ng-class="{
                 'has-error': addPhonecontactForm.surname.$touched && addPhonecontactForm.surname.$invalid
             }"
        >
            <label
                for="surname"
                class="control-label"
                data-translate="telephony_phonebook_contact_column_surname"
            >
            </label>
            <input
                type="text"
                name="surname"
                id="surname"
                class="form-control"
                autofocus
                required
                data-ng-model="ContactAddCtrl.phonecontactForm.surname"
                data-ng-pattern="/^[\w\s.\-]*$/"
                data-ng-maxlength="246"
                data-translate-attr="{ placeholder: 'telephony_phonebook_contact_add_surname_placeholder' }"
            />
            <span
                class="help-block"
                role="alert"
                data-ng-if="addPhonecontactForm.surname.$touched"
                data-ng-messages="addPhonecontactForm.surname.$error"
            >
                <span
                    data-ng-message="required"
                    data-translate="telephony_phonebook_contact_add_surname_error_required"
                >
                </span>
                <span
                    data-ng-message="pattern"
                    data-translate="telephony_phonebook_contact_add_surname_error_pattern"
                >
                </span>
                <span
                    data-ng-message="maxlength"
                    data-translate="telephony_phonebook_contact_add_surname_error_maxlength"
                >
                </span>
            </span>
        </div>

        <!-- NAME -->
        <div
            class="form-group"
            data-ng-class="{
                 'has-error': addPhonecontactForm.name.$touched && addPhonecontactForm.name.$invalid
             }"
        >
            <label
                for="name"
                class="control-label"
                data-translate="telephony_phonebook_contact_column_name"
            >
            </label>
            <input
                type="text"
                name="name"
                id="name"
                class="form-control"
                required
                data-ng-model="ContactAddCtrl.phonecontactForm.name"
                data-ng-pattern="/^[\w\s.\-]*$/"
                data-ng-maxlength="246"
                data-translate-attr="{ placeholder: 'telephony_phonebook_contact_add_name_placeholder' }"
            />
            <span
                class="help-block"
                role="alert"
                data-ng-if="addPhonecontactForm.name.$touched"
                data-ng-messages="addPhonecontactForm.name.$error"
            >
                <span
                    data-ng-message="required"
                    data-translate="telephony_phonebook_contact_add_name_error_required"
                >
                </span>
                <span
                    data-ng-message="pattern"
                    data-translate="telephony_phonebook_contact_add_name_error_pattern"
                >
                </span>
                <span
                    data-ng-message="maxlength"
                    data-translate="telephony_phonebook_contact_add_name_error_maxlength"
                >
                </span>
            </span>
        </div>

        <!-- GROUP -->
        <div
            class="form-group"
            data-ng-class="{
                 'has-error': addPhonecontactForm.group.$touched && addPhonecontactForm.group.$invalid
             }"
        >
            <label
                for="group"
                class="control-label"
                data-translate="telephony_phonebook_contact_column_group"
            >
            </label>
            <div
                data-ng-class="{ 'input-group': ContactAddCtrl.groupsAvailable.length }"
            >
                <input
                    type="text"
                    name="group"
                    id="group"
                    class="form-control"
                    data-ng-model="ContactAddCtrl.phonecontactForm.group"
                    data-ng-maxlength="50"
                    data-ng-pattern="/^[\w\s.\-]*$/"
                    data-translate-attr="{ placeholder: 'telephony_phonebook_contact_column_group' }"
                />
                <div
                    class="input-group-btn"
                    style="width: auto;"
                    data-uib-dropdown
                    data-ng-if="ContactAddCtrl.groupsAvailable.length"
                >
                    <button
                        type="button"
                        class="btn btn-default w-100"
                        data-uib-dropdown-toggle
                    >
                        <span
                            data-translate="telephony_phonebook_contact_add_group_select"
                        ></span>
                        <i
                            class="ovh-font ovh-font-select-arrow-down ml-1"
                            aria-hidden="true"
                        ></i>
                    </button>
                    <ul
                        class="dropdown-menu dropdown-menu-right w-100"
                        role="menu"
                        data-uib-dropdown-menu
                    >
                        <li
                            role="menuitem"
                            data-ng-repeat="group in ContactAddCtrl.groupsAvailable | orderBy:'' track by $index"
                        >
                            <a
                                href="#"
                                data-ng-click="ContactAddCtrl.setGroup($event, group)"
                                data-ng-bind="group"
                                data-translate-attr="{ 'title': group }"
                            >
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            <span
                class="help-block"
                role="alert"
                data-ng-if="addPhonecontactForm.group.$touched"
                data-ng-messages="addPhonecontactForm.group.$error"
            >
                <span
                    data-ng-message="pattern"
                    data-translate="telephony_phonebook_contact_add_group_error_pattern"
                >
                </span>
                <span
                    data-ng-message="maxlength"
                    data-translate="telephony_phonebook_contact_add_group_error_maxlength"
                >
                </span>
            </span>
        </div>

        <h5 class="mt-3 text-info">
            <i class="ovh-font ovh-font-info mr-1" aria-hidden="true"></i>
            <span
                data-translate="telephony_phonebook_contact_add_error_numbers"
            ></span>
        </h5>

        <div class="row">
            <div class="col-xs-12 col-sm-6">
                <!-- HOMEPHONE -->
                <div
                    class="form-group"
                    data-ng-class="{
                         'has-error': addPhonecontactForm.homePhone.$touched && addPhonecontactForm.homePhone.$invalid
                     }"
                >
                    <label
                        for="homePhone"
                        class="control-label"
                        data-translate="telephony_phonebook_contact_column_home_phone"
                    >
                    </label>
                    <input
                        type="text"
                        name="homePhone"
                        id="homePhone"
                        class="form-control"
                        data-ng-model="ContactAddCtrl.phonecontactForm.homePhone"
                        data-ng-change="ContactAddCtrl.handleContactPhoneNumber()"
                        data-ui-validate="{ phoneNumber: 'ContactAddCtrl.isValidNumber($value)' }"
                        data-translate-attr="{ placeholder: 'telephony_phonebook_contact_column_home_phone_title' }"
                    />
                    <span
                        class="help-block"
                        role="alert"
                        data-ng-if="addPhonecontactForm.homePhone.$touched"
                        data-ng-messages="addPhonecontactForm.homePhone.$error"
                    >
                        <span
                            data-ng-message="phoneNumber"
                            data-translate="telephony_phonebook_contact_add_error_phonenumber"
                        >
                        </span>
                    </span>
                </div>
            </div>
            <div class="col-xs-12 col-sm-6">
                <!-- HOMEMOBILE -->
                <div
                    class="form-group"
                    data-ng-class="{
                         'has-error': addPhonecontactForm.homeMobile.$touched && addPhonecontactForm.homeMobile.$invalid
                     }"
                >
                    <label
                        for="homeMobile"
                        class="control-label"
                        data-translate="telephony_phonebook_contact_column_home_mobile"
                    >
                    </label>
                    <input
                        type="text"
                        name="homeMobile"
                        id="homeMobile"
                        class="form-control"
                        data-ng-model="ContactAddCtrl.phonecontactForm.homeMobile"
                        data-ng-change="ContactAddCtrl.handleContactPhoneNumber()"
                        data-ui-validate="{ phoneNumber: 'ContactAddCtrl.isValidNumber($value)' }"
                        data-translate-attr="{ placeholder: 'telephony_phonebook_contact_column_home_mobile_title' }"
                    />
                    <span
                        class="help-block"
                        role="alert"
                        data-ng-if="addPhonecontactForm.homeMobile.$touched"
                        data-ng-messages="addPhonecontactForm.homeMobile.$error"
                    >
                        <span
                            data-ng-message="phoneNumber"
                            data-translate="telephony_phonebook_contact_add_error_phonenumber"
                        >
                        </span>
                    </span>
                </div>
            </div>
        </div>
        <!-- .row -->

        <div class="row">
            <div class="col-xs-12 col-sm-6">
                <!-- WORKPHONE -->
                <div
                    class="form-group"
                    data-ng-class="{
                         'has-error': addPhonecontactForm.workPhone.$touched && addPhonecontactForm.workPhone.$invalid
                     }"
                >
                    <label
                        for="workPhone"
                        class="control-label"
                        data-translate="telephony_phonebook_contact_column_work_phone"
                    >
                    </label>
                    <input
                        type="text"
                        name="workPhone"
                        id="workPhone"
                        class="form-control"
                        data-ng-model="ContactAddCtrl.phonecontactForm.workPhone"
                        data-ng-change="ContactAddCtrl.handleContactPhoneNumber()"
                        data-ui-validate="{ phoneNumber: 'ContactAddCtrl.isValidNumber($value)' }"
                        data-translate-attr="{ placeholder: 'telephony_phonebook_contact_column_work_phone_title' }"
                    />
                    <span
                        class="help-block"
                        role="alert"
                        data-ng-if="addPhonecontactForm.workPhone.$touched"
                        data-ng-messages="addPhonecontactForm.workPhone.$error"
                    >
                        <span
                            data-ng-message="phoneNumber"
                            data-translate="telephony_phonebook_contact_add_error_phonenumber"
                        >
                        </span>
                    </span>
                </div>
            </div>
            <div class="col-xs-12 col-sm-6">
                <!-- WORKMOBILE -->
                <div
                    class="form-group"
                    data-ng-class="{
                         'has-error': addPhonecontactForm.workMobile.$touched && addPhonecontactForm.workMobile.$invalid
                     }"
                >
                    <label
                        for="workMobile"
                        class="control-label"
                        data-translate="telephony_phonebook_contact_column_work_mobile"
                    >
                    </label>
                    <input
                        type="text"
                        name="workMobile"
                        id="workMobile"
                        class="form-control"
                        data-ng-model="ContactAddCtrl.phonecontactForm.workMobile"
                        data-ng-change="ContactAddCtrl.handleContactPhoneNumber()"
                        data-ui-validate="{ phoneNumber: 'ContactAddCtrl.isValidNumber($value)' }"
                        data-translate-attr="{ placeholder: 'telephony_phonebook_contact_column_work_mobile_title' }"
                    />
                    <span
                        class="help-block"
                        role="alert"
                        data-ng-if="addPhonecontactForm.workMobile.$touched"
                        data-ng-messages="addPhonecontactForm.workMobile.$error"
                    >
                        <span
                            data-ng-message="phoneNumber"
                            data-translate="telephony_phonebook_contact_add_error_phonenumber"
                        >
                        </span>
                    </span>
                </div>
            </div>
        </div>
        <!-- .row -->
    </div>
    <!-- .modal-body -->

    <div
        class="modal-body"
        data-ng-if="ContactAddCtrl.phonecontactForm.isAdding"
    >
        <h3
            class="modal-title"
            data-translate="telephony_phonebook_contact_add"
        ></h3>
        <div class="text-center">
            <oui-spinner></oui-spinner>
            <h4 data-translate="telephony_phonebook_contact_adding"></h4>
        </div>
    </div>

    <div
        class="modal-body"
        data-ng-if="ContactAddCtrl.phonecontactForm.hasBeenAdded"
    >
        <h3
            class="modal-title"
            data-translate="telephony_phonebook_contact_add"
        ></h3>
        <tuc-success-drawing-check
            data-draw-success-check="ContactAddCtrl.phonecontactForm.hasBeenAdded"
        >
            <h4 data-translate="telephony_phonebook_contact_added"></h4>
        </tuc-success-drawing-check>
    </div>

    <div class="modal-footer">
        <button
            type="button"
            class="btn btn-default"
            data-ng-click="ContactAddCtrl.cancel()"
            data-translate="cancel"
            data-ng-disabled="ContactAddCtrl.phonecontactForm.isAdding || ContactAddCtrl.phonecontactForm.hasBeenAdded"
        ></button>
        <button
            type="submit"
            class="btn btn-primary"
            data-ng-disabled="addPhonecontactForm.$invalid ||
                              !ContactAddCtrl.handleContactPhoneNumber() ||
                              ContactAddCtrl.phonecontactForm.isAdding ||
                              ContactAddCtrl.phonecontactForm.hasBeenAdded"
            data-translate="submit"
        ></button>
    </div>
</form>
