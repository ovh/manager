<section class="telephony-group-line-voicemail-management">
    <header>
        <tuc-section-back-link
            data-tuc-section-back-link-to-state="telecom.telephony.billingAccount"
            data-tuc-section-back-link-title="{{ 'telephony_alias_portability_order_back_link' | translate }}"
        >
        </tuc-section-back-link>
        <h1 data-translate="telephony_alias_portability_order_title"></h1>
    </header>

    <div class="row">
        <!-- ORDER SUCCESS -->
        <div
            class="col-md-6 widget-presentation"
            data-ng-if="PortabilityOrderCtrl.order.success"
        >
            <header class="widget-presentation-header">
                <h2
                    class="widget-presentation-title"
                    data-translate="telephony_alias_portability_order_order"
                ></h2>
            </header>
            <oui-message
                type="success"
                data-ng-if="!PortabilityOrderCtrl.order.autoPay"
            >
                <span
                    data-translate="telephony_alias_portability_order_success"
                ></span>
                <span
                    data-translate="telephony_alias_portability_order_success_warning"
                ></span>
            </oui-message>
            <!-- BC LINK -->
            <a
                target="_blank"
                class="btn btn-primary"
                rel="noopener"
                data-ng-if="PortabilityOrderCtrl.order.url"
                data-ng-href="{{:: PortabilityOrderCtrl.order.url }}"
            >
                <span
                    data-translate="telephony_alias_portability_order_url"
                ></span>
                <i class="fa fa-external-link" aria-hidden="true"></i>
            </a>
        </div>

        <div
            class="col-md-6 widget-presentation"
            data-ng-if="!PortabilityOrderCtrl.order.success"
        >
            <header class="widget-presentation-header">
                <h2
                    class="widget-presentation-title"
                    data-translate="telephony_alias_portability_order_order"
                ></h2>
            </header>

            <form
                name="PortabilityOrderCtrl.portabilityOrderForm"
                id="form-vertical"
                data-ng-submit="PortabilityOrderCtrl.submitOrder()"
                novalidate
            >
                <div class="form-group">
                    <h3
                        data-translate="telephony_alias_portability_order_step_1"
                    ></h3>
                    <p data-translate="telephony_alias_portability_order_step_1_subtitle"></p>
                </div>
                <!-- TYPE -->
                <oui-field
                    data-label="{{:: 'telephony_alias_portability_order_type' | translate }} - {{:: 'common_field_label_required' | translate }}"
                    data-size="m"
                >
                    <oui-radio-group
                        data-name="orderType"
                        data-model="PortabilityOrderCtrl.isSDA"
                        data-on-change="PortabilityOrderCtrl.onSDATypeChange()"
                        required

                    >
                        <oui-radio value="false">
                            <span
                                data-translate="telephony_alias_portability_order_landline"
                            ></span>
                        </oui-radio>
                        <oui-radio value="true">
                            <span
                                data-translate="telephony_alias_portability_order_sda"
                            ></span>
                        </oui-radio>
                    </oui-radio-group>
                </oui-field>

                <div class="d-flex">

                    <!-- NUMBER -->
                    <oui-field
                        class="col-md-6 pl-0"
                        data-label="{{:: 'telephony_alias_portability_order_callNumber' | translate }} - {{:: 'common_field_label_required' | translate }}"
                        data-error-messages="{ 'required': ('telephony_alias_portability_order_contact_required' | translate), 'pattern': ('telephony_alias_portability_order_callNumber_pattern_error' | translate) }"
                    >
                        <input
                            type="text"
                            id="callNumber"
                            name="callNumber"
                            class="oui-input"
                            data-ng-model="PortabilityOrderCtrl.order.callNumber"
                            data-ng-pattern="PortabilityOrderCtrl.regex.phoneNumber"
                            data-ng-change="PortabilityOrderCtrl.onNumberChange()"
                            required
                        />
                    </oui-field>


                    <!-- RIO -->
                    <oui-field
                        class="col-md-6 pr-0"
                        data-ng-if="PortabilityOrderCtrl.order.callNumber && !PortabilityOrderCtrl.isSDA && PortabilityOrderCtrl.order.country === 'france' && !PortabilityOrderCtrl.isSpecialNumber"
                        data-label="{{:: 'telephony_rio_label' | translate }} - {{:: 'common_field_label_required' | translate }}"
                        data-label-popover="{{:: 'telephony_alias_portability_order_rio_info' | translate }}"
                        data-error-messages="{ 'required': ('telephony_alias_portability_order_contact_required' | translate), 'pattern': ('telephony_alias_portability_order_rio_pattern_error' | translate), 'rioServerError': ('telephony_alias_portability_order_rio_pattern_error' | translate) }"
                    >
                        <input
                            type="text"
                            id="rio"
                            name="rio"
                            class="oui-input"
                            data-ng-model="PortabilityOrderCtrl.order.rio"
                            data-ng-pattern="/^[\w+]{12}$/"
                            data-ng-change="PortabilityOrderCtrl.onRioChange()"
                            required
                        />
                    </oui-field>

                </div>

                <div
                    data-ng-if="PortabilityOrderCtrl.isSpecialNumber && !PortabilityOrderCtrl.canOrderSpecialPortability"
                >
                    <oui-message type="warning">
                        <span
                            data-translate="telephony_alias_portability_order_sda_sva_warning"
                        ></span>
                    </oui-message>
                    <oui-button
                        data-variant="primary"
                        data-size="l"
                        data-on-click="PortabilityOrderCtrl.goToSvaWallet()"
                    >
                        <span
                            data-translate="telephony_alias_portability_order_sda_sva_go_to_kyc"
                        ></span>
                    </oui-button>
                </div>

                <div
                    data-ng-if="!PortabilityOrderCtrl.isSpecialNumber || PortabilityOrderCtrl.canOrderSpecialPortability"
                >
                    <oui-message
                        type="warning"
                        data-ng-if="PortabilityOrderCtrl.isSpecialNumber && !PortabilityOrderCtrl.isSDA"
                    >
                        <span
                            data-translate="telephony_alias_portability_order_sda_warning"
                        ></span>
                    </oui-message>

                    <div
                        class="form-group"
                        data-ng-if="PortabilityOrderCtrl.isSpecialNumber"
                    >
                        <label
                            for="specialNumberCategory"
                            class="control-label"
                            data-translate="telephony_alias_portability_order_number_category"
                        ></label>
                        <select
                            id="specialNumberCategory"
                            class="form-control"
                            name="specialNumberCategory"
                            data-ng-model="PortabilityOrderCtrl.order.specialNumberCategory"
                            data-ng-options="typo.value as typo.label for typo in PortabilityOrderCtrl.typologies[PortabilityOrderCtrl.order.country]"
                        ></select>
                    </div>

                    <div
                        class="form-group"
                        data-ng-if="PortabilityOrderCtrl.isSDA"
                    >
                        <label
                            class="control-label"
                            data-translate="telephony_alias_portability_order_sda_info"
                        >
                        </label>
                        <!-- SDA TYPE -->
                        <oui-radio-group
                            data-name="sdatype"
                            data-model="PortabilityOrderCtrl.order.sdatype"
                            required

                        >
                            <oui-radio value="'all'">
                                <span
                                    data-translate="telephony_alias_portability_order_sda_all"
                                ></span>
                            </oui-radio>
                            <oui-radio value="'select'">
                                <span
                                    data-translate="telephony_alias_portability_order_sda_select"
                                ></span>
                            </oui-radio>
                        </oui-radio-group>

                        <!-- SDA ADD NUMBER -->
                        <div
                            class="form-group"
                            data-ng-if="PortabilityOrderCtrl.order.sdatype === 'select'"
                        >
                            <oui-field
                                data-label="{{:: 'telephony_alias_portability_order_sda_add' | translate }}"
                                class="mt-3"
                            >
                                <input
                                    type="text"
                                    id="sdaNumber"
                                    name="sdaNumber"
                                    class="oui-input"
                                    placeholder="{{:: 'telephony_alias_portability_order_number_international' | translate }}"
                                    data-ng-keyup="$event.key === 'Enter' && PortabilityOrderCtrl.portabilityOrderForm.sdaNumber.$valid ? PortabilityOrderCtrl.addSdaNumber() : null"
                                    data-ng-pattern="/^(00\d\d|\+\d\d)\d{8,}$/"
                                    data-ng-model="PortabilityOrderCtrl.order.sdaNumberToAdd"
                                />
                            </oui-field>
                            <oui-button
                                data-variant="secondary"
                                class="mt-1"
                                data-on-click="PortabilityOrderCtrl.addSdaNumber()"
                                data-disabled="!PortabilityOrderCtrl.order.sdaNumberToAdd || PortabilityOrderCtrl.portabilityOrderForm.sdaNumber.$invalid"
                            >
                                <span data-translate="common_add"></span>
                            </oui-button>

                            <p
                                class="mt-3"
                                data-translate="telephony_alias_portability_order_sda_add_list"
                                data-ng-if="PortabilityOrderCtrl.order.numbersList.length"
                            ></p>

                            <!-- LIST OF ADDED SDA NUMBERS -->
                            <ul>
                                <li
                                    data-ng-repeat="number in PortabilityOrderCtrl.order.numbersList"
                                >
                                    <span
                                        class="align-middle"
                                        data-ng-bind="number"
                                    >
                                    </span>
                                    <button
                                        type="button"
                                        class="btn btn-link"
                                        data-ng-click="PortabilityOrderCtrl.removeSdaNumber(number)"
                                    >
                                        <i class="ovh-font ovh-font-wrong"></i>
                                    </button>
                                </li>
                            </ul>
                            <span
                                class="help-block"
                                role="alert"
                                data-ng-if="PortabilityOrderCtrl.portabilityOrderForm.$submitted && PortabilityOrderCtrl.order.sdatype === 'select' && PortabilityOrderCtrl.order.numbersList.length === 0"
                            >
                                <span
                                    data-translate="telephony_alias_portability_order_sda_numbers_required"
                                ></span>
                            </span>
                        </div>
                    </div>
                    <!-- sda -->

                    <!-- PORTABILITY DATE -->
                    <div class="form-group">
                        <label
                            class="control-label"
                            data-translate="telephony_alias_portability_order_desireDate"
                        >
                        </label>
                        <oui-radio-group
                            data-name="desireDateType"
                            data-model="PortabilityOrderCtrl.order.executeAsSoonAsPossible"
                            required

                        >
                            <oui-radio value="true">
                                <span
                                    data-translate="telephony_alias_portability_order_desireDate_sooner"
                                ></span>
                            </oui-radio>
                            <oui-radio value="false">
                                <span
                                    data-translate="telephony_alias_portability_order_desireDate_custom"
                                ></span>
                            </oui-radio>
                        </oui-radio-group>
                        <div
                            class="input-group date-picker-input mt-4"
                            data-ng-if="!PortabilityOrderCtrl.order.executeAsSoonAsPossible"
                        >
                            <input
                                id="desireDate"
                                name="desireDate"
                                class="form-control input-block"
                                data-uib-datepicker-popup="dd/MM/yyyy"
                                data-datepicker-options="PortabilityOrderCtrl.datePickerOptions"
                                data-ui-validate=""
                                data-show-button-bar="false"
                                data-is-open="PortabilityOrderCtrl.desireDatePickerOpened"
                                data-ng-focus="PortabilityOrderCtrl.openDesireDatePicker($event)"
                                data-current-text="{{:: 'today' | translate }}"
                                data-clear-text="{{:: 'reset' | translate }}"
                                data-close-text="{{:: 'close' | translate }}"
                                data-ng-model="PortabilityOrderCtrl.order.desireDate"
                                required
                            />
                            <span class="input-group-btn">
                                <button
                                    type="button"
                                    class="btn btn-link"
                                    data-ng-click="PortabilityOrderCtrl.openDesireDatePicker($event)"
                                >
                                    <i class="fa fa-calendar"></i>
                                </button>
                            </span>
                        </div>
                        <span
                            class="help-block"
                            role="alert"
                            data-ng-if="PortabilityOrderCtrl.portabilityOrderForm.desireDate.$touched"
                            data-ng-messages="PortabilityOrderCtrl.portabilityOrderForm.desireDate.$error"
                        >
                            <span
                                data-ng-message="required"
                                data-translate="telephony_alias_portability_order_contact_required"
                            ></span>
                        </span>
                    </div>
                </div>

                <!-- CONTACT SECTION -->
                <div class="form-group">
                    <hr />
                    <h3
                        data-translate="telephony_alias_portability_order_step_2"
                    ></h3>
                    <p data-translate="telephony_alias_portability_order_step_2_subtitle"></p>
                </div>

                <div class="form-group">
                    <oui-message type="info">
                        <span
                            data-translate="telephony_alias_portability_order_contact_help"
                        ></span>
                    </oui-message>
                    <oui-message
                        type="error"
                        data-ng-if="PortabilityOrderCtrl.order.addressTooLong"
                    >
                        <span
                            data-translate="telephony_alias_portability_order_address_too_long"
                        ></span>
                    </oui-message>
                </div>

                <!-- SOCIAL REASON -->
                <div class="form-group">
                    <label
                        for="socialReason"
                        class="control-label"
                        data-translate="telephony_alias_portability_order_contact_social_reason"
                    ></label>
                    <select
                        id="socialReason"
                        name="socialReason"
                        class="form-control"
                        data-ng-disabled="PortabilityOrderCtrl.isSDA"
                        data-ng-model="PortabilityOrderCtrl.order.socialReason"
                    >
                        <option
                            value="individual"
                            data-translate="telephony_alias_portability_order_contact_social_reason_individual"
                        ></option>
                        <option
                            value="corporation"
                            data-translate="telephony_alias_portability_order_contact_social_reason_corporation"
                        ></option>
                    </select>
                </div>

                <div
                    class="d-flex"
                    data-ng-if="PortabilityOrderCtrl.order.socialReason === 'individual'"
                >
                    <!-- LAST NAME -->
                    <div
                        class="col-md-6 pl-0"
                        data-ng-class="{ 'has-error': PortabilityOrderCtrl.portabilityOrderForm.name.$invalid && PortabilityOrderCtrl.portabilityOrderForm.name.$touched }"
                    >
                        <oui-field
                            data-label="{{:: 'telephony_alias_portability_order_contact_lastname' | translate }} - {{:: 'common_field_label_required' | translate }}"
                            data-error-messages="{ 'required': ('telephony_alias_portability_order_contact_required' | translate) }"
                        >
                            <input
                                type="text"
                                id="lastName"
                                name="name"
                                class="oui-input"
                                data-ng-model="PortabilityOrderCtrl.order.name"
                                required
                            />
                        </oui-field>
                    </div>

                    <div
                        class="col-md-6 pr-0"
                        data-ng-class="{ 'has-error': PortabilityOrderCtrl.portabilityOrderForm.firstName.$invalid && PortabilityOrderCtrl.portabilityOrderForm.firstName.$touched }"
                    >
                        <oui-field
                            data-label="{{:: 'telephony_alias_portability_order_contact_firstname' | translate }} - {{:: 'common_field_label_required' | translate }}"
                            data-error-messages="{ 'required': ('telephony_alias_portability_order_contact_required' | translate) }"
                        >
                            <input
                                type="text"
                                id="firstName"
                                name="firstName"
                                class="oui-input"
                                data-ng-model="PortabilityOrderCtrl.order.firstName"
                                required
                            />
                        </oui-field>
                    </div>
                </div>

                <div
                    class="d-flex"
                    data-ng-if="PortabilityOrderCtrl.order.socialReason === 'corporation'"
                >
                    <!-- SIRET -->
                    <div class="col-md-6 pl-0">
                        <oui-field
                            data-label="{{:: 'telephony_alias_portability_order_contact_siret' | translate }} - {{:: 'common_field_label_required' | translate }}"
                            data-error-messages="{ 'required': ('telephony_alias_portability_order_contact_required' | translate) }"
                        >
                            <input
                                type="text"
                                id="companyId"
                                name="siret"
                                class="oui-input"
                                data-ng-model="PortabilityOrderCtrl.order.siret"
                                data-ng-change="PortabilityOrderCtrl.onSiretChange()"
                                required
                            />
                        </oui-field>
                    </div>

                    <!-- COMPANY NAME -->
                    <div
                        class="col-md-6 pr-0"
                        data-ng-class="{ 'has-error': PortabilityOrderCtrl.portabilityOrderForm.name.$invalid && PortabilityOrderCtrl.portabilityOrderForm.name.$touched }"
                    >
                        <oui-field
                            data-label="{{:: 'telephony_alias_portability_order_contact_corporation_name' | translate }} - {{:: 'common_field_label_required' | translate }}"
                            data-error-messages="{ 'required': ('telephony_alias_portability_order_contact_required' | translate) }"
                        >
                            <input
                                type="text"
                                id="name"
                                name="name"
                                class="oui-input"
                                data-ng-model="PortabilityOrderCtrl.order.name"
                                required
                            />
                        </oui-field>
                    </div>
                </div>

                <oui-field
                    data-label="{{:: 'telephony_alias_portability_order_contact_gsm' | translate }}"
                    data-label-popover="{{:: 'telephony_alias_portability_order_contact_gsm_help' | translate }}"
                >
                    <input
                        type="text"
                        id="contactNumber"
                        name="contactNumber"
                        class="oui-input"
                        data-ng-model="PortabilityOrderCtrl.order.contactNumber"
                    />
                </oui-field>

                <!-- CONTACT NUMBER -->
                <div class="form-group">
                    <hr />
                    <h3
                        data-translate="telephony_alias_portability_order_step_3"
                    ></h3>
                    <p data-translate="telephony_alias_portability_order_step_3_subtitle"></p>
                </div>
                <div
                    class="form-group"
                    data-ng-class="{ 'has-error': PortabilityOrderCtrl.portabilityOrderForm.country.$invalid && PortabilityOrderCtrl.portabilityOrderForm.country.$touched }"
                >
                    <oui-field
                        data-label="{{:: 'telephony_alias_portability_order_contact_country' | translate }} - {{:: 'common_field_label_required' | translate }}"
                        data-error-messages="{ 'required': ('telephony_alias_portability_order_contact_required' | translate) }"
                    >
                        <input
                            type="text"
                            id="country"
                            name="country"
                            class="oui-input"
                            data-ng-model="PortabilityOrderCtrl.order.translatedCountry"
                            disabled
                            required
                        />
                    </oui-field>
                </div>

                <div class="d-flex">
                    <div class="col-md-6 pl-0">
                        <oui-field
                            data-label="{{:: 'telephony_alias_portability_order_contact_zip' | translate }} - {{:: 'common_field_label_required' | translate }}"
                            data-error-messages="{ 'required': ('telephony_alias_portability_order_contact_required' | translate), 'pattern': ('telephony_alias_portability_order_contact_zip_pattern_error' | translate) }"
                        >
                            <input
                                type="text"
                                id="zip"
                                name="zip"
                                class="oui-input"
                                data-ng-pattern="/^\d+$/"
                                data-ng-change="PortabilityOrderCtrl.onZipcodeChange()"
                                data-ng-model="PortabilityOrderCtrl.order.zip"
                                required
                            />
                        </oui-field>
                    </div>

                    <!-- CITY -->
                    <div
                        class="col-md-6 pr-0"
                        data-ng-class="{ 'has-error': PortabilityOrderCtrl.portabilityOrderForm.city.$invalid && PortabilityOrderCtrl.portabilityOrderForm.city.$touched }"
                    >
                        <oui-field
                            data-label="{{:: 'telephony_alias_portability_order_contact_city' | translate }} - {{:: 'common_field_label_required' | translate }}"
                            data-error-messages="{ 'required': ('telephony_alias_portability_order_contact_required' | translate) }"
                        >
                            <input
                                type="text"
                                id="city"
                                name="city"
                                class="oui-input"
                                data-ng-if="!PortabilityOrderCtrl.autoCompleteCity || PortabilityOrderCtrl.autoCompleteCity.length===0"
                                data-ng-model="PortabilityOrderCtrl.order.city"
                                required
                            />
                            <oui-select
                                data-ng-if="PortabilityOrderCtrl.autoCompleteCity.length > 0"
                                match="name"
                                id="citySelect"
                                items="PortabilityOrderCtrl.autoCompleteCity"
                                model="PortabilityOrderCtrl.order.city"
                                data-on-change="PortabilityOrderCtrl.onCityNameChange(modelValue)"
                                name="city"
                                required
                                searchable
                            ></oui-select>
                        </oui-field>
                    </div>
                </div>

                <div class="d-flex">
                    <div class="col-md-6 pl-0">
                        <oui-field
                            data-label="{{:: 'telephony_alias_portability_order_contact_street_number' | translate }} - {{:: 'common_field_label_required' | translate }}"
                            data-error-messages="{ 'required': ('telephony_alias_portability_order_contact_required' | translate), 'pattern': ('telephony_alias_portability_order_contact_street_number_pattern_error' | translate) }"
                        >
                            <input
                                type="number"
                                id="streetNumber"
                                name="streetNumber"
                                class="oui-input"
                                data-ng-model="PortabilityOrderCtrl.order.streetNumber"
                                data-ng-pattern="/^[0-9]+$/"
                                required
                            />
                        </oui-field>
                    </div>

                    <!-- STREET NUMBER EXTRA -->
                    <div
                        class="col-md-6 pr-0"
                        data-ng-class="{ 'has-error': PortabilityOrderCtrl.portabilityOrderForm.streetNumberExtra.$invalid && PortabilityOrderCtrl.portabilityOrderForm.streetNumberExtra.$touched }"
                    >
                        <label
                            for="streetNumberExtra"
                            class="control-label"
                            data-translate="telephony_alias_portability_order_contact_street_number_extra"
                        ></label>
                        <oui-select
                            id="streetNumberExtra"
                            name="streetNumberExtra"
                            class="text-uppercase"
                            model="PortabilityOrderCtrl.order.streetNumberExtra"
                            items="PortabilityOrderCtrl.streetNumberExtraEnum"
                            match="key"
                        ></oui-select>
                    </div>
                </div>

                <div class="d-flex">
                    <!-- STREET TYPE -->
                    <div
                        class="col-md-6 pl-0"
                        data-ng-class="{ 'has-error': PortabilityOrderCtrl.portabilityOrderForm.streetType.$invalid && PortabilityOrderCtrl.portabilityOrderForm.streetType.$touched }"
                        data-ng-if="!PortabilityOrderCtrl.autoCompleteStreetName || PortabilityOrderCtrl.autoCompleteStreetName.length===0"
                    >
                        <oui-field
                            data-label="{{:: 'telephony_alias_portability_order_contact_street_type' | translate }} - {{:: 'common_field_label_required' | translate }}"
                            data-error-messages="{ 'required': ('telephony_alias_portability_order_contact_required' | translate) }"
                        >
                            <input
                                type="text"
                                id="streetType"
                                name="streetType"
                                class="oui-input"
                                data-ng-model="PortabilityOrderCtrl.order.streetType"
                                required
                            />
                        </oui-field>
                    </div>

                    <!-- STREET NAME -->
                    <div
                        data-ng-class="{ 'has-error': PortabilityOrderCtrl.portabilityOrderForm.streetName.$invalid && PortabilityOrderCtrl.portabilityOrderForm.streetName.$touched, 'col-md-6 pr-0': !PortabilityOrderCtrl.autoCompleteStreetName || PortabilityOrderCtrl.autoCompleteStreetName.length===0, 'col-md-12 p-0': PortabilityOrderCtrl.autoCompleteStreetName.length > 0 }"
                    >
                        <oui-field
                            data-label="{{:: 'telephony_alias_portability_order_contact_street_name' | translate }} - {{:: 'common_field_label_required' | translate }}"
                            data-error-messages="{ 'required': ('telephony_alias_portability_order_contact_required' | translate) }"
                        >
                            <input
                                type="text"
                                id="streetName"
                                name="streetName"
                                class="oui-input"
                                data-ng-if="!PortabilityOrderCtrl.autoCompleteStreetName || PortabilityOrderCtrl.autoCompleteStreetName.length===0"
                                data-ng-model="PortabilityOrderCtrl.order.streetName"
                                required
                            />
                            <oui-select
                                data-ng-if="PortabilityOrderCtrl.autoCompleteStreetName.length > 0"
                                match="streetName"
                                items="PortabilityOrderCtrl.autoCompleteStreetName"
                                model="PortabilityOrderCtrl.order.streetName"
                                data-on-change="PortabilityOrderCtrl.onStreetNameChange(modelValue)"
                                name="streetName"
                                required
                                searchable
                            ></oui-select>
                        </oui-field>
                    </div>
                </div>

                <div class="d-flex">
                    <!-- BUILDING-->
                    <div class="col-md-4 pl-0">
                        <oui-field
                            data-label="{{:: 'telephony_alias_portability_order_contact_building' | translate }}"
                        >
                            <input
                                type="text"
                                id="building"
                                name="building"
                                class="oui-input"
                                data-ng-model="PortabilityOrderCtrl.order.building"
                            />
                        </oui-field>
                    </div>

                    <!-- STAIR -->
                    <div class="col-md-4">
                        <oui-field
                            data-label="{{:: 'telephony_alias_portability_order_contact_stair' | translate }}"
                        >
                            <input
                                type="number"
                                id="stair"
                                name="stair"
                                maxlength="2"
                                class="oui-input"
                                data-ng-model="PortabilityOrderCtrl.order.stair"
                            />
                        </oui-field>
                    </div>

                    <!-- FLOOR -->
                    <div class="col-md-4 pr-0">
                        <oui-field
                            data-label="{{:: 'telephony_alias_portability_order_contact_floor' | translate }}"
                        >
                            <input
                                type="number"
                                id="floor"
                                name="floor"
                                class="oui-input"
                                maxlength="2"
                                data-ng-model="PortabilityOrderCtrl.order.floor"
                            />
                        </oui-field>
                    </div>
                </div>

                <!-- DISPLAY UNIVERSAL DIRECTORY -->
                <div class="form-group">
                    <label
                        for="displayUniversalDirectory"
                        class="control-label"
                        data-translate="telephony_alias_portability_order_contact_pj"
                    ></label>
                    <select
                        id="displayUniversalDirectory"
                        name="displayUniversalDirectory"
                        class="form-control text-capitalize"
                        data-ng-model="PortabilityOrderCtrl.order.displayUniversalDirectory"
                        data-ng-options="(i ? 'yes' : 'no' | translate) for i in [true, false]"
                    ></select>
                </div>

                <!--- ADDRESS SECTION -->
                <div class="form-group">
                    <hr />
                    <h3
                        data-translate="telephony_alias_portability_order_step_4"
                    ></h3>
                    <p data-translate="telephony_alias_portability_order_step_4_subtitle"></p>
                </div>
                <!-- BILLING ACCOUNT -->
                <div class="form-group">
                    <label
                        for="billingAccount"
                        class="control-label"
                        data-translate="telephony_alias_portability_order_billing_account"
                    ></label>
                    <select
                        id="billingAccount"
                        name="billingAccount"
                        class="form-control"
                        data-ng-model="PortabilityOrderCtrl.order.billingAccount"
                        data-ng-options="i.billingAccount as (i.description && i.description !== i.billingAccount) ? i.description + ' (' + i.billingAccount + ')' : i.billingAccount for i in PortabilityOrderCtrl.billingAccounts"
                    ></select>
                </div>

                <!-- REDIRECT TO LINE -->
                <div class="form-group">
                    <label
                        class="control-label d-inline-block mr-2"
                        data-translate="telephony_alias_portability_order_redirect_line"
                    ></label>
                    <i
                        class="ovh-font ovh-font-filled-info"
                        data-uib-tooltip="{{:: 'telephony_alias_portability_order_redirect_line_info' | translate }}"
                    ></i>
                    <div
                        data-ng-if="PortabilityOrderCtrl.order.lineToRedirectAliasTo"
                    >
                        <span
                            data-ng-if="PortabilityOrderCtrl.order.lineToRedirectAliasToDescription && PortabilityOrderCtrl.order.lineToRedirectAliasToDescription !== PortabilityOrderCtrl.order.lineToRedirectAliasTo"
                            data-ng-bind="PortabilityOrderCtrl.order.lineToRedirectAliasToDescription"
                        ></span>
                        <span
                            data-ng-bind="PortabilityOrderCtrl.order.lineToRedirectAliasTo"
                        ></span>
                        <button
                            type="button"
                            class="btn btn-link"
                            data-ng-click="PortabilityOrderCtrl.order.lineToRedirectAliasTo = null"
                        >
                            <i class="ovh-font ovh-font-wrong"></i>
                        </button>
                    </div>
                    <div
                        data-ng-if="!PortabilityOrderCtrl.order.lineToRedirectAliasTo"
                    >
                        <button
                            type="button"
                            class="btn btn-default"
                            data-voip-service-choice-popover="{ popoverPlacement: 'right auto', popoverClass: 'telephony-service-choice-popover', popoverAppendToBody: true, popoverIsOpen: false }"
                            data-available-types="['sip', 'trunk']"
                            data-on-choice-validated="PortabilityOrderCtrl.onChooseRedirectToLine"
                            data-on-choice-cancel=""
                        >
                            <span
                                data-translate="telephony_alias_portability_order_redirect_line_choose"
                            ></span>
                        </button>
                    </div>
                </div>

                <!-- PRICES AND CONTRACTS -->
                <div data-ng-if="PortabilityOrderCtrl.details">
                    <div class="form-group">
                        <hr />
                        <h3
                            data-translate="telephony_alias_portability_order_step_5"
                        ></h3>
                    </div>
                    <div class="responsive-table-line">
                        <table class="table table-condensed">
                            <thead>
                                <tr>
                                    <th
                                        scope="col"
                                        data-translate="telephony_alias_portability_order_description"
                                    ></th>
                                    <th
                                        class="text-right-sm"
                                        scope="col"
                                        data-translate="telephony_alias_portability_order_unit_price"
                                        style="width:25%;"
                                    ></th>
                                    <th
                                        class="text-right-sm"
                                        scope="col"
                                        data-translate="telephony_alias_portability_order_quantity"
                                        style="width:12%;"
                                    ></th>
                                    <th
                                        class="text-right-sm"
                                        scope="col"
                                        data-translate="telephony_alias_portability_order_total"
                                        style="width:15%;"
                                    ></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr
                                    data-ng-repeat="detail in PortabilityOrderCtrl.details track by $index"
                                >
                                    <th
                                        scope="row"
                                        data-ng-bind="detail.description"
                                        data-title="{{ :: 'telephony_alias_portability_order_description' | translate }}"
                                    ></th>
                                    <td
                                        class="text-right-sm text-price font-weight-bold"
                                        data-ng-bind="detail.unitPrice.text"
                                        data-title="{{ :: 'telephony_alias_portability_order_unit_price' | translate }}"
                                    ></td>
                                    <td
                                        class="text-right-sm"
                                        data-ng-bind="detail.quantity"
                                        data-title="{{ :: 'telephony_alias_portability_order_quantity' | translate }}"
                                    ></td>
                                    <td
                                        class="text-right-sm text-price font-weight-bold"
                                        data-ng-bind="detail.totalPrice.text"
                                        data-title="{{ :: 'telephony_alias_portability_order_total' | translate }}"
                                    ></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="form-group d-flex mb-3">
                        <div class="col-xs-12 pl-3">
                            <div class="form-group mb-3">
                                <label
                                    class="col-xs-3 control-label text-left p-0"
                                    data-translate="telephony_alias_portability_order_total_tax_free"
                                ></label>
                                <div class="col-xs-9">
                                    <p
                                        class="form-control-static p-0 font-weight-bold text-danger"
                                        data-ng-bind="PortabilityOrderCtrl.prices.withoutTax.text"
                                    ></p>
                                </div>
                            </div>
                        </div>

                        <div class="col-xs-12 pl-3">
                            <div class="form-group">
                                <label
                                    class="col-xs-3 control-label text-left p-0"
                                    data-translate="telephony_alias_portability_order_total_tax"
                                ></label>
                                <div class="col-xs-9">
                                    <p
                                        class="form-control-static font-weight-bold p-0 text-danger"
                                        data-ng-bind="PortabilityOrderCtrl.prices.tax.text"
                                    ></p>
                                </div>
                            </div>
                        </div>

                        <div class="col-xs-12 pl-3">
                            <div class="form-group">
                                <label
                                    class="col-xs-3 control-label text-left p-0"
                                    data-translate="telephony_alias_portability_order_total_with_tax"
                                ></label>
                                <div class="col-xs-9">
                                    <p
                                        class="form-control-static font-weight-bold p-0 text-danger"
                                        data-ng-bind="PortabilityOrderCtrl.prices.withTax.text"
                                    ></p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <ovh-contracts-summary
                        data-items="PortabilityOrderCtrl.contracts"
                        data-model="PortabilityOrderCtrl.order.isContractsAccepted"
                        data-name="telephonyAliasPortabilityOrderContracts"
                    ></ovh-contracts-summary>
                </div>
                <!-- prices and contracts -->

                <div class="form-group">
                    <hr />

                    <oui-button
                        data-variant="primary"
                        data-type="submit"
                        data-disabled="PortabilityOrderCtrl.isSubmitDisabled()"
                    >
                        <oui-spinner
                            class="mr-2"
                            data-ng-if="PortabilityOrderCtrl.order.isOrdering"
                            data-size="s"
                        ></oui-spinner>
                        <span
                            data-ng-if="PortabilityOrderCtrl.details"
                            data-translate="telephony_alias_portability_order_order"
                        ></span>
                        <span
                            data-ng-if="!PortabilityOrderCtrl.details"
                            data-translate="telephony_alias_portability_order_validate"
                        ></span>
                    </oui-button>
                </div>
            </form>
            <tuc-toast-message></tuc-toast-message>
        </div>

        <!-- INFORMATIONS -->
        <div class="col-md-6 widget-presentation">
            <header class="widget-presentation-header">
                <h2
                    class="widget-presentation-title"
                    data-translate="telephony_alias_portability_order_infos_title"
                ></h2>
            </header>
            <oui-message type="info">
                <span
                    data-translate="telephony_alias_portability_order_infos"
                ></span>
                <span
                    data-translate="telephony_alias_portability_order_infos_country"
                ></span>
            </oui-message>
            <oui-message type="warning">
                <span
                    data-translate="telephony_alias_portability_order_warning_1"
                ></span>
                <span
                    data-translate="telephony_alias_portability_order_warning_2"
                ></span>
                <span
                    data-translate="telephony_alias_portability_order_warning_3"
                ></span>
            </oui-message>
        </div>
    </div>
</section>
