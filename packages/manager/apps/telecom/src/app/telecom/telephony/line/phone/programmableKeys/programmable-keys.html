<section class="telecom-telephony-line-phone-programmableKeys">
    <header>
        <tuc-section-back-link
            data-tuc-section-back-link-to-state="telecom.telephony.billingAccount.line.dashboard.phone"
            data-tuc-section-back-link-title="{{ 'telephony_group_line_phone_section_back_link' | translate }}"
        >
        </tuc-section-back-link>
        <h1
            data-ng-if="!ProgrammableKeysCtrl.loading.init && ProgrammableKeysCtrl.line.hasPhone"
            data-translate="telephony_line_phone_programmableKeys_title"
            data-translate-values="{ phone : ProgrammableKeysCtrl.line.phone.description }"
        ></h1>
    </header>

    <div class="text-center" data-ng-if="ProgrammableKeysCtrl.loading.init">
        <oui-spinner></oui-spinner>
    </div>

    <div class="telecom-section-content">
        <tuc-toast-message></tuc-toast-message>

        <div
            class="widget-presentation"
            data-ng-if="ProgrammableKeysCtrl.line.hasPhone && !ProgrammableKeysCtrl.loading.init"
        >
            <h2
                class="widget-presentation-title"
                data-translate="telephony_line_phone_programmableKeys_title_2"
            ></h2>

            <tuc-telephony-bulk-action
                data-billing-account="{{ ProgrammableKeysCtrl.line.billingAccount }}"
                data-service-name="{{ ProgrammableKeysCtrl.line.serviceName }}"
                data-custom-class="link d-block pl-0 mb-3"
                data-bulk-infos="ProgrammableKeysCtrl.bulkDatas.infos"
                data-ng-disabled="ProgrammableKeysCtrl.loading.keys || !ProgrammableKeysCtrl.functionKeys.raw.length"
                data-filter-services="ProgrammableKeysCtrl.filterServices()"
                data-get-bulk-params="ProgrammableKeysCtrl.getBulkParams()"
                data-on-success="ProgrammableKeysCtrl.onBulkSuccess()"
                data-on-error="ProgrammableKeysCtrl.onBulkError()"
            >
            </tuc-telephony-bulk-action>

            <oui-datagrid data-rows="ProgrammableKeysCtrl.functionKeys.raw">
                <oui-datagrid-column
                    data-title="'telephony_line_phone_programmableKeys_keys_title' | translate"
                    data-property="label"
                >
                    <span data-ng-bind="$row.label || '-'"></span>
                </oui-datagrid-column>
                <oui-datagrid-column
                    data-title="'telephony_line_phone_programmableKeys_function_title' | translate"
                >
                    <span
                        data-ng-bind="($row.function && ('telephony_line_phone_programmableKeys_' + $row.function) | translate) || '-'"
                    ></span>
                </oui-datagrid-column>
                <oui-datagrid-column
                    data-title="'telephony_line_phone_programmableKeys_supp_param_title' | translate"
                    data-property="parameter"
                >
                    <span
                        data-ng-bind="$row.parameterLabel || $row.parameter || '-'"
                    ></span>
                </oui-datagrid-column>
                <oui-datagrid-column
                    data-title="'telephony_line_phone_programmableKeys_customLabel_title' | translate"
                    data-property="customLabel"
                >
                    <span data-ng-bind="$row.customLabel || '-'"></span>
                </oui-datagrid-column>

                <oui-action-menu data-compact data-placement="end">
                    <oui-action-menu-item
                        on-click="ProgrammableKeysCtrl.edit($row)"
                    >
                        <span data-translate="edit"></span>
                    </oui-action-menu-item>
                </oui-action-menu>
            </oui-datagrid>
        </div>
        <p
            class="text-danger text-center font-weight-bold"
            data-ng-if="!ProgrammableKeysCtrl.line.hasPhone && !ProgrammableKeysCtrl.loading.init"
            data-translate="telephony_line_phone_programmableKeys_no_phone"
        ></p>
    </div>
    <!-- /.telecom-section-content -->
</section>
<!-- /.telecom-telephony-line-phone-programmableKeys -->
