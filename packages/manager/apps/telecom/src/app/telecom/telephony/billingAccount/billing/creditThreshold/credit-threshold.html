<section class="telephony-account-billing-billing-credit-threshold">
    <header>
        <tuc-section-back-link
            data-tuc-section-back-link-to-state="telecom.telephony.billingAccount.billing"
            data-tuc-section-back-link-title="{{:: 'telephony_group_billing_actions_group_billing_back_link' | translate }}"
        >
        </tuc-section-back-link>
        <h1
            data-translate="telephony_group_billing_credit_threshold_title"
        ></h1>
    </header>

    <div
        class="text-center"
        data-ng-if="BillingAccountCreditThresholdCtrl.loading.init"
    >
        <oui-spinner></oui-spinner>
    </div>

    <div
        data-ng-if="!BillingAccountCreditThresholdCtrl.loading.init && BillingAccountCreditThresholdCtrl.loading.success"
    >
        <tuc-success-drawing-check
            data-draw-success-check="BillingAccountCreditThresholdCtrl.loading.success"
        >
            <h4
                data-translate="telephony_group_billing_credit_threshold_success"
            ></h4>
        </tuc-success-drawing-check>
    </div>

    <div
        data-ng-hide="BillingAccountCreditThresholdCtrl.loading.init || BillingAccountCreditThresholdCtrl.loading.success"
    >
        <tuc-toast-message></tuc-toast-message>

        <div class="row">
            <div class="col-xs-12 col-md-6">
                <form
                    name="creditThresholdForm"
                    data-ng-submit="BillingAccountCreditThresholdCtrl.submit()"
                >
                    <section class="widget-presentation">
                        <header class="widget-presentation-header">
                            <h2
                                class="widget-presentation-title"
                                data-translate="telephony_group_billing_credit_threshold_info_subtitle"
                            ></h2>
                        </header>

                        <div class="form-group">
                            <label
                                class="control-label"
                                data-translate="telephony_group_billing_credit_threshold_credit_threshold"
                            >
                            </label>
                            <p class="form-control-static">
                                <span
                                    data-ng-bind="BillingAccountCreditThresholdCtrl.creditThreshold.text"
                                ></span>
                                <span
                                    class="ml-2"
                                    data-translate="telephony_group_billing_credit_threshold_without_tax"
                                >
                                </span>
                            </p>
                        </div>

                        <div class="form-group">
                            <label
                                class="control-label"
                                data-translate="telephony_group_billing_credit_threshold_allowed_out_plan"
                            >
                            </label>
                            <p class="form-control-static">
                                <span
                                    data-ng-bind="BillingAccountCreditThresholdCtrl.allowedOutplan.text"
                                ></span>
                                <span
                                    class="ml-2"
                                    data-translate="telephony_group_billing_credit_threshold_without_tax"
                                >
                                </span>
                            </p>
                        </div>

                        <div class="form-group">
                            <label
                                class="control-label"
                                data-translate="telephony_group_billing_credit_threshold_current_out_plan"
                            >
                            </label>
                            <p class="form-control-static">
                                <span
                                    data-ng-bind="BillingAccountCreditThresholdCtrl.currentOutplan.text"
                                ></span>
                                <span
                                    class="ml-2"
                                    data-translate="telephony_group_billing_credit_threshold_without_tax"
                                >
                                </span>
                            </p>
                        </div>

                        <div class="form-group">
                            <label
                                for="credit"
                                class="control-label"
                                data-translate="telephony_group_billing_credit_threshold_credits_label"
                            >
                            </label>
                            <select
                                class="form-control"
                                name="credit"
                                id="credit"
                                required
                                data-ng-model="BillingAccountCreditThresholdCtrl.credit"
                                data-ng-options="item.label disable when item.disable for item in BillingAccountCreditThresholdCtrl.credits"
                                data-ng-change="BillingAccountCreditThresholdCtrl.onChangeCredit()"
                                data-ng-disabled="BillingAccountCreditThresholdCtrl.loading.submit"
                            >
                            </select>
                        </div>

                        <div
                            class="form-group"
                            data-ng-if="BillingAccountCreditThresholdCtrl.newCredit"
                        >
                            <label
                                data-translate="telephony_group_billing_credit_threshold_new_credit"
                            ></label>
                            <p class="form-control-static">
                                <span
                                    data-ng-bind="BillingAccountCreditThresholdCtrl.newCredit.text"
                                ></span>
                                <span
                                    class="ml-2"
                                    data-translate="telephony_group_billing_credit_threshold_without_tax"
                                >
                                </span>
                            </p>
                        </div>
                    </section>

                    <section
                        class="widget-presentation"
                        data-ng-if="BillingAccountCreditThresholdCtrl.newCredit"
                    >
                        <header class="widget-presentation-header">
                            <h2
                                class="widget-presentation-title"
                                data-translate="telephony_group_billing_credit_threshold_contracts_subtitle"
                            ></h2>
                        </header>
                        <p
                            data-translate="telephony_group_billing_credit_threshold_contracts"
                        ></p>
                        <ovh-contracts-summary
                            data-items="BillingAccountCreditThresholdCtrl.contracts"
                            data-model="BillingAccountCreditThresholdCtrl.contractsAccepted"
                            data-name="BillingAccountCreditThresholdContracts"
                        >
                        </ovh-contracts-summary>
                    </section>

                    <div class="form-group">
                        <button
                            type="submit"
                            class="btn btn-primary"
                            data-ng-disabled="!creditThresholdForm.$valid || !BillingAccountCreditThresholdCtrl.contractsAccepted || BillingAccountCreditThresholdCtrl.loading.submit"
                            data-translate="telephony_group_billing_credit_threshold_submit"
                        ></button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>
<!-- /.telephony-account-billing-billing-credit-threshold -->
