<section class="telecom-telephony-line-details">
    <div class="text-center" data-ng-if="$ctrl.loading">
        <oui-spinner></oui-spinner>
    </div>

    <div data-ng-if="!$ctrl.loading">
        <div class="row">
            <!-- LINE INFORMATIONS -->
            <section class="col-xs-12 col-md-6 widget-presentation">
                <header class="widget-presentation-header">
                    <h2
                        class="widget-presentation-title"
                        data-translate="telephony_line_details_global_info_title"
                    ></h2>
                </header>
                <dl>
                    <!-- serviceName -->
                    <dt
                        data-translate="telephony_line_details_service_name_label"
                    ></dt>
                    <dd
                        data-ng-bind="::$ctrl.line.serviceName | tucPhoneNumber"
                    ></dd>

                    <!-- description -->
                    <dt data-translate="telephony_line_details_label"></dt>
                    <dd data-ng-bind="::$ctrl.line.description || '-'"></dd>

                    <!-- country code -->
                    <dt data-translate="telephony_line_details_country"></dt>
                    <dd>
                        <span
                            class="flag-icon"
                            data-ng-class="['flag-icon-' + $ctrl.plan.country]"
                        ></span>
                        /
                        <span data-ng-bind="::$ctrl.plan.prefix || '-'"></span>
                    </dd>

                    <!-- next bill-->
                    <dt data-translate="telephony_line_details_next_bill"></dt>
                    <dd
                        data-ng-bind="::$ctrl.line.nextBill | date:'shortDate' || '-'"
                    ></dd>

                    <!-- Simultaneous calls -->
                    <dt
                        data-translate="telephony_line_details_simultaneous_call"
                    ></dt>
                    <dd>
                        <span
                            data-ng-bind="::$ctrl.line.simultaneousLines"
                        ></span>
                        <span
                            data-ng-if="::$ctrl.line.simultaneousLinesDetails"
                            data-translate="telephony_line_details_simultaneous_call_details"
                            data-translate-values="{
                                'extra': $ctrl.line.simultaneousLinesDetails.extra,
                                'toBeDeleted': $ctrl.line.simultaneousLinesDetails.toBeDeleted
                              }"
                        ></span>
                        <a
                            class="pl-2"
                            data-ng-if="$ctrl.hasSimultaneousCallsOption"
                            data-ui-sref="{{ $ctrl.isTrunkRates ? 'telecom.telephony.billingAccount.line.dashboard.calls.simultaneousLinesTrunk' : 'telecom.telephony.billingAccount.line.dashboard.calls.simultaneousLines' }}"
                        >
                            <span
                                class="fa fa-icon fa-external-link"
                                aria-hidden="true"
                            ></span>
                        </a>
                    </dd>

                    <!-- Offer -->
                    <dt data-translate="telephony_line_details_offer"></dt>
                    <dd
                        data-ng-bind="::$ctrl.line.getPublicOffer.description || '-'"
                    ></dd>
                </dl>
            </section>
            <!-- /.widget-presentation -->

            <!-- GROUPE INFORMATIONS-->
            <section class="col-xs-12 col-md-6 widget-presentation">
                <header class="widget-presentation-header">
                    <h2
                        class="widget-presentation-title"
                        data-translate="telephony_line_details_global_group_title"
                    ></h2>
                </header>
                <dl>
                    <!-- id -->
                    <dt data-translate="telephony_line_details_group_id"></dt>
                    <dd data-ng-bind="::$ctrl.group.billingAccount || '-'"></dd>

                    <!-- description-->
                    <dt
                        data-translate="telephony_line_details_group_label"
                    ></dt>
                    <dd
                        data-ng-bind="::$ctrl.group.getDisplayedName() || '-'"
                    ></dd>
                </dl>
            </section>
            <!-- /.widget-presentation -->

            <!-- WEB INTERFACE INFORMATIONS ONLY FOR YEALINK PHONES -->
            <section
                class="col-xs-12 col-md-6 widget-presentation"
                data-ng-if="::$ctrl.isYealinkPhone"
            >
                <header class="widget-presentation-header">
                    <h2
                        class="widget-presentation-title"
                        data-translate="telephony_line_details_global_web_title"
                    ></h2>
                </header>
                <dl>
                    <!-- user -->
                    <dt
                        data-translate="telephony_line_details_web_user_label"
                    ></dt>
                    <dd data-translate="telephony_line_details_web_user"></dd>

                    <!-- password-->
                    <dt
                        data-translate="telephony_line_details_web_user_password"
                    ></dt>
                    <dd
                        data-ng-bind="::$ctrl.line.phone.userPassword || '-'"
                    ></dd>
                </dl>
            </section>
            <!-- /.widget-presentation-->
        </div>
        <!-- /.row -->

        <div class="row">
            <!-- PHONE -->
            <section
                class="col-xs-12 col-md-6 widget-presentation"
                data-ng-if="$ctrl.line.hasPhone"
            >
                <header class="widget-presentation-header">
                    <h2
                        class="widget-presentation-title"
                        data-translate="telephony_line_details_hardware_title"
                    ></h2>
                </header>
                <dl>
                    <!-- MODEL -->
                    <dt
                        data-translate="telephony_line_details_hardware_model"
                    ></dt>
                    <dd
                        data-ng-bind="::$ctrl.line.phone.description || $ctrl.line.phone.brand"
                    ></dd>

                    <!-- CONBI-->
                    <dt
                        data-translate="telephony_line_details_hardware_combi"
                    ></dt>
                    <dd data-ng-bind="::$ctrl.line.phone.combi || '-'"></dd>

                    <!-- MAC-->
                    <dt
                        data-translate="telephony_line_details_hardware_mac"
                    ></dt>
                    <dd data-ng-bind="::$ctrl.line.phone.macAddress"></dd>

                    <!-- IP -->
                    <dt
                        data-translate="telephony_line_details_hardware_ip"
                    ></dt>
                    <dd data-ng-bind="::$ctrl.line.phone.ip.ip || '-'"></dd>

                    <!-- PORT -->
                    <dt
                        data-translate="telephony_line_details_hardware_port"
                    ></dt>
                    <dd data-ng-bind="::$ctrl.line.phone.port || '-'"></dd>

                    <!-- PROTOCOL-->
                    <dt
                        data-translate="telephony_line_details_hardware_protocol"
                    ></dt>
                    <dd
                        data-ng-bind="::$ctrl.line.phone.protocol | uppercase"
                    ></dd>

                    <!-- INFRA -->
                    <dt
                        data-translate="telephony_line_details_hardware_infra"
                    ></dt>
                    <dd
                        data-ng-bind="::$ctrl.line.phone.infra || $ctrl.line.infrastructure || '-'"
                    ></dd>

                    <!-- STATUS-->
                    <dt
                        data-translate="telephony_line_details_hardware_status"
                    ></dt>
                    <dd data-ng-bind="::$ctrl.line.phone.status || '-'"></dd>
                </dl>
            </section>
            <!-- /.widget-presentation -->

            <!-- SIP -->
            <section
                class="col-xs-12 col-md-6 widget-presentation"
                data-ng-if="!$ctrl.line.hasPhone || ($ctrl.line.hasPhone && $ctrl.line.phone.protocol === 'sip')"
            >
                <header class="widget-presentation-header">
                    <h2
                        class="widget-presentation-title"
                        data-translate="telephony_line_details_sip_title"
                    ></h2>
                </header>
                <dl>
                    <!-- LOGIN -->
                    <dt data-translate="telephony_line_details_sip_login"></dt>
                    <dd data-ng-bind="::$ctrl.line.serviceName || '-'"></dd>

                    <!-- LOGIN 2 ?!-->
                    <dt
                        data-translate="telephony_line_details_sip_auth_login"
                    ></dt>
                    <dd data-ng-bind="::$ctrl.line.serviceName || '-'"></dd>

                    <!-- DOMAIN -->
                    <dt data-translate="telephony_line_details_sip_domain"></dt>
                    <dd data-ng-bind="::$ctrl.line.options.domain || '-'"></dd>

                    <!-- OUTBOUND PROXY -->
                    <dt
                        data-translate="telephony_line_details_sip_outbound_proxy"
                    ></dt>
                    <dd data-ng-bind="::$ctrl.line.options.proxy || '-'"></dd>

                    <!-- INFRA -->
                    <dt data-translate="telephony_line_details_sip_infra"></dt>
                    <dd data-ng-bind="::$ctrl.line.infrastructure || '-'"></dd>

                    <!-- LAST REC-->
                    <dt>
                        <span
                            data-translate="telephony_line_details_sip_last_rec"
                        ></span>
                        <sup>1</sup>
                    </dt>
                    <dd
                        data-ng-bind="::$ctrl.lastRegistration ? ($ctrl.lastRegistration.datetime | date:'short') : '-'"
                    ></dd>

                    <!-- IP LOC -->
                    <dt
                        data-translate="telephony_line_details_sip_ip_local"
                    ></dt>
                    <dd
                        data-ng-bind="::$ctrl.lastRegistration ? $ctrl.lastRegistration.localIp + ':' + $ctrl.lastRegistration.localPort : '-'"
                    ></dd>

                    <!-- IP PUB-->
                    <dt
                        data-translate="telephony_line_details_sip_ip_public"
                    ></dt>
                    <dd
                        data-ng-bind="::$ctrl.lastRegistration ? $ctrl.lastRegistration.ip + ':' + $ctrl.lastRegistration.port : '-'"
                    ></dd>
                </dl>
                <footer>
                    <sup>1</sup>
                    <em
                        data-translate="telephony_line_details_sip_last_rec_info"
                    ></em>
                </footer>
            </section>
            <!-- /.widget-presentation -->
        </div>
        <!-- /.row -->
    </div>
</section>
<!-- /.telecom-telephony-line-details -->
