<section>
    <header>
        <tuc-section-back-link
            data-tuc-section-back-link-to-state="telecom.telephony.billingAccount.administration"
            data-tuc-section-back-link-title="{{:: 'telephony_group_admin_group_back_link' | translate }}"
        >
        </tuc-section-back-link>
        <h1 data-translate="telephony_add_group_title"></h1>
    </header>

    <div class="text-center" data-ng-if="AddGroupCtrl.loading">
        <oui-spinner></oui-spinner>
    </div>
    <div data-ng-if="!AddGroupCtrl.loading">
        <tuc-toast-message></tuc-toast-message>

        <div data-ng-if="!AddGroupCtrl.order">
            <oui-message data-type="info">
                <span data-translate="telephony_add_group_infos"></span>
            </oui-message>
            <p data-translate="telephony_add_group_contracts"></p>
            <ovh-contracts-summary
                data-items="AddGroupCtrl.contracts"
                data-model="AddGroupCtrl.contractsAccepted"
                data-name="telephonyBillingAccountAdministrationAddGroupContracts"
            >
            </ovh-contracts-summary>
            <div class="row mb-5">
                <div class="col-md-7 col-lg-5">
                    <button
                        class="oui-button oui-button_primary oui-button_block"
                        data-ng-disabled="!AddGroupCtrl.contractsAccepted || AddGroupCtrl.ordering"
                        data-ng-click="AddGroupCtrl.orderGroup()"
                        data-ng-if="!AddGroupCtrl.ordering"
                    >
                        <span data-translate="telephony_add_group_order"></span>
                        <span>({{ AddGroupCtrl.getDisplayedPrice() }})</span>
                    </button>
                    <oui-spinner
                        class="mr-2"
                        data-ng-if="AddGroupCtrl.ordering"
                        data-size="s"
                    >
                    </oui-spinner>
                </div>
            </div>
        </div>

        <oui-message data-type="success" data-ng-if="AddGroupCtrl.order">
            <span data-translate="telephony_add_group_success"></span>
            <span data-translate="telephony_add_group_success_bc"></span>
            <a
                target="_blank"
                rel="noopener"
                data-ng-href="{{ AddGroupCtrl.order.url }}"
            >
                <span class="sr-only" data-translate="common_newtab"></span>
                <span data-translate="telephony_add_group_success_bc2"></span>
                <span class="fa fa-external-link" aria-hidden="true"></span>
            </a>
        </oui-message>
    </div>
</section>
