<section class="telephony-group-alias-configuration-tones-oldPabx">
    <header>
        <tuc-section-back-link
            data-tuc-section-back-link-to-state="telecom.telephony.billingAccount.alias.details.configuration"
            data-tuc-section-back-link-title="{{ 'telephony_alias_configuration_back_link' | translate }}"
        >
        </tuc-section-back-link>
        <h1
            data-translate="telephony_alias_configuration_actions_music_management"
        ></h1>
    </header>

    <div class="text-center" data-ng-if="$ctrl.loaders.init">
        <oui-spinner></oui-spinner>
    </div>

    <div class="telecom-section-content" data-ng-if="!$ctrl.loaders.init">
        <tuc-toast-message></tuc-toast-message>

        <div class="row">
            <!-- Informations -->
            <div class="col-xs-12 col-md-6 widget-presentation">
                <!-- Header -->
                <header class="widget-presentation-header">
                    <h2
                        class="widget-presentation-title"
                        data-translate="telephony_alias_configuration_tones_old_pabx_info"
                    ></h2>
                </header>
                <!-- End of Header -->

                <!-- Alert -->
                <div class="alert alert-info" role="alert">
                    <p>
                        <span
                            class="block"
                            data-translate="telephony_alias_configuration_tones_old_pabx_info_1"
                        >
                        </span>
                        <span
                            data-translate="{{ $ctrl.number.feature.featureType === 'easyPabx' ? 'telephony_alias_configuration_tones_old_pabx_info_2' : 'telephony_alias_configuration_tones_old_pabx_info_3' }}"
                        ></span>
                    </p>
                    <ul>
                        <li>
                            <span
                                data-translate="telephony_alias_configuration_tones_old_pabx_ring_back_info"
                            ></span>
                            <br />
                            <em
                                data-translate="telephony_alias_configuration_tones_old_pabx_ring_back_info_sub"
                            ></em>
                        </li>
                        <li
                            data-ng-if="$ctrl.number.feature.featureType === 'miniPabx'"
                        >
                            <span
                                data-translate="telephony_alias_configuration_tones_old_pabx_on_hold_info"
                            ></span>
                            <br />
                            <em
                                data-translate="telephony_alias_configuration_tones_old_pabx_on_hold_info_sub"
                            ></em>
                        </li>
                        <li>
                            <span
                                data-translate="telephony_alias_configuration_tones_old_pabx_end_call_info"
                            ></span>
                            <br />
                            <em
                                data-translate="telephony_alias_configuration_tones_old_pabx_end_call_info_sub"
                            ></em>
                        </li>
                    </ul>
                </div>
                <!-- End of Alert -->
            </div>
            <!-- End of Informations -->

            <!-- Manage tones -->
            <div class="col-xs-12 col-md-6 widget-presentation">
                <!-- Header -->
                <header class="widget-presentation-header">
                    <h2
                        class="widget-presentation-title"
                        data-translate="telephony_alias_configuration_tones_old_pabx_manage"
                    ></h2>
                </header>
                <!-- End of Header -->

                <form
                    name="tonesForm"
                    data-ng-submit="$ctrl.onTonesFormSubmit()"
                    novalidate
                >
                    <!-- ringBack -->
                    <div>
                        <div class="form-group">
                            <label
                                class="control-label"
                                for="ringBack"
                                data-translate="telephony_alias_configuration_tones_old_pabx_ring_back"
                            >
                            </label>
                            <select
                                id="ringBack"
                                name="ringBack"
                                class="form-control"
                                data-ng-disabled="$ctrl.loading.save"
                                data-ng-model="$ctrl.formOptions.ringback"
                                data-ng-options="type as ('telephony_alias_configuration_tones_old_pabx_type_' + (type | tucSnakeCase) | translate) for type in $ctrl.enums.tones"
                                required
                            >
                            </select>
                        </div>

                        <div
                            class="form-group"
                            data-ng-if="$ctrl.formOptions.ringback === 'Custom sound'"
                            data-ng-class="{ 'has-error': $ctrl.formErrors.ringback.format }"
                        >
                            <label
                                class="control-label"
                                for="ringBackFile"
                                data-translate="telephony_alias_configuration_tones_old_pabx_ring_back_custom"
                            >
                            </label>
                            <div>
                                <tuc-input-file
                                    data-ng-model="$ctrl.formOptions.ringbackCustom"
                                    data-ng-accept="audio/*"
                                    data-ng-accept-filter="$ctrl.checkValidSound(file, 'ringback')"
                                    data-file-explain="{{ 'telephony_alias_configuration_tones_old_pabx_type_custom_sound_file_explain' | translate }}"
                                >
                                    <i class="fa fa-upload mr-2"></i>
                                    <span
                                        data-translate="telephony_alias_configuration_tones_old_pabx_type_custom_sound_add_file"
                                    ></span>
                                </tuc-input-file>
                            </div>
                            <div
                                class="mb-3"
                                role="alert"
                                data-ng-messages="$ctrl.formErrors.ringback"
                            >
                                <span
                                    data-ng-message="format"
                                    data-translate="telephony_alias_configuration_tones_old_pabx_type_custom_sound_bad_format"
                                >
                                </span>
                                <span
                                    data-ng-message="size"
                                    data-translate="telephony_alias_configuration_tones_old_pabx_type_custom_sound_bad_size"
                                >
                                </span>
                            </div>
                        </div>
                    </div>
                    <!-- End of ringBack -->

                    <!-- onHold -->
                    <div
                        data-ng-if="$ctrl.number.feature.featureType === 'miniPabx'"
                    >
                        <div class="form-group">
                            <label
                                class="control-label"
                                for="onHold"
                                data-translate="telephony_alias_configuration_tones_old_pabx_on_hold"
                            >
                            </label>
                            <select
                                id="onHold"
                                name="onHold"
                                class="form-control"
                                data-ng-disabled="$ctrl.loading.save"
                                data-ng-model="$ctrl.formOptions.onHold"
                                data-ng-options="type as ('telephony_alias_configuration_tones_old_pabx_type_' + (type | tucSnakeCase) | translate) for type in $ctrl.enums.tones"
                                required
                            >
                            </select>
                        </div>

                        <div
                            class="form-group"
                            data-ng-if="$ctrl.formOptions.onHold === 'Custom sound'"
                            data-ng-class="{ 'has-error': $ctrl.formErrors.onHold.format }"
                        >
                            <label
                                class="control-label"
                                for="onHoldFile"
                                data-translate="telephony_alias_configuration_tones_old_pabx_on_hold_custom"
                            >
                            </label>
                            <div>
                                <tuc-input-file
                                    data-ng-model="$ctrl.formOptions.onHoldCustom"
                                    data-ng-accept="audio/*"
                                    data-ng-accept-filter="$ctrl.checkValidSound(file, 'onHold')"
                                    data-file-explain="{{ 'telephony_alias_configuration_tones_old_pabx_type_custom_sound_file_explain' | translate }}"
                                >
                                    <i class="fa fa-upload mr-2"></i>
                                    <span
                                        data-translate="telephony_alias_configuration_tones_old_pabx_type_custom_sound_add_file"
                                    ></span>
                                </tuc-input-file>
                            </div>
                            <div
                                class="mb-3"
                                role="alert"
                                data-ng-messages="$ctrl.formErrors.onHold"
                            >
                                <span
                                    data-ng-message="format"
                                    data-translate="telephony_alias_configuration_tones_old_pabx_type_custom_sound_bad_format"
                                >
                                </span>
                                <span
                                    data-ng-message="size"
                                    data-translate="telephony_alias_configuration_tones_old_pabx_type_custom_sound_bad_size"
                                >
                                </span>
                            </div>
                        </div>
                    </div>
                    <!-- End of onHold -->

                    <!-- endCall -->
                    <div>
                        <div class="form-group">
                            <label
                                class="control-label"
                                for="endCall"
                                data-translate="telephony_alias_configuration_tones_old_pabx_end_call"
                            >
                            </label>
                            <select
                                id="endCall"
                                name="endCall"
                                class="form-control"
                                data-ng-disabled="$ctrl.loading.save"
                                data-ng-model="$ctrl.formOptions.endCall"
                                data-ng-options="type as ('telephony_alias_configuration_tones_old_pabx_type_' + (type | tucSnakeCase) | translate) for type in $ctrl.enums.tones"
                                required
                            >
                            </select>
                        </div>

                        <div
                            class="form-group"
                            data-ng-if="$ctrl.formOptions.endCall === 'Custom sound'"
                            data-ng-class="{ 'has-error': $ctrl.formErrors.endCall.format }"
                        >
                            <label
                                class="control-label"
                                for="endCallFile"
                                data-translate="telephony_alias_configuration_tones_old_pabx_end_call_custom"
                            >
                            </label>
                            <div>
                                <tuc-input-file
                                    data-ng-model="$ctrl.formOptions.endCallCustom"
                                    data-ng-accept="audio/*"
                                    data-ng-accept-filter="$ctrl.checkValidSound(file, 'endCall')"
                                    data-file-explain="{{ 'telephony_alias_configuration_tones_old_pabx_type_custom_sound_file_explain' | translate }}"
                                >
                                    <i class="fa fa-upload mr-2"></i>
                                    <span
                                        data-translate="telephony_alias_configuration_tones_old_pabx_type_custom_sound_add_file"
                                    ></span>
                                </tuc-input-file>
                            </div>
                            <div
                                class="mb-3"
                                role="alert"
                                data-ng-messages="$ctrl.formErrors.endCall"
                            >
                                <span
                                    data-ng-message="format"
                                    data-translate="telephony_alias_configuration_tones_old_pabx_type_custom_sound_bad_format"
                                >
                                </span>
                                <span
                                    data-ng-message="size"
                                    data-translate="telephony_alias_configuration_tones_old_pabx_type_custom_sound_bad_size"
                                >
                                </span>
                            </div>
                        </div>
                    </div>
                    <!-- End of endCall -->

                    <!-- Bottom buttons -->
                    <div class="form-group">
                        <button
                            type="submit"
                            class="btn btn-primary no-transition"
                            data-ng-disabled="$ctrl.loaders.save || !$ctrl.isFormValid()"
                        >
                            <oui-spinner
                                class="mr-2"
                                data-ng-if="$ctrl.loaders.save"
                                data-size="s"
                            >
                            </oui-spinner>
                            <span
                                data-translate="telephony_alias_configuration_tones_old_pabx_save_tones"
                            ></span>
                        </button>
                        <button
                            type="button"
                            class="btn btn-default no-transition"
                            data-ng-disabled="$ctrl.loaders.save"
                            data-ng-click="$ctrl.onCancelBtnClick()"
                        >
                            <span data-translate="cancel"></span>
                        </button>
                    </div>
                    <!-- End of Bottom buttons -->
                </form>
            </div>
            <!-- End of Manage tones -->
        </div>
    </div>
    <!-- section content -->
</section>
