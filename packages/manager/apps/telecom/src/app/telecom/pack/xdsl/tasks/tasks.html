<div class="telecom-pack-xdsl-tasks">
    <toast-message></toast-message>

    <div class="widget-presentation">
        <h2
            class="widget-presentation-title"
            data-translate="xdsl_tasks_list"
        ></h2>

        <div class="text-center" data-ng-if="$ctrl.isLoading">
            <oui-spinner></oui-spinner>
        </div>

        <div class="oui-criteria__actions" data-ng-if="!$ctrl.isLoading">
            <button
                type="button"
                class="oui-button oui-button_secondary oui-button_icon-only oui-button_s"
                data-ng-click="$ctrl.refresh()"
                title="{{'common_refresh' | translate}}"
            >
                <span class="fa fa-refresh" aria-hidden="true"></span>
            </button>
        </div>
        <oui-datagrid
            data-rows="$ctrl.taskIds"
            data-row-loader="$ctrl.transformItem($row.id)"
            data-ng-if="!$ctrl.isLoading"
        >
            <oui-datagrid-column
                data-title="::'xdsl_tasks_id' | translate"
                data-property="id"
                data-sortable
            ></oui-datagrid-column>
            <oui-datagrid-column
                data-title="::'xdsl_tasks_name' | translate"
                data-property="function"
                data-sortable="asc"
            ></oui-datagrid-column>
            <oui-datagrid-column
                data-title="::'xdsl_tasks_status' | translate"
                data-property="status"
                data-sortable
            >
                <span
                    class="label"
                    data-ng-class="{
                                'label-success': $row.status === 'done',
                                'label-danger': ['error', 'problem'].indexOf($row.status) !== -1,
                                'label-info': $row.status === 'doing',
                                'label-primary': $row.status === 'todo'
                            }"
                >
                    <span
                        data-ng-bind="::'xdsl_tasks_status_' + $row.status | translate"
                    ></span>
                </span>
            </oui-datagrid-column>
            <oui-datagrid-column
                data-title="::'xdsl_tasks_update_date' | translate"
                data-property="updateDate"
                data-sortable
            >
                <span data-ng-bind="$value | date:'dd/MM/yyyy HH:mm:ss'"></span>
            </oui-datagrid-column>
        </oui-datagrid>
    </div>
</div>
