import {
  OdsThemeColorIntent,
  OdsThemeTypographyLevel,
  OdsThemeTypographySize,
} from '@ovhcloud/ods-theming';
import { Component, Prop, h, Element, Host } from '@stencil/core';
import { HTMLStencilElement } from '@stencil/core/internal';
import { Language } from '@ovhcloud/msc-utils';
import { getTranslations } from './translations';

export interface I{{ pascalCase componentTag }} {
  content: string;
  language?: Language;
}

@Component({
  tag: '{{ componentTag }}',
  styleUrl: '{{ componentTag }}.scss',
  shadow: true,
})
export class {{ pascalCase componentTag }} implements I{{ pascalCase componentTag }} {
  @Element() host!: HTMLStencilElement;

  @Prop() public content = '';

  @Prop() public language = 'fr-FR' as Language;

  @State() localeStrings?: Translations;

  @Watch('language')
  async updateTranslations() {
    this.localeStrings = await getTranslations(this.language);
  }

  async componentWillLoad() {
    this.updateTranslations();
  }

  render() {
    if (!this.localeStrings) {
      return (
        <osds-skeleton />
      );
    }

    return (
      <Host>
        <osds-text
          class="example"
          level={OdsThemeTypographyLevel.heading}
          size={OdsThemeTypographySize._400}
          color={OdsThemeColorIntent.info}
        >
          Hello {this.content} {this.localeStrings.test}
        </osds-text>
      </Host>
    );
  }
}
