(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{516:function(t,e,a){"use strict";a.r(e);var n=a(53),r=Object(n.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"architecture"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#architecture"}},[t._v("#")]),t._v(" Architecture")]),t._v(" "),a("h2",{attrs:{id:"general-information"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#general-information"}},[t._v("#")]),t._v(" General information")]),t._v(" "),a("p",[t._v("The monorepo is powered by:")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://yarnpkg.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("Yarn"),a("OutboundLink")],1),t._v(" — Fast, reliable, and secure dependency management.")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://lerna.js.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Lerna"),a("OutboundLink")],1),t._v(" — A tool for managing JavaScript projects with multiple packages.")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://jestjs.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Jest"),a("OutboundLink")],1),t._v(" - A JavaScript Testing framework with a focus on simplicity.")])]),t._v(" "),a("p",[t._v("Several "),a("a",{attrs:{href:"https://yarnpkg.com/lang/en/docs/workspaces/",target:"_blank",rel:"noopener noreferrer"}},[t._v("workspaces"),a("OutboundLink")],1),t._v(" are configured and you can find the list in the root "),a("a",{attrs:{href:"https://github.com/ovh/manager/blob/master/package.json#L7-L12",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("package.json")]),a("OutboundLink")],1),t._v(" file.")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"workspaces"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"packages/components/*"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"packages/manager/apps/*"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"packages/manager/modules/*"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"packages/manager/tools/*"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  …"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("A "),a("code",[t._v("jest.config.js")]),t._v(" is present in the root of the application, it allows for all projects under "),a("code",[t._v("components")]),t._v(" and "),a("code",[t._v("manager")]),t._v(" to share the same configuration.")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"roots"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<rootDir>/packages/components"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<rootDir>/packages/manager"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("If you have a project that requires a custom configuration, add a "),a("code",[t._v("jest.config.js")]),t._v(" in your project that extends the root configuration and mention it in the root configuration under the options "),a("code",[t._v("projects")]),t._v(" so that the test command continues to work.")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"projects"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<rootDir>/packages/manager/apps/container/jest.config.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"languages-and-framework"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#languages-and-framework"}},[t._v("#")]),t._v(" Languages and Framework")]),t._v(" "),a("p",[t._v("The "),a("strong",[t._v("Manager")]),t._v(" application is using these following languages:")]),t._v(" "),a("ul",[a("li",[t._v("HTML")]),t._v(" "),a("li",[t._v("CSS ("),a("a",{attrs:{href:"http://lesscss.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Less.js"),a("OutboundLink")],1),t._v(", "),a("a",{attrs:{href:"https://sass-lang.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("SCSS"),a("OutboundLink")],1),t._v(")")]),t._v(" "),a("li",[t._v("JavaScript/TypeScript")])]),t._v(" "),a("p",[a("a",{attrs:{href:"https://angularjs.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("AngularJS"),a("OutboundLink")],1),t._v(" used to be a widelys used MVW Framework to build "),a("a",{attrs:{href:"https://en.wikipedia.org/wiki/Single-page_application",target:"_blank",rel:"noopener noreferrer"}},[t._v("Single Page Applications"),a("OutboundLink")],1),t._v(".\n"),a("a",{attrs:{href:"https://reactjs.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("ReactJS"),a("OutboundLink")],1),t._v(" is used to build the container.")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("Information")]),t._v(" "),a("p",[t._v("We are exploring some new solutions to speed up the development workflow.")])]),t._v(" "),a("h2",{attrs:{id:"build"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#build"}},[t._v("#")]),t._v(" Build")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://webpack.js.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack"),a("OutboundLink")],1),t._v(", "),a("a",{attrs:{href:"https://rollupjs.org",target:"_blank",rel:"noopener noreferrer"}},[t._v("rollup.js"),a("OutboundLink")],1),t._v(" and "),a("a",{attrs:{href:"https://vitejs.dev/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vite"),a("OutboundLink")],1),t._v(" are respectively used to build our applications, modules and components.")]),t._v(" "),a("p",[t._v("You can see more about our tooling "),a("RouterLink",{attrs:{to:"/guide/tools.html"}},[t._v("here")]),t._v(".")],1),t._v(" "),a("h2",{attrs:{id:"micro-frontend"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#micro-frontend"}},[t._v("#")]),t._v(" Micro-FrontEnd")]),t._v(" "),a("p",[t._v("In order to enable the µFrontEnd architecture, we use what we call a "),a("code",[t._v("Container")]),t._v(". The container contains a standalone application and elements that are common to all applications.\nThe communication between the standalone application and the common elements is made possible thanks to the library "),a("a",{attrs:{href:"https://github.com/ovh/manager/blob/master/packages/components/ovh-shell/README.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("@ovh-ux/shell"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("h3",{attrs:{id:"philosophy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#philosophy"}},[t._v("#")]),t._v(" Philosophy")]),t._v(" "),a("p",[t._v("The philosophy behind this, is not to be tied to a single framework and big monolithic applications. It allows more resiliency and for smaller apps, that are easier to maintain and to migrate. It also boosts the time to market, since all the common elements are already handled by the container.")]),t._v(" "),a("h3",{attrs:{id:"communication"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#communication"}},[t._v("#")]),t._v(" Communication")]),t._v(" "),a("p",[t._v("The standalone application is loaded inside an "),a("code",[t._v("iframe")]),t._v(". The iframe communicates with the container through "),a("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("window.postMessage")]),a("OutboundLink")],1),t._v(" API. You don't have to worry about this part, since the library "),a("code",[t._v("@ovh-ux/shell")]),t._v(" handles all this part for you, by exposing a set of plugins that you can use to communicate between a standalone application and the container.")]),t._v(" "),a("p",[t._v("Each app has to instantiate a "),a("code",[t._v("ShellClient")]),t._v(" through the "),a("code",[t._v("useShellClient")]),t._v(" method. This will allow the application to have access to the shell plugins and can use them for "),a("code",[t._v("environnement")]),t._v(", "),a("code",[t._v("navigation")]),t._v(" etc. ( Check the shell library for more information on the subject ).")]),t._v(" "),a("p",[t._v("Once the shell is instantiated, it will enable communication between the "),a("code",[t._v("container")]),t._v(" and the app through a message bus.")]),t._v(" "),a("p",[a("img",{attrs:{src:"/manager/assets/img/container-shell-comm.png",alt:"Container and shell communication and interaction diagramm"}})]),t._v(" "),a("h3",{attrs:{id:"routing"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#routing"}},[t._v("#")]),t._v(" Routing")]),t._v(" "),a("p",[t._v("The container + shell also keeps the iframe URL and the navigator URL in sync. This way, you can freely route any application inside the iframe, without worrying about what it will do to the container.\nYou don't have to import anything, this is an out of the box feature.")])])}),[],!1,null,null,null);e.default=r.exports}}]);