import{_ as a,o as e,c as s,Q as o}from"./chunks/framework.2eec50d8.js";const n="/manager/assets/img/container-shell-comm.png",E=JSON.parse('{"title":"Architecture","description":"","frontmatter":{},"headers":[],"relativePath":"guide/architecture.md","filePath":"guide/architecture.md","lastUpdated":1721731100000}'),t={name:"guide/architecture.md"},l=o(`<h1 id="architecture" tabindex="-1">Architecture <a class="header-anchor" href="#architecture" aria-label="Permalink to &quot;Architecture&quot;">​</a></h1><h2 id="general-information" tabindex="-1">General information <a class="header-anchor" href="#general-information" aria-label="Permalink to &quot;General information&quot;">​</a></h2><p>The monorepo is powered by:</p><ul><li><a href="https://yarnpkg.com" target="_blank" rel="noreferrer">Yarn</a> — Fast, reliable, and secure dependency management.</li><li><a href="https://lerna.js.org/" target="_blank" rel="noreferrer">Lerna</a> — A tool for managing JavaScript projects with multiple packages.</li><li><a href="https://jestjs.io/" target="_blank" rel="noreferrer">Jest</a> - A JavaScript Testing framework with a focus on simplicity.</li></ul><p>Several <a href="https://yarnpkg.com/lang/en/docs/workspaces/" target="_blank" rel="noreferrer">workspaces</a> are configured and you can find the list in the root <a href="https://github.com/ovh/manager/blob/master/package.json#L7-L12" target="_blank" rel="noreferrer"><code>package.json</code></a> file.</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">&quot;workspaces&quot;</span><span style="color:#E1E4E8;">: [</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;packages/components/*&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;packages/manager/apps/*&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;packages/manager/modules/*&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;packages/manager/tools/*&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  ],</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FDAEB7;font-style:italic;">…,</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">&quot;workspaces&quot;</span><span style="color:#24292E;">: [</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;packages/components/*&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;packages/manager/apps/*&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;packages/manager/modules/*&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;packages/manager/tools/*&quot;</span></span>
<span class="line"><span style="color:#24292E;">  ],</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#B31D28;font-style:italic;">…,</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>A <code>jest.config.js</code> is present in the root of the application, it allows for all projects under <code>components</code> and <code>manager</code> to share the same configuration.</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">&quot;roots&quot;</span><span style="color:#E1E4E8;">: [</span><span style="color:#9ECBFF;">&quot;&lt;rootDir&gt;/packages/components&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;&lt;rootDir&gt;/packages/manager&quot;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">&quot;roots&quot;</span><span style="color:#24292E;">: [</span><span style="color:#032F62;">&quot;&lt;rootDir&gt;/packages/components&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;&lt;rootDir&gt;/packages/manager&quot;</span><span style="color:#24292E;">]</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>If you have a project that requires a custom configuration, add a <code>jest.config.js</code> in your project that extends the root configuration and mention it in the root configuration under the options <code>projects</code> so that the test command continues to work.</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">&quot;projects&quot;</span><span style="color:#E1E4E8;">: [</span><span style="color:#9ECBFF;">&quot;&lt;rootDir&gt;/packages/manager/apps/container/jest.config.js&quot;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">&quot;projects&quot;</span><span style="color:#24292E;">: [</span><span style="color:#032F62;">&quot;&lt;rootDir&gt;/packages/manager/apps/container/jest.config.js&quot;</span><span style="color:#24292E;">]</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h2 id="languages-and-framework" tabindex="-1">Languages and Framework <a class="header-anchor" href="#languages-and-framework" aria-label="Permalink to &quot;Languages and Framework&quot;">​</a></h2><p>The <strong>Manager</strong> application is using these following languages:</p><ul><li>HTML</li><li>CSS (<a href="http://lesscss.org/" target="_blank" rel="noreferrer">Less.js</a>, <a href="https://sass-lang.com/" target="_blank" rel="noreferrer">SCSS</a>)</li><li>JavaScript/TypeScript</li></ul><p><a href="https://angularjs.org/" target="_blank" rel="noreferrer">AngularJS</a> used to be a widelys used MVW Framework to build <a href="https://en.wikipedia.org/wiki/Single-page_application" target="_blank" rel="noreferrer">Single Page Applications</a>. <a href="https://reactjs.org/" target="_blank" rel="noreferrer">ReactJS</a> is used to build the container.</p><div class="tip custom-block"><p class="custom-block-title">Information</p><p>We are exploring some new solutions to speed up the development workflow.</p></div><h2 id="build" tabindex="-1">Build <a class="header-anchor" href="#build" aria-label="Permalink to &quot;Build&quot;">​</a></h2><p><a href="https://webpack.js.org/" target="_blank" rel="noreferrer">webpack</a>, <a href="https://rollupjs.org" target="_blank" rel="noreferrer">rollup.js</a> and <a href="https://vitejs.dev/" target="_blank" rel="noreferrer">Vite</a> are respectively used to build our applications, modules and components.</p><p>You can see more about our tooling <a href="/manager/guide/tools">here</a>.</p><h2 id="micro-frontend" tabindex="-1">Micro-FrontEnd <a class="header-anchor" href="#micro-frontend" aria-label="Permalink to &quot;Micro-FrontEnd&quot;">​</a></h2><p>In order to enable the µFrontEnd architecture, we use what we call a <code>Container</code>. The container contains a standalone application and elements that are common to all applications. The communication between the standalone application and the common elements is made possible thanks to the library <a href="https://github.com/ovh/manager/blob/master/packages/components/ovh-shell/README.md" target="_blank" rel="noreferrer">@ovh-ux/shell</a>.</p><h3 id="philosophy" tabindex="-1">Philosophy <a class="header-anchor" href="#philosophy" aria-label="Permalink to &quot;Philosophy&quot;">​</a></h3><p>The philosophy behind this, is not to be tied to a single framework and big monolithic applications. It allows more resiliency and for smaller apps, that are easier to maintain and to migrate. It also boosts the time to market, since all the common elements are already handled by the container.</p><h3 id="communication" tabindex="-1">Communication <a class="header-anchor" href="#communication" aria-label="Permalink to &quot;Communication&quot;">​</a></h3><p>The standalone application is loaded inside an <code>iframe</code>. The iframe communicates with the container through <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage" target="_blank" rel="noreferrer"><code>window.postMessage</code></a> API. You don&#39;t have to worry about this part, since the library <code>@ovh-ux/shell</code> handles all this part for you, by exposing a set of plugins that you can use to communicate between a standalone application and the container.</p><p>Each app has to instantiate a <code>ShellClient</code> through the <code>initShellClient</code> method. This will allow the application to have access to the shell plugins and can use them for <code>environnement</code>, <code>navigation</code> etc. ( Check the shell library for more information on the subject ).</p><p>Once the shell is instantiated, it will enable communication between the <code>container</code> and the app through a message bus.</p><p><img src="`+n+'" alt="Container and shell communication and interaction diagramm"></p><h3 id="routing" tabindex="-1">Routing <a class="header-anchor" href="#routing" aria-label="Permalink to &quot;Routing&quot;">​</a></h3><p>The container + shell also keeps the iframe URL and the navigator URL in sync. This way, you can freely route any application inside the iframe, without worrying about what it will do to the container. You don&#39;t have to import anything, this is an out of the box feature.</p>',29),r=[l];function p(i,c,h,d,u,g){return e(),s("div",null,r)}const y=a(t,[["render",p]]);export{E as __pageData,y as default};
