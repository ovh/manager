import{j as u}from"./jsx-runtime-BRNY0I4F.js";import{m as de}from"./index-2w0W-O47-BJ19ihbZ.js";import{r as N}from"./index-Bnop-kX6.js";import{s as oe}from"./index-_7D5ljJ2-LyAubAEn.js";import{X as le,t as w,v as _,x as Ae,g as Be,q,aA as te,aL as M,aw as Re,a_ as U,at as W,a$ as Y,aB as ie,av as z,b0 as I,T as fe,L as re,au as j,b1 as ue,aF as Le,R as Ie,w as Oe,O as je,V as Ke,W as Fe,B as Me,aE as He,az as Ge,G as g,ak as H,Y as Q,aH as F,am as B,A as $e}from"./use-locale-context-cwTY9VYn-REDUMe7F.js";import{n as We,s as Xe,a as qe}from"./render-strategy-BVcZ76SI-DDawKQXU.js";import{t as Ue}from"./Icon-DrfG5m-t-DQEf1CkA.js";import{l as Ye}from"./ods-react60-0db41gCx.js";import{O as J,G as Z}from"./CheckboxLabel-BNqUGOsg-lMsT6S1z.js";import{Q as ze,W as Qe}from"./collapsible-content-zo5LZi6B-BM-FWdPL.js";const Je=e=>new oe(e);function Ze(e){return Je({isNodeDisabled:t=>t.disabled??!1,nodeToString:t=>t.name,nodeToValue:t=>t.id,rootNode:{children:e,id:"ROOT",name:"ROOT"}})}function et(e,t){return Array.isArray(e)?t?e:e[0]??"":t?[e]:e}function xe(e,t=!1,n,a){var o;!t||n||e.key===" "&&(e.preventDefault(),e.stopPropagation(),(o=a.current)==null||o.click())}const[tt,T]=le({name:"TreeViewContext",hookName:"useTreeViewContext",providerName:"<TreeViewProvider />"}),[at,ge]=le({name:"TreeViewNodeContext",hookName:"useTreeViewNodeContext",providerName:"<TreeViewNodeProvider />"}),[nt,A]=le({name:"TreeViewNodePropsContext",hookName:"useTreeViewNodePropsContext",providerName:"<TreeViewItemProvider />"}),ve=N.forwardRef((e,t)=>{const n=T(),a=A(),o=ge(),s=We(),r=w(n.getBranchProps(a),e),i=n.getBranchContentProps(a);return u.jsx(ze,{ref:t,open:o.expanded,ids:{content:i.id},...s,...r})});ve.displayName="TreeViewBranch";const dt=re(),Ne=N.forwardRef((e,t)=>{const n=T(),a=A(),o=n.getBranchContentProps(a),[,s]=dt(o,["hidden","data-state"]),r=w(s,e);return u.jsx(Qe,{ref:t,...r})});Ne.displayName="TreeViewBranchContent";const me=N.forwardRef((e,t)=>{const n=T(),a=A(),o=w(n.getBranchControlProps(a),e);return u.jsx(_.div,{...o,ref:t})});me.displayName="TreeViewBranchControl";const Ee=N.forwardRef((e,t)=>{const n=T(),a=A(),o=w(n.getBranchIndentGuideProps(a),e);return u.jsx(_.div,{...o,ref:t})});Ee.displayName="TreeViewBranchIndentGuide";const Ce=N.forwardRef((e,t)=>{const n=T(),a=A(),o=w(n.getBranchIndicatorProps(a),e);return u.jsx(_.div,{...o,ref:t})});Ce.displayName="TreeViewBranchIndicator";const ae=N.forwardRef((e,t)=>{const n=T(),a=A(),o=w(n.getBranchTextProps(a),e);return u.jsx(_.span,{...o,ref:t})});ae.displayName="TreeViewBranchText";const Ve=N.forwardRef((e,t)=>{const n=T(),a=A(),o=w(n.getItemProps(a),e);return u.jsx(_.div,{...o,ref:t})});Ve.displayName="TreeViewItem";const ne=N.forwardRef((e,t)=>{const n=T(),a=A(),o=w(n.getItemTextProps(a),e);return u.jsx(_.span,{...o,ref:t})});ne.displayName="TreeViewItemText";function ot(e){const[t,n]=re()(e,["indexPath","node"]),a=T().getNodeState(t);return u.jsx(at,{value:a,children:u.jsx(nt,{value:t,children:n.children})})}var lt=Ae("tree-view").parts("branch","branchContent","branchControl","branchIndentGuide","branchIndicator","branchText","branchTrigger","item","itemIndicator","itemText","label","nodeCheckbox","root","tree"),y=lt.build(),be=e=>new oe(e);be.empty=()=>new oe({rootNode:{children:[]}});var rt=e=>{var t;return((t=e.ids)==null?void 0:t.root)??`tree:${e.id}:root`},he=e=>{var t;return((t=e.ids)==null?void 0:t.label)??`tree:${e.id}:label`},ye=(e,t)=>{var n,a;return((a=(n=e.ids)==null?void 0:n.node)==null?void 0:a.call(n,t))??`tree:${e.id}:node:${t}`},ee=e=>{var t;return((t=e.ids)==null?void 0:t.tree)??`tree:${e.id}:tree`},L=(e,t)=>{var n;t!=null&&((n=e.getById(ye(e,t)))==null||n.focus())};function Te(e,t,n){const a=e.getNodeValue(t);if(!e.isBranchNode(t))return n.includes(a);const o=e.getDescendantValues(a),s=o.every(i=>n.includes(i)),r=o.some(i=>n.includes(i));return s?!0:r?"indeterminate":!1}function st(e,t,n){const a=e.getDescendantValues(t),o=a.every(s=>n.includes(s));return I(o?W(n,...a):j(n,...a))}function ct(e,t){const n=new Map;return e.visit({onEnter:a=>{const o=e.getNodeValue(a),s=e.isBranchNode(a),r=Te(e,a,t);n.set(o,{type:s?"branch":"leaf",checked:r})}}),n}function it(e,t){const{context:n,scope:a,computed:o,prop:s,send:r}=e,i=s("collection"),f=Array.from(n.get("expandedValue")),v=Array.from(n.get("selectedValue")),m=Array.from(n.get("checkedValue")),b=o("isTypingAhead"),C=n.get("focusedValue"),P=n.get("loadingStatus");function E(l){const{node:d,indexPath:c}=l,h=i.getNodeValue(d),x=i.getFirstNode(),V=x?i.getNodeValue(x):null;return{id:ye(a,h),value:h,indexPath:c,valuePath:i.getValuePath(c),disabled:!!d.disabled,focused:C==null?V==h:C===h,selected:v.includes(h),expanded:f.includes(h),loading:P[h]==="loading",depth:c.length,isBranch:i.isBranchNode(d),get checked(){return Te(i,d,m)}}}return{collection:i,expandedValue:f,selectedValue:v,checkedValue:m,toggleChecked(l,d){r({type:"CHECKED.TOGGLE",value:l,isBranch:d})},setChecked(l){r({type:"CHECKED.SET",value:l})},clearChecked(){r({type:"CHECKED.CLEAR"})},getCheckedMap(){return ct(i,m)},expand(l){r({type:l?"BRANCH.EXPAND":"EXPANDED.ALL",value:l})},collapse(l){r({type:l?"BRANCH.COLLAPSE":"EXPANDED.CLEAR",value:l})},deselect(l){r({type:l?"NODE.DESELECT":"SELECTED.CLEAR",value:l})},select(l){r({type:l?"NODE.SELECT":"SELECTED.ALL",value:l,isTrusted:!1})},getVisibleNodes(){return o("visibleNodes").map(({node:l})=>l)},focus(l){L(a,l)},selectParent(l){const d=i.getParentNode(l);if(!d)return;const c=j(v,i.getNodeValue(d));r({type:"SELECTED.SET",value:c,src:"select.parent"})},expandParent(l){const d=i.getParentNode(l);if(!d)return;const c=j(f,i.getNodeValue(d));r({type:"EXPANDED.SET",value:c,src:"expand.parent"})},setExpandedValue(l){const d=I(l);r({type:"EXPANDED.SET",value:d})},setSelectedValue(l){const d=I(l);r({type:"SELECTED.SET",value:d})},getRootProps(){return t.element({...y.root.attrs,id:rt(a),dir:s("dir")})},getLabelProps(){return t.element({...y.label.attrs,id:he(a),dir:s("dir")})},getTreeProps(){return t.element({...y.tree.attrs,id:ee(a),dir:s("dir"),role:"tree","aria-label":"Tree View","aria-labelledby":he(a),"aria-multiselectable":s("selectionMode")==="multiple"||void 0,tabIndex:-1,onKeyDown(l){if(l.defaultPrevented||Fe(l))return;const d=Me(l);if(He(d))return;const c=d==null?void 0:d.closest("[data-part=branch-control], [data-part=item]");if(!c)return;const h=c.dataset.value;if(h==null){console.warn("[zag-js/tree-view] Node id not found for node",c);return}const x=c.matches("[data-part=branch-control]"),V={ArrowDown(p){B(p)||(p.preventDefault(),r({type:"NODE.ARROW_DOWN",id:h,shiftKey:p.shiftKey}))},ArrowUp(p){B(p)||(p.preventDefault(),r({type:"NODE.ARROW_UP",id:h,shiftKey:p.shiftKey}))},ArrowLeft(p){B(p)||c.dataset.disabled||(p.preventDefault(),r({type:x?"BRANCH_NODE.ARROW_LEFT":"NODE.ARROW_LEFT",id:h}))},ArrowRight(p){!x||c.dataset.disabled||(p.preventDefault(),r({type:"BRANCH_NODE.ARROW_RIGHT",id:h}))},Home(p){B(p)||(p.preventDefault(),r({type:"NODE.HOME",id:h,shiftKey:p.shiftKey}))},End(p){B(p)||(p.preventDefault(),r({type:"NODE.END",id:h,shiftKey:p.shiftKey}))},Space(p){var D;c.dataset.disabled||(b?r({type:"TREE.TYPEAHEAD",key:p.key}):(D=V.Enter)==null||D.call(V,p))},Enter(p){c.dataset.disabled||F(d)&&B(p)||(r({type:x?"BRANCH_NODE.CLICK":"NODE.CLICK",id:h,src:"keyboard"}),F(d)||p.preventDefault())},"*"(p){c.dataset.disabled||(p.preventDefault(),r({type:"SIBLINGS.EXPAND",id:h}))},a(p){!p.metaKey||c.dataset.disabled||(p.preventDefault(),r({type:"SELECTED.ALL",moveFocus:!0}))}},O=Ge(l,{dir:s("dir")}),k=V[O];if(k){k(l);return}te.isValidEvent(l)&&(r({type:"TREE.TYPEAHEAD",key:l.key,id:h}),l.preventDefault())}})},getNodeState:E,getItemProps(l){const d=E(l);return t.element({...y.item.attrs,id:d.id,dir:s("dir"),"data-ownedby":ee(a),"data-path":l.indexPath.join("/"),"data-value":d.value,tabIndex:d.focused?0:-1,"data-focus":g(d.focused),role:"treeitem","aria-current":d.selected?"true":void 0,"aria-selected":d.disabled?void 0:d.selected,"data-selected":g(d.selected),"aria-disabled":H(d.disabled),"data-disabled":g(d.disabled),"aria-level":d.depth,"data-depth":d.depth,style:{"--depth":d.depth},onFocus(c){c.stopPropagation(),r({type:"NODE.FOCUS",id:d.value})},onClick(c){if(d.disabled||!Q(c)||F(c.currentTarget)&&B(c))return;const h=c.metaKey||c.ctrlKey;r({type:"NODE.CLICK",id:d.value,shiftKey:c.shiftKey,ctrlKey:h}),c.stopPropagation(),F(c.currentTarget)||c.preventDefault()}})},getItemTextProps(l){const d=E(l);return t.element({...y.itemText.attrs,"data-disabled":g(d.disabled),"data-selected":g(d.selected),"data-focus":g(d.focused)})},getItemIndicatorProps(l){const d=E(l);return t.element({...y.itemIndicator.attrs,"aria-hidden":!0,"data-disabled":g(d.disabled),"data-selected":g(d.selected),"data-focus":g(d.focused),hidden:!d.selected})},getBranchProps(l){const d=E(l);return t.element({...y.branch.attrs,"data-depth":d.depth,dir:s("dir"),"data-branch":d.value,role:"treeitem","data-ownedby":ee(a),"data-value":d.value,"aria-level":d.depth,"aria-selected":d.disabled?void 0:d.selected,"data-path":l.indexPath.join("/"),"data-selected":g(d.selected),"aria-expanded":d.expanded,"data-state":d.expanded?"open":"closed","aria-disabled":H(d.disabled),"data-disabled":g(d.disabled),"data-loading":g(d.loading),"aria-busy":H(d.loading),style:{"--depth":d.depth}})},getBranchIndicatorProps(l){const d=E(l);return t.element({...y.branchIndicator.attrs,"aria-hidden":!0,"data-state":d.expanded?"open":"closed","data-disabled":g(d.disabled),"data-selected":g(d.selected),"data-focus":g(d.focused),"data-loading":g(d.loading)})},getBranchTriggerProps(l){const d=E(l);return t.element({...y.branchTrigger.attrs,role:"button",dir:s("dir"),"data-disabled":g(d.disabled),"data-state":d.expanded?"open":"closed","data-value":d.value,"data-loading":g(d.loading),disabled:d.loading,onClick(c){d.disabled||d.loading||(r({type:"BRANCH_TOGGLE.CLICK",id:d.value}),c.stopPropagation())}})},getBranchControlProps(l){const d=E(l);return t.element({...y.branchControl.attrs,role:"button",id:d.id,dir:s("dir"),tabIndex:d.focused?0:-1,"data-path":l.indexPath.join("/"),"data-state":d.expanded?"open":"closed","data-disabled":g(d.disabled),"data-selected":g(d.selected),"data-focus":g(d.focused),"data-value":d.value,"data-depth":d.depth,"data-loading":g(d.loading),"aria-busy":H(d.loading),onFocus(c){r({type:"NODE.FOCUS",id:d.value}),c.stopPropagation()},onClick(c){if(d.disabled||d.loading||!Q(c)||F(c.currentTarget)&&B(c))return;const h=c.metaKey||c.ctrlKey;r({type:"BRANCH_NODE.CLICK",id:d.value,shiftKey:c.shiftKey,ctrlKey:h}),c.stopPropagation()}})},getBranchTextProps(l){const d=E(l);return t.element({...y.branchText.attrs,dir:s("dir"),"data-disabled":g(d.disabled),"data-state":d.expanded?"open":"closed","data-loading":g(d.loading)})},getBranchContentProps(l){const d=E(l);return t.element({...y.branchContent.attrs,role:"group",dir:s("dir"),"data-state":d.expanded?"open":"closed","data-depth":d.depth,"data-path":l.indexPath.join("/"),"data-value":d.value,hidden:!d.expanded})},getBranchIndentGuideProps(l){const d=E(l);return t.element({...y.branchIndentGuide.attrs,"data-depth":d.depth})},getNodeCheckboxProps(l){const d=E(l),c=d.checked;return t.element({...y.nodeCheckbox.attrs,tabIndex:-1,role:"checkbox","data-state":c===!0?"checked":c===!1?"unchecked":"indeterminate","aria-checked":c===!0?"true":c===!1?"false":"mixed","data-disabled":g(d.disabled),onClick(h){if(h.defaultPrevented||d.disabled||!Q(h))return;r({type:"CHECKED.TOGGLE",value:d.value,isBranch:d.isBranch}),h.stopPropagation();const x=h.currentTarget.closest("[role=treeitem]");x==null||x.focus({preventScroll:!0})}})}}}function G(e,t){const{context:n,prop:a,refs:o}=e;if(!a("loadChildren")){n.set("expandedValue",l=>I(j(l,...t)));return}const s=n.get("loadingStatus"),[r,i]=ue(t,l=>s[l]==="loaded");if(r.length>0&&n.set("expandedValue",l=>I(j(l,...r))),i.length===0)return;const f=a("collection"),[v,m]=ue(i,l=>{const d=f.findNode(l);return f.getNodeChildren(d).length>0});if(v.length>0&&n.set("expandedValue",l=>I(j(l,...v))),m.length===0)return;n.set("loadingStatus",l=>({...l,...m.reduce((d,c)=>({...d,[c]:"loading"}),{})}));const b=m.map(l=>{const d=f.getIndexPath(l),c=f.getValuePath(d),h=f.findNode(l);return{id:l,indexPath:d,valuePath:c,node:h}}),C=o.get("pendingAborts"),P=a("loadChildren");Le(P,()=>"[zag-js/tree-view] `loadChildren` is required for async expansion");const E=b.map(({id:l,indexPath:d,valuePath:c,node:h})=>{const x=C.get(l);x&&(x.abort(),C.delete(l));const V=new AbortController;return C.set(l,V),P({valuePath:c,indexPath:d,node:h,signal:V.signal})});Promise.allSettled(E).then(l=>{var d,c;const h=[],x=[],V=n.get("loadingStatus");let O=a("collection");l.forEach((k,p)=>{const{id:D,indexPath:K,node:ce,valuePath:_e}=b[p];k.status==="fulfilled"?(V[D]="loaded",h.push(D),O=O.replace(K,{...ce,children:k.value})):(C.delete(D),Reflect.deleteProperty(V,D),x.push({node:ce,error:k.reason,indexPath:K,valuePath:_e}))}),n.set("loadingStatus",V),h.length&&(n.set("expandedValue",k=>I(j(k,...h))),(d=a("onLoadChildrenComplete"))==null||d({collection:O})),x.length&&((c=a("onLoadChildrenError"))==null||c({nodes:x}))})}function R(e){const{prop:t,context:n}=e;return function({indexPath:a}){return t("collection").getValuePath(a).slice(0,-1).some(o=>!n.get("expandedValue").includes(o))}}var{and:S}=Ie(),ut=Be({props({props:e}){return{selectionMode:"single",collection:be.empty(),typeahead:!0,expandOnClick:!0,defaultExpandedValue:[],defaultSelectedValue:[],...e}},initialState(){return"idle"},context({prop:e,bindable:t,getContext:n}){return{expandedValue:t(()=>({defaultValue:e("defaultExpandedValue"),value:e("expandedValue"),isEqual:q,onChange(a){var o;const s=n().get("focusedValue");(o=e("onExpandedChange"))==null||o({expandedValue:a,focusedValue:s,get expandedNodes(){return e("collection").findNodes(a)}})}})),selectedValue:t(()=>({defaultValue:e("defaultSelectedValue"),value:e("selectedValue"),isEqual:q,onChange(a){var o;const s=n().get("focusedValue");(o=e("onSelectionChange"))==null||o({selectedValue:a,focusedValue:s,get selectedNodes(){return e("collection").findNodes(a)}})}})),focusedValue:t(()=>({defaultValue:e("defaultFocusedValue")||null,value:e("focusedValue"),onChange(a){var o;(o=e("onFocusChange"))==null||o({focusedValue:a,get focusedNode(){return a?e("collection").findNode(a):null}})}})),loadingStatus:t(()=>({defaultValue:{}})),checkedValue:t(()=>({defaultValue:e("defaultCheckedValue")||[],value:e("checkedValue"),isEqual:q,onChange(a){var o;(o=e("onCheckedChange"))==null||o({checkedValue:a})}}))}},refs(){return{typeaheadState:{...te.defaultOptions},pendingAborts:new Map}},computed:{isMultipleSelection:({prop:e})=>e("selectionMode")==="multiple",isTypingAhead:({refs:e})=>e.get("typeaheadState").keysSoFar.length>0,visibleNodes:({prop:e,context:t})=>{const n=[];return e("collection").visit({skip:R({prop:e,context:t}),onEnter:(a,o)=>{n.push({node:a,indexPath:o})}}),n}},on:{"EXPANDED.SET":{actions:["setExpanded"]},"EXPANDED.CLEAR":{actions:["clearExpanded"]},"EXPANDED.ALL":{actions:["expandAllBranches"]},"BRANCH.EXPAND":{actions:["expandBranches"]},"BRANCH.COLLAPSE":{actions:["collapseBranches"]},"SELECTED.SET":{actions:["setSelected"]},"SELECTED.ALL":[{guard:S("isMultipleSelection","moveFocus"),actions:["selectAllNodes","focusTreeLastNode"]},{guard:"isMultipleSelection",actions:["selectAllNodes"]}],"SELECTED.CLEAR":{actions:["clearSelected"]},"NODE.SELECT":{actions:["selectNode"]},"NODE.DESELECT":{actions:["deselectNode"]},"CHECKED.TOGGLE":{actions:["toggleChecked"]},"CHECKED.SET":{actions:["setChecked"]},"CHECKED.CLEAR":{actions:["clearChecked"]}},exit:["clearPendingAborts"],states:{idle:{on:{"NODE.FOCUS":{actions:["setFocusedNode"]},"NODE.ARROW_DOWN":[{guard:S("isShiftKey","isMultipleSelection"),actions:["focusTreeNextNode","extendSelectionToNextNode"]},{actions:["focusTreeNextNode"]}],"NODE.ARROW_UP":[{guard:S("isShiftKey","isMultipleSelection"),actions:["focusTreePrevNode","extendSelectionToPrevNode"]},{actions:["focusTreePrevNode"]}],"NODE.ARROW_LEFT":{actions:["focusBranchNode"]},"BRANCH_NODE.ARROW_LEFT":[{guard:"isBranchExpanded",actions:["collapseBranch"]},{actions:["focusBranchNode"]}],"BRANCH_NODE.ARROW_RIGHT":[{guard:S("isBranchFocused","isBranchExpanded"),actions:["focusBranchFirstNode"]},{actions:["expandBranch"]}],"SIBLINGS.EXPAND":{actions:["expandSiblingBranches"]},"NODE.HOME":[{guard:S("isShiftKey","isMultipleSelection"),actions:["extendSelectionToFirstNode","focusTreeFirstNode"]},{actions:["focusTreeFirstNode"]}],"NODE.END":[{guard:S("isShiftKey","isMultipleSelection"),actions:["extendSelectionToLastNode","focusTreeLastNode"]},{actions:["focusTreeLastNode"]}],"NODE.CLICK":[{guard:S("isCtrlKey","isMultipleSelection"),actions:["toggleNodeSelection"]},{guard:S("isShiftKey","isMultipleSelection"),actions:["extendSelectionToNode"]},{actions:["selectNode"]}],"BRANCH_NODE.CLICK":[{guard:S("isCtrlKey","isMultipleSelection"),actions:["toggleNodeSelection"]},{guard:S("isShiftKey","isMultipleSelection"),actions:["extendSelectionToNode"]},{guard:"expandOnClick",actions:["selectNode","toggleBranchNode"]},{actions:["selectNode"]}],"BRANCH_TOGGLE.CLICK":{actions:["toggleBranchNode"]},"TREE.TYPEAHEAD":{actions:["focusMatchedNode"]}}}},implementations:{guards:{isBranchFocused:({context:e,event:t})=>e.get("focusedValue")===t.id,isBranchExpanded:({context:e,event:t})=>e.get("expandedValue").includes(t.id),isShiftKey:({event:e})=>e.shiftKey,isCtrlKey:({event:e})=>e.ctrlKey,hasSelectedItems:({context:e})=>e.get("selectedValue").length>0,isMultipleSelection:({prop:e})=>e("selectionMode")==="multiple",moveFocus:({event:e})=>!!e.moveFocus,expandOnClick:({prop:e})=>!!e("expandOnClick")},actions:{selectNode({context:e,event:t}){const n=t.id||t.value;e.set("selectedValue",a=>n==null?a:!t.isTrusted&&M(n)?a.concat(...n):[M(n)?Re(n):n].filter(Boolean))},deselectNode({context:e,event:t}){const n=U(t.id||t.value);e.set("selectedValue",a=>W(a,...n))},setFocusedNode({context:e,event:t}){e.set("focusedValue",t.id)},clearFocusedNode({context:e}){e.set("focusedValue",null)},clearSelectedItem({context:e}){e.set("selectedValue",[])},toggleBranchNode({context:e,event:t,action:n}){const a=e.get("expandedValue").includes(t.id);n(a?["collapseBranch"]:["expandBranch"])},expandBranch(e){const{event:t}=e;G(e,[t.id])},expandBranches(e){const{context:t,event:n}=e,a=U(n.value);G(e,Y(a,t.get("expandedValue")))},collapseBranch({context:e,event:t}){e.set("expandedValue",n=>W(n,t.id))},collapseBranches(e){const{context:t,event:n}=e,a=U(n.value);t.set("expandedValue",o=>W(o,...a))},setExpanded({context:e,event:t}){M(t.value)&&e.set("expandedValue",t.value)},clearExpanded({context:e}){e.set("expandedValue",[])},setSelected({context:e,event:t}){M(t.value)&&e.set("selectedValue",t.value)},clearSelected({context:e}){e.set("selectedValue",[])},focusTreeFirstNode({prop:e,scope:t}){const n=e("collection"),a=n.getFirstNode(),o=n.getNodeValue(a);L(t,o)},focusTreeLastNode(e){const{prop:t,scope:n}=e,a=t("collection"),o=a.getLastNode(void 0,{skip:R(e)}),s=a.getNodeValue(o);L(n,s)},focusBranchFirstNode({event:e,prop:t,scope:n}){const a=t("collection"),o=a.findNode(e.id),s=a.getFirstNode(o),r=a.getNodeValue(s);L(n,r)},focusTreeNextNode(e){const{event:t,prop:n,scope:a}=e,o=n("collection"),s=o.getNextNode(t.id,{skip:R(e)});if(!s)return;const r=o.getNodeValue(s);L(a,r)},focusTreePrevNode(e){const{event:t,prop:n,scope:a}=e,o=n("collection"),s=o.getPreviousNode(t.id,{skip:R(e)});if(!s)return;const r=o.getNodeValue(s);L(a,r)},focusBranchNode({event:e,prop:t,scope:n}){const a=t("collection"),o=a.getParentNode(e.id),s=o?a.getNodeValue(o):void 0;L(n,s)},selectAllNodes({context:e,prop:t}){e.set("selectedValue",t("collection").getValues())},focusMatchedNode(e){const{context:t,prop:n,refs:a,event:o,scope:s,computed:r}=e,i=r("visibleNodes").map(({node:v})=>({textContent:n("collection").stringifyNode(v),id:n("collection").getNodeValue(v)})),f=te(i,{state:a.get("typeaheadState"),activeId:t.get("focusedValue"),key:o.key});L(s,f==null?void 0:f.id)},toggleNodeSelection({context:e,event:t}){const n=ie(e.get("selectedValue"),t.id);e.set("selectedValue",n)},expandAllBranches(e){const{context:t,prop:n}=e,a=n("collection").getBranchValues(),o=Y(a,t.get("expandedValue"));G(e,o)},expandSiblingBranches(e){const{context:t,event:n,prop:a}=e,o=a("collection"),s=o.getIndexPath(n.id);if(!s)return;const r=o.getSiblingNodes(s).map(f=>o.getNodeValue(f)),i=Y(r,t.get("expandedValue"));G(e,i)},extendSelectionToNode(e){const{context:t,event:n,prop:a,computed:o}=e,s=a("collection"),r=z(t.get("selectedValue"))||s.getNodeValue(s.getFirstNode()),i=n.id;let f=[r,i],v=0;o("visibleNodes").forEach(({node:m})=>{const b=s.getNodeValue(m);v===1&&f.push(b),(b===r||b===i)&&v++}),t.set("selectedValue",I(f))},extendSelectionToNextNode(e){const{context:t,event:n,prop:a}=e,o=a("collection"),s=o.getNextNode(n.id,{skip:R(e)});if(!s)return;const r=new Set(t.get("selectedValue")),i=o.getNodeValue(s);i!=null&&(r.has(n.id)&&r.has(i)?r.delete(n.id):r.has(i)||r.add(i),t.set("selectedValue",Array.from(r)))},extendSelectionToPrevNode(e){const{context:t,event:n,prop:a}=e,o=a("collection"),s=o.getPreviousNode(n.id,{skip:R(e)});if(!s)return;const r=new Set(t.get("selectedValue")),i=o.getNodeValue(s);i!=null&&(r.has(n.id)&&r.has(i)?r.delete(n.id):r.has(i)||r.add(i),t.set("selectedValue",Array.from(r)))},extendSelectionToFirstNode(e){const{context:t,prop:n}=e,a=n("collection"),o=z(t.get("selectedValue")),s=[];a.visit({skip:R(e),onEnter:r=>{const i=a.getNodeValue(r);if(s.push(i),i===o)return"stop"}}),t.set("selectedValue",s)},extendSelectionToLastNode(e){const{context:t,prop:n}=e,a=n("collection"),o=z(t.get("selectedValue")),s=[];let r=!1;a.visit({skip:R(e),onEnter:i=>{const f=a.getNodeValue(i);f===o&&(r=!0),r&&s.push(f)}}),t.set("selectedValue",s)},clearPendingAborts({refs:e}){const t=e.get("pendingAborts");t.forEach(n=>n.abort()),t.clear()},toggleChecked({context:e,event:t,prop:n}){const a=n("collection");e.set("checkedValue",o=>t.isBranch?st(a,t.value,o):ie(o,t.value))},setChecked({context:e,event:t}){e.set("checkedValue",t.value)},clearChecked({context:e}){e.set("checkedValue",[])}}}});fe()(["ids","collection","dir","expandedValue","expandOnClick","defaultFocusedValue","focusedValue","getRootNode","id","onExpandedChange","onFocusChange","onSelectionChange","checkedValue","selectedValue","selectionMode","typeahead","defaultExpandedValue","defaultSelectedValue","defaultCheckedValue","onCheckedChange","onLoadChildrenComplete","onLoadChildrenError","loadChildren"]);fe()(["node","indexPath"]);const ht=e=>{const t=N.useId(),{dir:n}=Oe(),{getRootNode:a}=je(),o={id:t,dir:n,getRootNode:a,...e},s=Ke(ut,o);return it(s,$e)},pt=(e,t)=>{const[n,a]=Xe(e),[o,s]=re()(a,["checkedValue","collection","defaultCheckedValue","defaultExpandedValue","defaultFocusedValue","defaultSelectedValue","expandedValue","expandOnClick","focusedValue","id","ids","loadChildren","onCheckedChange","onExpandedChange","onFocusChange","onLoadChildrenComplete","onLoadChildrenError","onSelectionChange","selectedValue","selectionMode","typeahead"]),r=ht(o),i=w(r.getRootProps(),s);return u.jsx(tt,{value:r,children:u.jsx(qe,{value:n,children:u.jsx(_.div,{...i,ref:t})})})},ft=N.forwardRef(pt),Pe=N.forwardRef((e,t)=>{const n=T(),a=w(n.getTreeProps(),e);return u.jsx(_.div,{...a,ref:t})});Pe.displayName="TreeViewTree";const se=N.forwardRef((e,t)=>{const n=T(),a=A(),o=w(n.getNodeCheckboxProps(a),e);return u.jsx(_.span,{...o,ref:t})});se.displayName="TreeViewNodeCheckbox";const ke=e=>{const{children:t,indeterminate:n,fallback:a}=e,o=ge().checked;return o==="indeterminate"&&n?u.jsx(u.Fragment,{children:n}):o===!0&&t?u.jsx(u.Fragment,{children:t}):u.jsx(u.Fragment,{children:a})};ke.displayName="TreeViewNodeCheckboxIndicator";const we=N.createContext(void 0);function xt({children:e,disabled:t,getIndexPathForId:n,multiple:a}){return u.jsx(we.Provider,{value:{disabled:t,getIndexPathForId:n,multiple:a},children:e})}function gt(){const e=N.useContext(we);if(!e)throw new Error("useTreeView must be used within a TreeViewProvider");return e}const vt={"tree-view":"_tree-view_1dn67_2"},Nt=N.forwardRef(({children:e,className:t,defaultExpandedValue:n,defaultValue:a,disabled:o,expandedValue:s,items:r,multiple:i,onExpandedChange:f,onValueChange:v,value:m,...b},C)=>{const P=N.useMemo(()=>Ze(r),[r]),E=N.useMemo(()=>{const h=new Map;function x(V,O=[]){V!=null&&V.length&&V.forEach((k,p)=>{var D;const K=[...O,p];h.set(k.id,K),(D=k.children)!=null&&D.length&&x(k.children,K)})}return x(r,[]),h},[r]);function l(h){if(!v)return;const x=et(h.selectedValue,i),V=Array.isArray(x)?x:[x];v({value:V})}function d(h){v&&v({value:h.checkedValue})}function c(h){f&&f(h)}return u.jsx(xt,{disabled:o,multiple:i,getIndexPathForId:h=>E.get(h),children:u.jsx(ft,{className:de(vt["tree-view"],t),collection:P,"data-ods":"tree-view",defaultExpandedValue:n,expandedValue:s,onExpandedChange:c,ref:C,selectionMode:i?"multiple":"single",...i?{checkedValue:m,defaultCheckedValue:a,onCheckedChange:d}:{defaultSelectedValue:a,onSelectionChange:l,selectedValue:m},...b,children:u.jsx(Pe,{children:e})})})});Nt.displayName="TreeView";const De=({isDisabled:e})=>u.jsx(ke,{fallback:u.jsx(J,{checked:!1,disabled:e,children:u.jsx(Z,{})}),indeterminate:u.jsx(J,{checked:"indeterminate",disabled:e,children:u.jsx(Z,{})}),children:u.jsx(J,{checked:!0,disabled:e,children:u.jsx(Z,{})})}),X=({children:e,item:t})=>{var n,a,o;const{expandedValue:s}=T(),r=(s==null?void 0:s.includes(t.id))??!1;if(typeof e=="function"){const i=e({customData:t.customRendererData,isBranch:!!((n=t.children)!=null&&n.length),isExpanded:r,item:t});return(a=t.children)!=null&&a.length?u.jsx(ae,{asChild:!0,children:i}):u.jsx(ne,{asChild:!0,children:i})}return(o=t.children)!=null&&o.length?u.jsx(ae,{children:t.name}):u.jsx(ne,{children:t.name})},$={"tree-view-node-branch__control":"_tree-view-node-branch__control_q2e1u_2","tree-view-node-branch__control__checkbox":"_tree-view-node-branch__control__checkbox_q2e1u_16","tree-view-node-branch__control__chevron":"_tree-view-node-branch__control__chevron_q2e1u_42","tree-view-node-branch__control__children":"_tree-view-node-branch__control__children_q2e1u_54"},mt=N.forwardRef(({className:e,effectiveIndexPath:t,getIndexPathForId:n,isDisabled:a,item:o,multiple:s,labelChildren:r,renderChildNode:i,...f},v)=>{var m,b;const{checkedValue:C}=T(),P=N.useRef(null),E=(m=P.current)==null?void 0:m.getAttribute("data-state");let l;s?E==="indeterminate"?l="mixed":E==="checked"?l="true":l=C!=null&&C.includes(o.id)?"true":"false":l=void 0;function d(c){xe(c,s,a,P)}return u.jsxs(ve,{"aria-disabled":a,className:e,"data-disabled":a?!0:void 0,"data-ods":"tree-view-node-branch",onKeyDown:d,ref:v,...f,children:[u.jsxs(me,{"aria-checked":l,"aria-disabled":a,className:$["tree-view-node-branch__control"],"data-disabled":a?!0:void 0,role:s?"checkbox":"group",tabIndex:a?-1:void 0,children:[u.jsx(Ce,{className:$["tree-view-node-branch__control__chevron"],children:u.jsx(Ue,{name:Ye.chevronRight})}),s?u.jsxs(se,{"aria-disabled":a,className:$["tree-view-node-branch__control__checkbox"],"data-disabled":a?!0:void 0,tabIndex:-1,ref:P,children:[u.jsx(De,{isDisabled:a}),u.jsx(X,{item:o,children:r})]}):u.jsx(u.Fragment,{children:u.jsx(X,{item:o,children:r})})]}),u.jsxs(Ne,{className:$["tree-view-node-branch__control__children"],children:[u.jsx(Ee,{}),(b=o.children)==null?void 0:b.map((c,h)=>{if(!(c!=null&&c.id)||!(c!=null&&c.name))return null;const x=n(c.id)??[...t,h];return i(c,x)})]})]})}),pe={"tree-view-node-item":"_tree-view-node-item_1ktxc_2","tree-view-node-item__checkbox":"_tree-view-node-item__checkbox_1ktxc_13"},Et=N.forwardRef(({className:e,isDisabled:t,item:n,labelChildren:a,multiple:o,...s},r)=>{const{checkedValue:i}=T(),f=N.useRef(null),v=(i==null?void 0:i.includes(n.id))??!1;let m;o?m=v?"true":"false":m=void 0;function b(C){xe(C,o,t,f)}return u.jsx(Ve,{"aria-checked":m,"aria-disabled":t,className:de(pe["tree-view-node-item"],e),"data-disabled":t?!0:void 0,"data-ods":"tree-view-node-item",onKeyDown:b,ref:r,tabIndex:t?-1:void 0,...s,children:o?u.jsxs(se,{"aria-disabled":t,className:pe["tree-view-node-item__checkbox"],"data-disabled":t?!0:void 0,ref:f,tabIndex:-1,children:[u.jsx(De,{isDisabled:t}),u.jsx(X,{item:n,children:a})]}):u.jsx(X,{item:n,children:a})})}),Se=N.forwardRef(({children:e,className:t,indexPath:n,item:a,...o},s)=>{var r;const{multiple:i,disabled:f,getIndexPathForId:v}=gt(),m=v(a.id)??n??[],b=!!((r=a.children)!=null&&r.length),C=!!(f||a.disabled),P={...a,disabled:C};return u.jsx(ot,{indexPath:m,node:P,children:b?u.jsx(mt,{className:t,effectiveIndexPath:m,getIndexPathForId:v,isDisabled:C,item:a,labelChildren:e,multiple:i,renderChildNode:(E,l)=>u.jsx(Se,{indexPath:l,item:E,children:e},E.id),...o,ref:s}):u.jsx(Et,{className:t,isDisabled:C,item:a,labelChildren:e,multiple:i,...o,ref:s})})});Se.displayName="TreeViewNode";const Ct={"tree-view-nodes":"_tree-view-nodes_1hk4c_2"},Vt=N.forwardRef(({children:e,className:t,...n},a)=>u.jsx("div",{className:de(Ct["tree-view-nodes"],t),"data-ods":"tree-view-nodes",ref:a,...n,children:e}));Vt.displayName="TreeViewNodes";export{Se as D,Nt as P,Vt as w};
