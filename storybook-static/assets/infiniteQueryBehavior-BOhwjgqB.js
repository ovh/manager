import{e as T,a as j,b as E}from"./QueryClientProvider-CDvRjfR1.js";function S(a){return{onFetch:(e,i)=>{const n=async()=>{var p,h,y,v,b;const o=e.options,l=(y=(h=(p=e.fetchOptions)==null?void 0:p.meta)==null?void 0:h.fetchMore)==null?void 0:y.direction,P=((v=e.state.data)==null?void 0:v.pages)||[],d=((b=e.state.data)==null?void 0:b.pageParams)||[],K={pages:[],pageParams:[]};let f=!1;const k=r=>{Object.defineProperty(r,"signal",{enumerable:!0,get:()=>(e.signal.aborted?f=!0:e.signal.addEventListener("abort",()=>{f=!0}),e.signal)})},N=T(e.options,e.fetchOptions),c=async(r,s,t)=>{if(f)return Promise.reject();if(s==null&&r.pages.length)return Promise.resolve(r);const u={queryKey:e.queryKey,pageParam:s,direction:t?"backward":"forward",meta:e.options.meta};k(u);const O=await N(u),{maxPages:F}=e.options,w=t?j:E;return{pages:w(r.pages,O,F),pageParams:w(r.pageParams,s,F)}};let g;if(l&&P.length){const r=l==="backward",s=r?q:m,t={pages:P,pageParams:d},u=s(o,t);g=await c(t,u,r)}else{g=await c(K,d[0]??o.initialPageParam);const r=a??P.length;for(let s=1;s<r;s++){const t=m(o,g);if(t==null)break;g=await c(g,t)}}return g};e.options.persister?e.fetchFn=()=>{var o,l;return(l=(o=e.options).persister)==null?void 0:l.call(o,n,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},i)}:e.fetchFn=n}}}function m(a,{pages:e,pageParams:i}){const n=e.length-1;return e.length>0?a.getNextPageParam(e[n],e,i[n],i):void 0}function q(a,{pages:e,pageParams:i}){var n;return e.length>0?(n=a.getPreviousPageParam)==null?void 0:n.call(a,e[0],e,i[0],i):void 0}function B(a,e){return e?m(a,e)!=null:!1}function C(a,e){return!e||!a.getPreviousPageParam?!1:q(a,e)!=null}export{C as a,B as h,S as i};
