import{j as _}from"./jsx-runtime-CKrituN3.js";import{r as p}from"./index-CBqU2yxZ.js";import{n as q,d as C,o as R}from"./index-CqmMgYso.js";import{d as S,u as v,t as g,c as z,v as V,w as W}from"./index-BoGQ30sD.js";import{u as L}from"./useTranslation-pmbu4BU3.js";import{i as l}from"./i18next-ihUiNgJT.js";var a;(function(e){e.Includes="includes",e.StartsWith="starts_with",e.EndsWith="ends_with",e.IsEqual="is_equal",e.IsDifferent="is_different",e.IsLower="is_lower",e.IsHigher="is_higher",e.IsBefore="is_before",e.IsAfter="is_after",e.IsIn="is_in"})(a||(a={}));var u;(function(e){e.Numeric="Numeric",e.String="String",e.Date="Date",e.Boolean="Boolean",e.Options="Options"})(u||(u={}));const Io={Numeric:[a.IsEqual,a.IsDifferent,a.IsLower,a.IsHigher],String:[a.Includes,a.StartsWith,a.EndsWith,a.IsEqual,a.IsDifferent],Date:[a.IsEqual,a.IsDifferent,a.IsBefore,a.IsAfter],Boolean:[a.IsEqual,a.IsDifferent],Options:[a.IsEqual,a.IsDifferent]};function jo(e=[],m=[]){return e.filter(n=>{let r=!0;return m.forEach(s=>{const c=n[s.key],d=s.value;switch(s.comparator){case a.Includes:r=r&&`${c}`.toLowerCase().includes(d.toLowerCase());break;case a.StartsWith:r=r&&`${c}`.toLowerCase().startsWith(d.toLowerCase());break;case a.EndsWith:r=r&&`${c}`.toLowerCase().endsWith(d.toLowerCase());break;case a.IsEqual:s.type===u.Date?r=r&&new Date(`${c}`).setHours(0,0,0,0)===new Date(d).setHours(0,0,0,0):r=r&&`${c}`.toLowerCase()===d.toLowerCase();break;case a.IsDifferent:s.type===u.Date?r=r&&new Date(`${c}`).setHours(0,0,0,0)!==new Date(d).setHours(0,0,0,0):r=r&&`${c}`.toLowerCase()!==d.toLowerCase();break;case a.IsLower:r=r&&Number(c)<Number(d);break;case a.IsHigher:r=r&&Number(c)>Number(d);break;case a.IsBefore:r=r&&new Date(`${c}`)<new Date(d);break;case a.IsAfter:r=r&&new Date(`${c}`)>new Date(d);break;case a.IsIn:r=r&&!!s.value.find(i=>i===`${c}`);break}}),r})}const B="Filtern",T="Spalte",H="Bedingung",P="enthält",G="beginnt mit",K="endet mit",M="ist gleich",U="ist nicht gleich",Y="ist kleiner als",J="ist größer als",Z="ist",Q="ist vor",X="Ja",ee="Nein",re="Wert",oe="Hinzufügen",ae={common_criteria_adder_filter_label:B,common_criteria_adder_column_label:T,common_criteria_adder_operator_label:H,common_criteria_adder_operator_includes:P,common_criteria_adder_operator_starts_with:G,common_criteria_adder_operator_ends_with:K,common_criteria_adder_operator_is_equal:M,common_criteria_adder_operator_is_different:U,common_criteria_adder_operator_is_lower:Y,common_criteria_adder_operator_is_higher:J,common_criteria_adder_operator_is_before:Z,common_criteria_adder_operator_is_after:Q,common_criteria_adder_true_label:X,common_criteria_adder_false_label:ee,common_criteria_adder_value_label:re,common_criteria_adder_submit_label:oe},_e="Filter",te="Column",ie="Condition",ce="includes",de="starts with",ne="ends with",se="is equal to",me="is different from",le="is lower than",ue="is higher than",pe="is",fe="is before",be="Yes",$e="No",he="Value",we="Add",ve={common_criteria_adder_filter_label:_e,common_criteria_adder_column_label:te,common_criteria_adder_operator_label:ie,common_criteria_adder_operator_includes:ce,common_criteria_adder_operator_starts_with:de,common_criteria_adder_operator_ends_with:ne,common_criteria_adder_operator_is_equal:se,common_criteria_adder_operator_is_different:me,common_criteria_adder_operator_is_lower:le,common_criteria_adder_operator_is_higher:ue,common_criteria_adder_operator_is_before:pe,common_criteria_adder_operator_is_after:fe,common_criteria_adder_true_label:be,common_criteria_adder_false_label:$e,common_criteria_adder_value_label:he,common_criteria_adder_submit_label:we},ge="Filtrar",Ie="Columna",je="Condición",xe="contiene",Ne="empieza por",De="termina por",ye="es igual a",qe="no es",Se="es inferior a",Fe="es superior a",Oe="es",ke="es anterior a",Ee="Sí",Le="No",Ae="Valor",Ce="Añadir",Re={common_criteria_adder_filter_label:ge,common_criteria_adder_column_label:Ie,common_criteria_adder_operator_label:je,common_criteria_adder_operator_includes:xe,common_criteria_adder_operator_starts_with:Ne,common_criteria_adder_operator_ends_with:De,common_criteria_adder_operator_is_equal:ye,common_criteria_adder_operator_is_different:qe,common_criteria_adder_operator_is_lower:Se,common_criteria_adder_operator_is_higher:Fe,common_criteria_adder_operator_is_before:Oe,common_criteria_adder_operator_is_after:ke,common_criteria_adder_true_label:Ee,common_criteria_adder_false_label:Le,common_criteria_adder_value_label:Ae,common_criteria_adder_submit_label:Ce},ze="Filtrer",Ve="Colonne",We="Condition",Be="contient",Te="débute par",He="termine par",Pe="est égal à",Ge="est différent de",Ke="est inférieur à",Me="est supérieur à",Ue="est",Ye="est avant",Je="Oui",Ze="Non",Qe="Valeur",Xe="Ajouter",er={common_criteria_adder_filter_label:ze,common_criteria_adder_column_label:Ve,common_criteria_adder_operator_label:We,common_criteria_adder_operator_includes:Be,common_criteria_adder_operator_starts_with:Te,common_criteria_adder_operator_ends_with:He,common_criteria_adder_operator_is_equal:Pe,common_criteria_adder_operator_is_different:Ge,common_criteria_adder_operator_is_lower:Ke,common_criteria_adder_operator_is_higher:Me,common_criteria_adder_operator_is_before:Ue,common_criteria_adder_operator_is_after:Ye,common_criteria_adder_true_label:Je,common_criteria_adder_false_label:Ze,common_criteria_adder_value_label:Qe,common_criteria_adder_submit_label:Xe},rr="Filtrer",or="Colonne",ar="Condition",_r="contient",tr="débute par",ir="termine par",cr="est égal à",dr="est différent de",nr="est inférieur à",sr="est supérieur à",mr="est",lr="est avant",ur="Oui",pr="Non",fr="Valeur",br="Ajouter",$r={common_criteria_adder_filter_label:rr,common_criteria_adder_column_label:or,common_criteria_adder_operator_label:ar,common_criteria_adder_operator_includes:_r,common_criteria_adder_operator_starts_with:tr,common_criteria_adder_operator_ends_with:ir,common_criteria_adder_operator_is_equal:cr,common_criteria_adder_operator_is_different:dr,common_criteria_adder_operator_is_lower:nr,common_criteria_adder_operator_is_higher:sr,common_criteria_adder_operator_is_before:mr,common_criteria_adder_operator_is_after:lr,common_criteria_adder_true_label:ur,common_criteria_adder_false_label:pr,common_criteria_adder_value_label:fr,common_criteria_adder_submit_label:br},hr="Filtra",wr="Colonna",vr="Condizione",gr="contiene",Ir="inizia per",jr="termina per",xr="è uguale a",Nr="è diverso da",Dr="è inferiore a",yr="è superiore a",qr="è",Sr="è prima di",Fr="Sì",Or="No",kr="Valore",Er="Aggiungi",Lr={common_criteria_adder_filter_label:hr,common_criteria_adder_column_label:wr,common_criteria_adder_operator_label:vr,common_criteria_adder_operator_includes:gr,common_criteria_adder_operator_starts_with:Ir,common_criteria_adder_operator_ends_with:jr,common_criteria_adder_operator_is_equal:xr,common_criteria_adder_operator_is_different:Nr,common_criteria_adder_operator_is_lower:Dr,common_criteria_adder_operator_is_higher:yr,common_criteria_adder_operator_is_before:qr,common_criteria_adder_operator_is_after:Sr,common_criteria_adder_true_label:Fr,common_criteria_adder_false_label:Or,common_criteria_adder_value_label:kr,common_criteria_adder_submit_label:Er},Ar="Filtruj",Cr="Kolumna",Rr="Warunek",zr="zawiera",Vr="zaczyna się na",Wr="kończy się na",Br="jest równy",Tr="nie jest",Hr="jest mniejszy niż",Pr="jest większy niż",Gr="jest",Kr="jest przed",Mr="Tak",Ur="Nie",Yr="Wartość",Jr="Dodaj",Zr={common_criteria_adder_filter_label:Ar,common_criteria_adder_column_label:Cr,common_criteria_adder_operator_label:Rr,common_criteria_adder_operator_includes:zr,common_criteria_adder_operator_starts_with:Vr,common_criteria_adder_operator_ends_with:Wr,common_criteria_adder_operator_is_equal:Br,common_criteria_adder_operator_is_different:Tr,common_criteria_adder_operator_is_lower:Hr,common_criteria_adder_operator_is_higher:Pr,common_criteria_adder_operator_is_before:Gr,common_criteria_adder_operator_is_after:Kr,common_criteria_adder_true_label:Mr,common_criteria_adder_false_label:Ur,common_criteria_adder_value_label:Yr,common_criteria_adder_submit_label:Jr},Qr="Filtrar",Xr="Coluna",eo="Regra",ro="contém",oo="começa por",ao="termina em",_o="é igual a",to="é diferente de",io="é inferior a",co="é superior a",no="é",so="está antes",mo="Sim",lo="Não",uo="Valor",po="Adicionar",fo={common_criteria_adder_filter_label:Qr,common_criteria_adder_column_label:Xr,common_criteria_adder_operator_label:eo,common_criteria_adder_operator_includes:ro,common_criteria_adder_operator_starts_with:oo,common_criteria_adder_operator_ends_with:ao,common_criteria_adder_operator_is_equal:_o,common_criteria_adder_operator_is_different:to,common_criteria_adder_operator_is_lower:io,common_criteria_adder_operator_is_higher:co,common_criteria_adder_operator_is_before:no,common_criteria_adder_operator_is_after:so,common_criteria_adder_true_label:mo,common_criteria_adder_false_label:lo,common_criteria_adder_value_label:uo,common_criteria_adder_submit_label:po};function F(){l.addResources("de_DE","filters",ae),l.addResources("en_GB","filters",ve),l.addResources("es_ES","filters",Re),l.addResources("fr_CA","filters",er),l.addResources("fr_FR","filters",$r),l.addResources("it_IT","filters",Lr),l.addResources("pl_PL","filters",Zr),l.addResources("pt_PT","filters",fo)}l.isInitialized?F():l.on("initialized",F);function O({columns:e,onAddFilter:m}){var j,x,N,D,y;const{t:n}=L("filters"),[r,s]=p.useState(((j=e==null?void 0:e[0])==null?void 0:j.id)||""),[c,d]=p.useState(((N=(x=e==null?void 0:e[0])==null?void 0:x.comparators)==null?void 0:N[0])||a.IsEqual),[i,f]=p.useState(""),[$,h]=p.useState(null),o=p.useMemo(()=>e.find(({id:t})=>r===t),[e,r]),I=p.useMemo(()=>(o==null?void 0:o.type)===u.Date?$!==null:(o==null?void 0:o.type)===u.Numeric?!Number.isNaN(Number(i))&&i!=="":i!=="",[o,$,i]),w=()=>{I&&(m({key:r,comparator:c,value:o.type===u.Date?$.toISOString():i,type:o.type},o),f(""),h(null))};p.useEffect(()=>{d(o==null?void 0:o.comparators[0]),f(""),h(null)},[o]);let b;return(o==null?void 0:o.type)===u.Date?b=_.jsx(V,{name:"filter-add_value-input",className:"border",value:$,"data-testid":"filter-add_value-date",onOdsChange:t=>h(t.detail.value)}):(o==null?void 0:o.type)===u.Numeric?b=_.jsx(S,{name:"filter-add_value-input",className:"border",type:q.text,value:i,pattern:"(\\+|-)?[0-9]+([.][0-9]+)?","data-testid":"filter-add_value-numeric",onOdsChange:t=>f(`${t.detail.value}`),onKeyDown:t=>{t.key==="Enter"&&w()}}):((D=o==null?void 0:o.options)==null?void 0:D.length)>0?b=_.jsx(v,{value:i,name:"filter-add_value-select","data-testid":"filter-add_value-select",onOdsChange:t=>f(t.detail.value),children:o==null?void 0:o.options.map(t=>_.jsx("option",{value:t.value,children:t.label},t.label))}):b=_.jsx(S,{name:"filter-add_value-input",className:"border",type:q.text,value:i,"data-testid":"filter-add_value-input",onOdsChange:t=>f(`${t.detail.value}`),onKeyDown:t=>{t.key==="Enter"&&w()}}),_.jsxs(_.Fragment,{children:[_.jsx("div",{children:_.jsxs(g,{className:"w-full",children:[_.jsx("div",{slot:"label",children:_.jsx("span",{className:"text-[--ods-color-heading] leading-[22px]",children:n("common_criteria_adder_column_label")})}),_.jsx(v,{value:r,name:"add-filter_select_idColumn","data-testid":"add-filter_select_idColumn",onOdsChange:t=>s(t.detail.value),children:e.map(({id:t,label:A})=>_.jsx("option",{value:t,children:A},t))})]})}),_.jsx("div",{children:_.jsxs(g,{className:"mt-2 w-full",children:[_.jsx("div",{slot:"label",children:_.jsx("span",{className:"text-[--ods-color-heading] leading-[22px]",children:n("common_criteria_adder_operator_label")})}),o&&_.jsx("div",{children:_.jsx(v,{name:`add-operator-${o.id}`,value:c,onOdsChange:t=>{d(t.detail.value)},children:(y=o.comparators)==null?void 0:y.map(t=>_.jsx("option",{value:t,children:n(`common_criteria_adder_operator_${t}`)},t))})},`filter-condition-select-${o.id}`)]})}),_.jsx("div",{children:_.jsxs(g,{className:"mt-2 w-full",children:[_.jsx("div",{slot:"label",children:_.jsx("span",{className:"text-[--ods-color-heading] leading-[22px]",children:n("common_criteria_adder_value_label")})}),b]})}),_.jsx("div",{children:_.jsx(z,{className:"mt-4 w-full filter-add-button-submit",size:C.sm,isDisabled:!I,onClick:w,"data-testid":"filter-add_submit",label:n("common_criteria_adder_submit_label")})})]})}try{O.displayName="FilterAdd",O.__docgenInfo={description:"",displayName:"FilterAdd",props:{columns:{defaultValue:null,description:"",name:"columns",required:!0,type:{name:"ColumnFilter[]"}},onAddFilter:{defaultValue:null,description:"",name:"onAddFilter",required:!0,type:{name:"(filter: Filter, column: ColumnFilter) => void"}}}}}catch{}function k({filters:e,onRemoveFilter:m}){var d;const{t:n,i18n:r}=L("filters"),s=i=>n(`common_criteria_adder_operator_${i}`),c=((d=r.language)==null?void 0:d.replace("_","-"))||"FR-fr";return _.jsx(_.Fragment,{children:e==null?void 0:e.map((i,f)=>_.jsx(W,{className:"mr-3",color:R.information,size:"lg",onOdsRemove:()=>m(i),"data-testid":"filter-list_tag_item",label:`${i.label?`${i.label} ${s(i.comparator)} `:""}
          ${i.type===u.Date?new Date(`${i.value}`).toLocaleDateString(c):`${i.value}`}`},f))})}try{k.displayName="FilterList",k.__docgenInfo={description:"",displayName:"FilterList",props:{filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterWithLabel[]"}},onRemoveFilter:{defaultValue:null,description:"",name:"onRemoveFilter",required:!0,type:{name:"(filter: FilterWithLabel) => void"}}}}}catch{}const E=(e,m)=>e.key===m.key&&e.value===m.value&&e.comparator===m.comparator;function xo(){const[e,m]=p.useState([]);return{filters:e,addFilter:n=>{n.value&&m(r=>r.some(s=>E(s,n))?r:[...r,n])},removeFilter:n=>{m(r=>r.filter(s=>!E(s,n)))}}}export{a as F,jo as a,Io as b,O as c,u as d,k as e,xo as u};
