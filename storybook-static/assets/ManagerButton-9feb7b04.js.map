{"version":3,"file":"ManagerButton-9feb7b04.js","sources":["../../src/components/ManagerButton/translations/index.ts","../../src/components/ManagerButton/ManagerButton.tsx"],"sourcesContent":["import i18next from 'i18next';\n\nimport fr_FR from './Messages_fr_FR.json';\n\nfunction addTranslations() {\n  i18next.addResources('fr_FR', 'iam', fr_FR);\n}\n\nif (i18next.isInitialized) {\n  addTranslations();\n} else {\n  i18next.on('initialized', addTranslations);\n}\n","import React, { PropsWithChildren, RefAttributes, HTMLAttributes } from 'react';\nimport {\n  OsdsButton,\n  OsdsTooltip,\n  OsdsTooltipContent,\n} from '@ovhcloud/ods-components/react';\nimport { JSX } from '@ovhcloud/ods-components';\nimport { useTranslation } from 'react-i18next';\nimport { StyleReactProps } from '@ovhcloud/ods-components/react/dist/types/react-component-lib/interfaces';\nimport './translations';\n\nimport { useAuthorizationIam } from '../../hooks/iam';\n\nexport type ManagerButtonProps = PropsWithChildren<{\n  iamActions?: string[];\n  urn?: string;\n  displayTooltip?: boolean;\n  isIamTrigger?: boolean;\n}>;\n\nexport const ManagerButton = ({\n  children,\n  iamActions,\n  urn,\n  displayTooltip = true,\n  isIamTrigger = true,\n  ...restProps\n}: ManagerButtonProps &\n  Partial<\n    JSX.OsdsButton &\n      Omit<HTMLAttributes<HTMLOsdsButtonElement>, 'style' | 'id'> &\n      StyleReactProps &\n      RefAttributes<HTMLOsdsButtonElement>\n  >) => {\n  const { t } = useTranslation('iam');\n  const { isAuthorized } = useAuthorizationIam(iamActions, urn, isIamTrigger);\n\n  if (!isAuthorized) {\n    if (!displayTooltip) {\n      return (\n        <OsdsButton {...restProps} disabled onClick={null}>\n          {children}\n        </OsdsButton>\n      );\n    }\n    return (\n      <OsdsTooltip>\n        <OsdsButton {...restProps} disabled onClick={null}>\n          {children}\n        </OsdsButton>\n        <OsdsTooltipContent slot=\"tooltip-content\">\n          <div>{t('common_iam_actions_message')}</div>\n        </OsdsTooltipContent>\n      </OsdsTooltip>\n    );\n  }\n  return <OsdsButton {...restProps}>{children}</OsdsButton>;\n};\n"],"names":["addTranslations","i18next","fr_FR","ManagerButton","children","iamActions","urn","displayTooltip","isIamTrigger","restProps","t","useTranslation","isAuthorized","useAuthorizationIam","jsx","OsdsButton","jsxs","OsdsTooltip","OsdsTooltipContent"],"mappings":"ijBAIA,SAASA,GAAkB,CACjBC,EAAA,aAAa,QAAS,MAAOC,CAAK,CAC5C,CAEID,EAAQ,cACMD,IAERC,EAAA,GAAG,cAAeD,CAAe,ECSpC,MAAAG,EAAA,CAAA,CAAuB,SAAAC,EAC5B,WAAAC,EACA,IAAAC,EACA,eAAAC,EAAA,GACiB,aAAAC,EAAA,GACF,GAAAC,CAEjB,IAAA,CAOE,KAAA,CAAA,EAAAC,CAAA,EAAAC,EAAA,KAAA,EACA,CAAA,aAAAC,CAAA,EAAAC,EAAAR,EAAAC,EAAAE,CAAA,EAEA,OAAAI,EAmBAE,EAAAA,IAAAC,EAAA,CAAA,GAAAN,EAAA,SAAAL,CAAA,CAAA,EAlBEG,EAOAS,EAAA,KAAAC,EAAA,CAAA,SAAA,CAEIH,MAAAC,EAAA,CAAA,GAAAN,EAAA,SAAA,GAAA,QAAA,KAAA,SAAAL,EAAA,EAEAU,EAAAA,IAAAI,EAAA,CAAA,KAAA,kBAAA,SAAAJ,EAAAA,IAAA,MAAA,CAAA,SAAAJ,EAAA,4BAAA,CAAA,CAAA,CAAA,CAAA,CAGA,CAAA,CAAA,EAbFI,MAAAC,EAAA,CAAA,GAAAN,EAAA,SAAA,GAAA,QAAA,KAAA,SAAAL,CAAA,CAAA,CAkBN"}