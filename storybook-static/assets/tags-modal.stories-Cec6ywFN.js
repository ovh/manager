import{j as a}from"./jsx-runtime-BRNY0I4F.js";import{b as x,c as C,d as S,u as v,e as N,f as w,g as y,h as M,i as T,j as $,k as B}from"./index-BA2H_d3W.js";import{r as i,e as I}from"./index-Bnop-kX6.js";import{i as o}from"./context-BVP_XnaJ.js";import"./index-D0sJu8id.js";const L=(t,c,e)=>{if(!c)return;const m=c.offsetWidth,d=c.offsetHeight,s=t[0]?t[0].offsetHeight+4:30,n=(e||Math.ceil(d/s))*m;let u=0,g=0;return t.forEach(f=>{if(!f)return;const r=f.getBoundingClientRect().width;e&&(r===0||u+r>n-50)||(u+=r,g+=1)}),g},D=(t,c,e)=>{const m=t.offsetWidth,d=Math.ceil((m-50)*100/c.getBoundingClientRect().width),s=Math.floor(e.length*(d/100));return e.slice(0,s)+(s<e.length?"...":"")},z=({tags:t,displayInternalTags:c})=>Object.keys(t).filter(e=>c||e.indexOf("ovh:")!==0).map(e=>`${e}:${t[e]}`),P=({tags:t,displayInternalTags:c=!1,lineNumber:e,onClick:m})=>{const d="neutral",s=z({tags:t,displayInternalTags:c}),h=i.useRef(null),[n,u]=i.useState(null),[g,f]=i.useState(s.length),r=i.useRef([]),p=i.useRef([]);return i.useEffect(()=>{if(s.length>0){const l=new ResizeObserver(()=>{const _=L(p.current,h.current,e);f(_||1),_===0&&r.current[0]&&u(D(h.current,r.current[0],s[0]))});return h.current&&l.observe(h.current),()=>l.disconnect()}},[s]),i.useEffect(()=>{p.current.length===0&&(p.current=[...r.current])},[]),Object.keys(t).length>0&&a.jsxs("div",{ref:h,className:"w-full h-full min-w-[85px]",children:[n?a.jsx(x,{className:"mr-1 mb-1",color:d,label:n}):s.slice(0,g).map((l,_)=>a.jsx(x,{className:"mr-1 mb-1",ref:j=>{r.current[_]=j},color:d,label:l},l)),g<s.length&&a.jsx(C,{href:"#",className:"text-xs",onClick:m,icon:S.chevronDoubleRight})]})},W="Tags bearbeiten",A="Suchen",H="Suchen",V="Zurück",q={edit_tags:W,search_placeholder:A,search:H,back:V},F="Edit tags",G="search",U="Search",Z="Back",X={edit_tags:F,search_placeholder:G,search:U,back:Z},J="Editar etiquetas",K="Buscar",Q="Buscar",Y="Volver",ee={edit_tags:J,search_placeholder:K,search:Q,back:Y},se="Editer tags",te="rechercher",ae="Rechercher",ce="Retour",re={edit_tags:se,search_placeholder:te,search:ae,back:ce},oe="Editer tags",ne="rechercher",le="Rechercher",ie="Retour",de={edit_tags:oe,search_placeholder:ne,search:le,back:ie},he="Modifica tag",ue="cercare",ge="Cerca",me="Indietro",fe={edit_tags:he,search_placeholder:ue,search:ge,back:me},_e="Edytuj tagi",pe="Wyszukaj",be="Szukaj",Te="Powrót",xe={edit_tags:_e,search_placeholder:pe,search:be,back:Te},$e="Editar tags",ke="procurar",Re="Pesquisar",Oe="Voltar",Ee={edit_tags:$e,search_placeholder:ke,search:Re,back:Oe};function k(){o.addResources("de_DE","tags-modal",q),o.addResources("en_GB","tags-modal",X),o.addResources("es_ES","tags-modal",ee),o.addResources("fr_CA","tags-modal",re),o.addResources("fr_FR","tags-modal",de),o.addResources("it_IT","tags-modal",fe),o.addResources("pl_PL","tags-modal",xe),o.addResources("pt_PT","tags-modal",Ee)}o.isInitialized?k():o.on("initialized",k);const je=I.forwardRef(({isOpen:t=!1,displayName:c,tags:e,displayInternalTags:m=!1,onEditTags:d,onCancel:s},h)=>{const{t:n}=v("tags-modal"),[u,g]=i.useState(""),[f,r]=i.useState(e),p=()=>{r(u?Object.fromEntries(Object.entries(e).filter(([l,_])=>l.toLowerCase().includes(u.toLowerCase())||_.toLowerCase().includes(u.toLowerCase()))):e)};return a.jsxs(N,{color:"neutral",className:"text-left",onOdsClose:s,isOpen:t,ref:h,children:[a.jsxs(w,{className:"mb-4",preset:y.heading5,children:["Tags:"," ",c]}),a.jsxs("div",{className:"flex w-full mb-4",children:[a.jsx(M,{name:"search",className:"rounded-l flex-1 mr-1",placeholder:n("search_placeholder"),type:"text",onOdsChange:l=>{g(l.detail.value)}}),a.jsx(T,{className:"rounded-r",variant:$.outline,size:B.sm,onClick:p,label:n("search")})]}),a.jsx("div",{className:"w-full min-w-[85px] h-[120px] overflow-auto",children:a.jsx(P,{tags:f})}),a.jsx(T,{variant:$.ghost,slot:"actions",color:"primary",onClick:s,label:n("back"),className:"mt-4",type:"button"}),a.jsx(T,{slot:"actions",color:"primary",onClick:d,label:n("edit_tags"),className:"mt-4",type:"button"})]})}),ye={title:"Manager React Components/Components/TagsModal",component:je},b={args:{isOpen:!0,displayName:"tags-stories",tags:{},displayInternalTags:!1,onCancel:()=>{},onEditTags:()=>{}}};var R,O,E;b.parameters={...b.parameters,docs:{...(R=b.parameters)==null?void 0:R.docs,source:{originalSource:`{
  args: {
    isOpen: true,
    displayName: 'tags-stories',
    tags: {},
    displayInternalTags: false,
    onCancel: () => {},
    onEditTags: () => {}
  }
}`,...(E=(O=b.parameters)==null?void 0:O.docs)==null?void 0:E.source}}};const Me=["DemoTagsModal"];export{b as DemoTagsModal,Me as __namedExportsOrder,ye as default};
