import{j as r}from"./jsx-runtime-ffb262ed.js";import{a as Y,b as x,O as T}from"./ods-theme-typography-size-699c556d.js";import{i as N,O as j}from"./index-e82d4dd7.js";import{c as I}from"./v4-1b9d35d1.js";import{r as m}from"./index-76fb7be0.js";import{h as R,a as z}from"./Tabs.component-ace388e9.js";import"./index-da03a860.js";import"./_commonjsHelpers-de833af9.js";import"./index-3dddd4ad.js";const K=function(s,a){return[...s.reduce((u,p)=>(u.has(a(p))||u.set(a(p),p),u),new Map).values()]},k=function(s,a){const u=new Map;return a?K(s,a).forEach(l=>{const o=a(l);u.set(o,[]),u.get(o).push(...s.filter(i=>Object.is(o,a(i))))}):u.set(void 0,s),u},E=function t({items:s,value:a,onInput:u,label:p,tileClass:l,stack:o,id:i}){var c;const[e,g]=m.useState({stacks:k(s,o==null?void 0:o.by),selectedStack:o==null?void 0:o.value,activeClass:`cursor-pointer font-bold bg-[--ods-color-blue-100] border-[--ods-color-blue-600] ${l==null?void 0:l.active}`,inactiveClass:`cursor-pointer border-[--ods-color-blue-100] hover:bg-[--ods-color-blue-100] hover:border-[--ods-color-blue-600] ${l==null?void 0:l.inactive}`}),f={selectedStack:n=>{g(d=>({...d,selectedStack:n}))},value:n=>u(n)},b={stack:{checked:m.useCallback(n=>{var d,O;return((O=(d=e.stacks)==null?void 0:d.get(n))==null?void 0:O.length)>1?Object.is(e.selectedStack,n):Object.is(e.stacks.get(n)[0],a)},[e.stacks,e.selectedStack,a]),singleton:m.useCallback(n=>{var d;return((d=e.stacks.get(n))==null?void 0:d.length)===1},[e.stacks])}};return m.useEffect(()=>{g(n=>({...n,stacks:k(s,o==null?void 0:o.by)}))},[s,o]),m.useEffect(()=>{l&&g(n=>({...n,activeClass:`cursor-pointer font-bold bg-[--ods-color-blue-100] border-[--ods-color-blue-600] ${l==null?void 0:l.active}`,inactiveClass:`cursor-pointer border-[--ods-color-blue-100] hover:bg-[--ods-color-blue-100] hover:border-[--ods-color-blue-600] ${l==null?void 0:l.inactive}`}))},[l]),m.useEffect(()=>{typeof(o==null?void 0:o.onChange)=="function"&&o.onChange(e.selectedStack)},[e.selectedStack]),m.useEffect(()=>{o&&f.selectedStack(a?o.by(a):void 0)},[a]),m.useEffect(()=>{var n;o&&((n=e.stacks.get(e.selectedStack))!=null&&n.length)&&!Object.is(e.selectedStack,o.by(a))&&f.value(e.stacks.get(e.selectedStack)[0])},[e.selectedStack]),r.jsxs("div",{id:typeof i=="function"?i():i,children:[r.jsx("ul",{className:"grid gap-6 list-none p-6 m-0 grid-cols-1 md:grid-cols-3",children:o?[...e.stacks.keys()].map(n=>r.jsx("li",{className:"w-full px-1",children:r.jsx(N,{checked:b.stack.checked(n),onClick:()=>b.stack.singleton(n)?f.value(e.stacks.get(n)[0]):f.selectedStack(n),className:I(b.stack.checked(n)?e.activeClass:e.inactiveClass),children:b.stack.singleton(n)?p(e.stacks.get(n)[0]):o==null?void 0:o.label(n,e.stacks.get(n))})},R(n))):s.map(n=>r.jsx("li",{className:"w-full px-1",children:r.jsx(N,{checked:Object.is(a,n),onClick:()=>f.value(n),className:I(Object.is(a,n)?e.activeClass:e.inactiveClass),children:p(n)})},R(n)))}),e.selectedStack&&((c=e.stacks.get(e.selectedStack))==null?void 0:c.length)>1&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"mt-6 ml-8",children:r.jsx(j,{level:Y.heading,size:x._200,color:T.text,children:o.title(e.selectedStack,e.stacks.get(e.selectedStack))})}),r.jsx(t,{value:a,items:e.stacks.get(e.selectedStack),label:p,onInput:u,tileClass:l})]})]})};try{E.displayName="SimpleTilesInputComponent",E.__docgenInfo={description:"",displayName:"SimpleTilesInputComponent",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string | (() => string)"}},items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:"T[]"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"T"}},onInput:{defaultValue:null,description:"",name:"onInput",required:!0,type:{name:"(value: T) => void"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"(item: T) => string | Element"}},tileClass:{defaultValue:null,description:"",name:"tileClass",required:!1,type:{name:"{ active?: string; inactive?: string; }"}},stack:{defaultValue:null,description:"",name:"stack",required:!1,type:{name:"{ by: (item: T) => S; label: (stack: S, items: T[]) => string | Element; title: (stack: S, items: T[]) => string | Element; value?: S; onChange?: (stack: S) => void; }"}}}}}catch{}const _=function({id:s,items:a,value:u,onInput:p,label:l,tileClass:o,stack:i,group:e}){var b;const[g,f]=m.useState({groups:new Map,selectedGroup:e==null?void 0:e.value,selectedStack:i==null?void 0:i.value});return m.useEffect(()=>{if(e&&typeof e.by=="function"){const c=new Map;e.showAllTab&&c.set(void 0,[...a]),a.forEach(n=>{const d=e.by(n);c.has(d)||c.set(d,[]),c.get(d).push(n)}),f(n=>({...n,groups:c}))}},[a,e]),m.useEffect(()=>{e&&e.onChange&&e.onChange(g.selectedGroup)},[g.selectedGroup]),r.jsx(r.Fragment,{children:e?r.jsx(z,{id:"t",items:[...(b=g.groups)==null?void 0:b.keys()],titleElement:c=>e.label(c,g.groups.get(c)),contentElement:c=>r.jsx(E,{id:s,items:g.groups.get(c)||[],value:u,onInput:p,label:l,tileClass:o,stack:i?{...i,onChange:n=>{f(d=>({...d,selectedStack:n})),i!=null&&i.onChange&&(i==null||i.onChange(n))}}:void 0}),onChange:c=>{f(n=>({...n,selectedGroup:c}))}}):r.jsx(E,{id:s,items:a,value:u,onInput:p,label:l,tileClass:o,stack:i})})},U=_;try{_.displayName="TilesInputComponent",_.__docgenInfo={description:"",displayName:"TilesInputComponent",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string | (() => string)"}},items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:"T[]"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"T"}},onInput:{defaultValue:null,description:"",name:"onInput",required:!0,type:{name:"(value: T) => void"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"(item: T) => string | Element"}},tileClass:{defaultValue:null,description:"",name:"tileClass",required:!1,type:{name:"{ active?: string; inactive?: string; }"}},stack:{defaultValue:null,description:"",name:"stack",required:!1,type:{name:"{ by: (item: T) => S; label: (stack: S, items: T[]) => string | Element; title: (stack: S, items: T[]) => string | Element; value?: S; onChange?: (stack: S) => void; }"}},group:{defaultValue:null,description:"",name:"group",required:!1,type:{name:"{ by: (item: T) => G; label: (group: G, items: T[]) => string | Element; value?: G; showAllTab: boolean; onChange?: (group: G) => void; }"}}}}}catch{}const{useArgs:Z}=__STORYBOOK_MODULE_CLIENT_API__,re={title:"Components/TilesInput",component:U,parameters:{docs:{description:{component:"This is an interactive tiles input component."}}}},J=[{name:"Morocco",continent:"AFRICA",language:"ARABIC"},{name:"Algeria",continent:"AFRICA",language:"ARABIC"},{name:"Tunisia",continent:"AFRICA",language:"ARABIC"},{name:"Cameron",continent:"AFRICA",language:"FRENCH"},{name:"South Africa",continent:"AFRICA",language:"ENGLISH"},{name:"France",continent:"EUROPE",language:"FRENCH"},{name:"Luxembourg",continent:"EUROPE",language:"FRENCH"},{name:"England",continent:"EUROPE",language:"ENGLISH"},{name:"Saoudi Arabia",continent:"ASIA",language:"ARABIC"},{name:"Palestine",continent:"ASIA",language:"ARABIC"},{name:"United states",continent:"AMERICA",language:"ENGLISH"},{name:"China",continent:"ASIA",language:"MANDARIN"}],C=t=>{const[,s]=Z();return r.jsx(U,{...t,onInput:a=>s({value:a})})},h=C.bind({}),y={items:J,value:void 0,label:t=>t==null?void 0:t.name,tileClass:{active:"font-bold text-red-500 bg-orange-100"}};h.args={...y};const S=C.bind({});S.args={...y,stack:{by:t=>t.language,label:(t,s)=>`${t} (${s.length})`,title:(t,s)=>`Countries of ${t}(${s.length}):`}};const A=C.bind({});A.args={...y,group:{by:t=>t.continent,label:(t,s,a)=>r.jsx(j,{breakSpaces:!1,size:x._600,color:a?T.text:T.primary,children:r.jsx("div",{className:I(a&&"font-bold","whitespace-nowrap px-2 text-lg"),children:t===void 0?"All countries":s[0].continent})}),showAllTab:!0}};const v=C.bind({});v.args={...y,group:{by:t=>t.continent,label:(t,s,a)=>r.jsx(j,{breakSpaces:!1,size:x._600,color:a?T.text:T.primary,children:r.jsx("div",{className:I(a&&"font-bold","whitespace-nowrap px-2 text-lg"),children:t===void 0?"All countries":s[0].continent})}),showAllTab:!0},stack:{by:t=>t==null?void 0:t.language,label:(t,s)=>`${t} (${s==null?void 0:s.length})`,title:(t,s)=>`Countries of ${t}(${s==null?void 0:s.length}):`}};var q,G,V;h.parameters={...h.parameters,docs:{...(q=h.parameters)==null?void 0:q.docs,source:{originalSource:`args => {
  const [, updateArgs] = useArgs();
  return <TilesInputComponent<TCountry, string, {
    continent: string;
    key: string;
  }> {...args} onInput={country => updateArgs({
    value: country
  })} />;
}`,...(V=(G=h.parameters)==null?void 0:G.docs)==null?void 0:V.source}}};var w,D,$;S.parameters={...S.parameters,docs:{...(w=S.parameters)==null?void 0:w.docs,source:{originalSource:`args => {
  const [, updateArgs] = useArgs();
  return <TilesInputComponent<TCountry, string, {
    continent: string;
    key: string;
  }> {...args} onInput={country => updateArgs({
    value: country
  })} />;
}`,...($=(D=S.parameters)==null?void 0:D.docs)==null?void 0:$.source}}};var F,H,M;A.parameters={...A.parameters,docs:{...(F=A.parameters)==null?void 0:F.docs,source:{originalSource:`args => {
  const [, updateArgs] = useArgs();
  return <TilesInputComponent<TCountry, string, {
    continent: string;
    key: string;
  }> {...args} onInput={country => updateArgs({
    value: country
  })} />;
}`,...(M=(H=A.parameters)==null?void 0:H.docs)==null?void 0:M.source}}};var L,P,B;v.parameters={...v.parameters,docs:{...(L=v.parameters)==null?void 0:L.docs,source:{originalSource:`args => {
  const [, updateArgs] = useArgs();
  return <TilesInputComponent<TCountry, string, {
    continent: string;
    key: string;
  }> {...args} onInput={country => updateArgs({
    value: country
  })} />;
}`,...(B=(P=v.parameters)==null?void 0:P.docs)==null?void 0:B.source}}};const le=["DemoSimple","DemoStack","DemoGroup","DemoGroupStack"];export{A as DemoGroup,v as DemoGroupStack,h as DemoSimple,S as DemoStack,le as __namedExportsOrder,re as default};
//# sourceMappingURL=tiles-input.stories-beb9b26c.js.map
