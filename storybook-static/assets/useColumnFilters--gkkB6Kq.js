import{j as _}from"./jsx-runtime-CKrituN3.js";import{r as u}from"./index-CBqU2yxZ.js";import{n as E,b as C,o as L}from"./index-DyaGuj67.js";import{u as w,d as A,t as v,c as R,v as z,w as V}from"./index-CsPFwKPW.js";import{u as O}from"./useTranslation-pmbu4BU3.js";import{i as l}from"./i18next-ihUiNgJT.js";var o;(function(e){e.Includes="includes",e.StartsWith="starts_with",e.EndsWith="ends_with",e.IsEqual="is_equal",e.IsDifferent="is_different",e.IsLower="is_lower",e.IsHigher="is_higher",e.IsBefore="is_before",e.IsAfter="is_after",e.IsIn="is_in"})(o||(o={}));var p;(function(e){e.Numeric="Numeric",e.String="String",e.Date="Date",e.Boolean="Boolean",e.Options="Options"})(p||(p={}));const go={Numeric:[o.IsEqual,o.IsDifferent,o.IsLower,o.IsHigher],String:[o.Includes,o.StartsWith,o.EndsWith,o.IsEqual,o.IsDifferent],Date:[o.IsEqual,o.IsDifferent,o.IsBefore,o.IsAfter],Boolean:[o.IsEqual,o.IsDifferent],Options:[o.IsEqual,o.IsDifferent]};function Io(e=[],m=[]){return e.filter(n=>{let r=!0;return m.forEach(s=>{const i=n[s.key],c=s.value;switch(s.comparator){case o.Includes:r=r&&`${i}`.toLowerCase().includes(c.toLowerCase());break;case o.StartsWith:r=r&&`${i}`.toLowerCase().startsWith(c.toLowerCase());break;case o.EndsWith:r=r&&`${i}`.toLowerCase().endsWith(c.toLowerCase());break;case o.IsEqual:s.type===p.Date?r=r&&new Date(`${i}`).setHours(0,0,0,0)===new Date(c).setHours(0,0,0,0):r=r&&`${i}`.toLowerCase()===c.toLowerCase();break;case o.IsDifferent:s.type===p.Date?r=r&&new Date(`${i}`).setHours(0,0,0,0)!==new Date(c).setHours(0,0,0,0):r=r&&`${i}`.toLowerCase()!==c.toLowerCase();break;case o.IsLower:r=r&&Number(i)<Number(c);break;case o.IsHigher:r=r&&Number(i)>Number(c);break;case o.IsBefore:r=r&&new Date(`${i}`)<new Date(c);break;case o.IsAfter:r=r&&new Date(`${i}`)>new Date(c);break;case o.IsIn:r=r&&!!s.value.find(d=>d===`${i}`);break}}),r})}const W="Filtern",B="Spalte",T="Bedingung",H="enthält",P="beginnt mit",G="endet mit",K="ist gleich",U="ist nicht gleich",Y="ist kleiner als",J="ist größer als",M="ist",Z="ist vor",Q="Ja",X="Nein",ee="Wert",re="Hinzufügen",oe={common_criteria_adder_filter_label:W,common_criteria_adder_column_label:B,common_criteria_adder_operator_label:T,common_criteria_adder_operator_includes:H,common_criteria_adder_operator_starts_with:P,common_criteria_adder_operator_ends_with:G,common_criteria_adder_operator_is_equal:K,common_criteria_adder_operator_is_different:U,common_criteria_adder_operator_is_lower:Y,common_criteria_adder_operator_is_higher:J,common_criteria_adder_operator_is_before:M,common_criteria_adder_operator_is_after:Z,common_criteria_adder_true_label:Q,common_criteria_adder_false_label:X,common_criteria_adder_value_label:ee,common_criteria_adder_submit_label:re},_e="Filter",ae="Column",te="Condition",ie="includes",ce="starts with",de="ends with",ne="is equal to",se="is different from",me="is lower than",le="is higher than",ue="is",pe="is before",fe="Yes",be="No",$e="Value",he="Add",we={common_criteria_adder_filter_label:_e,common_criteria_adder_column_label:ae,common_criteria_adder_operator_label:te,common_criteria_adder_operator_includes:ie,common_criteria_adder_operator_starts_with:ce,common_criteria_adder_operator_ends_with:de,common_criteria_adder_operator_is_equal:ne,common_criteria_adder_operator_is_different:se,common_criteria_adder_operator_is_lower:me,common_criteria_adder_operator_is_higher:le,common_criteria_adder_operator_is_before:ue,common_criteria_adder_operator_is_after:pe,common_criteria_adder_true_label:fe,common_criteria_adder_false_label:be,common_criteria_adder_value_label:$e,common_criteria_adder_submit_label:he},ve="Filtrar",ge="Columna",Ie="Condición",je="contiene",xe="empieza por",De="termina por",qe="es igual a",Ne="no es",ye="es inferior a",Se="es superior a",Fe="es",Oe="es anterior a",ke="Sí",Ee="No",Ce="Valor",Le="Añadir",Ae={common_criteria_adder_filter_label:ve,common_criteria_adder_column_label:ge,common_criteria_adder_operator_label:Ie,common_criteria_adder_operator_includes:je,common_criteria_adder_operator_starts_with:xe,common_criteria_adder_operator_ends_with:De,common_criteria_adder_operator_is_equal:qe,common_criteria_adder_operator_is_different:Ne,common_criteria_adder_operator_is_lower:ye,common_criteria_adder_operator_is_higher:Se,common_criteria_adder_operator_is_before:Fe,common_criteria_adder_operator_is_after:Oe,common_criteria_adder_true_label:ke,common_criteria_adder_false_label:Ee,common_criteria_adder_value_label:Ce,common_criteria_adder_submit_label:Le},Re="Filtrer",ze="Colonne",Ve="Condition",We="contient",Be="débute par",Te="termine par",He="est égal à",Pe="est différent de",Ge="est inférieur à",Ke="est supérieur à",Ue="est",Ye="est avant",Je="Oui",Me="Non",Ze="Valeur",Qe="Ajouter",Xe={common_criteria_adder_filter_label:Re,common_criteria_adder_column_label:ze,common_criteria_adder_operator_label:Ve,common_criteria_adder_operator_includes:We,common_criteria_adder_operator_starts_with:Be,common_criteria_adder_operator_ends_with:Te,common_criteria_adder_operator_is_equal:He,common_criteria_adder_operator_is_different:Pe,common_criteria_adder_operator_is_lower:Ge,common_criteria_adder_operator_is_higher:Ke,common_criteria_adder_operator_is_before:Ue,common_criteria_adder_operator_is_after:Ye,common_criteria_adder_true_label:Je,common_criteria_adder_false_label:Me,common_criteria_adder_value_label:Ze,common_criteria_adder_submit_label:Qe},er="Filtrer",rr="Colonne",or="Condition",_r="contient",ar="débute par",tr="termine par",ir="est égal à",cr="est différent de",dr="est inférieur à",nr="est supérieur à",sr="est",mr="est avant",lr="Oui",ur="Non",pr="Valeur",fr="Ajouter",br={common_criteria_adder_filter_label:er,common_criteria_adder_column_label:rr,common_criteria_adder_operator_label:or,common_criteria_adder_operator_includes:_r,common_criteria_adder_operator_starts_with:ar,common_criteria_adder_operator_ends_with:tr,common_criteria_adder_operator_is_equal:ir,common_criteria_adder_operator_is_different:cr,common_criteria_adder_operator_is_lower:dr,common_criteria_adder_operator_is_higher:nr,common_criteria_adder_operator_is_before:sr,common_criteria_adder_operator_is_after:mr,common_criteria_adder_true_label:lr,common_criteria_adder_false_label:ur,common_criteria_adder_value_label:pr,common_criteria_adder_submit_label:fr},$r="Filtra",hr="Colonna",wr="Condizione",vr="contiene",gr="inizia per",Ir="termina per",jr="è uguale a",xr="è diverso da",Dr="è inferiore a",qr="è superiore a",Nr="è",yr="è prima di",Sr="Sì",Fr="No",Or="Valore",kr="Aggiungi",Er={common_criteria_adder_filter_label:$r,common_criteria_adder_column_label:hr,common_criteria_adder_operator_label:wr,common_criteria_adder_operator_includes:vr,common_criteria_adder_operator_starts_with:gr,common_criteria_adder_operator_ends_with:Ir,common_criteria_adder_operator_is_equal:jr,common_criteria_adder_operator_is_different:xr,common_criteria_adder_operator_is_lower:Dr,common_criteria_adder_operator_is_higher:qr,common_criteria_adder_operator_is_before:Nr,common_criteria_adder_operator_is_after:yr,common_criteria_adder_true_label:Sr,common_criteria_adder_false_label:Fr,common_criteria_adder_value_label:Or,common_criteria_adder_submit_label:kr},Cr="Filtruj",Lr="Kolumna",Ar="Warunek",Rr="zawiera",zr="zaczyna się na",Vr="kończy się na",Wr="jest równy",Br="nie jest",Tr="jest mniejszy niż",Hr="jest większy niż",Pr="jest",Gr="jest przed",Kr="Tak",Ur="Nie",Yr="Wartość",Jr="Dodaj",Mr={common_criteria_adder_filter_label:Cr,common_criteria_adder_column_label:Lr,common_criteria_adder_operator_label:Ar,common_criteria_adder_operator_includes:Rr,common_criteria_adder_operator_starts_with:zr,common_criteria_adder_operator_ends_with:Vr,common_criteria_adder_operator_is_equal:Wr,common_criteria_adder_operator_is_different:Br,common_criteria_adder_operator_is_lower:Tr,common_criteria_adder_operator_is_higher:Hr,common_criteria_adder_operator_is_before:Pr,common_criteria_adder_operator_is_after:Gr,common_criteria_adder_true_label:Kr,common_criteria_adder_false_label:Ur,common_criteria_adder_value_label:Yr,common_criteria_adder_submit_label:Jr},Zr="Filtrar",Qr="Coluna",Xr="Regra",eo="contém",ro="começa por",oo="termina em",_o="é igual a",ao="é diferente de",to="é inferior a",io="é superior a",co="é",no="está antes",so="Sim",mo="Não",lo="Valor",uo="Adicionar",po={common_criteria_adder_filter_label:Zr,common_criteria_adder_column_label:Qr,common_criteria_adder_operator_label:Xr,common_criteria_adder_operator_includes:eo,common_criteria_adder_operator_starts_with:ro,common_criteria_adder_operator_ends_with:oo,common_criteria_adder_operator_is_equal:_o,common_criteria_adder_operator_is_different:ao,common_criteria_adder_operator_is_lower:to,common_criteria_adder_operator_is_higher:io,common_criteria_adder_operator_is_before:co,common_criteria_adder_operator_is_after:no,common_criteria_adder_true_label:so,common_criteria_adder_false_label:mo,common_criteria_adder_value_label:lo,common_criteria_adder_submit_label:uo};function N(){l.addResources("de_DE","filters",oe),l.addResources("en_GB","filters",we),l.addResources("es_ES","filters",Ae),l.addResources("fr_CA","filters",Xe),l.addResources("fr_FR","filters",br),l.addResources("it_IT","filters",Er),l.addResources("pl_PL","filters",Mr),l.addResources("pt_PT","filters",po)}l.isInitialized?N():l.on("initialized",N);function y({columns:e,onAddFilter:m}){var I,j,x,D,q;const{t:n}=O("filters"),[r,s]=u.useState(((I=e==null?void 0:e[0])==null?void 0:I.id)||""),[i,c]=u.useState(((x=(j=e==null?void 0:e[0])==null?void 0:j.comparators)==null?void 0:x[0])||o.IsEqual),[d,f]=u.useState(""),[$,h]=u.useState(null),t=u.useMemo(()=>e.find(({id:a})=>r===a),[e,r]),g=()=>{m({key:r,comparator:i,value:t.type===p.Date?$.toISOString():d,type:t.type},t),f(""),h(null)};u.useEffect(()=>{c(t==null?void 0:t.comparators[0]),f(""),h(null)},[t]);let b;return(t==null?void 0:t.type)===p.Date?b=_.jsx(z,{name:"filter-add_value-input",className:"border",value:$,"data-testid":"filter-add_value-date",onOdsChange:a=>h(a.detail.value)}):((D=t==null?void 0:t.options)==null?void 0:D.length)>0?b=_.jsx(w,{value:d,name:"filter-add_value-select","data-testid":"filter-add_value-select",onOdsChange:a=>f(a.detail.value),children:t==null?void 0:t.options.map(a=>_.jsx("option",{value:a.value,children:a.label},a.label))}):b=_.jsx(A,{name:"filter-add_value-input",className:"border",type:E.text,value:d,"data-testid":"filter-add_value-input",onOdsChange:a=>f(`${a.detail.value}`),onKeyDown:a=>{a.key==="Enter"&&g()}}),_.jsxs(_.Fragment,{children:[_.jsx("div",{children:_.jsxs(v,{className:"w-full",children:[_.jsx("div",{slot:"label",children:_.jsx("span",{className:"text-[--ods-color-heading] leading-[22px]",children:n("common_criteria_adder_column_label")})}),_.jsx(w,{value:r,name:"add-filter_select_idColumn","data-testid":"add-filter_select_idColumn",onOdsChange:a=>s(a.detail.value),children:e.map(({id:a,label:k})=>_.jsx("option",{value:a,children:k},a))})]})}),_.jsx("div",{children:_.jsxs(v,{className:"mt-2 w-full",children:[_.jsx("div",{slot:"label",children:_.jsx("span",{className:"text-[--ods-color-heading] leading-[22px]",children:n("common_criteria_adder_operator_label")})}),t&&_.jsx("div",{children:_.jsx(w,{name:`add-operator-${t.id}`,value:i,onOdsChange:a=>{c(a.detail.value)},children:(q=t.comparators)==null?void 0:q.map(a=>_.jsx("option",{value:a,children:n(`common_criteria_adder_operator_${a}`)},a))})},`filter-condition-select-${t.id}`)]})}),_.jsx("div",{children:_.jsxs(v,{className:"mt-2 w-full",children:[_.jsx("div",{slot:"label",children:_.jsx("span",{className:"text-[--ods-color-heading] leading-[22px]",children:n("common_criteria_adder_value_label")})}),b]})}),_.jsx("div",{children:_.jsx(R,{className:"mt-4 w-full filter-add-button-submit",size:C.sm,isDisabled:!d&&!$,onClick:g,"data-testid":"filter-add_submit",label:n("common_criteria_adder_submit_label")})})]})}try{y.displayName="FilterAdd",y.__docgenInfo={description:"",displayName:"FilterAdd",props:{columns:{defaultValue:null,description:"",name:"columns",required:!0,type:{name:"ColumnFilter[]"}},onAddFilter:{defaultValue:null,description:"",name:"onAddFilter",required:!0,type:{name:"(filter: Filter, column: ColumnFilter) => void"}}}}}catch{}function S({filters:e,onRemoveFilter:m}){var c;const{t:n,i18n:r}=O("filters"),s=d=>n(`common_criteria_adder_operator_${d}`),i=((c=r.language)==null?void 0:c.replace("_","-"))||"FR-fr";return _.jsx(_.Fragment,{children:e==null?void 0:e.map((d,f)=>_.jsx(V,{className:"mr-3",color:L.information,size:"lg",onOdsRemove:()=>m(d),"data-testid":"filter-list_tag_item",label:`${d.label?`${d.label} ${s(d.comparator)} `:""}
          ${d.type===p.Date?new Date(`${d.value}`).toLocaleDateString(i):`${d.value}`}`},f))})}try{S.displayName="FilterList",S.__docgenInfo={description:"",displayName:"FilterList",props:{filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterWithLabel[]"}},onRemoveFilter:{defaultValue:null,description:"",name:"onRemoveFilter",required:!0,type:{name:"(filter: FilterWithLabel) => void"}}}}}catch{}const F=(e,m)=>e.key===m.key&&e.value===m.value&&e.comparator===m.comparator;function jo(){const[e,m]=u.useState([]);return{filters:e,addFilter:n=>{n.value&&m(r=>r.some(s=>F(s,n))?r:[...r,n])},removeFilter:n=>{m(r=>r.filter(s=>!F(s,n)))}}}export{o as F,Io as a,go as b,y as c,p as d,S as e,jo as u};
