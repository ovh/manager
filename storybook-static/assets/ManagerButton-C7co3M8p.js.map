{"version":3,"file":"ManagerButton-C7co3M8p.js","sources":["../../src/components/ManagerButton/translations/index.ts","../../src/components/ManagerButton/ManagerButton.tsx"],"sourcesContent":["import i18next from 'i18next';\n\nimport fr_FR from './Messages_fr_FR.json';\n\nfunction addTranslations() {\n  i18next.addResources('fr_FR', 'iam', fr_FR);\n}\n\nif (i18next.isInitialized) {\n  addTranslations();\n} else {\n  i18next.on('initialized', addTranslations);\n}\n","import React, { PropsWithChildren, RefAttributes, HTMLAttributes } from 'react';\nimport { OdsButton, OdsTooltip } from '@ovhcloud/ods-components/react';\nimport { JSX } from '@ovhcloud/ods-components';\nimport { useTranslation } from 'react-i18next';\nimport { StyleReactProps } from '@ovhcloud/ods-components/react/dist/types/react-component-lib/interfaces';\nimport './translations';\n\nimport { useAuthorizationIam } from '../../hooks/iam';\n\nexport type ManagerButtonProps = PropsWithChildren<{\n  id: string;\n  iamActions?: string[];\n  urn?: string;\n  displayTooltip?: boolean;\n  isIamTrigger?: boolean;\n  label: string;\n}>;\n\nexport const ManagerButton = ({\n  id,\n  children,\n  label,\n  iamActions,\n  urn,\n  displayTooltip = true,\n  isIamTrigger = true,\n  ...restProps\n}: ManagerButtonProps &\n  Partial<\n    JSX.OdsButton &\n      Omit<HTMLAttributes<HTMLOdsButtonElement>, 'style' | 'id'> &\n      StyleReactProps &\n      RefAttributes<HTMLOdsButtonElement>\n  >) => {\n  const { t } = useTranslation('iam');\n  const { isAuthorized } = useAuthorizationIam(iamActions, urn, isIamTrigger);\n\n  if (isAuthorized) {\n    return (\n      <OdsButton data-testid=\"manager-button\" {...restProps} label={label} />\n    );\n  }\n  return displayTooltip ? (\n    <>\n      <div id={id} className=\"w-fit\">\n        <OdsButton\n          {...restProps}\n          data-testid=\"manager-button-tooltip\"\n          isDisabled={true}\n          label={label}\n          onClick={null}\n        />\n      </div>\n      <OdsTooltip triggerId={id} with-arrow>\n        <div>{t('common_iam_actions_message')}</div>\n      </OdsTooltip>\n    </>\n  ) : (\n    <OdsButton\n      {...restProps}\n      data-testid=\"manager-button-without-tooltip\"\n      isDisabled={true}\n      onClick={null}\n      label={label}\n    />\n  );\n};\n"],"names":["addTranslations","i18next","fr_FR","ManagerButton","id","children","label","iamActions","urn","displayTooltip","isIamTrigger","restProps","t","useTranslation","isAuthorized","useAuthorizationIam","jsx","OdsButton","jsxs","Fragment","OdsTooltip"],"mappings":"0iBAIA,SAASA,GAAkB,CACjBC,EAAA,aAAa,QAAS,MAAOC,CAAK,CAC5C,CAEID,EAAQ,cACMD,IAERC,EAAA,GAAG,cAAeD,CAAe,ECOpC,MAAAG,EAAA,CAAA,CAAuB,GAAAC,EAC5B,SAAAC,EACA,MAAAC,EACA,WAAAC,EACA,IAAAC,EACA,eAAAC,EAAA,GACiB,aAAAC,EAAA,GACF,GAAAC,CAEjB,IAAA,CAOE,KAAA,CAAA,EAAAC,CAAA,EAAAC,EAAA,KAAA,EACA,CAAA,aAAAC,CAAA,EAAAC,EAAAR,EAAAC,EAAAE,CAAA,EAEA,OAAAI,EACEE,EAAA,IAAAC,EAAA,CAAA,cAAA,iBAAA,GAAAN,EAAA,MAAAL,CAAA,CAAA,EAIFG,EAAAS,EAAAA,KAAAC,EAAA,SAAA,CAAA,SAAA,CAEIH,EAAA,IAAA,MAAA,CAAA,GAAAZ,EAAA,UAAA,QAAA,SAAAY,EAAA,IACEC,EAAC,CAAA,GAAAN,EACK,cAAA,yBACQ,WAAA,GACA,MAAAL,EACZ,QAAA,IACS,CAAA,EAAA,EAEbU,EAAA,IAAAI,EAAA,CAAA,UAAAhB,EAAA,aAAA,GAAA,SAAAY,EAAAA,IAAA,MAAA,CAAA,SAAAJ,EAAA,4BAAA,CAAA,CAAA,EAAA,CAGA,CAAA,CAAA,EAAAI,EAAA,IAGFC,EAAC,CAAA,GAAAN,EACK,cAAA,iCACQ,WAAA,GACA,QAAA,KACH,MAAAL,CACT,CAAA,CAGN"}