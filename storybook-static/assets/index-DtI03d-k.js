import{e as E}from"./iframe-ClZwXGXb.js";const{STORY_CHANGED:m,SELECT_STORY:L}=__STORYBOOK_MODULE_CORE_EVENTS__,{makeDecorator:f,addons:_}=__STORYBOOK_MODULE_PREVIEW_API__,{global:v}=__STORYBOOK_MODULE_GLOBAL__;var h=Object.defineProperty,R=(e,t)=>{for(var n in t)h(e,n,{get:t[n],enumerable:!0})},T="links",{document:i,HTMLElement:k}=v;function P(e){let t={},n=(e[0]==="?"?e.substring(1):e).split("&").filter(Boolean);for(let r=0;r<n.length;r++){let a=n[r].split("=");t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]||"")}return t}var b=e=>_.getChannel().emit(L,e),Y=(e,t)=>new Promise(n=>{let{location:r}=i,a=P(r.search).id,p=e||a.split("--",2)[0],O=`/story/${E(p,t)}`,c=r.pathname.replace(/iframe\.html$/,""),d=`${r.origin+c}?${Object.entries({path:O}).map(s=>`${s[0]}=${s[1]}`).join("&")}`;n(d)}),l=e=>{let{target:t}=e;if(!(t instanceof k))return;let n=t,{sbKind:r,sbStory:a}=n.dataset;(r||a)&&(e.preventDefault(),b({kind:r,story:a}))},o=!1,g=()=>{o||(o=!0,i.addEventListener("click",l))},u=()=>{o&&(o=!1,i.removeEventListener("click",l))},C=f({name:"withLinks",parameterName:T,wrapper:(e,t)=>(g(),_.getChannel().once(m,u),e(t))});__STORYBOOK_MODULE_PREVIEW_API__;var D={};R(D,{decorators:()=>I});var I=[C];export{Y as h,b as n};
