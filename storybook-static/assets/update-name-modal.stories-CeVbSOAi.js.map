{"version":3,"file":"update-name-modal.stories-CeVbSOAi.js","sources":["../../src/components/templates/update-name-modal/translations/translations.ts","../../src/components/templates/update-name-modal/update-name-modal.component.tsx"],"sourcesContent":["import i18next from 'i18next';\n\nimport de_DE from './Messages_de_DE.json';\nimport en_GB from './Messages_en_GB.json';\nimport es_ES from './Messages_es_ES.json';\nimport fr_CA from './Messages_fr_CA.json';\nimport fr_FR from './Messages_fr_FR.json';\nimport it_IT from './Messages_it_IT.json';\nimport pl_PL from './Messages_pl_PL.json';\nimport pt_PT from './Messages_pt_PT.json';\n\nfunction addTranslations() {\n  i18next.addResources('de_DE', 'update-name-modal', de_DE);\n  i18next.addResources('en_GB', 'update-name-modal', en_GB);\n  i18next.addResources('es_ES', 'update-name-modal', es_ES);\n  i18next.addResources('fr_CA', 'update-name-modal', fr_CA);\n  i18next.addResources('fr_FR', 'update-name-modal', fr_FR);\n  i18next.addResources('it_IT', 'update-name-modal', it_IT);\n  i18next.addResources('pl_PL', 'update-name-modal', pl_PL);\n  i18next.addResources('pt_PT', 'update-name-modal', pt_PT);\n}\n\nif (i18next.isInitialized) {\n  addTranslations();\n} else {\n  i18next.on('initialized', addTranslations);\n}\n","import React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { ODS_THEME_COLOR_INTENT } from '@ovhcloud/ods-common-theming';\nimport {\n  OsdsText,\n  OsdsInput,\n  OsdsMessage,\n  OsdsSpinner,\n  OsdsModal,\n  OsdsButton,\n  OsdsFormField,\n} from '@ovhcloud/ods-components/react';\nimport {\n  ODS_BUTTON_TYPE,\n  ODS_BUTTON_VARIANT,\n  ODS_MESSAGE_TYPE,\n  ODS_SPINNER_SIZE,\n  ODS_INPUT_TYPE,\n  OdsInputValueChangeEvent,\n  ODS_TEXT_LEVEL,\n  ODS_TEXT_SIZE,\n} from '@ovhcloud/ods-components';\nimport { handleClick } from '../../../utils/click-utils';\nimport './translations/translations';\n\nexport type UpdateNameModalProps = {\n  headline: string;\n  description?: string;\n  inputLabel: string;\n  defaultValue?: string;\n  closeModal: () => void;\n  updateDisplayName: (newDisplayName: string) => void;\n  isLoading?: boolean;\n  error?: string;\n  cancelButtonLabel?: string;\n  confirmButtonLabel?: string;\n  pattern?: string;\n  patternMessage?: string;\n};\n\nexport const UpdateNameModal: React.FC<UpdateNameModalProps> = ({\n  headline,\n  description,\n  inputLabel,\n  defaultValue,\n  closeModal,\n  isLoading,\n  updateDisplayName,\n  error,\n  cancelButtonLabel,\n  confirmButtonLabel,\n  pattern,\n  patternMessage,\n}) => {\n  const { t } = useTranslation('update-name-modal');\n  const [displayName, setDisplayName] = React.useState(defaultValue);\n  const [isPatternError, setIsPatternError] = React.useState(false);\n\n  React.useEffect(() => {\n    setDisplayName(defaultValue);\n  }, [defaultValue]);\n\n  React.useEffect(() => {\n    const regex = new RegExp(pattern);\n    if (displayName) {\n      setIsPatternError(!displayName.match(regex));\n    }\n  }, [displayName, pattern]);\n\n  return (\n    <OsdsModal dismissible headline={headline} onOdsModalClose={closeModal}>\n      {!!error && (\n        <OsdsMessage type={ODS_MESSAGE_TYPE.error}>\n          <OsdsText\n            level={ODS_TEXT_LEVEL.body}\n            size={ODS_TEXT_SIZE._400}\n            color={ODS_THEME_COLOR_INTENT.text}\n          >\n            {t('updateModalError', { error })}\n          </OsdsText>\n        </OsdsMessage>\n      )}\n      <OsdsText\n        color={ODS_THEME_COLOR_INTENT.text}\n        level={ODS_TEXT_LEVEL.body}\n        className=\"block my-4\"\n      >\n        {description}\n      </OsdsText>\n      <OsdsFormField className=\"mb-8\">\n        <div slot=\"label\">\n          <OsdsText\n            className=\"block mb-3\"\n            color={ODS_THEME_COLOR_INTENT.text}\n            level={ODS_TEXT_LEVEL.body}\n            size={ODS_TEXT_SIZE._200}\n          >\n            {inputLabel}\n          </OsdsText>\n        </div>\n        <OsdsInput\n          aria-label=\"update-input\"\n          disabled={isLoading || undefined}\n          type={ODS_INPUT_TYPE.text}\n          value={displayName}\n          error={isPatternError || undefined}\n          onOdsValueChange={(e: OdsInputValueChangeEvent) =>\n            setDisplayName(e.detail.value)\n          }\n        />\n        {patternMessage && (\n          <div className=\"mt-5\">\n            <OsdsText\n              className=\"block\"\n              color={\n                isPatternError && pattern\n                  ? ODS_THEME_COLOR_INTENT.error\n                  : ODS_THEME_COLOR_INTENT.text\n              }\n              level={ODS_TEXT_LEVEL.body}\n              size={ODS_TEXT_SIZE._100}\n            >\n              {patternMessage}\n            </OsdsText>\n          </div>\n        )}\n      </OsdsFormField>\n      {isLoading && (\n        <div className=\"flex justify-center\">\n          <OsdsSpinner inline size={ODS_SPINNER_SIZE.md} />\n        </div>\n      )}\n      <OsdsButton\n        disabled={isLoading || undefined}\n        slot=\"actions\"\n        type={ODS_BUTTON_TYPE.button}\n        variant={ODS_BUTTON_VARIANT.ghost}\n        color={ODS_THEME_COLOR_INTENT.primary}\n        {...handleClick(closeModal)}\n      >\n        {cancelButtonLabel || t('updateModalCancelButton')}\n      </OsdsButton>\n      <OsdsButton\n        disabled={isLoading || isPatternError || undefined}\n        slot=\"actions\"\n        type={ODS_BUTTON_TYPE.button}\n        variant={ODS_BUTTON_VARIANT.flat}\n        color={ODS_THEME_COLOR_INTENT.primary}\n        {...handleClick(() => updateDisplayName(displayName))}\n      >\n        {confirmButtonLabel || t('updateModalConfirmButton')}\n      </OsdsButton>\n    </OsdsModal>\n  );\n};\n"],"names":["addTranslations","i18next","de_DE","en_GB","es_ES","fr_CA","fr_FR","it_IT","pl_PL","pt_PT","UpdateNameModal","headline","description","inputLabel","defaultValue","closeModal","isLoading","updateDisplayName","error","cancelButtonLabel","confirmButtonLabel","pattern","patternMessage","t","useTranslation","displayName","setDisplayName","React","isPatternError","setIsPatternError","regex","jsxs","OsdsModal","jsx","OsdsMessage","ODS_MESSAGE_TYPE","OsdsText","ODS_TEXT_LEVEL","ODS_TEXT_SIZE","ODS_THEME_COLOR_INTENT","OsdsFormField","OsdsInput","ODS_INPUT_TYPE","e","OsdsSpinner","ODS_SPINNER_SIZE","OsdsButton","ODS_BUTTON_TYPE","ODS_BUTTON_VARIANT","handleClick"],"mappings":"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"}