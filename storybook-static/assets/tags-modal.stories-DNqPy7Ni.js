import{j as a}from"./jsx-runtime-BRNY0I4F.js";import{w as T,x as C,b as S,y as v,c as N,d as w,h as y,g as x,e as $,i as M}from"./index-lgLBfkR1.js";import{r as d,e as B}from"./index-Bnop-kX6.js";import{i as n}from"./context-BVP_XnaJ.js";import{u as D}from"./useTranslation-DdcBeAG-.js";import"./index-D0sJu8id.js";const I=(t,c,e)=>{if(!c)return;const h=c.offsetWidth,l=c.offsetHeight,s=t[0]?t[0].offsetHeight+4:30,i=(e||Math.ceil(l/s))*h;let g=0,m=0;return t.forEach(f=>{if(!f)return;const o=f.getBoundingClientRect().width;e&&(o===0||g+o>i-50)||(g+=o,m+=1)}),m},L=(t,c,e)=>{const h=t.offsetWidth,l=Math.ceil((h-50)*100/c.getBoundingClientRect().width),s=Math.floor(e.length*(l/100));return e.slice(0,s)+(s<e.length?"...":"")},z=({tags:t,displayInternalTags:c})=>Object.keys(t).filter(e=>c||e.indexOf("ovh:")!==0).map(e=>`${e}:${t[e]}`),P=({tags:t,displayInternalTags:c=!1,lineNumber:e,onClick:h})=>{const l="neutral",s=z({tags:t,displayInternalTags:c}),u=d.useRef(null),[i,g]=d.useState(null),[m,f]=d.useState(s.length),o=d.useRef([]),p=d.useRef([]);return d.useEffect(()=>{if(s.length>0){const r=new ResizeObserver(()=>{const _=I(p.current,u.current,e);f(_||1),_===0&&o.current[0]&&g(L(u.current,o.current[0],s[0]))});return u.current&&r.observe(u.current),()=>r.disconnect()}},[s]),d.useEffect(()=>{p.current.length===0&&(p.current=[...o.current])},[]),Object.keys(t).length>0&&a.jsxs("div",{ref:u,className:"w-full h-full min-w-[85px]",children:[i?a.jsx(T,{className:"mr-1 mb-1",color:l,label:i}):s.slice(0,m).map((r,_)=>a.jsx(T,{className:"mr-1 mb-1",ref:j=>{o.current[_]=j},color:l,label:r},r)),m<s.length&&a.jsx(C,{href:"#",className:"text-xs",onClick:r=>{h&&h(),r.preventDefault()},icon:S.chevronDoubleRight})]})},A="Tags bearbeiten",W="suchen",H="Suchen",V="Zurück",F={edit_tags:A,search_placeholder:W,search:H,back:V},G="Edit tags",U="search",Z="Search",q="Back",X={edit_tags:G,search_placeholder:U,search:Z,back:q},J="Editar etiquetas",K="Buscar",Q="Buscar",Y="Volver",ee={edit_tags:J,search_placeholder:K,search:Q,back:Y},se="Editer tags",te="rechercher",ae="Rechercher",ce="Retour",re={edit_tags:se,search_placeholder:te,search:ae,back:ce},oe="Editer tags",ne="rechercher",le="Rechercher",ie="Retour",de={edit_tags:oe,search_placeholder:ne,search:le,back:ie},he="Modificare tag",ue="cercare",ge="Cercare",me="Indietro",fe={edit_tags:he,search_placeholder:ue,search:ge,back:me},_e="Edytuj tagi",pe="Szukaj",be="Szukaj",xe="Powrót",Te={edit_tags:_e,search_placeholder:pe,search:be,back:xe},$e="Editar tags",Re="Procurar...",ke="Procurar",Oe="Retroceder",Ee={edit_tags:$e,search_placeholder:Re,search:ke,back:Oe};function R(){n.addResources("de_DE","tags-modal",F),n.addResources("en_GB","tags-modal",X),n.addResources("es_ES","tags-modal",ee),n.addResources("fr_CA","tags-modal",re),n.addResources("fr_FR","tags-modal",de),n.addResources("it_IT","tags-modal",fe),n.addResources("pl_PL","tags-modal",Te),n.addResources("pt_PT","tags-modal",Ee)}n.isInitialized?R():n.on("initialized",R);const je=B.forwardRef(({isOpen:t=!1,displayName:c,tags:e,displayInternalTags:h=!1,onEditTags:l,onCancel:s},u)=>{const{t:i}=D("tags-modal"),[g,m]=d.useState(""),[f,o]=d.useState(e),p=()=>{o(g?Object.fromEntries(Object.entries(e).filter(([r,_])=>r.toLowerCase().includes(g.toLowerCase())||_.toLowerCase().includes(g.toLowerCase()))):e)};return a.jsxs(v,{color:"neutral",className:"text-left",onOdsClose:s,isOpen:t,ref:u,children:[a.jsxs(N,{className:"mb-4",preset:w.heading5,children:["Tags:"," ",c]}),a.jsxs("div",{className:"flex w-full mb-4",children:[a.jsx(y,{name:"search",className:"rounded-l flex-1 mr-1",placeholder:i("search_placeholder"),type:"text",onOdsChange:r=>{m(r.detail.value)}}),a.jsx(x,{className:"rounded-r",variant:$.outline,size:M.sm,onClick:p,label:i("search")})]}),a.jsx("div",{className:"w-full min-w-[85px] h-[120px] overflow-auto",children:f&&a.jsx(P,{tags:f,displayInternalTags:h})}),a.jsx(x,{variant:$.ghost,slot:"actions",color:"primary",onClick:s,label:i("back"),className:"mt-4",type:"button"}),l&&a.jsx(x,{slot:"actions",color:"primary",onClick:l,label:i("edit_tags"),className:"mt-4",type:"button"})]})}),Me={title:"Manager React Components/Components/TagsModal",component:je},b={args:{isOpen:!0,displayName:"tags-stories",tags:{},displayInternalTags:!1,onCancel:()=>{},onEditTags:()=>{}}};var k,O,E;b.parameters={...b.parameters,docs:{...(k=b.parameters)==null?void 0:k.docs,source:{originalSource:`{
  args: {
    isOpen: true,
    displayName: 'tags-stories',
    tags: {},
    displayInternalTags: false,
    onCancel: () => {},
    onEditTags: () => {}
  }
}`,...(E=(O=b.parameters)==null?void 0:O.docs)==null?void 0:E.source}}};const Be=["DemoTagsModal"];export{b as DemoTagsModal,Be as __namedExportsOrder,Me as default};
