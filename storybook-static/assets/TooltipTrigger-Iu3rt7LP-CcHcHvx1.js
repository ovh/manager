import{j as l}from"./jsx-runtime-BRNY0I4F.js";import{o as _}from"./ods-react235-BTQ8kVBe.js";import{k as q,j as B}from"./portal-BnVBD_Bd-CMtQ-rJ7.js";import{D,L as G,k as L}from"./use-presence-CVI6Oc63-Cg7Clpcl.js";import{X as K,t as u,v as O,E as z,x as H,H as J,g as W,p as P,J as X,T as Y,R as Q,W as U,O as Z,w as ee,V as oe,G as te,Y as ne,A as re}from"./use-locale-context-cwTY9VYn-REDUMe7F.js";import{B as ie,y as se}from"./index-DDXR4bR2-rx0xkcPf.js";import{x as w,y as le}from"./index-C7dNzIpW-BlUnPWgK.js";import{r as p}from"./index-Bnop-kX6.js";import{m as M}from"./index-2w0W-O47-BJ19ihbZ.js";const[ae,m]=K({name:"TooltipContext",hookName:"useTooltipContext",providerName:"<TooltipProvider />"}),j=p.forwardRef((e,o)=>{const t=m(),n=u(t.getArrowProps(),e);return l.jsx(O.div,{...n,ref:o})});j.displayName="TooltipArrow";const I=p.forwardRef((e,o)=>{const t=m(),n=u(t.getArrowTipProps(),e);return l.jsx(O.div,{...n,ref:o})});I.displayName="TooltipArrowTip";const N=p.forwardRef((e,o)=>{const t=m(),n=D(),r=u(t.getContentProps(),n.getPresenceProps(),e);return n.unmounted?null:l.jsx(O.div,{...r,ref:z(n.ref,o)})});N.displayName="TooltipContent";const E=p.forwardRef((e,o)=>{const t=m(),n=u(t.getPositionerProps(),e);return D().unmounted?null:l.jsx(O.div,{...n,ref:o})});E.displayName="TooltipPositioner";var pe=H("tooltip").parts("trigger","arrow","arrowTip","positioner","content"),v=pe.build(),V=e=>{var o;return((o=e.ids)==null?void 0:o.trigger)??`tooltip:${e.id}:trigger`},ce=e=>{var o;return((o=e.ids)==null?void 0:o.content)??`tooltip:${e.id}:content`},de=e=>{var o;return((o=e.ids)==null?void 0:o.arrow)??`tooltip:${e.id}:arrow`},R=e=>{var o;return((o=e.ids)==null?void 0:o.positioner)??`tooltip:${e.id}:popper`},k=e=>e.getById(V(e)),x=e=>e.getById(R(e)),c=J({id:null});function ge(e,o){const{state:t,context:n,send:r,scope:i,prop:s,event:f}=e,C=s("id"),h=!!s("aria-label"),g=t.matches("open","closing"),F=V(i),b=ce(i),d=s("disabled"),y=le({...s("positioning"),placement:n.get("currentPlacement")});return{open:g,setOpen(a){t.matches("open","closing")!==a&&r({type:a?"open":"close"})},reposition(a={}){r({type:"positioning.set",options:a})},getTriggerProps(){return o.button({...v.trigger.attrs,id:F,dir:s("dir"),"data-expanded":te(g),"data-state":g?"open":"closed","aria-describedby":g?b:void 0,onClick(a){a.defaultPrevented||d||s("closeOnClick")&&r({type:"close",src:"trigger.click"})},onFocus(a){queueMicrotask(()=>{a.defaultPrevented||d||f.src!=="trigger.pointerdown"&&se()&&r({type:"open",src:"trigger.focus"})})},onBlur(a){a.defaultPrevented||d||C===c.get("id")&&r({type:"close",src:"trigger.blur"})},onPointerDown(a){a.defaultPrevented||d||ne(a)&&s("closeOnPointerDown")&&C===c.get("id")&&r({type:"close",src:"trigger.pointerdown"})},onPointerMove(a){a.defaultPrevented||d||a.pointerType!=="touch"&&r({type:"pointer.move"})},onPointerLeave(){d||r({type:"pointer.leave"})},onPointerCancel(){d||r({type:"pointer.leave"})}})},getArrowProps(){return o.element({id:de(i),...v.arrow.attrs,dir:s("dir"),style:y.arrow})},getArrowTipProps(){return o.element({...v.arrowTip.attrs,dir:s("dir"),style:y.arrowTip})},getPositionerProps(){return o.element({id:R(i),...v.positioner.attrs,dir:s("dir"),style:y.floating})},getContentProps(){return o.element({...v.content.attrs,dir:s("dir"),hidden:!g,"data-state":g?"open":"closed",role:h?void 0:"tooltip",id:h?void 0:b,"data-placement":n.get("currentPlacement"),onPointerEnter(){r({type:"content.pointer.move"})},onPointerLeave(){r({type:"content.pointer.leave"})},style:{pointerEvents:s("interactive")?"auto":"none"}})}}}var{and:ue,not:T}=Q(),ve=W({initialState:({prop:e})=>e("open")||e("defaultOpen")?"open":"closed",props({props:e}){const o=e.closeOnClick??!0,t=e.closeOnPointerDown??o;return{id:"x",openDelay:400,closeDelay:150,closeOnEscape:!0,interactive:!1,closeOnScroll:!0,disabled:!1,...e,closeOnPointerDown:t,closeOnClick:o,positioning:{placement:"bottom",...e.positioning}}},effects:["trackFocusVisible","trackStore"],context:({bindable:e})=>({currentPlacement:e(()=>({defaultValue:void 0})),hasPointerMoveOpened:e(()=>({defaultValue:!1}))}),watch({track:e,action:o,prop:t}){e([()=>t("disabled")],()=>{o(["closeIfDisabled"])}),e([()=>t("open")],()=>{o(["toggleVisibility"])})},states:{closed:{entry:["clearGlobalId"],on:{"controlled.open":{target:"open"},open:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}],"pointer.leave":{actions:["clearPointerMoveOpened"]},"pointer.move":[{guard:ue("noVisibleTooltip",T("hasPointerMoveOpened")),target:"opening"},{guard:T("hasPointerMoveOpened"),target:"open",actions:["setPointerMoveOpened","invokeOnOpen"]}]}},opening:{effects:["trackScroll","trackPointerlockChange","waitForOpenDelay"],on:{"after.openDelay":[{guard:"isOpenControlled",actions:["setPointerMoveOpened","invokeOnOpen"]},{target:"open",actions:["setPointerMoveOpened","invokeOnOpen"]}],"controlled.open":{target:"open"},"controlled.close":{target:"closed"},open:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}],"pointer.leave":[{guard:"isOpenControlled",actions:["clearPointerMoveOpened","invokeOnClose","toggleVisibility"]},{target:"closed",actions:["clearPointerMoveOpened","invokeOnClose"]}],close:[{guard:"isOpenControlled",actions:["invokeOnClose","toggleVisibility"]},{target:"closed",actions:["invokeOnClose"]}]}},open:{effects:["trackEscapeKey","trackScroll","trackPointerlockChange","trackPositioning"],entry:["setGlobalId"],on:{"controlled.close":{target:"closed"},close:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}],"pointer.leave":[{guard:"isVisible",target:"closing",actions:["clearPointerMoveOpened"]},{guard:"isOpenControlled",actions:["clearPointerMoveOpened","invokeOnClose"]},{target:"closed",actions:["clearPointerMoveOpened","invokeOnClose"]}],"content.pointer.leave":{guard:"isInteractive",target:"closing"},"positioning.set":{actions:["reposition"]}}},closing:{effects:["trackPositioning","waitForCloseDelay"],on:{"after.closeDelay":[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}],"controlled.close":{target:"closed"},"controlled.open":{target:"open"},close:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}],"pointer.move":[{guard:"isOpenControlled",actions:["setPointerMoveOpened","invokeOnOpen","toggleVisibility"]},{target:"open",actions:["setPointerMoveOpened","invokeOnOpen"]}],"content.pointer.move":{guard:"isInteractive",target:"open"},"positioning.set":{actions:["reposition"]}}}},implementations:{guards:{noVisibleTooltip:()=>c.get("id")===null,isVisible:({prop:e})=>e("id")===c.get("id"),isInteractive:({prop:e})=>!!e("interactive"),hasPointerMoveOpened:({context:e})=>e.get("hasPointerMoveOpened"),isOpenControlled:({prop:e})=>e("open")!==void 0},actions:{setGlobalId:({prop:e})=>{c.set("id",e("id"))},clearGlobalId:({prop:e})=>{e("id")===c.get("id")&&c.set("id",null)},invokeOnOpen:({prop:e})=>{var o;(o=e("onOpenChange"))==null||o({open:!0})},invokeOnClose:({prop:e})=>{var o;(o=e("onOpenChange"))==null||o({open:!1})},closeIfDisabled:({prop:e,send:o})=>{e("disabled")&&o({type:"close",src:"disabled.change"})},reposition:({context:e,event:o,prop:t,scope:n})=>{if(o.type!=="positioning.set")return;const r=()=>x(n);return w(k(n),r,{...t("positioning"),...o.options,defer:!0,listeners:!1,onComplete(i){e.set("currentPlacement",i.placement)}})},toggleVisibility:({prop:e,event:o,send:t})=>{queueMicrotask(()=>{t({type:e("open")?"controlled.open":"controlled.close",previousEvent:o})})},setPointerMoveOpened:({context:e})=>{e.set("hasPointerMoveOpened",!0)},clearPointerMoveOpened:({context:e})=>{e.set("hasPointerMoveOpened",!1)}},effects:{trackFocusVisible:({scope:e})=>{var o;return ie({root:(o=e.getRootNode)==null?void 0:o.call(e)})},trackPositioning:({context:e,prop:o,scope:t})=>{e.get("currentPlacement")||e.set("currentPlacement",o("positioning").placement);const n=()=>x(t);return w(k(t),n,{...o("positioning"),defer:!0,onComplete(r){e.set("currentPlacement",r.placement)}})},trackPointerlockChange:({send:e,scope:o})=>{const t=o.getDoc();return P(t,"pointerlockchange",()=>e({type:"close",src:"pointerlock:change"}),!1)},trackScroll:({send:e,prop:o,scope:t})=>{if(!o("closeOnScroll"))return;const n=k(t);if(!n)return;const r=X(n).map(i=>P(i,"scroll",()=>{e({type:"close",src:"scroll"})},{passive:!0,capture:!0}));return()=>{r.forEach(i=>i==null?void 0:i())}},trackStore:({prop:e,send:o})=>{let t;return queueMicrotask(()=>{t=c.subscribe(()=>{c.get("id")!==e("id")&&o({type:"close",src:"id.change"})})}),()=>t==null?void 0:t()},trackEscapeKey:({send:e,prop:o})=>o("closeOnEscape")?P(document,"keydown",t=>{U(t)||t.key==="Escape"&&(t.stopPropagation(),e({type:"close",src:"keydown.escape"}))},!0):void 0,waitForOpenDelay:({send:e,prop:o})=>{const t=setTimeout(()=>{e({type:"after.openDelay"})},o("openDelay"));return()=>clearTimeout(t)},waitForCloseDelay:({send:e,prop:o})=>{const t=setTimeout(()=>{e({type:"after.closeDelay"})},o("closeDelay"));return()=>clearTimeout(t)}}}});Y()(["aria-label","closeDelay","closeOnEscape","closeOnPointerDown","closeOnScroll","closeOnClick","dir","disabled","getRootNode","id","ids","interactive","onOpenChange","defaultOpen","open","openDelay","positioning"]);const Oe=e=>{const o=p.useId(),{getRootNode:t}=Z(),{dir:n}=ee(),r={id:o,dir:n,getRootNode:t,...e},i=oe(ve,r);return ge(i,re)},me=e=>{const[o,{children:t,...n}]=B(e),r=Oe(n),i=G(u({present:r.open},o));return l.jsx(ae,{value:r,children:l.jsx(L,{value:i,children:t})})},S=p.forwardRef((e,o)=>{const t=m(),n=u(t.getTriggerProps(),e);return l.jsx(O.button,{...n,ref:o})});S.displayName="TooltipTrigger";const $=p.createContext({});function fe({children:e}){const[o,t]=p.useState();return l.jsx($.Provider,{value:{setTriggerId:t,triggerId:o},children:e})}function A(){return p.useContext($)}const ye=({children:e,closeDelay:o=50,onOpenChange:t,open:n,openDelay:r=0,position:i=_.top,...s})=>{const{triggerId:f}=A();return l.jsx(me,{closeDelay:o,closeOnClick:!1,closeOnPointerDown:!1,closeOnScroll:!1,ids:{trigger:f},interactive:!0,onOpenChange:t,open:n,openDelay:r,positioning:{placement:i},...s,children:e})},Pe=e=>l.jsx(fe,{children:l.jsx(ye,{...e})});Pe.displayName="Tooltip";const ke={"tooltip-content":"_tooltip-content_zk0pd_2"},Ce=p.forwardRef(({children:e,className:o,createPortal:t=!0,withArrow:n=!1,...r},i)=>l.jsx(q,{disabled:!t,children:l.jsx(E,{children:l.jsxs(N,{className:M(ke["tooltip-content"],o),"data-ods":"tooltip-content",ref:i,...r,children:[n&&l.jsx(j,{children:l.jsx(I,{})}),e]})})}));Ce.displayName="TooltipContent";const he={"tooltip-trigger":"_tooltip-trigger_wxukn_2"},be=p.forwardRef(({asChild:e,children:o,className:t,...n},r)=>{const{setTriggerId:i}=A();return p.useEffect(()=>{var s;if(!e&&n.id){i==null||i(n.id);return}o&&(s=o.props)!=null&&s.id&&(i==null||i(o.props.id))},[e,o,n,i]),l.jsx(S,{asChild:e,className:M(he["tooltip-trigger"],t),"data-ods":"tooltip-trigger",ref:r,role:"button",tabIndex:0,...n,children:o})});be.displayName="TooltipTrigger";export{be as I,Ce as M,Pe as h};
