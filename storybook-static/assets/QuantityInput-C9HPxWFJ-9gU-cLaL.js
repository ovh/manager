import{j as v}from"./jsx-runtime-BRNY0I4F.js";import{r as b}from"./index-Bnop-kX6.js";import{I as ue}from"./FormFieldLabel-DerGjSSG-BvxIGX_B.js";import{X as Ie,t as G,v as j,x as Te,a9 as Oe,aa as De,ab as Se,ac as z,a3 as we,ad as Ce,p as L,$ as ce,ae as Ve,m as _e,D as Z,af as Fe,ag as F,ah as Ae,T as Me,L as Ue,ai as Le,aj as $e,a8 as Be,O as He,w as qe,V as ke,G as p,ak as Q,W as Ge,al as je,am as Y,Y as $,an as We,y as ze,ao as C,A as Ze,ap as Qe}from"./use-locale-context-cwTY9VYn-REDUMe7F.js";import{r as pe}from"./use-field-context-C3OOq-03-DvM5qnyl.js";import{m as M}from"./index-2w0W-O47-BJ19ihbZ.js";import{x as X,s as J,t as K}from"./Button-BC-ipw2F-CXZv4wj7.js";import{a as A}from"./ods-react236-aAAP9SXj.js";import{t as ee}from"./Icon-DrfG5m-t-DQEf1CkA.js";import{l as te}from"./ods-react60-0db41gCx.js";const[Ye,W]=Ie({name:"NumberInputContext",hookName:"useNumberInputContext",providerName:"<NumberInputProvider />"}),me=b.forwardRef((t,e)=>{const n=W(),r=G(n.getControlProps(),t);return v.jsx(j.div,{...r,ref:e})});me.displayName="NumberInputControl";const de=b.forwardRef((t,e)=>{const n=W(),r=G(n.getInputProps(),t),i=pe();return v.jsx(j.input,{"aria-describedby":i==null?void 0:i.ariaDescribedby,...r,ref:e})});de.displayName="NumberInputInput";let B=new Map,k=!1;try{k=new Intl.NumberFormat("de-DE",{signDisplay:"exceptZero"}).resolvedOptions().signDisplay==="exceptZero"}catch{}let U=!1;try{U=new Intl.NumberFormat("de-DE",{style:"unit",unit:"degree"}).resolvedOptions().style==="unit"}catch{}const ge={degree:{narrow:{default:"°","ja-JP":" 度","zh-TW":"度","sl-SI":" °"}}};class Xe{format(e){let n="";if(!k&&this.options.signDisplay!=null?n=Ke(this.numberFormatter,this.options.signDisplay,e):n=this.numberFormatter.format(e),this.options.style==="unit"&&!U){var r;let{unit:i,unitDisplay:a="short",locale:s}=this.resolvedOptions();if(!i)return n;let l=(r=ge[i])===null||r===void 0?void 0:r[a];n+=l[s]||l.default}return n}formatToParts(e){return this.numberFormatter.formatToParts(e)}formatRange(e,n){if(typeof this.numberFormatter.formatRange=="function")return this.numberFormatter.formatRange(e,n);if(n<e)throw new RangeError("End date must be >= start date");return`${this.format(e)} – ${this.format(n)}`}formatRangeToParts(e,n){if(typeof this.numberFormatter.formatRangeToParts=="function")return this.numberFormatter.formatRangeToParts(e,n);if(n<e)throw new RangeError("End date must be >= start date");let r=this.numberFormatter.formatToParts(e),i=this.numberFormatter.formatToParts(n);return[...r.map(a=>({...a,source:"startRange"})),{type:"literal",value:" – ",source:"shared"},...i.map(a=>({...a,source:"endRange"}))]}resolvedOptions(){let e=this.numberFormatter.resolvedOptions();return!k&&this.options.signDisplay!=null&&(e={...e,signDisplay:this.options.signDisplay}),!U&&this.options.style==="unit"&&(e={...e,style:"unit",unit:this.options.unit,unitDisplay:this.options.unitDisplay}),e}constructor(e,n={}){this.numberFormatter=Je(e,n),this.options=n}}function Je(t,e={}){let{numberingSystem:n}=e;if(n&&t.includes("-nu-")&&(t.includes("-u-")||(t+="-u-"),t+=`-nu-${n}`),e.style==="unit"&&!U){var r;let{unit:s,unitDisplay:l="short"}=e;if(!s)throw new Error('unit option must be provided with style: "unit"');if(!(!((r=ge[s])===null||r===void 0)&&r[l]))throw new Error(`Unsupported unit ${s} with unitDisplay = ${l}`);e={...e,style:"decimal"}}let i=t+(e?Object.entries(e).sort((s,l)=>s[0]<l[0]?-1:1).join():"");if(B.has(i))return B.get(i);let a=new Intl.NumberFormat(t,e);return B.set(i,a),a}function Ke(t,e,n){if(e==="auto")return t.format(n);if(e==="never")return t.format(Math.abs(n));{let r=!1;if(e==="always"?r=n>0||Object.is(n,0):e==="exceptZero"&&(Object.is(n,-0)||Object.is(n,0)?n=Math.abs(n):r=n>0),r){let i=t.format(-n),a=t.format(n),s=i.replace(a,"").replace(/\u200e|\u061C/,"");return[...s].length!==1&&console.warn("@react-aria/i18n polyfill for NumberFormat signDisplay: Unsupported case"),i.replace(a,"!!!").replace(s,"+").replace("!!!",a)}else return t.format(n)}}const et=new RegExp("^.*\\(.*\\).*$"),tt=["latn","arab","hanidec","deva","beng","fullwide"];class fe{parse(e){return H(this.locale,this.options,e).parse(e)}isValidPartialNumber(e,n,r){return H(this.locale,this.options,e).isValidPartialNumber(e,n,r)}getNumberingSystem(e){return H(this.locale,this.options,e).options.numberingSystem}constructor(e,n={}){this.locale=e,this.options=n}}const ne=new Map;function H(t,e,n){let r=re(t,e);if(!t.includes("-nu-")&&!r.isValidPartialNumber(n)){for(let i of tt)if(i!==r.options.numberingSystem){let a=re(t+(t.includes("-u-")?"-nu-":"-u-nu-")+i,e);if(a.isValidPartialNumber(n))return a}}return r}function re(t,e){let n=t+(e?Object.entries(e).sort((i,a)=>i[0]<a[0]?-1:1).join():""),r=ne.get(n);return r||(r=new nt(t,e),ne.set(n,r)),r}class nt{parse(e){let n=this.sanitize(e);if(this.symbols.group&&(n=O(n,this.symbols.group,"")),this.symbols.decimal&&(n=n.replace(this.symbols.decimal,".")),this.symbols.minusSign&&(n=n.replace(this.symbols.minusSign,"-")),n=n.replace(this.symbols.numeral,this.symbols.index),this.options.style==="percent"){let s=n.indexOf("-");n=n.replace("-",""),n=n.replace("+","");let l=n.indexOf(".");l===-1&&(l=n.length),n=n.replace(".",""),l-2===0?n=`0.${n}`:l-2===-1?n=`0.0${n}`:l-2===-2?n="0.00":n=`${n.slice(0,l-2)}.${n.slice(l-2)}`,s>-1&&(n=`-${n}`)}let r=n?+n:NaN;if(isNaN(r))return NaN;if(this.options.style==="percent"){var i,a;let s={...this.options,style:"decimal",minimumFractionDigits:Math.min(((i=this.options.minimumFractionDigits)!==null&&i!==void 0?i:0)+2,20),maximumFractionDigits:Math.min(((a=this.options.maximumFractionDigits)!==null&&a!==void 0?a:0)+2,20)};return new fe(this.locale,s).parse(new Xe(this.locale,s).format(r))}return this.options.currencySign==="accounting"&&et.test(e)&&(r=-1*r),r}sanitize(e){return e=e.replace(this.symbols.literals,""),this.symbols.minusSign&&(e=e.replace("-",this.symbols.minusSign)),this.options.numberingSystem==="arab"&&(this.symbols.decimal&&(e=e.replace(",",this.symbols.decimal),e=e.replace("،",this.symbols.decimal)),this.symbols.group&&(e=O(e,".",this.symbols.group))),this.symbols.group==="’"&&e.includes("'")&&(e=O(e,"'",this.symbols.group)),this.options.locale==="fr-FR"&&this.symbols.group&&(e=O(e," ",this.symbols.group),e=O(e,/\u00A0/g,this.symbols.group)),e}isValidPartialNumber(e,n=-1/0,r=1/0){return e=this.sanitize(e),this.symbols.minusSign&&e.startsWith(this.symbols.minusSign)&&n<0?e=e.slice(this.symbols.minusSign.length):this.symbols.plusSign&&e.startsWith(this.symbols.plusSign)&&r>0&&(e=e.slice(this.symbols.plusSign.length)),this.symbols.group&&e.startsWith(this.symbols.group)||this.symbols.decimal&&e.indexOf(this.symbols.decimal)>-1&&this.options.maximumFractionDigits===0?!1:(this.symbols.group&&(e=O(e,this.symbols.group,"")),e=e.replace(this.symbols.numeral,""),this.symbols.decimal&&(e=e.replace(this.symbols.decimal,"")),e.length===0)}constructor(e,n={}){this.locale=e,n.roundingIncrement!==1&&n.roundingIncrement!=null&&(n.maximumFractionDigits==null&&n.minimumFractionDigits==null?(n.maximumFractionDigits=0,n.minimumFractionDigits=0):n.maximumFractionDigits==null?n.maximumFractionDigits=n.minimumFractionDigits:n.minimumFractionDigits==null&&(n.minimumFractionDigits=n.maximumFractionDigits)),this.formatter=new Intl.NumberFormat(e,n),this.options=this.formatter.resolvedOptions(),this.symbols=it(e,this.formatter,this.options,n);var r,i;this.options.style==="percent"&&(((r=this.options.minimumFractionDigits)!==null&&r!==void 0?r:0)>18||((i=this.options.maximumFractionDigits)!==null&&i!==void 0?i:0)>18)&&console.warn("NumberParser cannot handle percentages with greater than 18 decimal places, please reduce the number in your options.")}}const ie=new Set(["decimal","fraction","integer","minusSign","plusSign","group"]),rt=[0,4,2,1,11,20,3,7,100,21,.1,1.1];function it(t,e,n,r){var i,a,s,l;let u=new Intl.NumberFormat(t,{...n,minimumSignificantDigits:1,maximumSignificantDigits:21,roundingIncrement:1,roundingPriority:"auto",roundingMode:"halfExpand"}),c=u.formatToParts(-10000.111),g=u.formatToParts(10000.111),f=rt.map(m=>u.formatToParts(m));var R;let h=(R=(i=c.find(m=>m.type==="minusSign"))===null||i===void 0?void 0:i.value)!==null&&R!==void 0?R:"-",x=(a=g.find(m=>m.type==="plusSign"))===null||a===void 0?void 0:a.value;!x&&((r==null?void 0:r.signDisplay)==="exceptZero"||(r==null?void 0:r.signDisplay)==="always")&&(x="+");let N=(s=new Intl.NumberFormat(t,{...n,minimumFractionDigits:2,maximumFractionDigits:2}).formatToParts(.001).find(m=>m.type==="decimal"))===null||s===void 0?void 0:s.value,T=(l=c.find(m=>m.type==="group"))===null||l===void 0?void 0:l.value,o=c.filter(m=>!ie.has(m.type)).map(m=>ae(m.value)),d=f.flatMap(m=>m.filter(P=>!ie.has(P.type)).map(P=>ae(P.value))),y=[...new Set([...o,...d])].sort((m,P)=>P.length-m.length),V=y.length===0?new RegExp("[\\p{White_Space}]","gu"):new RegExp(`${y.join("|")}|[\\p{White_Space}]`,"gu"),_=[...new Intl.NumberFormat(n.locale,{useGrouping:!1}).format(9876543210)].reverse(),Re=new Map(_.map((m,P)=>[m,P])),Pe=new RegExp(`[${_.join("")}]`,"g");return{minusSign:h,plusSign:x,decimal:N,group:T,literals:V,numeral:Pe,index:m=>String(Re.get(m))}}function O(t,e,n){return t.replaceAll?t.replaceAll(e,n):t.split(e).join(n)}function ae(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var at=Te("numberInput").parts("root","label","input","control","valueText","incrementTrigger","decrementTrigger","scrubber"),E=at.build(),st=t=>{var e;return((e=t.ids)==null?void 0:e.root)??`number-input:${t.id}`},S=t=>{var e;return((e=t.ids)==null?void 0:e.input)??`number-input:${t.id}:input`},ve=t=>{var e;return((e=t.ids)==null?void 0:e.incrementTrigger)??`number-input:${t.id}:inc`},be=t=>{var e;return((e=t.ids)==null?void 0:e.decrementTrigger)??`number-input:${t.id}:dec`},ot=t=>{var e;return((e=t.ids)==null?void 0:e.scrubber)??`number-input:${t.id}:scrubber`},he=t=>`number-input:${t.id}:cursor`,lt=t=>{var e;return((e=t.ids)==null?void 0:e.label)??`number-input:${t.id}:label`},w=t=>t.getById(S(t)),ut=t=>t.getById(ve(t)),ct=t=>t.getById(be(t)),ye=t=>t.getDoc().getElementById(he(t)),pt=(t,e)=>{let n=null;return e==="increment"&&(n=ut(t)),e==="decrement"&&(n=ct(t)),n},mt=(t,e)=>{if(!ce())return ft(t,e),()=>{var n;(n=ye(t))==null||n.remove()}},dt=t=>{const e=t.getDoc(),n=e.documentElement,r=e.body;return r.style.pointerEvents="none",n.style.userSelect="none",n.style.cursor="ew-resize",()=>{r.style.pointerEvents="",n.style.userSelect="",n.style.cursor="",n.style.length||n.removeAttribute("style"),r.style.length||r.removeAttribute("style")}},gt=(t,e)=>{const{point:n,isRtl:r,event:i}=e,a=t.getWin(),s=C(i.movementX,a.devicePixelRatio),l=C(i.movementY,a.devicePixelRatio);let u=s>0?"increment":s<0?"decrement":null;r&&u==="increment"&&(u="decrement"),r&&u==="decrement"&&(u="increment");const c={x:n.x+s,y:n.y+l},g=a.innerWidth,f=C(7.5,a.devicePixelRatio);return c.x=Qe(c.x+f,g)-f,{hint:u,point:c}},ft=(t,e)=>{const n=t.getDoc(),r=n.createElement("div");r.className="scrubber--cursor",r.id=he(t),Object.assign(r.style,{width:"15px",height:"15px",position:"fixed",pointerEvents:"none",left:"0px",top:"0px",zIndex:Le,transform:e?`translate3d(${e.x}px, ${e.y}px, 0px)`:void 0,willChange:"transform"}),r.innerHTML=`
      <svg width="46" height="15" style="left: -15.5px; position: absolute; top: 0; filter: drop-shadow(rgba(0, 0, 0, 0.4) 0px 1px 1.1px);">
        <g transform="translate(2 3)">
          <path fill-rule="evenodd" d="M 15 4.5L 15 2L 11.5 5.5L 15 9L 15 6.5L 31 6.5L 31 9L 34.5 5.5L 31 2L 31 4.5Z" style="stroke-width: 2px; stroke: white;"></path>
          <path fill-rule="evenodd" d="M 15 4.5L 15 2L 11.5 5.5L 15 9L 15 6.5L 31 6.5L 31 9L 34.5 5.5L 31 2L 31 4.5Z"></path>
        </g>
      </svg>`,n.body.appendChild(r)};function vt(t,e){if(!(!t||!e.isActiveElement(t)))try{const{selectionStart:n,selectionEnd:r,value:i}=t;return n==null||r==null?void 0:{start:n,end:r,value:i}}catch{return}}function bt(t,e,n){if(!(!t||!n.isActiveElement(t))){if(!e){const r=t.value.length;t.setSelectionRange(r,r);return}try{const r=t.value,{start:i,end:a,value:s}=e;if(r===s){t.setSelectionRange(i,a);return}const l=se(s,r,i),u=i===a?l:se(s,r,a),c=Math.max(0,Math.min(l,r.length)),g=Math.max(c,Math.min(u,r.length));t.setSelectionRange(c,g)}catch{const r=t.value.length;t.setSelectionRange(r,r)}}}function se(t,e,n){const r=t.slice(0,n),i=t.slice(n);let a=0;const s=Math.min(r.length,e.length);for(let c=0;c<s&&r[c]===e[c];c++)a=c+1;let l=0;const u=Math.min(i.length,e.length-a);for(let c=0;c<u;c++){const g=i.length-1-c,f=e.length-1-c;if(i[g]===e[f])l=c+1;else break}if(a>=r.length)return a;if(l>=i.length)return e.length-l;if(a>0)return a;if(l>0)return e.length-l;if(t.length>0){const c=n/t.length;return Math.round(c*e.length)}return e.length}function ht(t,e){const{state:n,send:r,prop:i,scope:a,computed:s}=t,l=n.hasTag("focus"),u=s("isDisabled"),c=!!i("readOnly"),g=!!i("required"),f=n.matches("scrubbing"),R=s("isValueEmpty"),h=s("isOutOfRange")||!!i("invalid"),x=u||!s("canIncrement")||c,N=u||!s("canDecrement")||c,T=i("translations");return{focused:l,invalid:h,empty:R,value:s("formattedValue"),valueAsNumber:s("valueAsNumber"),setValue(o){r({type:"VALUE.SET",value:o})},clearValue(){r({type:"VALUE.CLEAR"})},increment(){r({type:"VALUE.INCREMENT"})},decrement(){r({type:"VALUE.DECREMENT"})},setToMax(){r({type:"VALUE.SET",value:i("max")})},setToMin(){r({type:"VALUE.SET",value:i("min")})},focus(){var o;(o=w(a))==null||o.focus()},getRootProps(){return e.element({id:st(a),...E.root.attrs,dir:i("dir"),"data-disabled":p(u),"data-focus":p(l),"data-invalid":p(h),"data-scrubbing":p(f)})},getLabelProps(){return e.label({...E.label.attrs,dir:i("dir"),"data-disabled":p(u),"data-focus":p(l),"data-invalid":p(h),"data-required":p(g),"data-scrubbing":p(f),id:lt(a),htmlFor:S(a)})},getControlProps(){return e.element({...E.control.attrs,dir:i("dir"),role:"group","aria-disabled":u,"data-focus":p(l),"data-disabled":p(u),"data-invalid":p(h),"data-scrubbing":p(f),"aria-invalid":Q(h)})},getValueTextProps(){return e.element({...E.valueText.attrs,dir:i("dir"),"data-disabled":p(u),"data-invalid":p(h),"data-focus":p(l),"data-scrubbing":p(f)})},getInputProps(){return e.input({...E.input.attrs,dir:i("dir"),name:i("name"),form:i("form"),id:S(a),role:"spinbutton",defaultValue:s("formattedValue"),pattern:i("formatOptions")?void 0:i("pattern"),inputMode:i("inputMode"),"aria-invalid":Q(h),"data-invalid":p(h),disabled:u,"data-disabled":p(u),readOnly:c,required:i("required"),autoComplete:"off",autoCorrect:"off",spellCheck:"false",type:"text","aria-roledescription":"numberfield","aria-valuemin":i("min"),"aria-valuemax":i("max"),"aria-valuenow":Number.isNaN(s("valueAsNumber"))?void 0:s("valueAsNumber"),"aria-valuetext":s("valueText"),"data-scrubbing":p(f),onFocus(){r({type:"INPUT.FOCUS"})},onBlur(){r({type:"INPUT.BLUR"})},onInput(o){const d=vt(o.currentTarget,a);r({type:"INPUT.CHANGE",target:o.currentTarget,hint:"set",selection:d})},onBeforeInput(o){try{const{selectionStart:d,selectionEnd:y,value:V}=o.currentTarget,_=V.slice(0,d)+(o.data??"")+V.slice(y);s("parser").isValidPartialNumber(_)||o.preventDefault()}catch{}},onKeyDown(o){if(o.defaultPrevented||c||Ge(o))return;const d=je(o)*i("step"),y={ArrowUp(){r({type:"INPUT.ARROW_UP",step:d}),o.preventDefault()},ArrowDown(){r({type:"INPUT.ARROW_DOWN",step:d}),o.preventDefault()},Home(){Y(o)||(r({type:"INPUT.HOME"}),o.preventDefault())},End(){Y(o)||(r({type:"INPUT.END"}),o.preventDefault())},Enter(){r({type:"INPUT.ENTER"})}}[o.key];y==null||y(o)}})},getDecrementTriggerProps(){return e.button({...E.decrementTrigger.attrs,dir:i("dir"),id:be(a),disabled:N,"data-disabled":p(N),"aria-label":T.decrementLabel,type:"button",tabIndex:-1,"aria-controls":S(a),"data-scrubbing":p(f),onPointerDown(o){var d;N||$(o)&&(r({type:"TRIGGER.PRESS_DOWN",hint:"decrement",pointerType:o.pointerType}),o.pointerType==="mouse"&&o.preventDefault(),o.pointerType==="touch"&&((d=o.currentTarget)==null||d.focus({preventScroll:!0})))},onPointerUp(o){r({type:"TRIGGER.PRESS_UP",hint:"decrement",pointerType:o.pointerType})},onPointerLeave(){N||r({type:"TRIGGER.PRESS_UP",hint:"decrement"})}})},getIncrementTriggerProps(){return e.button({...E.incrementTrigger.attrs,dir:i("dir"),id:ve(a),disabled:x,"data-disabled":p(x),"aria-label":T.incrementLabel,type:"button",tabIndex:-1,"aria-controls":S(a),"data-scrubbing":p(f),onPointerDown(o){var d;x||!$(o)||(r({type:"TRIGGER.PRESS_DOWN",hint:"increment",pointerType:o.pointerType}),o.pointerType==="mouse"&&o.preventDefault(),o.pointerType==="touch"&&((d=o.currentTarget)==null||d.focus({preventScroll:!0})))},onPointerUp(o){r({type:"TRIGGER.PRESS_UP",hint:"increment",pointerType:o.pointerType})},onPointerLeave(o){r({type:"TRIGGER.PRESS_UP",hint:"increment",pointerType:o.pointerType})}})},getScrubberProps(){return e.element({...E.scrubber.attrs,dir:i("dir"),"data-disabled":p(u),id:ot(a),role:"presentation","data-scrubbing":p(f),onMouseDown(o){if(u||!$(o))return;const d=We(o),y=ze(o.currentTarget).devicePixelRatio;d.x=d.x-C(7.5,y),d.y=d.y-C(7.5,y),r({type:"SCRUBBER.PRESS_DOWN",point:d}),o.preventDefault()},style:{cursor:u?void 0:"ew-resize"}})}}}var yt=(t,e={})=>new Intl.NumberFormat(t,e),xt=(t,e={})=>new fe(t,e),q=(t,e)=>{const{prop:n,computed:r}=e;return n("formatOptions")?t===""?Number.NaN:r("parser").parse(t):parseFloat(t)},I=(t,e)=>{const{prop:n,computed:r}=e;return Number.isNaN(t)?"":n("formatOptions")?r("formatter").format(t):t.toString()},Nt=(t,e)=>{let n=t!==void 0&&!Number.isNaN(t)?t:1;return(e==null?void 0:e.style)==="percent"&&(t===void 0||Number.isNaN(t))&&(n=.01),n},{choose:Et,guards:Rt,createMachine:Pt}=$e(),{not:oe,and:le}=Rt,It=Pt({props({props:t}){const e=Nt(t.step,t.formatOptions);return{dir:"ltr",locale:"en-US",focusInputOnChange:!0,clampValueOnBlur:!t.allowOverflow,allowOverflow:!1,inputMode:"decimal",pattern:"-?[0-9]*(.[0-9]+)?",defaultValue:"",step:e,min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,spinOnPress:!0,...t,translations:{incrementLabel:"increment value",decrementLabel:"decrease value",...t.translations}}},initialState(){return"idle"},context({prop:t,bindable:e,getComputed:n}){return{value:e(()=>({defaultValue:t("defaultValue"),value:t("value"),onChange(r){var i;const a=n(),s=q(r,{computed:a,prop:t});(i=t("onValueChange"))==null||i({value:r,valueAsNumber:s})}})),hint:e(()=>({defaultValue:null})),scrubberCursorPoint:e(()=>({defaultValue:null,hash(r){return r?`x:${r.x}, y:${r.y}`:""}})),fieldsetDisabled:e(()=>({defaultValue:!1}))}},computed:{isRtl:({prop:t})=>t("dir")==="rtl",valueAsNumber:({context:t,computed:e,prop:n})=>q(t.get("value"),{computed:e,prop:n}),formattedValue:({computed:t,prop:e})=>I(t("valueAsNumber"),{computed:t,prop:e}),isAtMin:({computed:t,prop:e})=>Oe(t("valueAsNumber"),e("min")),isAtMax:({computed:t,prop:e})=>De(t("valueAsNumber"),e("max")),isOutOfRange:({computed:t,prop:e})=>!Se(t("valueAsNumber"),e("min"),e("max")),isValueEmpty:({context:t})=>t.get("value")==="",isDisabled:({prop:t,context:e})=>!!t("disabled")||e.get("fieldsetDisabled"),canIncrement:({prop:t,computed:e})=>t("allowOverflow")||!e("isAtMax"),canDecrement:({prop:t,computed:e})=>t("allowOverflow")||!e("isAtMin"),valueText:({prop:t,context:e})=>{var n,r;return(r=(n=t("translations")).valueText)==null?void 0:r.call(n,e.get("value"))},formatter:z(({prop:t})=>[t("locale"),t("formatOptions")],([t,e])=>yt(t,e)),parser:z(({prop:t})=>[t("locale"),t("formatOptions")],([t,e])=>xt(t,e))},watch({track:t,action:e,context:n,computed:r,prop:i}){t([()=>n.get("value"),()=>i("locale")],()=>{e(["syncInputElement"])}),t([()=>r("isOutOfRange")],()=>{e(["invokeOnInvalid"])}),t([()=>n.hash("scrubberCursorPoint")],()=>{e(["setVirtualCursorPosition"])})},effects:["trackFormControl"],on:{"VALUE.SET":{actions:["setRawValue"]},"VALUE.CLEAR":{actions:["clearValue"]},"VALUE.INCREMENT":{actions:["increment"]},"VALUE.DECREMENT":{actions:["decrement"]}},states:{idle:{on:{"TRIGGER.PRESS_DOWN":[{guard:"isTouchPointer",target:"before:spin",actions:["setHint"]},{target:"before:spin",actions:["focusInput","invokeOnFocus","setHint"]}],"SCRUBBER.PRESS_DOWN":{target:"scrubbing",actions:["focusInput","invokeOnFocus","setHint","setCursorPoint"]},"INPUT.FOCUS":{target:"focused",actions:["focusInput","invokeOnFocus"]}}},focused:{tags:["focus"],effects:["attachWheelListener"],on:{"TRIGGER.PRESS_DOWN":[{guard:"isTouchPointer",target:"before:spin",actions:["setHint"]},{target:"before:spin",actions:["focusInput","setHint"]}],"SCRUBBER.PRESS_DOWN":{target:"scrubbing",actions:["focusInput","setHint","setCursorPoint"]},"INPUT.ARROW_UP":{actions:["increment"]},"INPUT.ARROW_DOWN":{actions:["decrement"]},"INPUT.HOME":{actions:["decrementToMin"]},"INPUT.END":{actions:["incrementToMax"]},"INPUT.CHANGE":{actions:["setValue","setHint"]},"INPUT.BLUR":[{guard:le("clampValueOnBlur",oe("isInRange")),target:"idle",actions:["setClampedValue","clearHint","invokeOnBlur"]},{guard:oe("isInRange"),target:"idle",actions:["setFormattedValue","clearHint","invokeOnBlur","invokeOnInvalid"]},{target:"idle",actions:["setFormattedValue","clearHint","invokeOnBlur"]}],"INPUT.ENTER":{actions:["setFormattedValue","clearHint","invokeOnBlur"]}}},"before:spin":{tags:["focus"],effects:["trackButtonDisabled","waitForChangeDelay"],entry:Et([{guard:"isIncrementHint",actions:["increment"]},{guard:"isDecrementHint",actions:["decrement"]}]),on:{CHANGE_DELAY:{target:"spinning",guard:le("isInRange","spinOnPress")},"TRIGGER.PRESS_UP":[{guard:"isTouchPointer",target:"focused",actions:["clearHint"]},{target:"focused",actions:["focusInput","clearHint"]}]}},spinning:{tags:["focus"],effects:["trackButtonDisabled","spinValue"],on:{SPIN:[{guard:"isIncrementHint",actions:["increment"]},{guard:"isDecrementHint",actions:["decrement"]}],"TRIGGER.PRESS_UP":{target:"focused",actions:["focusInput","clearHint"]}}},scrubbing:{tags:["focus"],effects:["activatePointerLock","trackMousemove","setupVirtualCursor","preventTextSelection"],on:{"SCRUBBER.POINTER_UP":{target:"focused",actions:["focusInput","clearCursorPoint"]},"SCRUBBER.POINTER_MOVE":[{guard:"isIncrementHint",actions:["increment","setCursorPoint"]},{guard:"isDecrementHint",actions:["decrement","setCursorPoint"]}]}}},implementations:{guards:{clampValueOnBlur:({prop:t})=>t("clampValueOnBlur"),spinOnPress:({prop:t})=>!!t("spinOnPress"),isInRange:({computed:t})=>!t("isOutOfRange"),isDecrementHint:({context:t,event:e})=>(e.hint??t.get("hint"))==="decrement",isIncrementHint:({context:t,event:e})=>(e.hint??t.get("hint"))==="increment",isTouchPointer:({event:t})=>t.pointerType==="touch"},effects:{waitForChangeDelay({send:t}){const e=setTimeout(()=>{t({type:"CHANGE_DELAY"})},300);return()=>clearTimeout(e)},spinValue({send:t}){const e=setInterval(()=>{t({type:"SPIN"})},50);return()=>clearInterval(e)},trackFormControl({context:t,scope:e}){const n=w(e);return we(n,{onFieldsetDisabledChange(r){t.set("fieldsetDisabled",r)},onFormReset(){t.set("value",t.initial("value"))}})},setupVirtualCursor({context:t,scope:e}){const n=t.get("scrubberCursorPoint");return mt(e,n)},preventTextSelection({scope:t}){return dt(t)},trackButtonDisabled({context:t,scope:e,send:n}){const r=t.get("hint"),i=pt(e,r);return Ce(i,{attributes:["disabled"],callback(){n({type:"TRIGGER.PRESS_UP",src:"attr"})}})},attachWheelListener({scope:t,send:e,prop:n}){const r=w(t);if(!r||!t.isActiveElement(r)||!n("allowMouseWheel"))return;function i(a){a.preventDefault();const s=Math.sign(a.deltaY)*-1;s===1?e({type:"VALUE.INCREMENT"}):s===-1&&e({type:"VALUE.DECREMENT"})}return L(r,"wheel",i,{passive:!1})},activatePointerLock({scope:t}){if(!ce())return Ve(t.getDoc())},trackMousemove({scope:t,send:e,context:n,computed:r}){const i=t.getDoc();function a(l){const u=n.get("scrubberCursorPoint"),c=r("isRtl"),g=gt(t,{point:u,isRtl:c,event:l});g.hint&&e({type:"SCRUBBER.POINTER_MOVE",hint:g.hint,point:g.point})}function s(){e({type:"SCRUBBER.POINTER_UP"})}return _e(L(i,"mousemove",a,!1),L(i,"mouseup",s,!1))}},actions:{focusInput({scope:t,prop:e}){if(!e("focusInputOnChange"))return;const n=w(t);t.isActiveElement(n)||Z(()=>n==null?void 0:n.focus({preventScroll:!0}))},increment({context:t,event:e,prop:n,computed:r}){let i=Fe(r("valueAsNumber"),e.step??n("step"));n("allowOverflow")||(i=F(i,n("min"),n("max"))),t.set("value",I(i,{computed:r,prop:n}))},decrement({context:t,event:e,prop:n,computed:r}){let i=Ae(r("valueAsNumber"),e.step??n("step"));n("allowOverflow")||(i=F(i,n("min"),n("max"))),t.set("value",I(i,{computed:r,prop:n}))},setClampedValue({context:t,prop:e,computed:n}){const r=F(n("valueAsNumber"),e("min"),e("max"));t.set("value",I(r,{computed:n,prop:e}))},setRawValue({context:t,event:e,prop:n,computed:r}){let i=q(e.value,{computed:r,prop:n});n("allowOverflow")||(i=F(i,n("min"),n("max"))),t.set("value",I(i,{computed:r,prop:n}))},setValue({context:t,event:e}){var n;const r=((n=e.target)==null?void 0:n.value)??e.value;t.set("value",r)},clearValue({context:t}){t.set("value","")},incrementToMax({context:t,prop:e,computed:n}){const r=I(e("max"),{computed:n,prop:e});t.set("value",r)},decrementToMin({context:t,prop:e,computed:n}){const r=I(e("min"),{computed:n,prop:e});t.set("value",r)},setHint({context:t,event:e}){t.set("hint",e.hint)},clearHint({context:t}){t.set("hint",null)},invokeOnFocus({computed:t,prop:e}){var n;(n=e("onFocusChange"))==null||n({focused:!0,value:t("formattedValue"),valueAsNumber:t("valueAsNumber")})},invokeOnBlur({computed:t,prop:e}){var n;(n=e("onFocusChange"))==null||n({focused:!1,value:t("formattedValue"),valueAsNumber:t("valueAsNumber")})},invokeOnInvalid({computed:t,prop:e,event:n}){var r;if(n.type==="INPUT.CHANGE")return;const i=t("valueAsNumber")>e("max")?"rangeOverflow":"rangeUnderflow";(r=e("onValueInvalid"))==null||r({reason:i,value:t("formattedValue"),valueAsNumber:t("valueAsNumber")})},syncInputElement({context:t,event:e,computed:n,scope:r}){const i=e.type.endsWith("CHANGE")?t.get("value"):n("formattedValue"),a=w(r),s=e.selection;Z(()=>{Be(a,i),bt(a,s,r)})},setFormattedValue({context:t,computed:e}){t.set("value",e("formattedValue"))},setCursorPoint({context:t,event:e}){t.set("scrubberCursorPoint",e.point)},clearCursorPoint({context:t}){t.set("scrubberCursorPoint",null)},setVirtualCursorPosition({context:t,scope:e}){const n=ye(e),r=t.get("scrubberCursorPoint");!n||!r||(n.style.transform=`translate3d(${r.x}px, ${r.y}px, 0px)`)}}}});Me()(["allowMouseWheel","allowOverflow","clampValueOnBlur","dir","disabled","focusInputOnChange","form","formatOptions","getRootNode","id","ids","inputMode","invalid","locale","max","min","name","onFocusChange","onValueChange","onValueInvalid","pattern","required","readOnly","spinOnPress","step","translations","value","defaultValue"]);const Tt=t=>{const e=b.useId(),{getRootNode:n}=He(),{dir:r,locale:i}=qe(),a=pe(),s={id:e,ids:{label:a==null?void 0:a.ids.label,input:a==null?void 0:a.ids.control},disabled:a==null?void 0:a.disabled,readOnly:a==null?void 0:a.readOnly,required:a==null?void 0:a.required,invalid:a==null?void 0:a.invalid,dir:r,locale:i,getRootNode:n,...t},l=ke(It,s);return ht(l,Ze)},xe=b.forwardRef((t,e)=>{const[n,r]=Ue()(t,["allowMouseWheel","allowOverflow","clampValueOnBlur","defaultValue","disabled","focusInputOnChange","form","formatOptions","id","ids","inputMode","invalid","locale","max","min","name","onFocusChange","onValueChange","onValueInvalid","pattern","readOnly","required","spinOnPress","step","translations","value"]),i=Tt(n),a=G(i.getRootProps(),r);return v.jsx(Ye,{value:i,children:v.jsx(j.div,{...a,ref:e})})});xe.displayName="NumberInputRoot";const Ne=b.createContext(void 0);function Ot({children:t}){const[e,n]=b.useState();return v.jsx(Ne.Provider,{value:{inputId:e,setInputId:n},children:t})}function Ee(){const t=b.useContext(Ne);if(!t)throw new Error("useQuantity must be used within a QuantityProvider");return t}const Dt=b.forwardRef(({children:t,className:e,defaultValue:n,disabled:r,invalid:i,max:a,min:s,name:l,onValueChange:u,readOnly:c,required:g,step:f,value:R,...h},x)=>{const N=ue(),{inputId:T}=Ee();return v.jsx(xe,{clampValueOnBlur:!1,className:e,"data-ods":"quantity",defaultValue:n,disabled:r,ids:{input:T},inputMode:"decimal",invalid:i||(N==null?void 0:N.invalid),max:a,min:s,name:l,onValueChange:u,readOnly:c,ref:x,required:g,step:f,value:R,...h,children:t})}),St=b.forwardRef((t,e)=>v.jsx(Ot,{children:v.jsx(Dt,{...t,ref:e})}));St.displayName="Quantity";const D={"quantity-control":"_quantity-control_7aeg8_2","quantity-control__decrement":"_quantity-control__decrement_7aeg8_8","quantity-control__decrement--invalid":"_quantity-control__decrement--invalid_7aeg8_12","quantity-control__increment":"_quantity-control__increment_7aeg8_15","quantity-control__increment--invalid":"_quantity-control__increment--invalid_7aeg8_19"},wt=b.forwardRef(({children:t,className:e,...n},r)=>{const{decrement:i,getDecrementTriggerProps:a,getIncrementTriggerProps:s,increment:l,invalid:u}=W(),c=a(),g=s();return v.jsxs(me,{className:M(D["quantity-control"],e),"data-ods":"quantity-control",ref:r,role:"group",...n,children:[v.jsx(X,{"aria-hidden":!0,className:M(D["quantity-control__decrement"],{[D["quantity-control__decrement--invalid"]]:u}),color:u?A.critical:A.primary,disabled:c.disabled,onClick:i,size:J.sm,tabIndex:-1,variant:K.outline,children:v.jsx(ee,{name:te.minus})}),t,v.jsx(X,{"aria-hidden":!0,className:M(D["quantity-control__increment"],{[D["quantity-control__increment--invalid"]]:u}),color:u?A.critical:A.primary,disabled:g.disabled,onClick:l,size:J.sm,tabIndex:-1,variant:K.outline,children:v.jsx(ee,{name:te.plus})})]})});wt.displayName="QuantityControl";const Ct={"quantity-input":"_quantity-input_cpyn3_2"},Vt=b.forwardRef(({className:t,id:e,...n},r)=>{const i=ue(),{setInputId:a}=Ee(),s=b.useMemo(()=>e||i.id,[i.id,e]);return b.useEffect(()=>{a(s)},[s,a]),v.jsx(de,{"aria-describedby":n["aria-describedby"]||(i==null?void 0:i.ariaDescribedBy),className:M(Ct["quantity-input"],t),"data-ods":"quantity-input",ref:r,...n})});Vt.displayName="QuantityInput";export{Vt as B,St as F,wt as L};
