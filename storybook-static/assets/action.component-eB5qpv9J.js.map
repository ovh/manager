{"version":3,"file":"action.component-eB5qpv9J.js","sources":["../../src/components/navigation/menus/action/action.component.tsx"],"sourcesContent":["import React from 'react';\nimport {\n  ODS_BUTTON_VARIANT,\n  ODS_BUTTON_SIZE,\n  ODS_ICON_NAME,\n} from '@ovhcloud/ods-components';\nimport { OdsButton, OdsPopover } from '@ovhcloud/ods-components/react';\nimport { useTranslation } from 'react-i18next';\nimport '../translations/translation';\n\nimport { ManagerButton } from '../../../ManagerButton/ManagerButton';\n\nexport interface ActionMenuItem {\n  id: number;\n  rel?: string;\n  download?: string;\n  href?: string;\n  target?: string;\n  onClick?: () => void;\n  label: string;\n  variant?: ODS_BUTTON_VARIANT;\n  disabled?: boolean;\n  iamActions?: string[];\n  urn?: string;\n}\n\nexport interface ActionMenuProps {\n  items: ActionMenuItem[];\n  isCompact?: boolean;\n  icon?: ODS_ICON_NAME;\n  variant?: ODS_BUTTON_VARIANT;\n  disabled?: boolean;\n}\n\nconst MenuItem = ({\n  item,\n  isTrigger,\n  id,\n}: {\n  item: Omit<ActionMenuItem, 'id'>;\n  isTrigger: boolean;\n  id: number;\n}) => {\n  const buttonProps = {\n    size: ODS_BUTTON_SIZE.sm,\n    variant: ODS_BUTTON_VARIANT.ghost,\n    displayTooltip: false,\n    ...item,\n  };\n  return (\n    <div className=\"-mx-[2px]\">\n      {!item?.iamActions || item?.iamActions?.length === 0 ? (\n        <OdsButton\n          {...buttonProps}\n          isDisabled={buttonProps.disabled}\n          label={item.label}\n        >\n          <span slot=\"start\">\n            <span>{item.label}</span>\n          </span>\n        </OdsButton>\n      ) : (\n        <ManagerButton\n          id={`${id}`}\n          isIamTrigger={isTrigger}\n          iamActions={item.iamActions}\n          urn={item.urn}\n          {...buttonProps}\n          isDisabled={buttonProps.disabled || undefined}\n        >\n          <span slot=\"start\">\n            <span>{item.label}</span>\n          </span>\n        </ManagerButton>\n      )}\n    </div>\n  );\n};\n\nexport const ActionMenu: React.FC<ActionMenuProps> = ({\n  items,\n  isCompact,\n  icon,\n  variant = ODS_BUTTON_VARIANT.outline,\n  disabled,\n}) => {\n  const { t } = useTranslation('buttons');\n  const [isTrigger, setIsTrigger] = React.useState(false);\n\n  return (\n    <>\n      <div id=\"navigation-action-trigger\">\n        <OdsButton\n          data-testid=\"navigation-action-trigger-action\"\n          slot=\"menu-title\"\n          variant={variant}\n          isDisabled={disabled}\n          size={ODS_BUTTON_SIZE.sm}\n          onClick={() => setIsTrigger(true)}\n          {...(!isCompact && { label: t('common_actions') })}\n          icon={\n            icon ?? isCompact\n              ? ODS_ICON_NAME.ellipsisHorizontal\n              : ODS_ICON_NAME.chevronDown\n          }\n        />\n      </div>\n      <OdsPopover\n        className=\"py-[8px] px-0 overflow-hidden\"\n        triggerId=\"navigation-action-trigger\"\n        with-arrow\n      >\n        {items.map(({ id, ...item }) => {\n          return (\n            <MenuItem id={id} key={id} item={item} isTrigger={isTrigger} />\n          );\n        })}\n      </OdsPopover>\n    </>\n  );\n};\n\nexport default ActionMenu;\n"],"names":["MenuItem","item","isTrigger","id","buttonProps","ODS_BUTTON_SIZE","ODS_BUTTON_VARIANT","jsx","_a","OdsButton","ManagerButton","ActionMenu","items","isCompact","icon","variant","disabled","t","useTranslation","setIsTrigger","React","jsxs","Fragment","ODS_ICON_NAME","OdsPopover"],"mappings":"8TAkCA,MAAAA,EAAA,CAAA,CAAkB,KAAAC,EAChB,UAAAC,EACA,GAAAC,CAEF,IAAA,OAKE,MAAAC,EAAA,CAAoB,KAAAC,EAAA,GACI,QAAAC,EAAA,MACM,eAAA,GACZ,GAAAL,CACb,EAEL,OAAAM,EAAA,IAAA,MAAA,CAAA,UAAA,YAAA,SAAA,EAAAN,GAAA,MAAAA,EAAA,eAAAO,EAAAP,GAAA,YAAAA,EAAA,aAAA,YAAAO,EAAA,UAAA,EAAAD,EAAA,IAGME,EAAC,CAAA,GAAAL,EACK,WAAAA,EAAA,SACoB,MAAAH,EAAA,MACZ,SAAAM,EAAAA,IAAA,OAAA,CAAA,KAAA,QAAA,SAAAA,MAAA,OAAA,CAAA,SAAAN,EAAA,KAAA,CAAA,CAAA,CAAA,CAIZ,CAAA,EAAAM,EAAA,IAGFG,EAAC,CAAA,GAAA,GAAAP,CAAA,GACU,aAAAD,EACK,WAAAD,EAAA,WACG,IAAAA,EAAA,IACP,GAAAG,EACN,WAAAA,EAAA,UAAA,OACgC,SAAAG,EAAAA,IAAA,OAAA,CAAA,KAAA,QAAA,SAAAA,MAAA,OAAA,CAAA,SAAAN,EAAA,KAAA,CAAA,CAAA,CAAA,CAIpC,CAAA,CAAA,CAAA,CAKV,EAEOU,EAAA,CAAA,CAA+C,MAAAC,EACpD,UAAAC,EACA,KAAAC,EACA,QAAAC,EAAAT,EAAA,QAC6B,SAAAU,CAE/B,IAAA,CACE,KAAA,CAAA,EAAAC,CAAA,EAAAC,EAAA,SAAA,EACA,CAAAhB,EAAAiB,CAAA,EAAAC,EAAA,SAAA,EAAA,EAEA,OAAAC,EAAA,KAAAC,WAAA,CAAA,SAAA,CAEIf,EAAAA,IAAA,MAAA,CAAA,GAAA,4BAAA,SAAAA,EAAA,IACEE,EAAC,CAAA,cAAA,mCACa,KAAA,aACP,QAAAM,EACL,WAAAC,EACY,KAAAX,EAAA,GACU,QAAA,IAAAc,EAAA,EAAA,EACU,GAAA,CAAAN,GAAA,CAAA,MAAAI,EAAA,gBAAA,CAAA,EACgB,KAAAH,GAAAD,EAAAU,EAAA,mBAAAA,EAAA,WAI5B,CAAA,EAAA,EAGxBhB,EAAA,IACAiB,EAAC,CAAA,UAAA,gCACW,UAAA,4BACA,aAAA,GACA,SAAAZ,EAAA,IAAA,CAAA,CAAA,GAAAT,EAAA,GAAAF,KAGRM,EAAAA,IAAAP,EAAA,CAAA,GAAAG,EAAA,KAAAF,EAAA,UAAAC,CAAA,EAAAC,CAAA,CAC+D,CAEhE,CAAA,CACH,CAAA,CAAA,CAGN"}