{"version":3,"file":"action.component-C_46OmoE.js","sources":["../../src/components/navigation/menus/action/action.component.tsx"],"sourcesContent":["import React from 'react';\nimport {\n  ODS_BUTTON_VARIANT,\n  ODS_BUTTON_SIZE,\n  ODS_ICON_NAME,\n} from '@ovhcloud/ods-components';\nimport { OdsButton, OdsPopover } from '@ovhcloud/ods-components/react';\nimport { useTranslation } from 'react-i18next';\nimport '../translations/translation';\n\nimport { ManagerButton } from '../../../ManagerButton/ManagerButton';\n\nexport interface ActionMenuItem {\n  id: number;\n  rel?: string;\n  download?: string;\n  target?: string;\n  onClick?: () => void;\n  label: string;\n  variant?: ODS_BUTTON_VARIANT;\n  iamActions?: string[];\n  urn?: string;\n  className?: string;\n}\n\nexport interface ActionMenuProps {\n  items: ActionMenuItem[];\n  isCompact?: boolean;\n  icon?: ODS_ICON_NAME;\n  variant?: ODS_BUTTON_VARIANT;\n  id: string;\n  isDisabled?: boolean;\n}\n\nconst MenuItem = ({\n  item,\n  isTrigger,\n  id,\n}: {\n  item: Omit<ActionMenuItem, 'id'>;\n  isTrigger: boolean;\n  id: number;\n}) => {\n  const buttonProps = {\n    size: ODS_BUTTON_SIZE.sm,\n    variant: ODS_BUTTON_VARIANT.ghost,\n    displayTooltip: false,\n    className: 'w-full action-menu-item',\n    ...item,\n  };\n  return (\n    <div className=\"-mx-[2px]\">\n      {!item?.iamActions || item?.iamActions?.length === 0 ? (\n        <OdsButton {...buttonProps} label={item.label}>\n          <span slot=\"start\">\n            <span>{item.label}</span>\n          </span>\n        </OdsButton>\n      ) : (\n        <ManagerButton\n          id={`${id}`}\n          isIamTrigger={isTrigger}\n          iamActions={item.iamActions}\n          urn={item.urn}\n          {...buttonProps}\n        >\n          <span slot=\"start\">\n            <span>{item.label}</span>\n          </span>\n        </ManagerButton>\n      )}\n    </div>\n  );\n};\n\nexport const ActionMenu: React.FC<ActionMenuProps> = ({\n  items,\n  isCompact,\n  icon,\n  variant = ODS_BUTTON_VARIANT.outline,\n  isDisabled = false,\n  id,\n}) => {\n  const { t } = useTranslation('buttons');\n  const [isTrigger, setIsTrigger] = React.useState(false);\n\n  return (\n    <>\n      <div key={id} id={`navigation-action-trigger-${id}`}>\n        <OdsButton\n          data-testid=\"navigation-action-trigger-action\"\n          className=\"action-menu-btn\"\n          slot=\"menu-title\"\n          id={id}\n          variant={variant}\n          isDisabled={isDisabled}\n          size={ODS_BUTTON_SIZE.sm}\n          onClick={() => setIsTrigger(true)}\n          {...(!isCompact && { label: t('common_actions') })}\n          icon={\n            icon ?? isCompact\n              ? ODS_ICON_NAME.ellipsisHorizontal\n              : ODS_ICON_NAME.chevronDown\n          }\n        />\n      </div>\n      <OdsPopover\n        className=\"py-[8px] px-0 overflow-hidden\"\n        triggerId={`navigation-action-trigger-${id}`}\n        with-arrow\n      >\n        {items.map(({ id: itemId, ...item }) => {\n          return (\n            <MenuItem\n              id={itemId}\n              key={itemId}\n              item={item}\n              isTrigger={isTrigger}\n            />\n          );\n        })}\n      </OdsPopover>\n    </>\n  );\n};\n\nexport default ActionMenu;\n"],"names":["MenuItem","item","isTrigger","id","buttonProps","ODS_BUTTON_SIZE","ODS_BUTTON_VARIANT","jsx","_a","OdsButton","ManagerButton","ActionMenu","items","isCompact","icon","variant","isDisabled","t","useTranslation","setIsTrigger","React","jsxs","Fragment","ODS_ICON_NAME","OdsPopover","itemId"],"mappings":"8TAkCA,MAAAA,EAAA,CAAA,CAAkB,KAAAC,EAChB,UAAAC,EACA,GAAAC,CAEF,IAAA,OAKE,MAAAC,EAAA,CAAoB,KAAAC,EAAA,GACI,QAAAC,EAAA,MACM,eAAA,GACZ,UAAA,0BACL,GAAAL,CACR,EAEL,OAAAM,EAAAA,IAAA,MAAA,CAAA,UAAA,YAAA,SAAA,EAAAN,GAAA,MAAAA,EAAA,eAAAO,EAAAP,GAAA,YAAAA,EAAA,aAAA,YAAAO,EAAA,UAAA,EAAAD,EAAA,IAAAE,EAAA,CAAA,GAAAL,EAAA,MAAAH,EAAA,MAAA,SAAAM,EAAA,IAAA,OAAA,CAAA,KAAA,QAAA,SAAAA,EAAA,IAAA,OAAA,CAAA,SAAAN,EAAA,KAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAAM,EAAA,IASMG,EAAC,CAAA,GAAA,GAAAP,CAAA,GACU,aAAAD,EACK,WAAAD,EAAA,WACG,IAAAA,EAAA,IACP,GAAAG,EACN,SAAAG,EAAAA,IAAA,OAAA,CAAA,KAAA,QAAA,SAAAA,MAAA,OAAA,CAAA,SAAAN,EAAA,KAAA,CAAA,CAAA,CAAA,CAIJ,CAAA,CAAA,CAAA,CAKV,EAEOU,EAAA,CAAA,CAA+C,MAAAC,EACpD,UAAAC,EACA,KAAAC,EACA,QAAAC,EAAAT,EAAA,QAC6B,WAAAU,EAAA,GAChB,GAAAb,CAEf,IAAA,CACE,KAAA,CAAA,EAAAc,CAAA,EAAAC,EAAA,SAAA,EACA,CAAAhB,EAAAiB,CAAA,EAAAC,EAAA,SAAA,EAAA,EAEA,OAAAC,EAAA,KAAAC,WAAA,CAAA,SAAA,CAEIf,MAAA,MAAA,CAAA,GAAA,6BAAAJ,CAAA,GAAA,SAAAI,EAAA,IACEE,EAAC,CAAA,cAAA,mCACa,UAAA,kBACF,KAAA,aACL,GAAAN,EACL,QAAAY,EACA,WAAAC,EACA,KAAAX,EAAA,GACsB,QAAA,IAAAc,EAAA,EAAA,EACU,GAAA,CAAAN,GAAA,CAAA,MAAAI,EAAA,gBAAA,CAAA,EACgB,KAAAH,GAAAD,EAAAU,EAAA,mBAAAA,EAAA,WAI5B,CAAA,CAAA,EAAApB,CAAA,EAGxBI,EAAA,IACAiB,EAAC,CAAA,UAAA,gCACW,UAAA,6BAAArB,CAAA,GACgC,aAAA,GAChC,SAAAS,EAAA,IAAA,CAAA,CAAA,GAAAa,EAAA,GAAAxB,KAGRM,EAAA,IACEP,EAAC,CAAA,GAAAyB,EACK,KAAAxB,EAEJ,UAAAC,CACA,EAAAuB,CAFK,CAGP,CAEH,CAAA,CACH,CAAA,CAAA,CAGN"}