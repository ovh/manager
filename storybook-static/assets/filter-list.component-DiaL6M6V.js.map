{"version":3,"file":"filter-list.component-DiaL6M6V.js","sources":["../../../manager/core/api/dist/filters.js","../../src/components/filters/translations/index.ts","../../src/components/filters/filter-add.component.tsx","../../src/components/filters/filter-list.component.tsx"],"sourcesContent":["export var FilterComparator;\n(function (FilterComparator) {\n    FilterComparator[\"Includes\"] = \"includes\";\n    FilterComparator[\"StartsWith\"] = \"starts_with\";\n    FilterComparator[\"EndsWith\"] = \"ends_with\";\n    FilterComparator[\"IsEqual\"] = \"is_equal\";\n    FilterComparator[\"IsDifferent\"] = \"is_different\";\n    FilterComparator[\"IsLower\"] = \"is_lower\";\n    FilterComparator[\"IsHigher\"] = \"is_higher\";\n    FilterComparator[\"IsBefore\"] = \"is_before\";\n    FilterComparator[\"IsAfter\"] = \"is_after\";\n    FilterComparator[\"IsIn\"] = \"is_in\";\n})(FilterComparator || (FilterComparator = {}));\nexport const FilterCategories = {\n    Numeric: [\n        FilterComparator.IsEqual,\n        FilterComparator.IsDifferent,\n        FilterComparator.IsLower,\n        FilterComparator.IsHigher,\n    ],\n    String: [\n        FilterComparator.Includes,\n        FilterComparator.StartsWith,\n        FilterComparator.EndsWith,\n        FilterComparator.IsEqual,\n        FilterComparator.IsDifferent,\n    ],\n    Date: [\n        FilterComparator.IsEqual,\n        FilterComparator.IsDifferent,\n        FilterComparator.IsBefore,\n        FilterComparator.IsAfter,\n    ],\n};\nexport function applyFilters(items = [], filters = []) {\n    return items.filter((item) => {\n        let keep = true;\n        filters.forEach((filter) => {\n            const value = item[filter.key];\n            const comp = filter.value;\n            switch (filter.comparator) {\n                case FilterComparator.Includes:\n                    keep = keep && `${value}`.toLowerCase().includes(comp.toLowerCase());\n                    break;\n                case FilterComparator.StartsWith:\n                    keep =\n                        keep && `${value}`.toLowerCase().startsWith(comp.toLowerCase());\n                    break;\n                case FilterComparator.EndsWith:\n                    keep = keep && `${value}`.toLowerCase().endsWith(comp.toLowerCase());\n                    break;\n                case FilterComparator.IsEqual:\n                    keep = keep && `${value}`.toLowerCase() === comp.toLowerCase();\n                    break;\n                case FilterComparator.IsDifferent:\n                    keep = keep && `${value}`.toLowerCase() !== comp.toLowerCase();\n                    break;\n                case FilterComparator.IsLower:\n                    keep = keep && Number(value) < Number(comp);\n                    break;\n                case FilterComparator.IsHigher:\n                    keep = keep && Number(value) > Number(comp);\n                    break;\n                case FilterComparator.IsBefore:\n                    keep = keep && new Date(`${value}`) < new Date(comp);\n                    break;\n                case FilterComparator.IsAfter:\n                    keep = keep && new Date(`${value}`) > new Date(comp);\n                    break;\n                case FilterComparator.IsIn:\n                    keep =\n                        keep && !!filter.value.find((i) => i === `${value}`);\n                    break;\n                default:\n                    break;\n            }\n        });\n        return keep;\n    });\n}\n","import i18next from 'i18next';\n\nimport de_DE from './Messages_de_DE.json';\nimport en_GB from './Messages_en_GB.json';\nimport es_ES from './Messages_es_ES.json';\nimport fr_CA from './Messages_fr_CA.json';\nimport fr_FR from './Messages_fr_FR.json';\nimport it_IT from './Messages_it_IT.json';\nimport pl_PL from './Messages_pl_PL.json';\nimport pt_PT from './Messages_pt_PT.json';\n\nfunction addTranslations() {\n  i18next.addResources('de_DE', 'filters', de_DE);\n  i18next.addResources('en_GB', 'filters', en_GB);\n  i18next.addResources('es_ES', 'filters', es_ES);\n  i18next.addResources('fr_CA', 'filters', fr_CA);\n  i18next.addResources('fr_FR', 'filters', fr_FR);\n  i18next.addResources('it_IT', 'filters', it_IT);\n  i18next.addResources('pl_PL', 'filters', pl_PL);\n  i18next.addResources('pt_PT', 'filters', pt_PT);\n}\n\nif (i18next.isInitialized) {\n  addTranslations();\n} else {\n  i18next.on('initialized', addTranslations);\n}\n","import React, { useMemo, useState } from 'react';\nimport { Filter, FilterComparator } from '@ovh-ux/manager-core-api';\nimport { ODS_BUTTON_SIZE, ODS_INPUT_TYPE } from '@ovhcloud/ods-components';\n\nimport {\n  OdsButton,\n  OdsFormField,\n  OdsInput,\n  OdsSelect,\n} from '@ovhcloud/ods-components/react';\nimport { useTranslation } from 'react-i18next';\nimport './translations';\n\ntype ColumnFilter = {\n  id: string;\n  label: string;\n  comparators: FilterComparator[];\n};\n\nexport type FilterAddProps = {\n  columns: ColumnFilter[];\n  onAddFilter: (filter: Filter, column: ColumnFilter) => void;\n};\n\nexport function FilterAdd({ columns, onAddFilter }: Readonly<FilterAddProps>) {\n  const { t } = useTranslation('filters');\n\n  const [selectedId, setSelectedId] = useState(columns?.[0]?.id || '');\n  const [selectedComparator, setSelectedComparator] = useState(\n    columns?.[0]?.comparators?.[0] || FilterComparator.IsEqual,\n  );\n  const [value, setValue] = useState('');\n\n  const selectedColumn = useMemo(\n    () => columns.find(({ id }) => selectedId === id),\n    [columns, selectedId],\n  );\n\n  const submitAddFilter = () => {\n    onAddFilter(\n      {\n        key: selectedId,\n        comparator: selectedComparator,\n        value,\n      },\n      selectedColumn,\n    );\n    setValue('');\n  };\n\n  return (\n    <>\n      <div>\n        <OdsFormField className=\"w-full\">\n          <div slot=\"label\">\n            <span className=\"text-[--ods-color-heading] leading-[22px]\">\n              {t('common_criteria_adder_column_label')}\n            </span>\n          </div>\n          <OdsSelect\n            value={selectedId}\n            name=\"add-filter_select_idColumn\"\n            data-testid=\"add-filter_select_idColumn\"\n            onOdsChange={(event) => setSelectedId(event.detail.value as string)}\n          >\n            {columns.map(({ id, label }) => (\n              <option key={id} value={id}>\n                {label}\n              </option>\n            ))}\n          </OdsSelect>\n        </OdsFormField>\n      </div>\n      <div>\n        <OdsFormField className=\"mt-2 w-full\">\n          <div slot=\"label\">\n            <span className=\"text-[--ods-color-heading] leading-[22px]\">\n              {t('common_criteria_adder_operator_label')}\n            </span>\n          </div>\n          <OdsSelect\n            name=\"add-operator\"\n            value={selectedComparator}\n            onOdsChange={(event) => {\n              setSelectedComparator(event.detail.value as FilterComparator);\n            }}\n          >\n            {selectedColumn?.comparators?.map((comp) => (\n              <option key={comp} value={comp}>\n                {t(`${'common_criteria_adder_operator_'}${comp}`)}\n              </option>\n            ))}\n          </OdsSelect>\n        </OdsFormField>\n      </div>\n      <div>\n        <OdsFormField className=\"mt-2 w-full\">\n          <div slot=\"label\">\n            <span className=\"text-[--ods-color-heading] leading-[22px]\">\n              {t('common_criteria_adder_value_label')}\n            </span>\n          </div>\n          <OdsInput\n            name=\"filter-add_value-input\"\n            className=\"border\"\n            type={ODS_INPUT_TYPE.text}\n            value={value}\n            data-testid=\"filter-add_value-input\"\n            onOdsChange={(e) => setValue(`${e.detail.value}`)}\n            onKeyDown={(e) => {\n              if (e.key === 'Enter') {\n                submitAddFilter();\n              }\n            }}\n          />\n        </OdsFormField>\n      </div>\n      <div>\n        <OdsButton\n          className=\"mt-4 w-full filter-add-button-submit\"\n          size={ODS_BUTTON_SIZE.sm}\n          isDisabled={!value}\n          onClick={submitAddFilter}\n          data-testid=\"filter-add_submit\"\n          label={t('common_criteria_adder_submit_label')}\n        />\n      </div>\n    </>\n  );\n}\n","import React from 'react';\nimport { OdsTag } from '@ovhcloud/ods-components/react';\nimport { ODS_TAG_COLOR } from '@ovhcloud/ods-components';\nimport { useTranslation } from 'react-i18next';\nimport { FilterWithLabel } from './interface';\nimport './translations';\n\nexport type FilterListProps = {\n  filters: FilterWithLabel[];\n  onRemoveFilter: (filter: FilterWithLabel) => void;\n};\n\nexport function FilterList({\n  filters,\n  onRemoveFilter,\n}: Readonly<FilterListProps>) {\n  const { t } = useTranslation('filters');\n  const tComp = (comparator: string) =>\n    t(`common_criteria_adder_operator_${comparator}`);\n\n  return (\n    <>\n      {filters?.map((filter, key) => (\n        <OdsTag\n          className=\"m-3\"\n          color={ODS_TAG_COLOR.information}\n          size=\"lg\"\n          key={key}\n          onOdsRemove={() => onRemoveFilter(filter)}\n          data-testid=\"filter-list_tag_item\"\n          label={`${\n            filter.label ? `${filter.label} ${tComp(filter.comparator)} ` : ''\n          }\n          ${filter.value}`}\n        />\n      ))}\n    </>\n  );\n}\n"],"names":["FilterComparator","FilterCategories","addTranslations","i18next","de_DE","en_GB","es_ES","fr_CA","fr_FR","it_IT","pl_PL","pt_PT","FilterAdd","columns","onAddFilter","useTranslation","selectedId","setSelectedId","useState","_a","selectedComparator","setSelectedComparator","_c","_b","value","setValue","selectedColumn","useMemo","id","submitAddFilter","jsxs","Fragment","jsx","OdsFormField","OdsSelect","event","label","_d","comp","OdsInput","ODS_INPUT_TYPE","e","OdsButton","ODS_BUTTON_SIZE","FilterList","filters","onRemoveFilter","tComp","comparator","filter","key","OdsTag","ODS_TAG_COLOR"],"mappings":"2SAAU,IAACA,GACV,SAAUA,EAAkB,CACzBA,EAAiB,SAAc,WAC/BA,EAAiB,WAAgB,cACjCA,EAAiB,SAAc,YAC/BA,EAAiB,QAAa,WAC9BA,EAAiB,YAAiB,eAClCA,EAAiB,QAAa,WAC9BA,EAAiB,SAAc,YAC/BA,EAAiB,SAAc,YAC/BA,EAAiB,QAAa,WAC9BA,EAAiB,KAAU,OAC/B,GAAGA,IAAqBA,EAAmB,CAAE,EAAC,EAClC,MAACC,GAAmB,CAC5B,QAAS,CACLD,EAAiB,QACjBA,EAAiB,YACjBA,EAAiB,QACjBA,EAAiB,QACpB,EACD,OAAQ,CACJA,EAAiB,SACjBA,EAAiB,WACjBA,EAAiB,SACjBA,EAAiB,QACjBA,EAAiB,WACpB,EACD,KAAM,CACFA,EAAiB,QACjBA,EAAiB,YACjBA,EAAiB,SACjBA,EAAiB,OACpB,CACL,s8NCtBA,SAASE,GAAkB,CACjBC,EAAA,aAAa,QAAS,UAAWC,CAAK,EACtCD,EAAA,aAAa,QAAS,UAAWE,EAAK,EACtCF,EAAA,aAAa,QAAS,UAAWG,EAAK,EACtCH,EAAA,aAAa,QAAS,UAAWI,EAAK,EACtCJ,EAAA,aAAa,QAAS,UAAWK,EAAK,EACtCL,EAAA,aAAa,QAAS,UAAWM,EAAK,EACtCN,EAAA,aAAa,QAAS,UAAWO,EAAK,EACtCP,EAAA,aAAa,QAAS,UAAWQ,EAAK,CAChD,CAEIR,EAAQ,cACMD,IAERC,EAAA,GAAG,cAAeD,CAAe,ECDpC,SAAAU,EAAA,CAAA,QAAAC,EAAA,YAAAC,GAAA,aACL,KAAA,CAAA,CAAA,EAAAC,EAAA,SAAA,EAEA,CAAAC,EAAAC,CAAA,EAAAC,EAAA,WAAAC,EAAAN,GAAA,YAAAA,EAAA,KAAA,YAAAM,EAAA,KAAA,EAAA,EACA,CAAAC,EAAAC,CAAA,EAAAH,EAAA,WAAoDI,GAAAC,EAAAV,GAAA,YAAAA,EAAA,KAAA,YAAAU,EAAA,cAAA,YAAAD,EAAA,KAAAtB,EAAA,OACC,EAErD,CAAAwB,EAAAC,CAAA,EAAAP,EAAA,SAAA,EAAA,EAEAQ,EAAAC,EAAA,QAAuB,IAAAd,EAAA,KAAA,CAAA,CAAA,GAAAe,CAAA,IAAAZ,IAAAY,CAAA,EAC2B,CAAAf,EAAAG,CAAA,CAC5B,EAGtBa,EAAA,IAAA,CACEf,EAAA,CACE,IAAAE,EACO,WAAAI,EACO,MAAAI,CACZ,EACFE,CACA,EAEFD,EAAA,EAAA,CAAW,EAGb,OAAAK,EAAA,KAAAC,WAAA,CAAA,SAAA,CAEIC,MAAA,MAAA,CAAA,SAAAF,EAAAA,KAAAG,EAAA,CAAA,UAAA,SAAA,SAAA,CAEID,EAAA,IAAA,MAAA,CAAA,KAAA,QAAA,SAAAA,EAAAA,IAAA,OAAA,CAAA,UAAA,4CAAA,SAAA,EAAA,oCAAA,CAAA,CAAA,EAAA,EAIAA,EAAA,IACAE,EAAC,CAAA,MAAAlB,EACQ,KAAA,6BACF,cAAA,6BACO,YAAAmB,GAAAlB,EAAAkB,EAAA,OAAA,KAAA,EACsD,SAAAtB,EAAA,IAAA,CAAA,CAAA,GAAAe,EAAA,MAAAQ,CAAA,IAAAJ,EAAAA,IAAA,SAAA,CAAA,MAAAJ,EAAA,SAAAQ,CAAA,EAAAR,CAAA,CAAA,CAMjE,CAAA,CACH,CAAA,CAAA,CAAA,CAAA,EAEJI,MAAA,MAAA,CAAA,SAAAF,EAAAA,KAAAG,EAAA,CAAA,UAAA,cAAA,SAAA,CAGID,EAAA,IAAA,MAAA,CAAA,KAAA,QAAA,SAAAA,EAAAA,IAAA,OAAA,CAAA,UAAA,4CAAA,SAAA,EAAA,sCAAA,CAAA,CAAA,EAAA,EAIAA,EAAA,IACAE,EAAC,CAAA,KAAA,eACM,MAAAd,EACE,YAAAe,GAAA,CAELd,EAAAc,EAAA,OAAA,KAAA,CAA4D,EAC9D,UAAAE,EAAAX,GAAA,YAAAA,EAAA,cAAA,YAAAW,EAAA,IAAAC,GAAAN,EAAA,IAAA,SAAA,CAAA,MAAAM,EAAA,SAAA,EAAA,kCAAAA,CAAA,EAAA,GAAAA,CAAA,EAMC,CAAA,CACH,CAAA,CAAA,CAAA,CAAA,EAEJN,MAAA,MAAA,CAAA,SAAAF,EAAAA,KAAAG,EAAA,CAAA,UAAA,cAAA,SAAA,CAGID,EAAA,IAAA,MAAA,CAAA,KAAA,QAAA,SAAAA,EAAAA,IAAA,OAAA,CAAA,UAAA,4CAAA,SAAA,EAAA,mCAAA,CAAA,CAAA,EAAA,EAIAA,EAAA,IACAO,EAAC,CAAA,KAAA,yBACM,UAAA,SACK,KAAAC,EAAA,KACW,MAAAhB,EACrB,cAAA,yBACY,YAAAiB,GAAAhB,EAAA,GAAAgB,EAAA,OAAA,KAAA,EAAA,EACoC,UAAAA,GAAA,CAE9CA,EAAA,MAAA,SACEZ,GACF,CACF,CAAA,CACF,CAAA,CAAA,CAAA,CAAA,EAEJG,MAAA,MAAA,CAAA,SAAAA,EAAA,IAEEU,EAAC,CAAA,UAAA,uCACW,KAAAC,EAAA,GACY,WAAA,CAAAnB,EACT,QAAAK,EACJ,cAAA,oBACG,MAAA,EAAA,oCAAA,CACiC,CAAA,EAAA,CAEjD,CAAA,CAAA,CAGN,oVCrHO,SAAAe,EAAA,CAAoB,QAAAC,EACzB,eAAAC,CAEF,EAAA,CACE,KAAA,CAAA,CAAA,EAAA/B,EAAA,SAAA,EACAgC,EAAAC,GAAA,EAAA,kCAAAA,CAAA,EAAA,EAGA,OAAAhB,EAAA,IAAAD,EAAA,SAAA,CAAA,SAAAc,GAAA,YAAAA,EAAA,IAAA,CAAAI,EAAAC,IAAAlB,EAAA,IAGMmB,EAAC,CAAA,UAAA,MACW,MAAAC,EAAA,YACW,KAAA,KAChB,YAAA,IAAAN,EAAAG,CAAA,EAEmC,cAAA,uBAC5B,MAAA,GAAAA,EAAA,MAAA,GAAAA,EAAA,KAAA,IAAAF,EAAAE,EAAA,UAAA,CAAA,IAAA,EAAA;AAAA,YAGZA,EAAA,KAAA,EACc,EAAAC,CANT,EAAA,CAAA,CAWf"}