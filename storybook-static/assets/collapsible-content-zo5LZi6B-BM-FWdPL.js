import{j as O}from"./jsx-runtime-BRNY0I4F.js";import{r as v}from"./index-Bnop-kX6.js";import{x as I,T as R,X as N,t as k,v as E,L as w,w as P,O as S,V as j,G as f,g as L,D as C,C as b,l as V,A as $,B as y,r as A}from"./use-locale-context-cwTY9VYn-REDUMe7F.js";const B=e=>w()(e,["defaultOpen","disabled","id","ids","lazyMount","onExitComplete","onOpenChange","open","unmountOnExit"]);var D=I("collapsible").parts("root","trigger","content","indicator"),m=D.build(),M=e=>{var t;return((t=e.ids)==null?void 0:t.root)??`collapsible:${e.id}`},x=e=>{var t;return((t=e.ids)==null?void 0:t.content)??`collapsible:${e.id}:content`},T=e=>{var t;return((t=e.ids)==null?void 0:t.trigger)??`collapsible:${e.id}:trigger`},g=e=>e.getById(x(e));function U(e,t){const{state:n,send:a,context:i,scope:o,prop:l}=e,s=n.matches("open")||n.matches("closing"),r=n.matches("open"),{width:p,height:d}=i.get("size"),c=!!l("disabled"),z=!i.get("initial")&&r,h="ltr";return{disabled:c,visible:s,open:r,measureSize(){a({type:"size.measure"})},setOpen(u){n.matches("open")!==u&&a({type:u?"open":"close"})},getRootProps(){return t.element({...m.root.attrs,"data-state":r?"open":"closed",dir:h,id:M(o)})},getContentProps(){return t.element({...m.content.attrs,"data-collapsible":"","data-state":z?void 0:r?"open":"closed",id:x(o),"data-disabled":f(c),hidden:!s,style:{"--height":d!=null?`${d}px`:void 0,"--width":p!=null?`${p}px`:void 0}})},getTriggerProps(){return t.element({...m.trigger.attrs,id:T(o),dir:h,type:"button","data-state":r?"open":"closed","data-disabled":f(c),"aria-controls":x(o),"aria-expanded":s||!1,onClick(u){u.defaultPrevented||c||a({type:r?"close":"open"})}})},getIndicatorProps(){return t.element({...m.indicator.attrs,dir:h,"data-state":r?"open":"closed","data-disabled":f(c)})}}}var q=L({initialState({prop:e}){return e("open")||e("defaultOpen")?"open":"closed"},context({bindable:e}){return{size:e(()=>({defaultValue:{height:0,width:0},sync:!0})),initial:e(()=>({defaultValue:!1}))}},refs(){return{cleanup:void 0,stylesRef:void 0}},watch({track:e,prop:t,action:n}){e([()=>t("open")],()=>{n(["setInitial","computeSize","toggleVisibility"])})},exit:["clearInitial","cleanupNode"],states:{closed:{on:{"controlled.open":{target:"open"},open:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitial","computeSize","invokeOnOpen"]}]}},closing:{effects:["trackExitAnimation"],on:{"controlled.close":{target:"closed"},"controlled.open":{target:"open"},open:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitial","invokeOnOpen"]}],close:[{guard:"isOpenControlled",actions:["invokeOnExitComplete"]},{target:"closed",actions:["setInitial","computeSize","invokeOnExitComplete"]}],"animation.end":{target:"closed",actions:["invokeOnExitComplete","clearInitial"]}}},open:{effects:["trackEnterAnimation"],on:{"controlled.close":{target:"closing"},close:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closing",actions:["setInitial","computeSize","invokeOnClose"]}],"size.measure":{actions:["measureSize"]},"animation.end":{actions:["clearInitial"]}}}},implementations:{guards:{isOpenControlled:({prop:e})=>e("open")!=null},effects:{trackEnterAnimation:({send:e,scope:t})=>{let n;const a=C(()=>{const i=g(t);if(!i)return;const o=b(i).animationName;if(!o||o==="none"){e({type:"animation.end"});return}const l=s=>{y(s)===i&&e({type:"animation.end"})};i.addEventListener("animationend",l),n=()=>{i.removeEventListener("animationend",l)}});return()=>{a(),n==null||n()}},trackExitAnimation:({send:e,scope:t})=>{let n;const a=C(()=>{const i=g(t);if(!i)return;const o=b(i).animationName;if(!o||o==="none"){e({type:"animation.end"});return}const l=r=>{y(r)===i&&e({type:"animation.end"})};i.addEventListener("animationend",l);const s=V(i,{animationFillMode:"forwards"});n=()=>{i.removeEventListener("animationend",l),A(()=>s())}});return()=>{a(),n==null||n()}}},actions:{setInitial:({context:e,flush:t})=>{t(()=>{e.set("initial",!0)})},clearInitial:({context:e})=>{e.set("initial",!1)},cleanupNode:({refs:e})=>{e.set("stylesRef",null)},measureSize:({context:e,scope:t})=>{const n=g(t);if(!n)return;const{height:a,width:i}=n.getBoundingClientRect();e.set("size",{height:a,width:i})},computeSize:({refs:e,scope:t,context:n})=>{var a;(a=e.get("cleanup"))==null||a();const i=C(()=>{const o=g(t);if(!o)return;const l=o.hidden;o.style.animationName="none",o.style.animationDuration="0s",o.hidden=!1;const s=o.getBoundingClientRect();n.set("size",{height:s.height,width:s.width}),n.get("initial")&&(o.style.animationName="",o.style.animationDuration=""),o.hidden=l});e.set("cleanup",i)},invokeOnOpen:({prop:e})=>{var t;(t=e("onOpenChange"))==null||t({open:!0})},invokeOnClose:({prop:e})=>{var t;(t=e("onOpenChange"))==null||t({open:!1})},invokeOnExitComplete:({prop:e})=>{var t;(t=e("onExitComplete"))==null||t()},toggleVisibility:({prop:e,send:t})=>{t({type:e("open")?"controlled.open":"controlled.close"})}}}});R()(["dir","disabled","getRootNode","id","ids","onExitComplete","onOpenChange","defaultOpen","open"]);const F=(e={})=>{const{lazyMount:t,unmountOnExit:n,...a}=e,i=v.useId(),o=v.useRef(!1),{dir:l}=P(),{getRootNode:s}=S(),r={id:i,dir:l,getRootNode:s,...a},p=j(q,r),d=U(p,$);d.visible&&(o.current=!0);const c=!d.visible&&!o.current&&t||n&&!d.visible&&o.current;return{...d,isUnmounted:c}},[G,H]=N({name:"CollapsibleContext",hookName:"useCollapsibleContext",providerName:"<CollapsibleProvider />"}),J=v.forwardRef((e,t)=>{const[n,a]=B(e),i=F(n),o=k(i.getRootProps(),a);return O.jsx(G,{value:i,children:O.jsx(E.div,{...o,ref:t})})});J.displayName="CollapsibleRoot";const K=v.forwardRef((e,t)=>{const n=H();if(n.isUnmounted)return null;const a=k(n.getContentProps(),e);return O.jsx(E.div,{...a,ref:t})});K.displayName="CollapsibleContent";export{H as K,J as Q,K as W};
