import{j as _}from"./jsx-runtime-BRNY0I4F.js";import{r as u}from"./index-Bnop-kX6.js";import{l as C,c as k,m as E}from"./index-C7RZ_VRQ.js";import{t as h,u as x,v as O,h as L,c as A,w as R}from"./index-vm89uYmh.js";import{u as S}from"./useTranslation-I4D8sCWp.js";import{i as l}from"./i18next-DdipboBq.js";var o;(function(e){e.Includes="includes",e.StartsWith="starts_with",e.EndsWith="ends_with",e.IsEqual="is_equal",e.IsDifferent="is_different",e.IsLower="is_lower",e.IsHigher="is_higher",e.IsBefore="is_before",e.IsAfter="is_after",e.IsIn="is_in"})(o||(o={}));var p;(function(e){e.Numeric="Numeric",e.String="String",e.Date="Date",e.Boolean="Boolean",e.Options="Options"})(p||(p={}));const wo={Numeric:[o.IsEqual,o.IsDifferent,o.IsLower,o.IsHigher],String:[o.Includes,o.StartsWith,o.EndsWith,o.IsEqual,o.IsDifferent],Date:[o.IsEqual,o.IsDifferent,o.IsBefore,o.IsAfter],Boolean:[o.IsEqual,o.IsDifferent],Options:[o.IsEqual,o.IsDifferent]};function go(e=[],m=[]){return e.filter(c=>{let r=!0;return m.forEach(n=>{const t=c[n.key],i=n.value;switch(n.comparator){case o.Includes:r=r&&`${t}`.toLowerCase().includes(i.toLowerCase());break;case o.StartsWith:r=r&&`${t}`.toLowerCase().startsWith(i.toLowerCase());break;case o.EndsWith:r=r&&`${t}`.toLowerCase().endsWith(i.toLowerCase());break;case o.IsEqual:n.type===p.Date?r=r&&new Date(`${t}`).setHours(0,0,0,0)===new Date(i).setHours(0,0,0,0):r=r&&`${t}`.toLowerCase()===i.toLowerCase();break;case o.IsDifferent:n.type===p.Date?r=r&&new Date(`${t}`).setHours(0,0,0,0)!==new Date(i).setHours(0,0,0,0):r=r&&`${t}`.toLowerCase()!==i.toLowerCase();break;case o.IsLower:r=r&&Number(t)<Number(i);break;case o.IsHigher:r=r&&Number(t)>Number(i);break;case o.IsBefore:r=r&&new Date(`${t}`)<new Date(i);break;case o.IsAfter:r=r&&new Date(`${t}`)>new Date(i);break;case o.IsIn:r=r&&!!n.value.find(d=>d===`${t}`);break}}),r})}const z="Filtern",V="Spalte",W="Bedingung",B="enthält",T="beginnt mit",H="endet mit",P="ist gleich",G="ist nicht gleich",K="ist kleiner als",U="ist größer als",Y="ist",J="ist vor",M="Ja",Z="Nein",Q="Wert",X="Hinzufügen",ee={common_criteria_adder_filter_label:z,common_criteria_adder_column_label:V,common_criteria_adder_operator_label:W,common_criteria_adder_operator_includes:B,common_criteria_adder_operator_starts_with:T,common_criteria_adder_operator_ends_with:H,common_criteria_adder_operator_is_equal:P,common_criteria_adder_operator_is_different:G,common_criteria_adder_operator_is_lower:K,common_criteria_adder_operator_is_higher:U,common_criteria_adder_operator_is_before:Y,common_criteria_adder_operator_is_after:J,common_criteria_adder_true_label:M,common_criteria_adder_false_label:Z,common_criteria_adder_value_label:Q,common_criteria_adder_submit_label:X},re="Filter",oe="Column",_e="Condition",ae="includes",te="starts with",ie="ends with",ce="is equal to",de="is different from",ne="is lower than",se="is higher than",me="is",le="is before",ue="Yes",pe="No",fe="Value",be="Add",$e={common_criteria_adder_filter_label:re,common_criteria_adder_column_label:oe,common_criteria_adder_operator_label:_e,common_criteria_adder_operator_includes:ae,common_criteria_adder_operator_starts_with:te,common_criteria_adder_operator_ends_with:ie,common_criteria_adder_operator_is_equal:ce,common_criteria_adder_operator_is_different:de,common_criteria_adder_operator_is_lower:ne,common_criteria_adder_operator_is_higher:se,common_criteria_adder_operator_is_before:me,common_criteria_adder_operator_is_after:le,common_criteria_adder_true_label:ue,common_criteria_adder_false_label:pe,common_criteria_adder_value_label:fe,common_criteria_adder_submit_label:be},he="Filtrar",we="Columna",ge="Condición",ve="contiene",Ie="empieza por",je="termina por",xe="es igual a",De="no es",qe="es inferior a",Ne="es superior a",ye="es",Se="es anterior a",Fe="Sí",Ce="No",ke="Valor",Ee="Añadir",Oe={common_criteria_adder_filter_label:he,common_criteria_adder_column_label:we,common_criteria_adder_operator_label:ge,common_criteria_adder_operator_includes:ve,common_criteria_adder_operator_starts_with:Ie,common_criteria_adder_operator_ends_with:je,common_criteria_adder_operator_is_equal:xe,common_criteria_adder_operator_is_different:De,common_criteria_adder_operator_is_lower:qe,common_criteria_adder_operator_is_higher:Ne,common_criteria_adder_operator_is_before:ye,common_criteria_adder_operator_is_after:Se,common_criteria_adder_true_label:Fe,common_criteria_adder_false_label:Ce,common_criteria_adder_value_label:ke,common_criteria_adder_submit_label:Ee},Le="Filtrer",Ae="Colonne",Re="Condition",ze="contient",Ve="débute par",We="termine par",Be="est égal à",Te="est différent de",He="est inférieur à",Pe="est supérieur à",Ge="est",Ke="est avant",Ue="Oui",Ye="Non",Je="Valeur",Me="Ajouter",Ze={common_criteria_adder_filter_label:Le,common_criteria_adder_column_label:Ae,common_criteria_adder_operator_label:Re,common_criteria_adder_operator_includes:ze,common_criteria_adder_operator_starts_with:Ve,common_criteria_adder_operator_ends_with:We,common_criteria_adder_operator_is_equal:Be,common_criteria_adder_operator_is_different:Te,common_criteria_adder_operator_is_lower:He,common_criteria_adder_operator_is_higher:Pe,common_criteria_adder_operator_is_before:Ge,common_criteria_adder_operator_is_after:Ke,common_criteria_adder_true_label:Ue,common_criteria_adder_false_label:Ye,common_criteria_adder_value_label:Je,common_criteria_adder_submit_label:Me},Qe="Filtrer",Xe="Colonne",er="Condition",rr="contient",or="débute par",_r="termine par",ar="est égal à",tr="est différent de",ir="est inférieur à",cr="est supérieur à",dr="est",nr="est avant",sr="Oui",mr="Non",lr="Valeur",ur="Ajouter",pr={common_criteria_adder_filter_label:Qe,common_criteria_adder_column_label:Xe,common_criteria_adder_operator_label:er,common_criteria_adder_operator_includes:rr,common_criteria_adder_operator_starts_with:or,common_criteria_adder_operator_ends_with:_r,common_criteria_adder_operator_is_equal:ar,common_criteria_adder_operator_is_different:tr,common_criteria_adder_operator_is_lower:ir,common_criteria_adder_operator_is_higher:cr,common_criteria_adder_operator_is_before:dr,common_criteria_adder_operator_is_after:nr,common_criteria_adder_true_label:sr,common_criteria_adder_false_label:mr,common_criteria_adder_value_label:lr,common_criteria_adder_submit_label:ur},fr="Filtra",br="Colonna",$r="Condizione",hr="contiene",wr="inizia per",gr="termina per",vr="è uguale a",Ir="è diverso da",jr="è inferiore a",xr="è superiore a",Dr="è",qr="è prima di",Nr="Sì",yr="No",Sr="Valore",Fr="Aggiungi",Cr={common_criteria_adder_filter_label:fr,common_criteria_adder_column_label:br,common_criteria_adder_operator_label:$r,common_criteria_adder_operator_includes:hr,common_criteria_adder_operator_starts_with:wr,common_criteria_adder_operator_ends_with:gr,common_criteria_adder_operator_is_equal:vr,common_criteria_adder_operator_is_different:Ir,common_criteria_adder_operator_is_lower:jr,common_criteria_adder_operator_is_higher:xr,common_criteria_adder_operator_is_before:Dr,common_criteria_adder_operator_is_after:qr,common_criteria_adder_true_label:Nr,common_criteria_adder_false_label:yr,common_criteria_adder_value_label:Sr,common_criteria_adder_submit_label:Fr},kr="Filtruj",Er="Kolumna",Or="Warunek",Lr="zawiera",Ar="zaczyna się na",Rr="kończy się na",zr="jest równy",Vr="nie jest",Wr="jest mniejszy niż",Br="jest większy niż",Tr="jest",Hr="jest przed",Pr="Tak",Gr="Nie",Kr="Wartość",Ur="Dodaj",Yr={common_criteria_adder_filter_label:kr,common_criteria_adder_column_label:Er,common_criteria_adder_operator_label:Or,common_criteria_adder_operator_includes:Lr,common_criteria_adder_operator_starts_with:Ar,common_criteria_adder_operator_ends_with:Rr,common_criteria_adder_operator_is_equal:zr,common_criteria_adder_operator_is_different:Vr,common_criteria_adder_operator_is_lower:Wr,common_criteria_adder_operator_is_higher:Br,common_criteria_adder_operator_is_before:Tr,common_criteria_adder_operator_is_after:Hr,common_criteria_adder_true_label:Pr,common_criteria_adder_false_label:Gr,common_criteria_adder_value_label:Kr,common_criteria_adder_submit_label:Ur},Jr="Filtrar",Mr="Coluna",Zr="Regra",Qr="contém",Xr="começa por",eo="termina em",ro="é igual a",oo="é diferente de",_o="é inferior a",ao="é superior a",to="é",io="está antes",co="Sim",no="Não",so="Valor",mo="Adicionar",lo={common_criteria_adder_filter_label:Jr,common_criteria_adder_column_label:Mr,common_criteria_adder_operator_label:Zr,common_criteria_adder_operator_includes:Qr,common_criteria_adder_operator_starts_with:Xr,common_criteria_adder_operator_ends_with:eo,common_criteria_adder_operator_is_equal:ro,common_criteria_adder_operator_is_different:oo,common_criteria_adder_operator_is_lower:_o,common_criteria_adder_operator_is_higher:ao,common_criteria_adder_operator_is_before:to,common_criteria_adder_operator_is_after:io,common_criteria_adder_true_label:co,common_criteria_adder_false_label:no,common_criteria_adder_value_label:so,common_criteria_adder_submit_label:mo};function D(){l.addResources("de_DE","filters",ee),l.addResources("en_GB","filters",$e),l.addResources("es_ES","filters",Oe),l.addResources("fr_CA","filters",Ze),l.addResources("fr_FR","filters",pr),l.addResources("it_IT","filters",Cr),l.addResources("pl_PL","filters",Yr),l.addResources("pt_PT","filters",lo)}l.isInitialized?D():l.on("initialized",D);function q({columns:e,onAddFilter:m}){var g,v,I,j;const{t:c}=S("filters"),[r,n]=u.useState(((g=e==null?void 0:e[0])==null?void 0:g.id)||""),[t,i]=u.useState(((I=(v=e==null?void 0:e[0])==null?void 0:v.comparators)==null?void 0:I[0])||o.IsEqual),[d,f]=u.useState(""),[b,$]=u.useState(null),s=u.useMemo(()=>e.find(({id:a})=>r===a),[e,r]),w=()=>{m({key:r,comparator:t,value:s.type===p.Date?b.toISOString():d,type:s.type},s),f(""),$(null)};return u.useEffect(()=>{i(s==null?void 0:s.comparators[0]),f(""),$(null)},[s]),_.jsxs(_.Fragment,{children:[_.jsx("div",{children:_.jsxs(h,{className:"w-full",children:[_.jsx("div",{slot:"label",children:_.jsx("span",{className:"text-[--ods-color-heading] leading-[22px]",children:c("common_criteria_adder_column_label")})}),_.jsx(x,{value:r,name:"add-filter_select_idColumn","data-testid":"add-filter_select_idColumn",onOdsChange:a=>n(a.detail.value),children:e.map(({id:a,label:F})=>_.jsx("option",{value:a,children:F},a))})]})}),_.jsx("div",{children:_.jsxs(h,{className:"mt-2 w-full",children:[_.jsx("div",{slot:"label",children:_.jsx("span",{className:"text-[--ods-color-heading] leading-[22px]",children:c("common_criteria_adder_operator_label")})}),s&&_.jsx("div",{children:_.jsx(x,{name:`add-operator-${s.id}`,value:t,onOdsChange:a=>{i(a.detail.value)},children:(j=s.comparators)==null?void 0:j.map(a=>_.jsx("option",{value:a,children:c(`common_criteria_adder_operator_${a}`)},a))})},`filter-condition-select-${s.id}`)]})}),_.jsx("div",{children:_.jsxs(h,{className:"mt-2 w-full",children:[_.jsx("div",{slot:"label",children:_.jsx("span",{className:"text-[--ods-color-heading] leading-[22px]",children:c("common_criteria_adder_value_label")})}),(s==null?void 0:s.type)===p.Date?_.jsx(O,{name:"filter-add_value-input",className:"border",value:b,"data-testid":"filter-add_value-date",onOdsChange:a=>$(a.detail.value)}):_.jsx(L,{name:"filter-add_value-input",className:"border",type:C.text,value:d,"data-testid":"filter-add_value-input",onOdsChange:a=>f(`${a.detail.value}`),onKeyDown:a=>{a.key==="Enter"&&w()}})]})}),_.jsx("div",{children:_.jsx(A,{className:"mt-4 w-full filter-add-button-submit",size:k.sm,isDisabled:!d&&!b,onClick:w,"data-testid":"filter-add_submit",label:c("common_criteria_adder_submit_label")})})]})}try{q.displayName="FilterAdd",q.__docgenInfo={description:"",displayName:"FilterAdd",props:{columns:{defaultValue:null,description:"",name:"columns",required:!0,type:{name:"ColumnFilter[]"}},onAddFilter:{defaultValue:null,description:"",name:"onAddFilter",required:!0,type:{name:"(filter: Filter, column: ColumnFilter) => void"}}}}}catch{}function N({filters:e,onRemoveFilter:m}){var i;const{t:c,i18n:r}=S("filters"),n=d=>c(`common_criteria_adder_operator_${d}`),t=((i=r.language)==null?void 0:i.replace("_","-"))||"FR-fr";return _.jsx(_.Fragment,{children:e==null?void 0:e.map((d,f)=>_.jsx(R,{className:"mr-3",color:E.information,size:"lg",onOdsRemove:()=>m(d),"data-testid":"filter-list_tag_item",label:`${d.label?`${d.label} ${n(d.comparator)} `:""}
          ${d.type===p.Date?new Date(`${d.value}`).toLocaleDateString(t):`${d.value}`}`},f))})}try{N.displayName="FilterList",N.__docgenInfo={description:"",displayName:"FilterList",props:{filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterWithLabel[]"}},onRemoveFilter:{defaultValue:null,description:"",name:"onRemoveFilter",required:!0,type:{name:"(filter: FilterWithLabel) => void"}}}}}catch{}const y=(e,m)=>e.key===m.key&&e.value===m.value&&e.comparator===m.comparator;function vo(){const[e,m]=u.useState([]);return{filters:e,addFilter:c=>{c.value&&m(r=>r.some(n=>y(n,c))?r:[...r,c])},removeFilter:c=>{m(r=>r.filter(n=>!y(n,c)))}}}export{o as F,go as a,wo as b,q as c,p as d,N as e,vo as u};
