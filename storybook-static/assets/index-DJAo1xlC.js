import{r as f,e as m}from"./index-Bnop-kX6.js";import{u as g,a as q,c as z,R as G,b as B,d as J,e as Q}from"./index-DHSIHcaZ.js";/**
 * React Router DOM v6.16.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function v(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((r,t)=>{let a=e[t];return r.concat(Array.isArray(a)?a.map(n=>[t,n]):[[t,a]])},[]))}function X(e,r){let t=v(e);return r&&r.forEach((a,n)=>{t.has(n)||r.getAll(n).forEach(o=>{t.append(n,o)})}),t}var T;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(T||(T={}));var _;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(_||(_={}));function Z(e){let r=f.useRef(v(e)),t=f.useRef(!1),a=g(),n=f.useMemo(()=>X(a.search,t.current?null:r.current),[a.search]),o=q(),i=f.useCallback((l,h)=>{const c=v(typeof l=="function"?l(n):l);t.current=!0,o("?"+c,h)},[o,n]);return[n,i]}const{makeDecorator:ee,addons:P}=__STORYBOOK_MODULE_PREVIEW_API__;var y="storybook/react-router-v6",te="reactRouter",u={CLEAR:`${y}/clear`,NAVIGATION:`${y}/navigation`,STORY_LOADED:`${y}/story-loaded`,ROUTE_MATCHES:`${y}/route-matches`,ACTION_INVOKED:`${y}/action_invoked`,ACTION_SETTLED:`${y}/action_settled`,LOADER_INVOKED:`${y}/loader_invoked`,LOADER_SETTLED:`${y}/loader_settled`},N=m.createContext([]),x=m.createContext(void 0);function re(){let[e,r]=f.useState([]),t=B;return t.Provider._context=new Proxy(t.Provider._context??{},{set(a,n,o){return n==="_currentValue"&&o!==void 0&&r(i=>o.matches.length>i.length?o.matches:i),Reflect.set(a,n,o)}}),e}function ae(e){let r={};return e.forEach((t,a)=>{if(t instanceof File){r[a]={filename:t.name,filesize:t.size,filetype:t.type};return}r[a]=t}),r}async function D(e){let r=e.clone(),t=r.headers.get("content-type")||"",a;switch(!0){case t.startsWith("text"):a=await r.text();break;case t.startsWith("application/json"):a=await r.json();break;case t.startsWith("multipart/form-data"):case t.startsWith("application/x-www-form-urlencoded"):{a=ae(await r.formData());break}}return a}var k=()=>{let e=f.useRef(0);return f.useCallback(async(r,t)=>{e.current++;let a=`${r}_${e.current}`;switch(r){case u.ACTION_INVOKED:{let{request:n,params:o,context:i}=t,l={url:n.url,method:n.method,body:await D(n)};return{key:a,type:r,data:{params:o,request:l,context:i}}}case u.ACTION_SETTLED:return{key:a,type:r,data:t};case u.LOADER_INVOKED:{let{request:n,params:o,context:i}=t,l={url:n.url,method:n.method,body:await D(n)};return{key:a,type:r,data:{params:o,request:l,context:i}}}case u.LOADER_SETTLED:return{key:a,type:r,data:t}}},[])};function ne(){let e=P.getChannel(),r=k();return f.useCallback(t=>async function(a){if(t===void 0)return;e.emit(u.ACTION_INVOKED,await r(u.ACTION_INVOKED,a));let n=await t(a);return e.emit(u.ACTION_SETTLED,await r(u.ACTION_SETTLED,n)),n},[e,r])}function oe(){let e=P.getChannel(),r=k();return f.useCallback(t=>async function(a){if(t===void 0)return;e.emit(u.LOADER_INVOKED,await r(u.LOADER_INVOKED,a));let n=await t(a);return e.emit(u.LOADER_SETTLED,await r(u.LOADER_SETTLED,n)),n},[e,r])}function ie(){let e=ne(),r=oe(),t=f.useCallback(a=>a.map(n=>{let{action:o,loader:i,children:l,lazy:h}=n,c={...n};return h&&(c.lazy=async function(){let s=await h(),d={...s};return s.action&&(d.action=e(s.action)),s.loader&&(d.loader=r(s.loader)),d}),o&&(c.action=e(o)),i&&(c.loader=r(i)),l&&(c.children=t(l)),c}),[e,r]);return t}var U=()=>{let e=m.useContext(x);if(e===void 0)throw new Error("useStory should be used inside <StoryContext>");return e};function V(e,r,t=0){return e.length===1&&(e[0].children===void 0||e[0].children.length===0)?[{...e[0],element:r}]:e.findIndex(a=>a.useStoryElement)!==-1?e.map(a=>a.useStoryElement?{...a,element:r}:a):e.map(a=>a.children?{...a,children:V(a.children,r)}:a)}var C;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(C||(C={}));function I(e,r){throw new Error(r)}var b;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(b||(b={}));function L(e,r){r===void 0&&(r={});let t=e;return t.endsWith("*")&&t!=="*"&&!t.endsWith("/*")&&(se(!1,'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".')),t=t.replace(/\*$/,"/*")),t.replace(/^:(\w+)(\??)/g,(a,n,o)=>{let i=r[n];return o==="?"?i??"":(i==null&&I(!1,'Missing ":'+n+'" param'),i)}).replace(/\/:(\w+)(\??)/g,(a,n,o)=>{let i=r[n];return o==="?"?i==null?"":"/"+i:(i==null&&I(!1,'Missing ":'+n+'" param'),"/"+i)}).replace(/\?/g,"").replace(/(\/?)\*/,(a,n,o,i)=>{let l="*";return r[l]==null?i==="/*"?"/":"":""+n+r[l]})}function se(e,r){{typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}var $=["post","put","patch","delete"];new Set($);var le=["get",...$];new Set(le);function ue({navigationHistory:e,location:r,routes:t}){if(e!==void 0){let s=[],d,R=Object.values(e);for(let E=0;E<R.length;E++){let{path:S,pathParams:w,searchParams:F,hash:H,state:j,isInitialLocation:W}=R[E];W&&(d=E);let A=O(t),Y=(typeof S=="function"?S(A,w??{}):S)??A;s.push({pathname:L(Y??"/",w),search:new URLSearchParams(F).toString(),hash:H,state:j})}return d??(d=s.length-1),{initialEntries:s,initialIndex:d}}let{path:a,pathParams:n,searchParams:o,hash:i,state:l}=r??{},h=O(t),c=(typeof a=="function"?a(h,n??{}):a)??h;return{initialEntries:[{pathname:L(c,n),search:new URLSearchParams(o).toString(),hash:i,state:l}],initialIndex:0}}function O(e=[],r="/"){if(e.length!==1)return r;let t=e[0],a=ce(r,t.path);return t.children===void 0||t.children.length===0?a:O(t.children,a)}function ce(e,r=""){let t=["","/"],a=e.split("/").filter(o=>!t.includes(o)),n=r.split("/").filter(o=>!t.includes(o));return"/"+[...a,...n].join("/")}function p(e,r){return Object.prototype.hasOwnProperty.call(e,r)}function he(e){return arguments.length===0?[]:Array.isArray(e)?e:[e]}function de(e){var r;return e===void 0?[{path:"/"}]:typeof e=="string"?[{path:e}]:(e=he(e),e.length===1&&((r=e[0]).path??(r.path="/")),e)}var K=()=>m.useContext(N);function me(e){let r={};return e.forEach((t,a)=>{let n=r[a];if(typeof n=="string"){r[a]=[n,t];return}if(Array.isArray(n)){r[a]=[...n,t];return}r[a]=t}),r}var fe=()=>{let e=g(),r=e.pathname;return e.search.length>0&&(r+=`?${e.search}`),e.hash.length>0&&(r+=`#${e.hash}`),r},pe=()=>{let e=f.useRef(0),r=g(),t=J(),[a]=Z(),n=Q(),o=K(),i=me(a),l=fe(),h=o.map(s=>{let d={path:s.route.path};return Object.keys(s.params).length>0&&(d.params=s.params),d}),c={url:l,path:r.pathname,routeParams:t,searchParams:i,hash:r.hash,routeState:r.state,routeMatches:h};return s=>{e.current++;let d=`${s}_${e.current}`;switch(s){case u.STORY_LOADED:return{key:d,type:s,data:c};case u.NAVIGATION:return{key:d,type:s,data:{...c,navigationType:n}};case u.ROUTE_MATCHES:return{key:d,type:s,data:{matches:h}}}}};function M(){let{renderStory:e,storyContext:r}=U(),t=P.getChannel(),a=g(),n=K(),o=pe(),i=f.useRef(),l=f.useRef(),h=f.useRef(),c=i.current!==void 0,s=c&&a.key!==i.current;return s&&l.current!==a.key&&(t.emit(u.NAVIGATION,o(u.NAVIGATION)),l.current=a.key),s&&n.length>0&&n!==h.current&&t.emit(u.ROUTE_MATCHES,o(u.ROUTE_MATCHES)),!c&&n.length>0&&(t.emit(u.STORY_LOADED,o(u.STORY_LOADED)),i.current=a.key,h.current=n),h.current=n,m.createElement(m.Fragment,null,e(r))}M.displayName="RouterLogger";function ye(){let{addonParameters:e={}}=U(),{hydrationData:r,routing:t,navigationHistory:a,location:n}=e,o=ie(),i=f.useMemo(()=>{let l=de(t),h=o(l),c=V(h,m.createElement(M,null)),{initialEntries:s,initialIndex:d}=ue({navigationHistory:a,location:n,routes:c});return z(c,{initialEntries:s,initialIndex:d,hydrationData:r})},[o,r,n,a,t]);return m.createElement(G,{router:i,fallbackElement:m.createElement(Ee,null)})}function Ee(){return m.createElement("p",null,"Performing initial data load")}var ge=({renderStory:e,storyContext:r,addonParameters:t})=>{let a=re();return m.createElement(x.Provider,{value:{renderStory:e,storyContext:r,addonParameters:t}},m.createElement(N.Provider,{value:a},m.createElement(ye,null)))};function Se(e){if(m.isValidElement(e))return!0;switch(!0){case m.isValidElement(e):case typeof e=="string":case typeof e=="number":case typeof e=="boolean":case e===null:case e===void 0:case(e instanceof Object&&p(e,Symbol.iterator)):return!0}return!1}function ve(e){return Se(e)?{element:e}:e}function Oe(e={}){let r=["location","navigationHistory","routing"];if(Object.keys(e??{}).some(a=>r.includes(a)))return e;let t={routing:{},location:{},hydrationData:void 0};if(p(e,"routePath")&&(t.location.path=e.routePath,t.routing.path=e.routePath),p(e,"routeParams")&&(t.location.pathParams=e.routeParams),p(e,"routeState")&&(t.location.state=e.routeState),p(e,"routeHandle")&&(t.routing.handle=e.routeHandle),p(e,"searchParams")&&(t.location.searchParams=e.searchParams),p(e,"browserPath")&&(t.location.path=e.browserPath),p(e,"loader")&&(t.routing.loader=e.loader),p(e,"action")&&(t.routing.action=e.action),p(e,"errorElement")&&(t.routing.errorElement=e.errorElement),p(e,"hydrationData")&&(t.hydrationData=e.hydrationData),p(e,"shouldRevalidate")&&(t.routing.shouldRevalidate=e.shouldRevalidate),p(e,"routeId")&&(t.routing.id=e.routeId),p(e,"outlet")){let a=ve(e.outlet);a.path??(a.path=""),t.routing.children=[a]}return t.routing.useStoryElement=!0,t}var we=ee({name:"withRouter",parameterName:te,wrapper:(e,r,{parameters:t})=>{let a=Oe(t);return m.createElement(ge,{renderStory:e,storyContext:r,addonParameters:a})}});function Ae(e){return e}export{Ae as $,we as K,Z as u};
