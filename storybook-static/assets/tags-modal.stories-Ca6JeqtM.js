import{j as a}from"./jsx-runtime-BRNY0I4F.js";import{b as x,c as C,d as S,u as v,e as N,f as w,g as y,h as M,i as T,j as $,k as B}from"./index-BA2H_d3W.js";import{r as i,e as I}from"./index-Bnop-kX6.js";import{i as n}from"./context-BVP_XnaJ.js";import"./index-D0sJu8id.js";const D=(t,c,e)=>{if(!c)return;const g=c.offsetWidth,d=c.offsetHeight,s=t[0]?t[0].offsetHeight+4:30,l=(e||Math.ceil(d/s))*g;let u=0,m=0;return t.forEach(f=>{if(!f)return;const o=f.getBoundingClientRect().width;e&&(o===0||u+o>l-50)||(u+=o,m+=1)}),m},L=(t,c,e)=>{const g=t.offsetWidth,d=Math.ceil((g-50)*100/c.getBoundingClientRect().width),s=Math.floor(e.length*(d/100));return e.slice(0,s)+(s<e.length?"...":"")},z=({tags:t,displayInternalTags:c})=>Object.keys(t).filter(e=>c||e.indexOf("ovh:")!==0).map(e=>`${e}:${t[e]}`),P=({tags:t,displayInternalTags:c=!1,lineNumber:e,onClick:g})=>{const d="neutral",s=z({tags:t,displayInternalTags:c}),h=i.useRef(null),[l,u]=i.useState(null),[m,f]=i.useState(s.length),o=i.useRef([]),p=i.useRef([]);return i.useEffect(()=>{if(s.length>0){const r=new ResizeObserver(()=>{const _=D(p.current,h.current,e);f(_||1),_===0&&o.current[0]&&u(L(h.current,o.current[0],s[0]))});return h.current&&r.observe(h.current),()=>r.disconnect()}},[s]),i.useEffect(()=>{p.current.length===0&&(p.current=[...o.current])},[]),Object.keys(t).length>0&&a.jsxs("div",{ref:h,className:"w-full h-full min-w-[85px]",children:[l?a.jsx(x,{className:"mr-1 mb-1",color:d,label:l}):s.slice(0,m).map((r,_)=>a.jsx(x,{className:"mr-1 mb-1",ref:j=>{o.current[_]=j},color:d,label:r},r)),m<s.length&&a.jsx(C,{href:"#",className:"text-xs",onClick:r=>{g&&g(),r.preventDefault()},icon:S.chevronDoubleRight})]})},A="Tags bearbeiten",W="suchen",H="Suchen",V="Zurück",F={edit_tags:A,search_placeholder:W,search:H,back:V},G="Edit tags",U="search",Z="Search",q="Back",X={edit_tags:G,search_placeholder:U,search:Z,back:q},J="Editar etiquetas",K="Buscar",Q="Buscar",Y="Volver",ee={edit_tags:J,search_placeholder:K,search:Q,back:Y},se="Editer tags",te="rechercher",ae="Rechercher",ce="Retour",re={edit_tags:se,search_placeholder:te,search:ae,back:ce},oe="Editer tags",ne="rechercher",le="Rechercher",ie="Retour",de={edit_tags:oe,search_placeholder:ne,search:le,back:ie},he="Modificare tag",ue="cercare",ge="Cercare",me="Indietro",fe={edit_tags:he,search_placeholder:ue,search:ge,back:me},_e="Edytuj tagi",pe="Szukaj",be="Szukaj",Te="Powrót",xe={edit_tags:_e,search_placeholder:pe,search:be,back:Te},$e="Editar tags",ke="Procurar...",Re="Procurar",Oe="Retroceder",Ee={edit_tags:$e,search_placeholder:ke,search:Re,back:Oe};function k(){n.addResources("de_DE","tags-modal",F),n.addResources("en_GB","tags-modal",X),n.addResources("es_ES","tags-modal",ee),n.addResources("fr_CA","tags-modal",re),n.addResources("fr_FR","tags-modal",de),n.addResources("it_IT","tags-modal",fe),n.addResources("pl_PL","tags-modal",xe),n.addResources("pt_PT","tags-modal",Ee)}n.isInitialized?k():n.on("initialized",k);const je=I.forwardRef(({isOpen:t=!1,displayName:c,tags:e,displayInternalTags:g=!1,onEditTags:d,onCancel:s},h)=>{const{t:l}=v("tags-modal"),[u,m]=i.useState(""),[f,o]=i.useState(e),p=()=>{o(u?Object.fromEntries(Object.entries(e).filter(([r,_])=>r.toLowerCase().includes(u.toLowerCase())||_.toLowerCase().includes(u.toLowerCase()))):e)};return a.jsxs(N,{color:"neutral",className:"text-left",onOdsClose:s,isOpen:t,ref:h,children:[a.jsxs(w,{className:"mb-4",preset:y.heading5,children:["Tags:"," ",c]}),a.jsxs("div",{className:"flex w-full mb-4",children:[a.jsx(M,{name:"search",className:"rounded-l flex-1 mr-1",placeholder:l("search_placeholder"),type:"text",onOdsChange:r=>{m(r.detail.value)}}),a.jsx(T,{className:"rounded-r",variant:$.outline,size:B.sm,onClick:p,label:l("search")})]}),a.jsx("div",{className:"w-full min-w-[85px] h-[120px] overflow-auto",children:f&&a.jsx(P,{tags:f})}),a.jsx(T,{variant:$.ghost,slot:"actions",color:"primary",onClick:s,label:l("back"),className:"mt-4",type:"button"}),a.jsx(T,{slot:"actions",color:"primary",onClick:d,label:l("edit_tags"),className:"mt-4",type:"button"})]})}),ye={title:"Manager React Components/Components/TagsModal",component:je},b={args:{isOpen:!0,displayName:"tags-stories",tags:{},displayInternalTags:!1,onCancel:()=>{},onEditTags:()=>{}}};var R,O,E;b.parameters={...b.parameters,docs:{...(R=b.parameters)==null?void 0:R.docs,source:{originalSource:`{
  args: {
    isOpen: true,
    displayName: 'tags-stories',
    tags: {},
    displayInternalTags: false,
    onCancel: () => {},
    onEditTags: () => {}
  }
}`,...(E=(O=b.parameters)==null?void 0:O.docs)==null?void 0:E.source}}};const Me=["DemoTagsModal"];export{b as DemoTagsModal,Me as __namedExportsOrder,ye as default};
