import{j as p}from"./jsx-runtime-BRNY0I4F.js";import{m as k}from"./index-2w0W-O47-BJ19ihbZ.js";import{r as _}from"./index-Bnop-kX6.js";import{I as De}from"./FormFieldLabel-DerGjSSG-BDyW1aTt.js";import{x as le,s as re}from"./Button-BC-ipw2F-4e7GV2_-.js";import{t as oe}from"./ods-react65-wKxTpDjY.js";import{f as Ne}from"./Divider-THit99OS-DE11lmva.js";import{t as S}from"./Icon-DrfG5m-t-DQEf1CkA.js";import{l as U}from"./ods-react60-0db41gCx.js";import{X as K,L as q,t as j,v as E,x as Re,T as ne,O as Oe,w as ke,V as Ce,G as v,B as $,P as B,b8 as Te,a6 as Ae,A as Se,g as Ue,m as $e,p as J,D as qe,i as Ge,y as Be}from"./use-locale-context-cwTY9VYn-REDUMe7F.js";import{F as Ve}from"./index-D_fe-3SC-C5ZKsUXO.js";import{r as se}from"./use-field-context-C3OOq-03-DvM5qnyl.js";import{t as u,C as Ze}from"./useI18n-C3-XAdTV-CxpmELcO.js";import{c as Me}from"./ProgressBar-DyF6GCp5-C0AeSb5S.js";var I=(e=>(e.invalidFile="invalid-file",e.maxFileReached="max-file-reached",e.sizeTooLarge="size-too-large",e.unknownError="unknown-error",e.wrongFormat="wrong-format",e))(I||{});const Vt=Object.freeze(Object.values(I));function pe(e){return!!(e||e===0)&&e<100}function Ke(e){return e.map(t=>{switch(t){case"FILE_INVALID":return I.invalidFile;case"FILE_INVALID_TYPE":return I.wrongFormat;case"FILE_TOO_LARGE":return I.sizeTooLarge;case"TOO_MANY_FILES":return I.maxFileReached;default:return I.unknownError}})}var T=(e=>(e.cancelButton="fileUpload.file.cancel.button",e.deleteButton="fileUpload.file.delete.button",e.progressBar="fileUpload.file.progressBar",e))(T||{});const He={"fileUpload.file.cancel.button":{[u.de]:"Abbrechen",[u.en]:"Cancel",[u.es]:"Cancelar",[u.fr]:"Annuler",[u.it]:"Annulla",[u.nl]:"Annuleren",[u.pl]:"Anuluj",[u.pt]:"Cancelar"},"fileUpload.file.delete.button":{[u.de]:"Löschen",[u.en]:"Delete",[u.es]:"Eliminar",[u.fr]:"Supprimer",[u.it]:"Elimina",[u.nl]:"Verwijderen",[u.pl]:"Usuń",[u.pt]:"Eliminar"},"fileUpload.file.progressBar":{[u.de]:"Hochladen",[u.en]:"Uploading",[u.es]:"Cargando",[u.fr]:"Chargement",[u.it]:"Caricamento in Corso",[u.nl]:"Uploaden",[u.pl]:"Ładowanie",[u.pt]:"A carregar"}},[We,y]=K({name:"FileUploadContext",hookName:"useFileUploadContext",providerName:"<FileUploadProvider />"}),de=_.forwardRef((e,t)=>{const[i,a]=q()(e,["disableClick"]),l=y(),r=j(l.getDropzoneProps(i),a);return p.jsx(E.div,{...r,ref:t})});de.displayName="FileUploadDropzone";const ce=_.forwardRef((e,t)=>{const i=y(),a=j(i.getHiddenInputProps(),e),l=se();return p.jsx(E.input,{"aria-describedby":l==null?void 0:l.ariaDescribedby,...a,ref:t})});ce.displayName="FileUploadHiddenInput";const[Ye,Je]=K({name:"FileUploadItemGroupPropsContext",hookName:"useFileUploadItemGroupPropsContext",providerName:"<FileUploadItemGroupPropsProvider />"}),[Xe,H]=K({name:"FileUploadItemPropsContext",hookName:"useFileUploadItemPropsContext",providerName:"<FileUploadItemPropsProvider />"}),me=_.forwardRef((e,t)=>{const[i,a]=q()(e,["file"]),l=y(),r=Je(),n={...i,type:r.type},c=j(l.getItemProps(n),a);return p.jsx(Xe,{value:n,children:p.jsx(E.li,{...c,ref:t})})});me.displayName="FileUploadItem";const ue=_.forwardRef((e,t)=>{const i=y(),a=H(),l=j(i.getItemDeleteTriggerProps(a),e);return p.jsx(E.button,{...l,ref:t})});ue.displayName="FileUploadItemDeleteTrigger";const fe=_.forwardRef((e,t)=>{const[i,a]=q()(e,["type"]),l=y(),r=j(l.getItemGroupProps(i),a);return p.jsx(Ye,{value:i,children:p.jsx(E.ul,{...r,ref:t})})});fe.displayName="FileUploadItemGroup";const _e=_.forwardRef((e,t)=>{const{children:i,...a}=e,l=y(),r=H(),n=j(l.getItemNameProps(r),a);return p.jsx(E.div,{...n,ref:t,children:i||r.file.name})});_e.displayName="FileUploadItemName";const ge=_.forwardRef((e,t)=>{const{children:i,...a}=e,l=y(),r=H(),n=j(l.getItemSizeTextProps(r),a);return p.jsx(E.div,{...n,ref:t,children:i||l.getFileSize(r.file)})});ge.displayName="FileUploadItemSizeText";var Qe=e=>typeof e.getAsEntry=="function"?e.getAsEntry():typeof e.webkitGetAsEntry=="function"?e.webkitGetAsEntry():null,xe=e=>e.isDirectory,V=e=>e.isFile,Z=(e,t)=>(Object.defineProperty(e,"relativePath",{value:t?`${t}/${e.name}`:e.name}),e),et=(e,t)=>Promise.all(Array.from(e).filter(i=>i.kind==="file").map(i=>{const a=Qe(i);if(!a)return null;if(xe(a)&&t)return ve(a.createReader(),`${a.name}`);if(V(a)&&typeof i.getAsFile=="function"){const l=i.getAsFile();return Promise.resolve(l?Z(l,""):null)}if(V(a))return new Promise(l=>{a.file(r=>{l(Z(r,""))})})}).filter(i=>i)),ve=(e,t="")=>new Promise(i=>{const a=[],l=()=>{e.readEntries(r=>{if(r.length===0){i(Promise.all(a).then(c=>c.flat()));return}const n=r.map(c=>{if(!c)return null;if(xe(c))return ve(c.createReader(),`${t}${c.name}`);if(V(c))return new Promise(s=>{c.file(f=>{s(Z(f,t))})})}).filter(c=>c);a.push(Promise.all(n)),l()})};l()});function tt(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}function it(e){return/^.*\.[\w]+$/.test(e)}var X=e=>tt(e)||it(e);function at(e){if(e!=null)return typeof e=="string"?e:Array.isArray(e)?e.filter(X).join(","):Object.entries(e).reduce((t,[i,a])=>[...t,i,...a],[]).filter(X).join(",")}var C=(e,t)=>e.name===t.name&&e.size===t.size&&e.type===t.type,R=e=>e!=null;function lt(e,t,i){if(R(e.size))if(R(t)&&R(i)){if(e.size>i)return[!1,"FILE_TOO_LARGE"];if(e.size<t)return[!1,"FILE_TOO_SMALL"]}else{if(R(t)&&e.size<t)return[!1,"FILE_TOO_SMALL"];if(R(i)&&e.size>i)return[!1,"FILE_TOO_LARGE"]}return[!0,null]}var rt="3g2_video/3gpp2[3gp,3gpp_video/3gpp[3mf_model/3mf[7z_application/x-7z-compressed[aac_audio/aac[ac_application/pkix-attr-cert[adp_audio/adpcm[adts_audio/aac[ai_application/postscript[aml_application/automationml-aml+xml[amlx_application/automationml-amlx+zip[amr_audio/amr[apk_application/vnd.android.package-archive[apng_image/apng[appcache,manifest_text/cache-manifest[appinstaller_application/appinstaller[appx_application/appx[appxbundle_application/appxbundle[asc_application/pgp-keys[atom_application/atom+xml[atomcat_application/atomcat+xml[atomdeleted_application/atomdeleted+xml[atomsvc_application/atomsvc+xml[au,snd_audio/basic[avi_video/x-msvideo[avci_image/avci[avcs_image/avcs[avif_image/avif[aw_application/applixware[bdoc_application/bdoc[bin,bpk,buffer,deb,deploy,dist,distz,dll,dmg,dms,dump,elc,exe,img,iso,lrf,mar,msi,msm,msp,pkg,so_application/octet-stream[bmp,dib_image/bmp[btf,btif_image/prs.btif[bz2_application/x-bzip2[c_text/x-c[ccxml_application/ccxml+xml[cdfx_application/cdfx+xml[cdmia_application/cdmi-capability[cdmic_application/cdmi-container[cdmid_application/cdmi-domain[cdmio_application/cdmi-object[cdmiq_application/cdmi-queue[cer_application/pkix-cert[cgm_image/cgm[cjs_application/node[class_application/java-vm[coffee,litcoffee_text/coffeescript[conf,def,in,ini,list,log,text,txt_text/plain[cpp,cxx,cc_text/x-c++src[cpl_application/cpl+xml[cpt_application/mac-compactpro[crl_application/pkix-crl[css_text/css[csv_text/csv[cu_application/cu-seeme[cwl_application/cwl[cww_application/prs.cww[davmount_application/davmount+xml[dbk_application/docbook+xml[doc_application/msword[docx_application/vnd.openxmlformats-officedocument.wordprocessingml.document[dsc_text/prs.lines.tag[dssc_application/dssc+der[dtd_application/xml-dtd[dwd_application/atsc-dwd+xml[ear,jar,war_application/java-archive[ecma_application/ecmascript[emf_image/emf[eml,mime_message/rfc822[emma_application/emma+xml[emotionml_application/emotionml+xml[eot_application/vnd.ms-fontobject[eps,ps_application/postscript[epub_application/epub+zip[exi_application/exi[exp_application/express[exr_image/aces[ez_application/andrew-inset[fdf_application/fdf[fdt_application/fdt+xml[fits_image/fits[flac_audio/flac[flv_video/x-flv[g3_image/g3fax[geojson_application/geo+json[gif_image/gif[glb_model/gltf-binary[gltf_model/gltf+json[gml_application/gml+xml[go_text/x-go[gpx_application/gpx+xml[gz_application/gzip[h_text/x-h[h261_video/h261[h263_video/h263[h264_video/h264[heic_image/heic[heics_image/heic-sequence[heif_image/heif[heifs_image/heif-sequence[htm,html,shtml_text/html[ico_image/x-icon[icns_image/x-icns[ics,ifb_text/calendar[iges,igs_model/iges[ink,inkml_application/inkml+xml[ipa_application/octet-stream[java_text/x-java-source[jp2,jpg2_image/jp2[jpeg,jpe,jpg_image/jpeg[jpf,jpx_image/jpx[jpm,jpgm_image/jpm[jpgv_video/jpeg[jph_image/jph[js,mjs_text/javascript[json_application/json[json5_application/json5[jsonld_application/ld+json[jsx_text/jsx[jxl_image/jxl[jxr_image/jxr[ktx_image/ktx[ktx2_image/ktx2[less_text/less[m1v,m2v,mpe,mpeg,mpg_video/mpeg[m4a_audio/mp4[m4v_video/x-m4v[md,markdown_text/markdown[mid,midi,kar,rmi_audio/midi[mkv_video/x-matroska[mp2,mp2a,mp3,mpga,m3a,m2a_audio/mpeg[mp4,mp4v,mpg4_video/mp4[mp4a_audio/mp4[mp4s,m4p_application/mp4[odp_application/vnd.oasis.opendocument.presentation[oda_application/oda[ods_application/vnd.oasis.opendocument.spreadsheet[odt_application/vnd.oasis.opendocument.text[oga,ogg,opus,spx_audio/ogg[ogv_video/ogg[ogx_application/ogg[otf_font/otf[p12,pfx_application/x-pkcs12[pdf_application/pdf[pem_application/x-pem-file[php_text/x-php[png_image/png[ppt_application/vnd.ms-powerpoint[pptx_application/vnd.openxmlformats-officedocument.presentationml.presentation[pskcxml_application/pskc+xml[psd_image/vnd.adobe.photoshop[py_text/x-python[qt,mov_video/quicktime[rar_application/vnd.rar[rdf_application/rdf+xml[rtf_text/rtf[sass_text/x-sass[scss_text/x-scss[sgm,sgml_text/sgml[sh_application/x-sh[svg,svgz_image/svg+xml[swf_application/x-shockwave-flash[tar_application/x-tar[tif,tiff_image/tiff[toml_application/toml[ts_video/mp2t[tsx_text/tsx[tsv_text/tab-separated-values[ttc_font/collection[ttf_font/ttf[vtt_text/vtt[wasm_application/wasm[wav_audio/wav[weba_audio/webm[webm_video/webm[webmanifest_application/manifest+json[webp_image/webp[wma_audio/x-ms-wma[wmv_video/x-ms-wmv[woff_font/woff[woff2_font/woff2[xls_application/vnd.ms-excel[xlsx_application/vnd.openxmlformats-officedocument.spreadsheetml.sheet[xml_application/xml[xz_application/x-xz[yaml,yml_text/yaml[zip_application/zip",ot=new Map(rt.split("[").flatMap(e=>{const[t,i]=e.split("_");return t.split(",").map(a=>[a,i])}));function nt(e){const t=e.split(".").pop();return t&&ot.get(t)||null}function st(e,t){if(e&&t){const i=Array.isArray(t)?t:typeof t=="string"?t.split(","):[];if(i.length===0)return!0;const a=e.name||"",l=(e.type||nt(a)||"").toLowerCase(),r=l.replace(/\/.*$/,"");return i.some(n=>{const c=n.trim().toLowerCase();return c.charAt(0)==="."?a.toLowerCase().endsWith(c):c.endsWith("/*")?r===c.replace(/\/.*$/,""):l===c})}return!0}function pt(e,t){const i=e.type==="application/x-moz-file"||st(e,t);return[i,i?null:"FILE_INVALID_TYPE"]}var dt=Re("file-upload").parts("root","dropzone","item","itemDeleteTrigger","itemGroup","itemName","itemPreview","itemPreviewImage","itemSizeText","label","trigger","clearTrigger"),h=dt.build(),Fe=e=>{var t;return((t=e.ids)==null?void 0:t.root)??`file:${e.id}`},be=e=>{var t;return((t=e.ids)==null?void 0:t.dropzone)??`file:${e.id}:dropzone`},M=e=>{var t;return((t=e.ids)==null?void 0:t.hiddenInput)??`file:${e.id}:input`},ct=e=>{var t;return((t=e.ids)==null?void 0:t.trigger)??`file:${e.id}:trigger`},mt=e=>{var t;return((t=e.ids)==null?void 0:t.label)??`file:${e.id}:label`},ut=(e,t)=>{var i,a;return((a=(i=e.ids)==null?void 0:i.item)==null?void 0:a.call(i,t))??`file:${e.id}:item:${t}`},ft=(e,t)=>{var i,a;return((a=(i=e.ids)==null?void 0:i.itemName)==null?void 0:a.call(i,t))??`file:${e.id}:item-name:${t}`},_t=(e,t)=>{var i,a;return((a=(i=e.ids)==null?void 0:i.itemSizeText)==null?void 0:a.call(i,t))??`file:${e.id}:item-size:${t}`},gt=(e,t)=>{var i,a;return((a=(i=e.ids)==null?void 0:i.itemPreview)==null?void 0:a.call(i,t))??`file:${e.id}:item-preview:${t}`},xt=e=>e.getById(Fe(e)),Q=e=>e.getById(M(e)),vt=e=>e.getById(be(e));function ee(e){const t=$(e);return e.dataTransfer?e.dataTransfer.types.some(i=>i==="Files"||i==="application/x-moz-file"):!!t&&"files"in t}function Ft(e,t,i){const{prop:a,computed:l}=e;return!l("multiple")&&t>1?!1:!l("multiple")&&t+i.length===2?!0:!(t+i.length>a("maxFiles"))}function te(e,t,i=[],a=[]){const{prop:l,computed:r}=e,n=[],c=[],s={acceptedFiles:i,rejectedFiles:a};return t.forEach(f=>{var F;const[g,b]=pt(f,r("acceptAttr")),[w,d]=lt(f,l("minFileSize"),l("maxFileSize")),o=(F=l("validate"))==null?void 0:F(f,s),m=o?o.length===0:!0;if(g&&w&&m)n.push(f);else{const x=[b,d];m||x.push(...o??[]),c.push({file:f,errors:x.filter(Boolean)})}}),Ft(e,n.length,i)||(n.forEach(f=>{c.push({file:f,errors:["TOO_MANY_FILES"]})}),n.splice(0)),{acceptedFiles:n,rejectedFiles:c}}function bt(e,t){const i=Be(e);try{if("DataTransfer"in i){const a=new i.DataTransfer;t.forEach(l=>{a.items.add(l)}),e.files=a.files}}catch{}}var z="accepted";function ht(e,t){const{state:i,send:a,prop:l,computed:r,scope:n,context:c}=e,s=!!l("disabled"),f=!!l("required"),F=l("allowDrop"),g=l("translations"),b=i.matches("dragging"),w=i.matches("focused")&&!s;return{dragging:b,focused:w,disabled:!!s,transforming:c.get("transforming"),openFilePicker(){s||a({type:"OPEN"})},deleteFile(d,o=z){a({type:"FILE.DELETE",file:d,itemType:o})},acceptedFiles:c.get("acceptedFiles"),rejectedFiles:c.get("rejectedFiles"),setFiles(d){a({type:"FILES.SET",files:d,count:d.length})},clearRejectedFiles(){a({type:"REJECTED_FILES.CLEAR"})},clearFiles(){a({type:"FILES.CLEAR"})},getFileSize(d){return Ve(d.size,l("locale"))},createFileUrl(d,o){const m=n.getWin(),x=m.URL.createObjectURL(d);return o(x),()=>m.URL.revokeObjectURL(x)},setClipboardFiles(d){if(s)return!1;const o=Array.from((d==null?void 0:d.items)??[]).reduce((m,x)=>{if(x.kind!=="file")return m;const L=x.getAsFile();return L?[...m,L]:m},[]);return o.length?(a({type:"FILES.SET",files:o}),!0):!1},getRootProps(){return t.element({...h.root.attrs,dir:l("dir"),id:Fe(n),"data-disabled":v(s),"data-dragging":v(b)})},getDropzoneProps(d={}){return t.element({...h.dropzone.attrs,dir:l("dir"),id:be(n),tabIndex:s||d.disableClick?void 0:0,role:d.disableClick?"application":"button","aria-label":g.dropzone,"aria-disabled":s,"data-invalid":v(l("invalid")),"data-disabled":v(s),"data-dragging":v(b),onKeyDown(o){s||o.defaultPrevented||o.currentTarget===$(o)&&(d.disableClick||o.key!=="Enter"&&o.key!==" "||a({type:"DROPZONE.CLICK",src:"keydown"}))},onClick(o){s||o.defaultPrevented||d.disableClick||o.currentTarget===$(o)&&(o.currentTarget.localName==="label"&&o.preventDefault(),a({type:"DROPZONE.CLICK"}))},onDragOver(o){if(s||!F)return;o.preventDefault(),o.stopPropagation();try{o.dataTransfer.dropEffect="copy"}catch{}if(!ee(o))return;const m=o.dataTransfer.items.length;a({type:"DROPZONE.DRAG_OVER",count:m})},onDragLeave(o){s||F&&(B(o.currentTarget,o.relatedTarget)||a({type:"DROPZONE.DRAG_LEAVE"}))},onDrop(o){if(s)return;F&&(o.preventDefault(),o.stopPropagation());const m=ee(o);s||!m||et(o.dataTransfer.items,l("directory")).then(x=>{a({type:"DROPZONE.DROP",files:Te(x)})})},onFocus(){s||a({type:"DROPZONE.FOCUS"})},onBlur(){s||a({type:"DROPZONE.BLUR"})}})},getTriggerProps(){return t.button({...h.trigger.attrs,dir:l("dir"),id:ct(n),disabled:s,"data-disabled":v(s),"data-invalid":v(l("invalid")),type:"button",onClick(d){s||(B(vt(n),d.currentTarget)&&d.stopPropagation(),a({type:"OPEN"}))}})},getHiddenInputProps(){return t.input({id:M(n),tabIndex:-1,disabled:s,type:"file",required:l("required"),capture:l("capture"),name:l("name"),accept:r("acceptAttr"),webkitdirectory:l("directory")?"":void 0,multiple:r("multiple")||l("maxFiles")>1,onClick(d){d.stopPropagation(),d.currentTarget.value=""},onInput(d){if(s)return;const{files:o}=d.currentTarget;a({type:"FILE.SELECT",files:o?Array.from(o):[]})},style:Ae})},getItemGroupProps(d={}){const{type:o=z}=d;return t.element({...h.itemGroup.attrs,dir:l("dir"),"data-disabled":v(s),"data-type":o})},getItemProps(d){const{file:o,type:m=z}=d;return t.element({...h.item.attrs,dir:l("dir"),id:ut(n,o.name),"data-disabled":v(s),"data-type":m})},getItemNameProps(d){const{file:o,type:m=z}=d;return t.element({...h.itemName.attrs,dir:l("dir"),id:ft(n,o.name),"data-disabled":v(s),"data-type":m})},getItemSizeTextProps(d){const{file:o,type:m=z}=d;return t.element({...h.itemSizeText.attrs,dir:l("dir"),id:_t(n,o.name),"data-disabled":v(s),"data-type":m})},getItemPreviewProps(d){const{file:o,type:m=z}=d;return t.element({...h.itemPreview.attrs,dir:l("dir"),id:gt(n,o.name),"data-disabled":v(s),"data-type":m})},getItemPreviewImageProps(d){var o;const{file:m,url:x,type:L=z}=d;if(!m.type.startsWith("image/"))throw new Error("Preview Image is only supported for image files");return t.img({...h.itemPreviewImage.attrs,alt:(o=g.itemPreview)==null?void 0:o.call(g,m),src:x,"data-disabled":v(s),"data-type":L})},getItemDeleteTriggerProps(d){var o;const{file:m,type:x=z}=d;return t.button({...h.itemDeleteTrigger.attrs,dir:l("dir"),type:"button",disabled:s,"data-disabled":v(s),"data-type":x,"aria-label":(o=g.deleteFile)==null?void 0:o.call(g,m),onClick(){s||a({type:"FILE.DELETE",file:m,itemType:x})}})},getLabelProps(){return t.label({...h.label.attrs,dir:l("dir"),id:mt(n),htmlFor:M(n),"data-disabled":v(s),"data-required":v(f)})},getClearTriggerProps(){return t.button({...h.clearTrigger.attrs,dir:l("dir"),type:"button",disabled:s,hidden:c.get("acceptedFiles").length===0,"data-disabled":v(s),onClick(d){d.defaultPrevented||s||a({type:"FILES.CLEAR"})}})}}}var yt=Ue({props({props:e}){return{minFileSize:0,maxFileSize:Number.POSITIVE_INFINITY,maxFiles:1,allowDrop:!0,preventDocumentDrop:!0,defaultAcceptedFiles:[],...e,translations:{dropzone:"dropzone",itemPreview:t=>`preview of ${t.name}`,deleteFile:t=>`delete file ${t.name}`,...e.translations}}},initialState(){return"idle"},context({prop:e,bindable:t,getContext:i}){return{acceptedFiles:t(()=>({defaultValue:e("defaultAcceptedFiles"),value:e("acceptedFiles"),isEqual:(a,l)=>a.length===(l==null?void 0:l.length)&&a.every((r,n)=>C(r,l[n])),hash(a){return a.map(l=>`${l.name}-${l.size}`).join(",")},onChange(a){var l,r;const n=i();(l=e("onFileAccept"))==null||l({files:a}),(r=e("onFileChange"))==null||r({acceptedFiles:a,rejectedFiles:n.get("rejectedFiles")})}})),rejectedFiles:t(()=>({defaultValue:[],isEqual:(a,l)=>a.length===(l==null?void 0:l.length)&&a.every((r,n)=>C(r.file,l[n].file)),onChange(a){var l,r;const n=i();(l=e("onFileReject"))==null||l({files:a}),(r=e("onFileChange"))==null||r({acceptedFiles:n.get("acceptedFiles"),rejectedFiles:a})}})),transforming:t(()=>({defaultValue:!1}))}},computed:{acceptAttr:({prop:e})=>at(e("accept")),multiple:({prop:e})=>e("maxFiles")>1},watch({track:e,context:t,action:i}){e([()=>t.hash("acceptedFiles")],()=>{i(["syncInputElement"])})},on:{"FILES.SET":{actions:["setFiles"]},"FILE.SELECT":{actions:["setEventFiles"]},"FILE.DELETE":{actions:["removeFile"]},"FILES.CLEAR":{actions:["clearFiles"]},"REJECTED_FILES.CLEAR":{actions:["clearRejectedFiles"]}},effects:["preventDocumentDrop"],states:{idle:{on:{OPEN:{actions:["openFilePicker"]},"DROPZONE.CLICK":{actions:["openFilePicker"]},"DROPZONE.FOCUS":{target:"focused"},"DROPZONE.DRAG_OVER":{target:"dragging"}}},focused:{on:{"DROPZONE.BLUR":{target:"idle"},OPEN:{actions:["openFilePicker"]},"DROPZONE.CLICK":{actions:["openFilePicker"]},"DROPZONE.DRAG_OVER":{target:"dragging"}}},dragging:{on:{"DROPZONE.DROP":{target:"idle",actions:["setEventFiles"]},"DROPZONE.DRAG_LEAVE":{target:"idle"}}}},implementations:{effects:{preventDocumentDrop({prop:e,scope:t}){if(!e("preventDocumentDrop")||!e("allowDrop")||e("disabled"))return;const i=t.getDoc(),a=r=>{r==null||r.preventDefault()},l=r=>{B(xt(t),$(r))||r.preventDefault()};return $e(J(i,"dragover",a,!1),J(i,"drop",l,!1))}},actions:{syncInputElement({scope:e,context:t}){queueMicrotask(()=>{const i=Q(e);if(!i)return;bt(i,t.get("acceptedFiles"));const a=e.getWin();i.dispatchEvent(new a.Event("change",{bubbles:!0}))})},openFilePicker({scope:e}){qe(()=>{var t;(t=Q(e))==null||t.click()})},setFiles(e){const{computed:t,context:i,event:a}=e,{acceptedFiles:l,rejectedFiles:r}=te(e,a.files);i.set("acceptedFiles",t("multiple")?l:l.length>0?[l[0]]:[]),i.set("rejectedFiles",r)},setEventFiles(e){const{computed:t,context:i,event:a,prop:l}=e,r=i.get("acceptedFiles"),n=i.get("rejectedFiles"),{acceptedFiles:c,rejectedFiles:s}=te(e,a.files,r,n),f=g=>{if(t("multiple")){i.set("acceptedFiles",b=>[...b,...g]),i.set("rejectedFiles",s);return}if(g.length){i.set("acceptedFiles",[g[0]]),i.set("rejectedFiles",s);return}s.length&&(i.set("acceptedFiles",i.get("acceptedFiles")),i.set("rejectedFiles",s))},F=l("transformFiles");F?(i.set("transforming",!0),F(c).then(f).catch(g=>{Ge(`[zag-js/file-upload] error transforming files
${g}`)}).finally(()=>{i.set("transforming",!1)})):f(c)},removeFile({context:e,event:t}){if(t.itemType==="rejected"){const i=e.get("rejectedFiles").filter(a=>!C(a.file,t.file));e.set("rejectedFiles",i)}else{const i=e.get("acceptedFiles").filter(a=>!C(a,t.file));e.set("acceptedFiles",i)}},clearRejectedFiles({context:e}){e.set("rejectedFiles",[])},clearFiles({context:e}){e.set("acceptedFiles",[]),e.set("rejectedFiles",[])}}}});ne()(["accept","acceptedFiles","allowDrop","capture","defaultAcceptedFiles","dir","directory","disabled","getRootNode","id","ids","invalid","locale","maxFiles","maxFileSize","minFileSize","name","onFileAccept","onFileChange","onFileReject","preventDocumentDrop","required","transformFiles","translations","validate"]);ne()(["file","type"]);const jt=e=>{const t=_.useId(),{getRootNode:i}=Oe(),{dir:a,locale:l}=ke(),r=se(),n={id:t,ids:{label:r==null?void 0:r.ids.label,hiddenInput:r==null?void 0:r.ids.control},dir:a,disabled:r==null?void 0:r.disabled,locale:l,required:r==null?void 0:r.required,invalid:r==null?void 0:r.invalid,getRootNode:i,...e},c=Ce(yt,n);return ht(c,Se)},he=_.forwardRef((e,t)=>{const[i,a]=q()(e,["accept","acceptedFiles","allowDrop","capture","defaultAcceptedFiles","directory","disabled","id","ids","invalid","locale","maxFiles","maxFileSize","minFileSize","name","onFileAccept","onFileChange","onFileReject","preventDocumentDrop","required","translations","transformFiles","validate"]),l=jt(i),r=j(l.getRootProps(),a);return p.jsx(We,{value:l,children:p.jsx(E.div,{...r,ref:t})})});he.displayName="FileUploadRoot";const ye=_.forwardRef((e,t)=>{const i=y(),a=j(i.getTriggerProps(),e);return p.jsx(E.button,{...a,ref:t})});ye.displayName="FileUploadTrigger";const je=_.createContext({});function Et({children:e,locale:t}){return p.jsx(je.Provider,{value:{locale:t},children:e})}function wt(){return _.useContext(je)}const P={"file-upload-dropzone":"_file-upload-dropzone_faoyu_21","file-upload-dropzone--disabled":"_file-upload-dropzone--disabled_faoyu_28","file-upload-dropzone__icon":"_file-upload-dropzone__icon_faoyu_28","file-upload-dropzone--dragging":"_file-upload-dropzone--dragging_faoyu_31","file-upload-dropzone--empty":"_file-upload-dropzone--empty_faoyu_34","file-upload-dropzone__rules":"_file-upload-dropzone__rules_faoyu_41","file-upload-dropzone__error":"_file-upload-dropzone__error_faoyu_47","file-upload-dropzone__error__divider":"_file-upload-dropzone__error__divider_faoyu_55"},Ee=({acceptedFileLabel:e,dropzoneLabel:t,error:i,maxFile:a,maxFileLabel:l,maxSize:r,maxSizeLabel:n,triggerLabel:c})=>{const s=_.useId(),{acceptedFiles:f,disabled:F,dragging:g,getFileSize:b}=y(),w=_.useMemo(()=>!!e||!!l||!!n,[e,l,n]);return p.jsxs("div",{className:k(P["file-upload-dropzone"],{[P["file-upload-dropzone--disabled"]]:F},{[P["file-upload-dropzone--dragging"]]:g},{[P["file-upload-dropzone--empty"]]:!f.length}),children:[p.jsx(S,{className:P["file-upload-dropzone__icon"],name:U.filePlus}),p.jsx("span",{children:t}),w&&p.jsxs("div",{className:P["file-upload-dropzone__rules"],id:s,children:[l&&typeof a=="number"&&a>=0&&p.jsxs("span",{children:[l," ",a]}),n&&typeof r=="number"&&r>=0&&p.jsxs("span",{children:[n," ",b({size:r})]}),e&&p.jsx("span",{children:e})]}),p.jsx(ye,{asChild:!0,children:p.jsx(le,{"aria-describedby":w?s:"",size:re.md,variant:oe.ghost,children:c})}),!!i&&p.jsxs("div",{className:P["file-upload-dropzone__error"],children:[p.jsx("span",{role:"alert",children:i}),p.jsx(Ne,{className:P["file-upload-dropzone__error__divider"]})]})]})};Ee.displayName="FileUploadDropzone";const ie={"file-upload":"_file-upload_138iw_2","file-upload--invalid":"_file-upload--invalid_138iw_16"},zt=_.forwardRef(({accept:e,acceptedFileLabel:t,children:i,className:a,disabled:l,dropzoneLabel:r="Drag & drop a file",error:n,id:c,invalid:s,locale:f,maxFile:F=1/0,maxFileLabel:g,maxSize:b,maxSizeLabel:w,name:d,onFileAccept:o,onFileReject:m,required:x,triggerLabel:L="Browse files",...W},ze)=>{const D=De(),Pe=_.useCallback(({files:N})=>{m&&m({files:N.map(({errors:Ie,file:Le})=>({errors:Ke(Ie),file:Le}))})},[m]),G=s||(D==null?void 0:D.invalid),Y=c||(D==null?void 0:D.id);return p.jsx(Et,{locale:f,children:p.jsxs(he,{accept:e,allowDrop:!0,className:k(ie["file-upload"],{[ie["file-upload--invalid"]]:G},a),"data-ods":"file-upload",directory:!1,disabled:l,ids:{hiddenInput:Y},invalid:G,maxFiles:F,maxFileSize:b,onFileAccept:o,onFileReject:Pe,name:d,ref:ze,required:x,...W,children:[p.jsxs(de,{disableClick:!0,onDragOver:N=>N.preventDefault(),onDrop:N=>N.preventDefault(),children:[p.jsx(Ee,{acceptedFileLabel:t,dropzoneLabel:r,error:n,maxFile:F,maxFileLabel:g,maxSize:b,maxSizeLabel:w,triggerLabel:L}),i]}),p.jsx(ce,{"aria-invalid":G,"aria-describedby":W["aria-describedby"]||(D==null?void 0:D.ariaDescribedBy),id:Y})]})})});zt.displayName="FileUpload";const A={"file-upload-item-status":"_file-upload-item-status_lthpx_21","file-upload-item-status__error":"_file-upload-item-status__error_lthpx_24","file-upload-item-status__progress":"_file-upload-item-status__progress_lthpx_28","file-upload-item-status__success":"_file-upload-item-status__success_lthpx_36"};function Pt(e,t,i,a){return t?p.jsx("span",{className:A["file-upload-item-status__error"],children:t}):pe(i)?p.jsxs("div",{className:A["file-upload-item-status__progress"],children:[p.jsx(Me,{"aria-label":a,value:i}),p.jsxs("span",{children:[i,"%"]})]}):i&&i>=100?p.jsxs("span",{className:A["file-upload-item-status__success"],children:[p.jsx(S,{name:U.check})," ",e]}):p.jsx(p.Fragment,{})}const we=({className:e,error:t,progress:i,progressLabel:a,successLabel:l})=>p.jsx("div",{className:k(A["file-upload-item-status"],e),role:t?"error":"status",children:Pt(l,t,i,a)});we.displayName="FileUploadItemStatus";const O={"file-upload-item":"_file-upload-item_e3bwg_25","file-upload-item__icon":"_file-upload-item__icon_e3bwg_37","file-upload-item__name":"_file-upload-item__name_e3bwg_44","file-upload-item__size":"_file-upload-item__size_e3bwg_49","file-upload-item__status":"_file-upload-item__status_e3bwg_52"},It=_.forwardRef(({className:e,error:t,file:i,i18n:a,progress:l,uploadSuccessLabel:r="File uploaded",...n},c)=>{const{locale:s}=wt(),{translate:f}=Ze(He,s,a);return p.jsxs(me,{className:k(O["file-upload-item"],e),"data-ods":"file-upload-item",file:i,ref:c,...n,children:[p.jsx(S,{className:O["file-upload-item__icon"],name:U.file}),p.jsx(_e,{className:O["file-upload-item__name"]}),p.jsx(ge,{className:O["file-upload-item__size"]}),p.jsx(ue,{asChild:!0,children:p.jsx(le,{"aria-label":pe(l)?f(T.cancelButton):f(T.deleteButton),size:re.sm,variant:oe.ghost,children:p.jsx(S,{name:U.xmark})})}),p.jsx(we,{className:O["file-upload-item__status"],error:t,progress:l,progressLabel:f(T.progressBar),successLabel:r})]})});It.displayName="FileUploadItem";const ae={"file-upload-list":"_file-upload-list_1b3bn_21","file-upload-list--not-empty":"_file-upload-list--not-empty_1b3bn_25"},Lt=_.forwardRef(({children:e,className:t,...i},a)=>{const{acceptedFiles:l}=y();return p.jsx(fe,{className:k(ae["file-upload-list"],{[ae["file-upload-list--not-empty"]]:l.length>0},t),"data-ods":"file-upload-list",ref:a,...i,children:e})});Lt.displayName="FileUploadList";export{It as O,Lt as R,T as n,Vt as o,I as r,zt as z};
