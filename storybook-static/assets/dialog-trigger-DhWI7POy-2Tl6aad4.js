import{j as p}from"./jsx-runtime-BRNY0I4F.js";import{r as u}from"./index-Bnop-kX6.js";import{X as h,t as g,v as E,E as F,x as I,T as L,O as R,w as T,V as N,g as w,D,C as S,A as $}from"./use-locale-context-cwTY9VYn-REDUMe7F.js";import{D as y,L as B,k as j}from"./use-presence-CVI6Oc63-Cg7Clpcl.js";import{s as G,a as V}from"./render-strategy-BVcZ76SI-DDawKQXU.js";import{j as q}from"./portal-BnVBD_Bd-CMtQ-rJ7.js";import{r as z,o as K,a as X}from"./index-BAi52a_A-BVjZSJoF.js";import{y as Z}from"./index-DB9CF8IY-DC0Y2KvY.js";const[A,f]=h({name:"DialogContext",hookName:"useDialogContext",providerName:"<DialogProvider />"}),J=u.forwardRef((e,t)=>{const o=f(),r=y(),n=g(o.getContentProps(),r.getPresenceProps(),e);return r.unmounted?null:p.jsx(E.div,{...n,ref:F(r.ref,t)})});J.displayName="DialogContent";const Q=u.forwardRef((e,t)=>{const o=f(),r=g(o.getPositionerProps(),e);return y().unmounted?null:p.jsx(E.div,{...r,ref:t})});Q.displayName="DialogPositioner";var U=I("dialog").parts("trigger","backdrop","positioner","content","title","description","closeTrigger"),l=U.build(),P=e=>{var t;return((t=e.ids)==null?void 0:t.positioner)??`dialog:${e.id}:positioner`},k=e=>{var t;return((t=e.ids)==null?void 0:t.backdrop)??`dialog:${e.id}:backdrop`},O=e=>{var t;return((t=e.ids)==null?void 0:t.content)??`dialog:${e.id}:content`},b=e=>{var t;return((t=e.ids)==null?void 0:t.trigger)??`dialog:${e.id}:trigger`},v=e=>{var t;return((t=e.ids)==null?void 0:t.title)??`dialog:${e.id}:title`},m=e=>{var t;return((t=e.ids)==null?void 0:t.description)??`dialog:${e.id}:description`},x=e=>{var t;return((t=e.ids)==null?void 0:t.closeTrigger)??`dialog:${e.id}:close`},c=e=>e.getById(O(e)),W=e=>e.getById(P(e)),Y=e=>e.getById(k(e)),_=e=>e.getById(b(e)),H=e=>e.getById(v(e)),M=e=>e.getById(m(e)),ee=e=>e.getById(x(e));function te(e,t){const{state:o,send:r,context:n,prop:i,scope:s}=e,C=i("aria-label"),d=o.matches("open");return{open:d,setOpen(a){o.matches("open")!==a&&r({type:a?"OPEN":"CLOSE"})},getTriggerProps(){return t.button({...l.trigger.attrs,dir:i("dir"),id:b(s),"aria-haspopup":"dialog",type:"button","aria-expanded":d,"data-state":d?"open":"closed","aria-controls":O(s),onClick(a){a.defaultPrevented||r({type:"TOGGLE"})}})},getBackdropProps(){return t.element({...l.backdrop.attrs,dir:i("dir"),hidden:!d,id:k(s),"data-state":d?"open":"closed"})},getPositionerProps(){return t.element({...l.positioner.attrs,dir:i("dir"),id:P(s),style:{pointerEvents:d?void 0:"none"}})},getContentProps(){const a=n.get("rendered");return t.element({...l.content.attrs,dir:i("dir"),role:i("role"),hidden:!d,id:O(s),tabIndex:-1,"data-state":d?"open":"closed","aria-modal":!0,"aria-label":C||void 0,"aria-labelledby":C||!a.title?void 0:v(s),"aria-describedby":a.description?m(s):void 0})},getTitleProps(){return t.element({...l.title.attrs,dir:i("dir"),id:v(s)})},getDescriptionProps(){return t.element({...l.description.attrs,dir:i("dir"),id:m(s)})},getCloseTriggerProps(){return t.button({...l.closeTrigger.attrs,dir:i("dir"),id:x(s),type:"button",onClick(a){a.defaultPrevented||(a.stopPropagation(),r({type:"CLOSE"}))}})}}}var oe=w({props({props:e,scope:t}){const o=e.role==="alertdialog",r=o?()=>ee(t):void 0,n=typeof e.modal=="boolean"?e.modal:!0;return{role:"dialog",modal:n,trapFocus:n,preventScroll:n,closeOnInteractOutside:!o,closeOnEscape:!0,restoreFocus:!0,initialFocusEl:r,...e}},initialState({prop:e}){return e("open")||e("defaultOpen")?"open":"closed"},context({bindable:e}){return{rendered:e(()=>({defaultValue:{title:!0,description:!0}}))}},watch({track:e,action:t,prop:o}){e([()=>o("open")],()=>{t(["toggleVisibility"])})},states:{open:{entry:["checkRenderedElements","syncZIndex"],effects:["trackDismissableElement","trapFocus","preventScroll","hideContentBelow"],on:{"CONTROLLED.CLOSE":{target:"closed"},CLOSE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}],TOGGLE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}]}},closed:{on:{"CONTROLLED.OPEN":{target:"open"},OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}],TOGGLE:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}]}}},implementations:{guards:{isOpenControlled:({prop:e})=>e("open")!=null},effects:{trackDismissableElement({scope:e,send:t,prop:o}){return Z(()=>c(e),{type:"dialog",defer:!0,pointerBlocking:o("modal"),exclude:[_(e)],onInteractOutside(r){var n;(n=o("onInteractOutside"))==null||n(r),o("closeOnInteractOutside")||r.preventDefault()},persistentElements:o("persistentElements"),onFocusOutside:o("onFocusOutside"),onPointerDownOutside:o("onPointerDownOutside"),onRequestDismiss:o("onRequestDismiss"),onEscapeKeyDown(r){var n;(n=o("onEscapeKeyDown"))==null||n(r),o("closeOnEscape")||r.preventDefault()},onDismiss(){t({type:"CLOSE",src:"interact-outside"})}})},preventScroll({scope:e,prop:t}){if(t("preventScroll"))return z(e.getDoc())},trapFocus({scope:e,prop:t}){return t("trapFocus")?K(()=>c(e),{preventScroll:!0,returnFocusOnDeactivate:!!t("restoreFocus"),initialFocus:t("initialFocusEl"),setReturnFocus:o=>{var r;return((r=t("finalFocusEl"))==null?void 0:r())??o}}):void 0},hideContentBelow({scope:e,prop:t}){return t("modal")?X(()=>[c(e)],{defer:!0}):void 0}},actions:{checkRenderedElements({context:e,scope:t}){D(()=>{e.set("rendered",{title:!!H(t),description:!!M(t)})})},syncZIndex({scope:e}){D(()=>{const t=c(e);if(!t)return;const o=S(t);[W(e),Y(e)].forEach(r=>{r==null||r.style.setProperty("--z-index",o.zIndex),r==null||r.style.setProperty("--layer-index",o.getPropertyValue("--layer-index"))})})},invokeOnClose({prop:e}){var t;(t=e("onOpenChange"))==null||t({open:!1})},invokeOnOpen({prop:e}){var t;(t=e("onOpenChange"))==null||t({open:!0})},toggleVisibility({prop:e,send:t,event:o}){t({type:e("open")?"CONTROLLED.OPEN":"CONTROLLED.CLOSE",previousEvent:o})}}}});L()(["aria-label","closeOnEscape","closeOnInteractOutside","dir","finalFocusEl","getRootNode","getRootNode","id","id","ids","initialFocusEl","modal","onEscapeKeyDown","onFocusOutside","onInteractOutside","onOpenChange","onPointerDownOutside","onRequestDismiss","defaultOpen","open","persistentElements","preventScroll","restoreFocus","role","trapFocus"]);const re=e=>{const t=u.useId(),{getRootNode:o}=R(),{dir:r}=T(),n={id:t,getRootNode:o,dir:r,...e},i=N(oe,n);return te(i,$)},ge=e=>{const[t,{children:o,...r}]=q(e),[n]=G(t),i=re(r),s=B(g({present:i.open},t));return p.jsx(A,{value:i,children:p.jsx(V,{value:n,children:p.jsx(j,{value:s,children:o})})})},ne=u.forwardRef((e,t)=>{const o=f(),r=y(),n=g({...o.getTriggerProps(),"aria-controls":r.unmounted?void 0:o.getTriggerProps()["aria-controls"]},e);return p.jsx(E.button,{...n,ref:t})});ne.displayName="DialogTrigger";export{J as Q,Q as U,f,ne as s,ge as v};
