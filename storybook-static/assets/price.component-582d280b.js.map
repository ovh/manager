{"version":3,"file":"price.component-582d280b.js","sources":["../../src/enumTypes/locale.tsx","../../src/enumTypes/intervalUnit.tsx","../../src/components/content/price/price.utils.ts","../../src/components/content/price/translations/translations.ts","../../src/components/content/price/price.component.tsx"],"sourcesContent":["export enum OvhSubsidiary {\n  ASIA = 'ASIA',\n  AU = 'AU',\n  CA = 'CA',\n  CZ = 'CZ',\n  DE = 'DE',\n  ES = 'ES',\n  FI = 'FI',\n  FR = 'FR',\n  GB = 'GB',\n  IE = 'IE',\n  IN = 'IN',\n  IT = 'IT',\n  LT = 'LT',\n  MA = 'MA',\n  NL = 'NL',\n  PL = 'PL',\n  PT = 'PT',\n  QC = 'QC',\n  SG = 'SG',\n  SN = 'SN',\n  TN = 'TN',\n  US = 'US',\n  WE = 'WE',\n  WS = 'WS',\n  EU = 'EU',\n  DEFAULT = 'DEFAULT',\n}\n\nexport enum CurrencyCode {\n  AUD = 'AUD',\n  CAD = 'CAD',\n  EUR = 'EUR',\n  GBP = 'GBP',\n  INR = 'INR',\n  MAD = 'MAD',\n  PLN = 'PLN',\n  SGD = 'SGD',\n  USD = 'USD',\n  TND = 'TND',\n  XOF = 'XOF',\n}\n\nexport const OVH_CURRENCY_BY_SUBSIDIARY: Record<OvhSubsidiary, CurrencyCode> = {\n  ASIA: CurrencyCode.USD,\n  AU: CurrencyCode.AUD,\n  CA: CurrencyCode.CAD,\n  CZ: CurrencyCode.EUR,\n  DE: CurrencyCode.EUR,\n  ES: CurrencyCode.EUR,\n  FI: CurrencyCode.EUR,\n  FR: CurrencyCode.EUR,\n  GB: CurrencyCode.GBP,\n  IE: CurrencyCode.EUR,\n  IN: CurrencyCode.INR,\n  IT: CurrencyCode.EUR,\n  LT: CurrencyCode.EUR,\n  MA: CurrencyCode.MAD,\n  NL: CurrencyCode.EUR,\n  PL: CurrencyCode.PLN,\n  PT: CurrencyCode.EUR,\n  QC: CurrencyCode.CAD,\n  SG: CurrencyCode.SGD,\n  SN: CurrencyCode.XOF,\n  TN: CurrencyCode.TND,\n  EU: CurrencyCode.EUR,\n  US: CurrencyCode.USD,\n  WE: CurrencyCode.USD,\n  WS: CurrencyCode.USD,\n  DEFAULT: CurrencyCode.USD,\n};\n","export enum IntervalUnitType {\n  day = 'day',\n  month = 'month',\n  year = 'year',\n  none = 'none',\n}\n","import {\n  OvhSubsidiary,\n  IntervalUnitType,\n  OVH_CURRENCY_BY_SUBSIDIARY,\n} from '../../../enumTypes';\n\nexport interface PriceProps {\n  value: number;\n  tax?: number;\n  intervalUnit?: IntervalUnitType;\n  ovhSubsidiary: OvhSubsidiary;\n  isConvertIntervalUnit?: boolean;\n  locale: string;\n}\n\nexport const getPrice = (value: number, tax?: number): number => {\n  const valueWithTax = tax ? value + tax : value;\n  return valueWithTax / 100000000;\n};\n\nexport const convertIntervalPrice = (\n  price: number,\n  intervalUnit: IntervalUnitType,\n): number => {\n  const conversionRates = {\n    [IntervalUnitType.day]: price / 365,\n    [IntervalUnitType.month]: price / 12,\n    [IntervalUnitType.year]: price,\n    [IntervalUnitType.none]: price,\n  };\n\n  return conversionRates[intervalUnit] || price;\n};\n\nexport const getPriceTextFormatted = (\n  ovhSubsidiary: OvhSubsidiary,\n  locale: string,\n  priceValue: number,\n): string => {\n  try {\n    return new Intl.NumberFormat(locale.replace('_', '-'), {\n      style: 'currency',\n      currency: OVH_CURRENCY_BY_SUBSIDIARY[ovhSubsidiary],\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 2,\n    }).format(priceValue);\n  } catch (e) {\n    return new Intl.NumberFormat('fr-FR', {\n      style: 'currency',\n      currency: OVH_CURRENCY_BY_SUBSIDIARY[ovhSubsidiary],\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 2,\n    }).format(priceValue);\n  }\n};\n","import i18next from 'i18next';\n\nimport de_DE from './Messages_de_DE.json';\nimport en_GB from './Messages_en_GB.json';\nimport es_ES from './Messages_es_ES.json';\nimport fr_CA from './Messages_fr_CA.json';\nimport fr_FR from './Messages_fr_FR.json';\nimport it_IT from './Messages_it_IT.json';\nimport pl_PL from './Messages_pl_PL.json';\nimport pt_PT from './Messages_pt_PT.json';\n\nfunction addTranslations() {\n  i18next.addResources('de_DE', 'price', de_DE);\n  i18next.addResources('en_GB', 'price', en_GB);\n  i18next.addResources('es_ES', 'price', es_ES);\n  i18next.addResources('fr_CA', 'price', fr_CA);\n  i18next.addResources('fr_FR', 'price', fr_FR);\n  i18next.addResources('it_IT', 'price', it_IT);\n  i18next.addResources('pl_PL', 'price', pl_PL);\n  i18next.addResources('pt_PT', 'price', pt_PT);\n}\n\nif (i18next.isInitialized) {\n  addTranslations();\n} else {\n  i18next.on('initialized', addTranslations);\n}\n","import React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { OsdsText } from '@ovhcloud/ods-components/react';\nimport {\n  ODS_TEXT_LEVEL,\n  ODS_TEXT_SIZE,\n  ODS_TEXT_COLOR_HUE,\n} from '@ovhcloud/ods-components';\nimport { ODS_THEME_COLOR_INTENT } from '@ovhcloud/ods-common-theming';\nimport { IntervalUnitType } from '../../../enumTypes';\nimport {\n  getPrice,\n  convertIntervalPrice,\n  getPriceTextFormatted,\n  PriceProps,\n} from './price.utils';\nimport './translations/translations';\n\nconst TextPriceContent: React.FC<{ children: React.ReactNode }> = ({\n  children,\n}) => (\n  <OsdsText\n    size={ODS_TEXT_SIZE._200}\n    color={ODS_THEME_COLOR_INTENT.default}\n    hue={ODS_TEXT_COLOR_HUE._500}\n    className=\"ml-1\"\n  >\n    {children}\n  </OsdsText>\n);\n\nexport function Price({\n  value,\n  intervalUnit,\n  tax,\n  ovhSubsidiary,\n  locale,\n  isConvertIntervalUnit,\n}: Readonly<PriceProps>) {\n  const { t } = useTranslation('price');\n  const isAsiaFormat = ['ASIA', 'AU', 'IN', 'SG'].includes(ovhSubsidiary);\n  const isGermanFormat = ['DE', 'FI', 'SN'].includes(ovhSubsidiary);\n  const isFrenchFormat = [\n    'CZ',\n    'ES',\n    'FR',\n    'GB',\n    'IE',\n    'IT',\n    'LT',\n    'MA',\n    'NL',\n    'PL',\n    'PT',\n    'TN',\n  ].includes(ovhSubsidiary);\n  const isUSFormat = ['CA', 'QC', 'US', 'WE', 'WS'].includes(ovhSubsidiary);\n\n  const convertedValue = isConvertIntervalUnit\n    ? convertIntervalPrice(value, intervalUnit)\n    : value;\n  const convertedTax = isConvertIntervalUnit\n    ? convertIntervalPrice(tax || 0, intervalUnit)\n    : tax || 0;\n\n  const priceWithoutTax = getPriceTextFormatted(\n    ovhSubsidiary,\n    locale,\n    getPrice(convertedValue),\n  );\n  const priceWithTax = getPriceTextFormatted(\n    ovhSubsidiary,\n    locale,\n    getPrice(convertedValue, convertedTax),\n  );\n  const intervalUnitText =\n    intervalUnit && intervalUnit !== IntervalUnitType.none\n      ? t(`price_per_${intervalUnit}`)\n      : '';\n  const components = [\n    {\n      condition: value === 0,\n      component: <span>{t('price_free')}</span>,\n    },\n    {\n      condition: isFrenchFormat && tax > 0,\n      component: (\n        <>\n          <span className=\"mr-1\">{priceWithoutTax}</span>\n          {t('price_ht_label')}\n          <span className=\"ml-1\">{intervalUnitText}</span>\n          <TextPriceContent>\n            ({priceWithTax}\n            <span className=\"ml-1\">{t('price_ttc_label')})</span>\n          </TextPriceContent>\n        </>\n      ),\n    },\n    {\n      condition: isFrenchFormat && !tax,\n      component: (\n        <>\n          <span className=\"mr-1\">{priceWithoutTax}</span>\n          {t('price_ht_label')}\n          <span className=\"ml-1\">{intervalUnitText}</span>\n        </>\n      ),\n    },\n    {\n      condition: isGermanFormat && tax > 0,\n      component: (\n        <>\n          <span className=\"mr-1\">{priceWithTax}</span>\n          {intervalUnitText}\n        </>\n      ),\n    },\n    {\n      condition: isAsiaFormat && (!tax || tax === 0),\n      component: (\n        <>\n          <span className=\"mr-1\">{priceWithoutTax}</span>\n          {t('price_gst_excl_label')}\n          <span className=\"ml-1\">{intervalUnitText}</span>\n        </>\n      ),\n    },\n    {\n      condition: isAsiaFormat,\n      component: (\n        <>\n          <span className=\"mr-1\">{priceWithoutTax}</span>\n          {t('price_gst_excl_label')}\n          <span className=\"ml-1\">{intervalUnitText}</span>\n          <TextPriceContent>\n            ({priceWithTax}\n            <span className=\"ml-1\">{t('price_gst_incl_label')})</span>\n          </TextPriceContent>\n        </>\n      ),\n    },\n    {\n      condition: isUSFormat,\n      component: (\n        <>\n          <span className=\"mr-1\">{priceWithoutTax}</span>\n          {intervalUnitText}\n        </>\n      ),\n    },\n  ];\n\n  const matchingComponent = components.find(({ condition }) => condition);\n  if (!matchingComponent) {\n    return <></>;\n  }\n\n  return (\n    <OsdsText\n      color={ODS_THEME_COLOR_INTENT.text}\n      level={ODS_TEXT_LEVEL.body}\n      size={ODS_TEXT_SIZE._500}\n      hue={ODS_TEXT_COLOR_HUE._500}\n    >\n      {matchingComponent.component}\n    </OsdsText>\n  );\n}\n\nexport default Price;\n"],"names":["OvhSubsidiary","OVH_CURRENCY_BY_SUBSIDIARY","IntervalUnitType","getPrice","value","tax","convertIntervalPrice","price","intervalUnit","getPriceTextFormatted","ovhSubsidiary","locale","priceValue","addTranslations","i18next","de_DE","en_GB","es_ES","fr_CA","fr_FR","it_IT","pl_PL","pt_PT","TextPriceContent","children","jsx","OsdsText","ODS_TEXT_SIZE","ODS_THEME_COLOR_INTENT","ODS_TEXT_COLOR_HUE","Price","isConvertIntervalUnit","useTranslation","isAsiaFormat","isGermanFormat","isFrenchFormat","isUSFormat","convertedValue","convertedTax","priceWithoutTax","priceWithTax","intervalUnitText","matchingComponent","jsxs","Fragment","condition","ODS_TEXT_LEVEL"],"mappings":"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"}