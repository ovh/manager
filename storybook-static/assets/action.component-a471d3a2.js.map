{"version":3,"file":"action.component-a471d3a2.js","sources":["../../src/components/navigation/menus/action/action.component.tsx"],"sourcesContent":["import React from 'react';\nimport { ODS_THEME_COLOR_INTENT } from '@ovhcloud/ods-common-theming';\nimport {\n  ODS_BUTTON_VARIANT,\n  ODS_BUTTON_SIZE,\n  ODS_ICON_NAME,\n  ODS_ICON_SIZE,\n  ODS_BUTTON_TYPE,\n} from '@ovhcloud/ods-components';\nimport {\n  OsdsButton,\n  OsdsMenu,\n  OsdsMenuItem,\n  OsdsIcon,\n} from '@ovhcloud/ods-components/react';\nimport {\n  OdsHTMLAnchorElementTarget,\n  OdsHTMLAnchorElementRel,\n} from '@ovhcloud/ods-common-core';\nimport { ReactI18NextChild, useTranslation } from 'react-i18next';\nimport '../translations/translation';\n\nimport { ManagerButton } from '../../../ManagerButton/ManagerButton';\n\nexport interface ActionMenuItem {\n  id: number;\n  rel?: OdsHTMLAnchorElementRel;\n  download?: string;\n  href?: string;\n  target?: OdsHTMLAnchorElementTarget;\n  onClick?: () => void;\n  label: ReactI18NextChild | Iterable<ReactI18NextChild>;\n  color?: ODS_THEME_COLOR_INTENT;\n  variant?: ODS_BUTTON_VARIANT;\n  disabled?: boolean;\n  iamActions?: string[];\n  urn?: string;\n}\n\nexport interface ActionMenuProps {\n  items: ActionMenuItem[];\n  isCompact?: boolean;\n  icon?: ODS_ICON_NAME;\n  disabled?: boolean;\n}\n\nconst computeOdsIconProps = (\n  isCompact: boolean,\n  icon?: ODS_ICON_NAME,\n): {\n  size: ODS_ICON_SIZE;\n  name: ODS_ICON_NAME;\n  color: ODS_THEME_COLOR_INTENT;\n} => {\n  const size = isCompact ? ODS_ICON_SIZE.xs : ODS_ICON_SIZE.xxs;\n  const color = ODS_THEME_COLOR_INTENT.primary;\n\n  const name =\n    icon ??\n    (isCompact ? ODS_ICON_NAME.ELLIPSIS : ODS_ICON_NAME.ARROW_DOWN_CONCEPT);\n\n  return { size, name, color };\n};\n\nconst MenuItem = ({\n  item,\n  isTrigger,\n}: {\n  item: Omit<ActionMenuItem, 'id'>;\n  isTrigger: boolean;\n}) => {\n  const buttonProps = {\n    size: ODS_BUTTON_SIZE.sm,\n    color: ODS_THEME_COLOR_INTENT.primary,\n    variant: ODS_BUTTON_VARIANT.ghost,\n    displayTooltip: false,\n    ...item,\n  };\n  return (\n    <OsdsMenuItem>\n      {!item?.iamActions || item?.iamActions?.length === 0 ? (\n        <OsdsButton\n          {...buttonProps}\n          disabled={buttonProps.disabled || undefined}\n        >\n          <span slot=\"start\">\n            <span>{item.label}</span>\n          </span>\n        </OsdsButton>\n      ) : (\n        <ManagerButton\n          isIamTrigger={isTrigger}\n          iamActions={item.iamActions}\n          urn={item.urn}\n          {...buttonProps}\n          disabled={buttonProps.disabled || undefined}\n        >\n          <span slot=\"start\">\n            <span>{item.label}</span>\n          </span>\n        </ManagerButton>\n      )}\n    </OsdsMenuItem>\n  );\n};\n\nexport const ActionMenu: React.FC<ActionMenuProps> = ({\n  items,\n  isCompact,\n  icon,\n  disabled,\n}) => {\n  const { t } = useTranslation('buttons');\n  const odsIconProps = computeOdsIconProps(isCompact, icon);\n  const [isTrigger, setIsTrigger] = React.useState(false);\n\n  return (\n    <OsdsMenu disabled={disabled || undefined}>\n      <OsdsButton\n        slot=\"menu-title\"\n        color={ODS_THEME_COLOR_INTENT.primary}\n        variant={ODS_BUTTON_VARIANT.stroked}\n        type={ODS_BUTTON_TYPE.button}\n        size={ODS_BUTTON_SIZE.sm}\n        inline\n        circle={isCompact || undefined}\n        onClick={() => setIsTrigger(true)}\n      >\n        {!isCompact && t('common_actions')}\n        <span slot={!isCompact ? 'end' : undefined}>\n          <OsdsIcon {...odsIconProps} data-testid=\"action-menu-icon\" />\n        </span>\n      </OsdsButton>\n\n      {items.map(({ id, ...item }) => {\n        return <MenuItem key={id} item={item} isTrigger={isTrigger} />;\n      })}\n    </OsdsMenu>\n  );\n};\n\nexport default ActionMenu;\n"],"names":["computeOdsIconProps","isCompact","icon","size","ODS_ICON_SIZE","color","ODS_THEME_COLOR_INTENT","name","ODS_ICON_NAME","MenuItem","item","isTrigger","buttonProps","ODS_BUTTON_SIZE","ODS_BUTTON_VARIANT","jsx","OsdsMenuItem","_a","OsdsButton","ManagerButton","ActionMenu","items","disabled","t","useTranslation","odsIconProps","setIsTrigger","React","jsxs","OsdsMenu","ODS_BUTTON_TYPE","OsdsIcon","id"],"mappings":"sZA8CA,MAAAA,EAAA,CAAAC,EAAAC,IAAA,CAQE,MAAAC,EAAAF,EAAAG,EAAA,GAAAA,EAAA,IACAC,EAAAC,EAAA,QAEAC,EAAAL,IAAAD,EAAAO,EAAA,SAAAA,EAAA,oBAIA,MAAA,CAAA,KAAAL,EAAA,KAAAI,EAAA,MAAAF,EACF,EAEAI,EAAA,CAAA,CAAkB,KAAAC,EAChB,UAAAC,CAEF,IAAA,OAIE,MAAAC,EAAA,CAAoB,KAAAC,EAAA,GACI,MAAAP,EAAA,QACQ,QAAAQ,EAAA,MACF,eAAA,GACZ,GAAAJ,CACb,EAEL,OAAAK,MAAAC,EAAA,CAAA,SAAA,EAAAN,GAAA,MAAAA,EAAA,eAAAO,EAAAP,GAAA,YAAAA,EAAA,aAAA,YAAAO,EAAA,UAAA,EAAAF,EAAA,IAGMG,EAAC,CAAA,GAAAN,EACK,SAAAA,EAAA,UAAA,OAC8B,SAAAG,EAAAA,IAAA,OAAA,CAAA,KAAA,QAAA,SAAAA,MAAA,OAAA,CAAA,SAAAL,EAAA,KAAA,CAAA,CAAA,CAAA,CAIlC,CAAA,EAAAK,EAAA,IAGFI,EAAC,CAAA,aAAAR,EACe,WAAAD,EAAA,WACG,IAAAA,EAAA,IACP,GAAAE,EACN,SAAAA,EAAA,UAAA,OAC8B,SAAAG,EAAAA,IAAA,OAAA,CAAA,KAAA,QAAA,SAAAA,MAAA,OAAA,CAAA,SAAAL,EAAA,KAAA,CAAA,CAAA,CAAA,CAIlC,CAAA,CAAA,CAAA,CAKV,EAEOU,EAAA,CAAA,CAA+C,MAAAC,EACpD,UAAApB,EACA,KAAAC,EACA,SAAAoB,CAEF,IAAA,CACE,KAAA,CAAA,EAAAC,CAAA,EAAAC,EAAA,SAAA,EACAC,EAAAzB,EAAAC,EAAAC,CAAA,EACA,CAAAS,EAAAe,CAAA,EAAAC,EAAA,SAAA,EAAA,EAEA,OAAAC,EAAAA,KAAAC,EAAA,CAAA,SAAAP,GAAA,OAAA,SAAA,CAEIM,EAAA,KAAAV,EAAC,CAAA,KAAA,aACM,MAAAZ,EAAA,QACyB,QAAAQ,EAAA,QACF,KAAAgB,EAAA,OACN,KAAAjB,EAAA,GACA,OAAA,GAChB,OAAAZ,GAAA,OACe,QAAA,IAAAyB,EAAA,EAAA,EACW,SAAA,CAE/B,CAAAzB,GAAAsB,EAAA,gBAAA,EAAgCR,EAAA,IAAA,OAAA,CAAA,KAAAd,EAAA,OAAA,MAAA,SAAAc,EAAA,IAAAgB,EAAA,CAAA,GAAAN,EAAA,cAAA,kBAAA,CAAA,EAAA,CAGjC,CAAA,CAAA,EACFJ,EAAA,IAAA,CAAA,CAAA,GAAAW,EAAA,GAAAtB,CAAA,IAGEK,EAAAA,IAAAN,EAAA,CAAA,KAAAC,EAAA,UAAAC,CAAA,EAAAqB,CAAA,CAA4D,CAC7D,CAAA,CAAA,CAGP"}