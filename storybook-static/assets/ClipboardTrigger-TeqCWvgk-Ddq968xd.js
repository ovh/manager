import{j as a}from"./jsx-runtime-BRNY0I4F.js";import{m as C}from"./index-2w0W-O47-BJ19ihbZ.js";import{r as d}from"./index-Bnop-kX6.js";import{X as T,t as _,v,x as R,T as y,L as V,O as k,V as I,G as p,A as E,g as $,a7 as S,a8 as Y,y as A}from"./use-locale-context-cwTY9VYn-REDUMe7F.js";import{p as F,r as L}from"./Input-DcqcPYne-BLK_63J0.js";import{x as U,s as D}from"./Button-BC-ipw2F-4e7GV2_-.js";import{t as z}from"./ods-react65-wKxTpDjY.js";import{t as f}from"./Icon-DrfG5m-t-DQEf1CkA.js";import{l as x}from"./ods-react60-0db41gCx.js";import{h as X,I as q,M}from"./TooltipTrigger-Iu3rt7LP-CcHcHvx1.js";import{o as B}from"./ods-react235-BTQ8kVBe.js";const[G,g]=T({name:"ClipboardContext",hookName:"useClipboardContext",providerName:"<ClipboardProvider />"}),P=d.forwardRef((e,o)=>{const t=g(),r=_(t.getControlProps(),e);return a.jsx(v.div,{...r,ref:o})});P.displayName="ClipboardControl";var H=R("clipboard").parts("root","control","trigger","indicator","input","label"),c=H.build(),J=e=>{var o;return((o=e.ids)==null?void 0:o.root)??`clip:${e.id}`},m=e=>{var o;return((o=e.ids)==null?void 0:o.input)??`clip:${e.id}:input`},K=e=>{var o;return((o=e.ids)==null?void 0:o.label)??`clip:${e.id}:label`},Q=e=>e.getById(m(e)),W=(e,o)=>oe(e.getDoc(),o);function Z(e,o){const t=e.createElement("pre");return Object.assign(t.style,{width:"1px",height:"1px",position:"fixed",top:"5px"}),t.textContent=o,t}function ee(e){const o=A(e).getSelection();if(o==null)return Promise.reject(new Error);o.removeAllRanges();const t=e.ownerDocument,r=t.createRange();return r.selectNodeContents(e),o.addRange(r),t.execCommand("copy"),o.removeAllRanges(),Promise.resolve()}function oe(e,o){var t;const r=e.defaultView||window;if(((t=r.navigator.clipboard)==null?void 0:t.writeText)!==void 0)return r.navigator.clipboard.writeText(o);if(!e.body)return Promise.reject(new Error);const i=Z(e,o);return e.body.appendChild(i),ee(i),e.body.removeChild(i),Promise.resolve()}function te(e,o){const{state:t,send:r,context:i,scope:s}=e,l=t.matches("copied");return{copied:l,value:i.get("value"),setValue(n){r({type:"VALUE.SET",value:n})},copy(){r({type:"COPY"})},getRootProps(){return o.element({...c.root.attrs,"data-copied":p(l),id:J(s)})},getLabelProps(){return o.label({...c.label.attrs,htmlFor:m(s),"data-copied":p(l),id:K(s)})},getControlProps(){return o.element({...c.control.attrs,"data-copied":p(l)})},getInputProps(){return o.input({...c.input.attrs,defaultValue:i.get("value"),"data-copied":p(l),readOnly:!0,"data-readonly":"true",id:m(s),onFocus(n){n.currentTarget.select()},onCopy(){r({type:"INPUT.COPY"})}})},getTriggerProps(){return o.button({...c.trigger.attrs,type:"button","aria-label":l?"Copied to clipboard":"Copy to clipboard","data-copied":p(l),onClick(){r({type:"COPY"})}})},getIndicatorProps(n){return o.element({...c.indicator.attrs,hidden:n.copied!==l})}}}var re=$({props({props:e}){return{timeout:3e3,defaultValue:"",...e}},initialState(){return"idle"},context({prop:e,bindable:o}){return{value:o(()=>({defaultValue:e("defaultValue"),value:e("value"),onChange(t){var r;(r=e("onValueChange"))==null||r({value:t})}}))}},watch({track:e,context:o,action:t}){e([()=>o.get("value")],()=>{t(["syncInputElement"])})},on:{"VALUE.SET":{actions:["setValue"]},COPY:{target:"copied",actions:["copyToClipboard","invokeOnCopy"]}},states:{idle:{on:{"INPUT.COPY":{target:"copied",actions:["invokeOnCopy"]}}},copied:{effects:["waitForTimeout"],on:{"COPY.DONE":{target:"idle"},COPY:{target:"copied",actions:["copyToClipboard","invokeOnCopy"]},"INPUT.COPY":{actions:["invokeOnCopy"]}}}},implementations:{effects:{waitForTimeout({prop:e,send:o}){return S(()=>{o({type:"COPY.DONE"})},e("timeout"))}},actions:{setValue({context:e,event:o}){e.set("value",o.value)},copyToClipboard({context:e,scope:o}){W(o,e.get("value"))},invokeOnCopy({prop:e}){var o;(o=e("onStatusChange"))==null||o({copied:!0})},syncInputElement({context:e,scope:o}){const t=Q(o);t&&Y(t,e.get("value"))}}}});y()(["getRootNode","id","ids","value","defaultValue","timeout","onStatusChange","onValueChange"]);y()(["copied"]);const ae=e=>{const o=d.useId(),{getRootNode:t}=k(),r={id:o,getRootNode:t,...e},i=I(re,r);return te(i,E)},N=d.forwardRef((e,o)=>{const[t,r]=V()(e,["defaultValue","id","ids","onStatusChange","onValueChange","timeout","value"]),i=ae(t),s=_(i.getRootProps(),r);return a.jsx(G,{value:i,children:a.jsx(v.div,{ref:o,...s})})});N.displayName="ClipboardRoot";const j=d.forwardRef((e,o)=>{const t=g(),r=_(t.getTriggerProps(),e);return a.jsx(v.button,{...r,ref:o})});j.displayName="ClipboardTrigger";const O=d.createContext({});function ie({children:e,disabled:o,i18n:t,locale:r}){return a.jsx(O.Provider,{value:{disabled:o,i18n:t,locale:r},children:e})}function w(){return d.useContext(O)}const le="_clipboard_15kq6_2",h={clipboard:le,"clipboard--disabled":"_clipboard--disabled_15kq6_18"},ne=d.forwardRef(({children:e,className:o,disabled:t,i18n:r,locale:i,onCopy:s,value:l,...n},b)=>a.jsx(ie,{disabled:t,i18n:r,locale:i,children:a.jsx(N,{className:C(h.clipboard,{[h["clipboard--disabled"]]:t},o),"data-ods":"clipboard",onStatusChange:s,ref:b,role:"group",value:l,...n,children:e})}));ne.displayName="Clipboard";const se="_clipboard__input_pn8ud_2",de={clipboard__input:se},ce=d.forwardRef(({className:e,loading:o,maskOption:t,...r},i)=>{const{disabled:s,i18n:l,locale:n}=w(),{value:b}=g();return a.jsx(P,{asChild:!0,children:a.jsx(F,{className:C(de.clipboard__input,e),"data-ods":"clipboard-control",i18n:l,loading:o,locale:n,maskOption:t,...r,disabled:s,readOnly:!0,ref:i,type:L.text,value:b})})});ce.displayName="ClipboardControl";const u={"clipboard-trigger__copy":"_clipboard-trigger__copy_4b6mw_2","clipboard-trigger__tooltip":"_clipboard-trigger__tooltip_4b6mw_5","clipboard-trigger__tooltip--success":"_clipboard-trigger__tooltip--success_4b6mw_10","clipboard-trigger__tooltip__check":"_clipboard-trigger__tooltip__check_4b6mw_16"},pe=d.forwardRef(({children:e,className:o,labelCopy:t="Copy to clipboard",labelCopySuccess:r="Copied!",...i},s)=>{const{disabled:l}=w(),{copied:n}=g();return a.jsxs(X,{position:B.right,children:[a.jsx(j,{asChild:!0,children:a.jsx(q,{"aria-label":n?r:t,asChild:!0,className:u["clipboard-trigger__copy"],"data-ods":"clipboard-trigger",ref:s,...i,children:e||a.jsx(U,{disabled:l,size:D.xs,variant:z.ghost,children:a.jsx(f,{name:x.fileCopy})})})}),!l&&a.jsx(M,{children:a.jsx("div",{"aria-hidden":"true",className:C(u["clipboard-trigger__tooltip"],{[u["clipboard-trigger__tooltip--success"]]:n},o),children:n?a.jsxs(a.Fragment,{children:[r,a.jsx(f,{className:u["clipboard-trigger__tooltip__check"],name:x.check})]}):t})})]})});pe.displayName="ClipboardTrigger";export{pe as C,ce as b,ne as u};
