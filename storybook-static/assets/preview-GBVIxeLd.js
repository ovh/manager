var C=(t,e,s)=>{if(!e.has(t))throw TypeError("Cannot "+s)};var a=(t,e,s)=>(C(t,e,"read from private field"),s?s.call(t):e.get(t)),h=(t,e,s)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,s)},u=(t,e,s,r)=>(C(t,e,"write to private field"),r?r.call(t,s):e.set(t,s),s);var P=(t,e,s,r)=>({set _(i){u(t,e,i,s)},get _(){return a(t,e,r)}});import{j as M}from"./jsx-runtime-CKrituN3.js";import{r as A}from"./index-CBqU2yxZ.js";import{S as R,h as j,Q as K,n as o,m as x,d as I,f as d,g as B,o as q,r as S,i as L,j as F,p as T,s as N,k as $}from"./QueryClientProvider-CDvRjfR1.js";import{M as z,i as G}from"./lib-Izy6Ibba.js";import{s as U,b as V,I as W,i as E}from"./i18next-ihUiNgJT.js";import"./_commonjsHelpers-BosuxZz1.js";const Z={type:"3rdParty",init(t){U(t.options.react),V(t)}};function J(t){let{i18n:e,defaultNS:s,children:r}=t;const i=A.useMemo(()=>({i18n:e,defaultNS:s}),[e,s]);return A.createElement(W.Provider,{value:i},r)}var f,_,X=(_=class extends R{constructor(e={}){super();h(this,f,void 0);this.config=e,u(this,f,new Map)}build(e,s,r){const i=s.queryKey,c=s.queryHash??j(i,s);let g=this.get(c);return g||(g=new K({cache:this,queryKey:i,queryHash:c,options:e.defaultQueryOptions(s),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(g)),g}add(e){a(this,f).has(e.queryHash)||(a(this,f).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const s=a(this,f).get(e.queryHash);s&&(e.destroy(),s===e&&a(this,f).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){o.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return a(this,f).get(e)}getAll(){return[...a(this,f).values()]}find(e){const s={exact:!0,...e};return this.getAll().find(r=>x(s,r))}findAll(e={}){const s=this.getAll();return Object.keys(e).length>0?s.filter(r=>x(e,r)):s}notify(e){o.batch(()=>{this.listeners.forEach(s=>{s(e)})})}onFocus(){o.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){o.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},f=new WeakMap,_),l,D,k,Y=(k=class extends R{constructor(e={}){super();h(this,l,void 0);h(this,D,void 0);this.config=e,u(this,l,new Map),u(this,D,Date.now())}build(e,s,r){const i=new z({mutationCache:this,mutationId:++P(this,D)._,options:e.defaultMutationOptions(s),state:r});return this.add(i),i}add(e){const s=w(e),r=a(this,l).get(s)??[];r.push(e),a(this,l).set(s,r),this.notify({type:"added",mutation:e})}remove(e){var r;const s=w(e);if(a(this,l).has(s)){const i=(r=a(this,l).get(s))==null?void 0:r.filter(c=>c!==e);i&&(i.length===0?a(this,l).delete(s):a(this,l).set(s,i))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const s=(r=a(this,l).get(w(e)))==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}runNext(e){var r;const s=(r=a(this,l).get(w(e)))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}clear(){o.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...a(this,l).values()].flat()}find(e){const s={exact:!0,...e};return this.getAll().find(r=>I(s,r))}findAll(e={}){return this.getAll().filter(s=>I(e,s))}notify(e){o.batch(()=>{this.listeners.forEach(s=>{s(e)})})}resumePausedMutations(){const e=this.getAll().filter(s=>s.state.isPaused);return o.batch(()=>Promise.all(e.map(s=>s.continue().catch(d))))}},l=new WeakMap,D=new WeakMap,k);function w(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}var n,y,p,v,Q,m,b,O,H,ee=(H=class{constructor(t={}){h(this,n,void 0);h(this,y,void 0);h(this,p,void 0);h(this,v,void 0);h(this,Q,void 0);h(this,m,void 0);h(this,b,void 0);h(this,O,void 0);u(this,n,t.queryCache||new X),u(this,y,t.mutationCache||new Y),u(this,p,t.defaultOptions||{}),u(this,v,new Map),u(this,Q,new Map),u(this,m,0)}mount(){P(this,m)._++,a(this,m)===1&&(u(this,b,B.subscribe(async t=>{t&&(await this.resumePausedMutations(),a(this,n).onFocus())})),u(this,O,q.subscribe(async t=>{t&&(await this.resumePausedMutations(),a(this,n).onOnline())})))}unmount(){var t,e;P(this,m)._--,a(this,m)===0&&((t=a(this,b))==null||t.call(this),u(this,b,void 0),(e=a(this,O))==null||e.call(this),u(this,O,void 0))}isFetching(t){return a(this,n).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return a(this,y).findAll({...t,status:"pending"}).length}getQueryData(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=a(this,n).get(e.queryHash))==null?void 0:s.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const s=this.defaultQueryOptions(t),r=a(this,n).build(this,s);return t.revalidateIfStale&&r.isStaleByTime(S(s.staleTime,r))&&this.prefetchQuery(s),Promise.resolve(e)}}getQueriesData(t){return a(this,n).findAll(t).map(({queryKey:e,state:s})=>{const r=s.data;return[e,r]})}setQueryData(t,e,s){const r=this.defaultQueryOptions({queryKey:t}),i=a(this,n).get(r.queryHash),c=i==null?void 0:i.state.data,g=L(e,c);if(g!==void 0)return a(this,n).build(this,r).setData(g,{...s,manual:!0})}setQueriesData(t,e,s){return o.batch(()=>a(this,n).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,s)]))}getQueryState(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=a(this,n).get(e.queryHash))==null?void 0:s.state}removeQueries(t){const e=a(this,n);o.batch(()=>{e.findAll(t).forEach(s=>{e.remove(s)})})}resetQueries(t,e){const s=a(this,n),r={type:"active",...t};return o.batch(()=>(s.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const s={revert:!0,...e},r=o.batch(()=>a(this,n).findAll(t).map(i=>i.cancel(s)));return Promise.all(r).then(d).catch(d)}invalidateQueries(t={},e={}){return o.batch(()=>{if(a(this,n).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const s={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(s,e)})}refetchQueries(t={},e){const s={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=o.batch(()=>a(this,n).findAll(t).filter(i=>!i.isDisabled()).map(i=>{let c=i.fetch(void 0,s);return s.throwOnError||(c=c.catch(d)),i.state.fetchStatus==="paused"?Promise.resolve():c}));return Promise.all(r).then(d)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const s=a(this,n).build(this,e);return s.isStaleByTime(S(e.staleTime,s))?s.fetch(e):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(d).catch(d)}fetchInfiniteQuery(t){return t.behavior=G(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(d).catch(d)}resumePausedMutations(){return q.isOnline()?a(this,y).resumePausedMutations():Promise.resolve()}getQueryCache(){return a(this,n)}getMutationCache(){return a(this,y)}getDefaultOptions(){return a(this,p)}setDefaultOptions(t){u(this,p,t)}setQueryDefaults(t,e){a(this,v).set(F(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...a(this,v).values()];let s={};return e.forEach(r=>{T(t,r.queryKey)&&(s={...s,...r.defaultOptions})}),s}setMutationDefaults(t,e){a(this,Q).set(F(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...a(this,Q).values()];let s={};return e.forEach(r=>{T(t,r.mutationKey)&&(s={...s,...r.defaultOptions})}),s}defaultQueryOptions(t){if(t._defaulted)return t;const e={...a(this,p).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=j(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===N&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...a(this,p).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){a(this,n).clear(),a(this,y).clear()}},n=new WeakMap,y=new WeakMap,p=new WeakMap,v=new WeakMap,Q=new WeakMap,m=new WeakMap,b=new WeakMap,O=new WeakMap,H);E.use(Z).init({fallbackLng:"fr_FR",interpolation:{escapeValue:!1},resources:{en:{}}});const te=new ee({defaultOptions:{queries:{retry:!1,staleTime:1/0}}}),he={parameters:{docs:{toc:{contentsSelector:".sbdocs-content",headingSelector:"h2, h3",disable:!1},source:{excludeDecorators:!0}},actions:{argTypesRegex:"^on[A-Z].*"},controls:{matchers:{color:/(background|color)$/i,date:/Date$/}},options:{storySort:{order:["Manager React Components",["Introduction","What's new?",["Changelog"]],"*"]},showPanel:!0}}},se=(t,e)=>{const{locale:s}=e.globals;return A.useEffect(()=>{E.changeLanguage(s)},[s]),M.jsx(A.Suspense,{fallback:M.jsx("div",{children:"loading translations..."}),children:M.jsx(J,{i18n:E,children:M.jsx($,{client:te,children:M.jsx(t,{})})})})},ce=[se],fe={locale:{name:"Locale",description:"Internationalization locale",toolbar:{icon:"globe",items:[{value:"fr_FR",title:"Francais"},{value:"en_GB",title:"English"},{value:"de_DE",title:"Deutsch"},{value:"es_ES",title:"Espagne"},{value:"it_IT",title:"Italy"},{value:"pt_PT",title:"Portugal"},{value:"pl_PL",title:"Poland"},{value:"fr_CA",title:"Canada"}],showName:!0}}};export{ce as decorators,he as default,fe as globalTypes};
//# sourceMappingURL=preview-GBVIxeLd.js.map
