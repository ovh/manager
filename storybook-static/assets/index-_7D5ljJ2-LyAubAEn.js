import{q as T,u as p,s as m}from"./use-locale-context-cwTY9VYn-REDUMe7F.js";var R=Object.defineProperty,A=(n,r,t)=>r in n?R(n,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[r]=t,h=(n,r,t)=>A(n,typeof r!="symbol"?r+"":r,t),y={itemToValue(n){return typeof n=="string"?n:p(n)&&m(n,"value")?n.value:""},itemToString(n){return typeof n=="string"?n:p(n)&&m(n,"label")?n.label:y.itemToValue(n)},isItemDisabled(n){return p(n)&&m(n,"disabled")?!!n.disabled:!1}},st=class D{constructor(r){this.options=r,h(this,"items"),h(this,"indexMap",null),h(this,"copy",t=>new D({...this.options,items:t??[...this.items]})),h(this,"isEqual",t=>T(this.items,t.items)),h(this,"setItems",t=>this.copy(t)),h(this,"getValues",(t=this.items)=>{const e=[];for(const i of t){const s=this.getItemValue(i);s!=null&&e.push(s)}return e}),h(this,"find",t=>{if(t==null)return null;const e=this.indexOf(t);return e!==-1?this.at(e):null}),h(this,"findMany",t=>{const e=[];for(const i of t){const s=this.find(i);s!=null&&e.push(s)}return e}),h(this,"at",t=>{if(!this.options.groupBy&&!this.options.groupSort)return this.items[t]??null;let e=0;const i=this.group();for(const[,s]of i)for(const o of s){if(e===t)return o;e++}return null}),h(this,"sortFn",(t,e)=>{const i=this.indexOf(t),s=this.indexOf(e);return(i??0)-(s??0)}),h(this,"sort",t=>[...t].sort(this.sortFn.bind(this))),h(this,"getItemValue",t=>{var e,i;return t==null?null:((i=(e=this.options).itemToValue)==null?void 0:i.call(e,t))??y.itemToValue(t)}),h(this,"getItemDisabled",t=>{var e,i;return t==null?!1:((i=(e=this.options).isItemDisabled)==null?void 0:i.call(e,t))??y.isItemDisabled(t)}),h(this,"stringifyItem",t=>{var e,i;return t==null?null:((i=(e=this.options).itemToString)==null?void 0:i.call(e,t))??y.itemToString(t)}),h(this,"stringify",t=>t==null?null:this.stringifyItem(this.find(t))),h(this,"stringifyItems",(t,e=", ")=>{const i=[];for(const s of t){const o=this.stringifyItem(s);o!=null&&i.push(o)}return i.join(e)}),h(this,"stringifyMany",(t,e)=>this.stringifyItems(this.findMany(t),e)),h(this,"has",t=>this.indexOf(t)!==-1),h(this,"hasItem",t=>t==null?!1:this.has(this.getItemValue(t))),h(this,"group",()=>{const{groupBy:t,groupSort:e}=this.options;if(!t)return[["",[...this.items]]];const i=new Map;this.items.forEach((o,l)=>{const d=t(o,l);i.has(d)||i.set(d,[]),i.get(d).push(o)});let s=Array.from(i.entries());return e&&s.sort(([o],[l])=>{if(typeof e=="function")return e(o,l);if(Array.isArray(e)){const d=e.indexOf(o),u=e.indexOf(l);return d===-1?1:u===-1?-1:d-u}return e==="asc"?o.localeCompare(l):e==="desc"?l.localeCompare(o):0}),s}),h(this,"getNextValue",(t,e=1,i=!1)=>{let s=this.indexOf(t);if(s===-1)return null;for(s=i?Math.min(s+e,this.size-1):s+e;s<=this.size&&this.getItemDisabled(this.at(s));)s++;return this.getItemValue(this.at(s))}),h(this,"getPreviousValue",(t,e=1,i=!1)=>{let s=this.indexOf(t);if(s===-1)return null;for(s=i?Math.max(s-e,0):s-e;s>=0&&this.getItemDisabled(this.at(s));)s--;return this.getItemValue(this.at(s))}),h(this,"indexOf",t=>{if(t==null)return-1;if(!this.options.groupBy&&!this.options.groupSort)return this.items.findIndex(e=>this.getItemValue(e)===t);if(!this.indexMap){this.indexMap=new Map;let e=0;const i=this.group();for(const[,s]of i)for(const o of s){const l=this.getItemValue(o);l!=null&&this.indexMap.set(l,e),e++}}return this.indexMap.get(t)??-1}),h(this,"getByText",(t,e)=>{const i=e!=null?this.indexOf(e):-1,s=t.length===1;for(let o=0;o<this.items.length;o++){const l=this.items[(i+o+1)%this.items.length];if(!(s&&this.getItemValue(l)===e)&&!this.getItemDisabled(l)&&z(this.stringifyItem(l),t))return l}}),h(this,"search",(t,e)=>{const{state:i,currentValue:s,timeout:o=350}=e,l=i.keysSoFar+t,d=l.length>1&&Array.from(l).every(c=>c===l[0])?l[0]:l,u=this.getByText(d,s),a=this.getItemValue(u);function f(){clearTimeout(i.timer),i.timer=-1}function N(c){i.keysSoFar=c,f(),c!==""&&(i.timer=+setTimeout(()=>{N(""),f()},o))}return N(l),a}),h(this,"update",(t,e)=>{let i=this.indexOf(t);return i===-1?this:this.copy([...this.items.slice(0,i),e,...this.items.slice(i+1)])}),h(this,"upsert",(t,e,i="append")=>{let s=this.indexOf(t);return s===-1?(i==="append"?this.append:this.prepend)(e):this.copy([...this.items.slice(0,s),e,...this.items.slice(s+1)])}),h(this,"insert",(t,...e)=>this.copy(C(this.items,t,...e))),h(this,"insertBefore",(t,...e)=>{let i=this.indexOf(t);if(i===-1)if(this.items.length===0)i=0;else return this;return this.copy(C(this.items,i,...e))}),h(this,"insertAfter",(t,...e)=>{let i=this.indexOf(t);if(i===-1)if(this.items.length===0)i=0;else return this;return this.copy(C(this.items,i+1,...e))}),h(this,"prepend",(...t)=>this.copy(C(this.items,0,...t))),h(this,"append",(...t)=>this.copy(C(this.items,this.items.length,...t))),h(this,"filter",t=>{const e=this.items.filter((i,s)=>t(this.stringifyItem(i),s,i));return this.copy(e)}),h(this,"remove",(...t)=>{const e=t.map(i=>typeof i=="string"?i:this.getItemValue(i));return this.copy(this.items.filter(i=>{const s=this.getItemValue(i);return s==null?!1:!e.includes(s)}))}),h(this,"move",(t,e)=>{const i=this.indexOf(t);return i===-1?this:this.copy(x(this.items,[i],e))}),h(this,"moveBefore",(t,...e)=>{let i=this.items.findIndex(o=>this.getItemValue(o)===t);if(i===-1)return this;let s=e.map(o=>this.items.findIndex(l=>this.getItemValue(l)===o)).sort((o,l)=>o-l);return this.copy(x(this.items,s,i))}),h(this,"moveAfter",(t,...e)=>{let i=this.items.findIndex(o=>this.getItemValue(o)===t);if(i===-1)return this;let s=e.map(o=>this.items.findIndex(l=>this.getItemValue(l)===o)).sort((o,l)=>o-l);return this.copy(x(this.items,s,i+1))}),h(this,"reorder",(t,e)=>this.copy(x(this.items,[t],e))),h(this,"compareValue",(t,e)=>{const i=this.indexOf(t),s=this.indexOf(e);return i<s?-1:i>s?1:0}),h(this,"range",(t,e)=>{let i=[],s=t;for(;s!=null;){if(this.find(s)&&i.push(s),s===e)return i;s=this.getNextValue(s)}return[]}),h(this,"getValueRange",(t,e)=>t&&e?this.compareValue(t,e)<=0?this.range(t,e):this.range(e,t):[]),h(this,"toString",()=>{let t="";for(const e of this.items){const i=this.getItemValue(e),s=this.stringifyItem(e),o=this.getItemDisabled(e),l=[i,s,o].filter(Boolean).join(":");t+=l+","}return t}),h(this,"toJSON",()=>({size:this.size,first:this.firstValue,last:this.lastValue})),this.items=[...r.items]}get size(){return this.items.length}get firstValue(){let r=0;for(;this.getItemDisabled(this.at(r));)r++;return this.getItemValue(this.at(r))}get lastValue(){let r=this.size-1;for(;this.getItemDisabled(this.at(r));)r--;return this.getItemValue(this.at(r))}*[Symbol.iterator](){yield*this.items}},z=(n,r)=>!!(n!=null&&n.toLowerCase().startsWith(r.toLowerCase()));function C(n,r,...t){return[...n.slice(0,r),...t,...n.slice(r)]}function x(n,r,t){r=[...r].sort((i,s)=>i-s);const e=r.map(i=>n[i]);for(let i=r.length-1;i>=0;i--)n=[...n.slice(0,r[i]),...n.slice(r[i]+1)];return t=Math.max(0,t-r.filter(i=>i<t).length),[...n.slice(0,t),...e,...n.slice(t)]}function E(n,r,t){for(let e=0;e<r.length;e++)n=t.getChildren(n,r.slice(e+1))[r[e]];return n}function F(n){const r=L(n),t=[],e=new Set;for(const i of r){const s=i.join();e.has(s)||(e.add(s),t.push(i))}return t}function S(n,r){for(let t=0;t<Math.min(n.length,r.length);t++){if(n[t]<r[t])return-1;if(n[t]>r[t])return 1}return n.length-r.length}function L(n){return n.sort(S)}function q(n,r){let t;return g(n,{...r,onEnter:(e,i)=>{if(r.predicate(e,i))return t=e,"stop"}}),t}function J(n,r){const t=[];return g(n,{onEnter:(e,i)=>{r.predicate(e,i)&&t.push(e)},getChildren:r.getChildren}),t}function b(n,r){let t;return g(n,{onEnter:(e,i)=>{if(r.predicate(e,i))return t=[...i],"stop"},getChildren:r.getChildren}),t}function W(n,r){let t=r.initialResult;return g(n,{...r,onEnter:(e,i)=>{t=r.nextResult(t,e,i)}}),t}function $(n,r){return W(n,{...r,initialResult:[],nextResult:(t,e,i)=>(t.push(...r.transform(e,i)),t)})}function G(n,r){const{predicate:t,create:e,getChildren:i}=r,s=(o,l)=>{const d=i(o,l),u=[];d.forEach((c,k)=>{const B=[...l,k],P=s(c,B);P&&u.push(P)});const a=l.length===0,f=t(o,l),N=u.length>0;return a||f||N?e(o,u,l):null};return s(n,[])||e(n,[],[])}function H(n,r){const t=[];let e=0;const i=new Map,s=new Map;return g(n,{getChildren:r.getChildren,onEnter:(o,l)=>{i.has(o)||i.set(o,e++);const d=r.getChildren(o,l);d.forEach(c=>{s.has(c)||s.set(c,o),i.has(c)||i.set(c,e++)});const u=d.length>0?d.map(c=>i.get(c)):void 0,a=s.get(o),f=a?i.get(a):void 0,N=i.get(o);t.push({...o,_children:u,_parent:f,_index:N})}}),t}function K(n,r){return{type:"insert",index:n,nodes:r}}function Q(n){return{type:"remove",indexes:n}}function V(){return{type:"replace"}}function O(n){return[n.slice(0,-1),n[n.length-1]]}function M(n,r,t=new Map){var e;const[i,s]=O(n);for(let l=i.length-1;l>=0;l--){const d=i.slice(0,l).join();switch((e=t.get(d))==null?void 0:e.type){case"remove":continue}t.set(d,V())}const o=t.get(i.join());switch(o==null?void 0:o.type){case"remove":t.set(i.join(),{type:"removeThenInsert",removeIndexes:o.indexes,insertIndex:s,insertNodes:r});break;default:t.set(i.join(),K(s,r))}return t}function j(n){const r=new Map,t=new Map;for(const e of n){const i=e.slice(0,-1).join(),s=t.get(i)??[];s.push(e[e.length-1]),t.set(i,s.sort((o,l)=>o-l))}for(const e of n)for(let i=e.length-2;i>=0;i--){const s=e.slice(0,i).join();r.has(s)||r.set(s,V())}for(const[e,i]of t)r.set(e,Q(i));return r}function U(n,r){const t=new Map,[e,i]=O(n);for(let s=e.length-1;s>=0;s--){const o=e.slice(0,s).join();t.set(o,V())}return t.set(e.join(),{type:"removeThenInsert",removeIndexes:[i],insertIndex:i,insertNodes:[r]}),t}function I(n,r,t){return X(n,{...t,getChildren:(e,i)=>{const s=i.join(),o=r.get(s);switch(o==null?void 0:o.type){case"replace":case"remove":case"removeThenInsert":case"insert":return t.getChildren(e,i);default:return[]}},transform:(e,i,s)=>{const o=s.join(),l=r.get(o);switch(l==null?void 0:l.type){case"remove":return t.create(e,i.filter((a,f)=>!l.indexes.includes(f)),s);case"removeThenInsert":const d=i.filter((a,f)=>!l.removeIndexes.includes(f)),u=l.removeIndexes.reduce((a,f)=>f<a?a-1:a,l.insertIndex);return t.create(e,w(d,u,0,...l.insertNodes),s);case"insert":return t.create(e,w(i,l.index,0,...l.nodes),s);case"replace":return t.create(e,i,s);default:return e}}})}function w(n,r,t,...e){return[...n.slice(0,r),...e,...n.slice(r+t)]}function X(n,r){const t={};return g(n,{...r,onLeave:(e,i)=>{const s=[0,...i],o=s.join(),l=r.transform(e,t[o]??[],i),d=s.slice(0,-1).join(),u=t[d]??[];u.push(l),t[d]=u}}),t[""][0]}function Y(n,r){const{nodes:t,at:e}=r;if(e.length===0)throw new Error("Can't insert nodes at the root");const i=M(e,t);return I(n,i,r)}function Z(n,r){if(r.at.length===0)return r.node;const t=U(r.at,r.node);return I(n,t,r)}function tt(n,r){if(r.indexPaths.length===0)return n;for(const e of r.indexPaths)if(e.length===0)throw new Error("Can't remove the root node");const t=j(r.indexPaths);return I(n,t,r)}function et(n,r){if(r.indexPaths.length===0)return n;for(const s of r.indexPaths)if(s.length===0)throw new Error("Can't move the root node");if(r.to.length===0)throw new Error("Can't move nodes to the root");const t=F(r.indexPaths),e=t.map(s=>E(n,s,r)),i=M(r.to,e,j(t));return I(n,i,r)}function g(n,r){const{onEnter:t,onLeave:e,getChildren:i}=r;let s=[],o=[{node:n}];const l=r.reuseIndexPath?()=>s:()=>s.slice();for(;o.length>0;){let d=o[o.length-1];if(d.state===void 0){const a=t==null?void 0:t(d.node,l());if(a==="stop")return;d.state=a==="skip"?-1:0}const u=d.children||i(d.node,l());if(d.children||(d.children=u),d.state!==-1){if(d.state<u.length){let a=d.state;s.push(a),o.push({node:u[a]}),d.state=a+1;continue}if((e==null?void 0:e(d.node,l()))==="stop")return}s.pop(),o.pop()}}var nt=class _{constructor(r){this.options=r,h(this,"rootNode"),h(this,"isEqual",t=>T(this.rootNode,t.rootNode)),h(this,"getNodeChildren",t=>{var e,i;return((i=(e=this.options).nodeToChildren)==null?void 0:i.call(e,t))??v.nodeToChildren(t)??[]}),h(this,"resolveIndexPath",t=>typeof t=="string"?this.getIndexPath(t):t),h(this,"resolveNode",t=>{const e=this.resolveIndexPath(t);return e?this.at(e):void 0}),h(this,"getNodeChildrenCount",t=>{var e,i;return((i=(e=this.options).nodeToChildrenCount)==null?void 0:i.call(e,t))??v.nodeToChildrenCount(t)}),h(this,"getNodeValue",t=>{var e,i;return((i=(e=this.options).nodeToValue)==null?void 0:i.call(e,t))??v.nodeToValue(t)}),h(this,"getNodeDisabled",t=>{var e,i;return((i=(e=this.options).isNodeDisabled)==null?void 0:i.call(e,t))??v.isNodeDisabled(t)}),h(this,"stringify",t=>{const e=this.findNode(t);return e?this.stringifyNode(e):null}),h(this,"stringifyNode",t=>{var e,i;return((i=(e=this.options).nodeToString)==null?void 0:i.call(e,t))??v.nodeToString(t)}),h(this,"getFirstNode",(t=this.rootNode)=>{let e;return g(t,{getChildren:this.getNodeChildren,onEnter:(i,s)=>{if(!e&&s.length>0&&!this.getNodeDisabled(i))return e=i,"stop"}}),e}),h(this,"getLastNode",(t=this.rootNode,e={})=>{let i;return g(t,{getChildren:this.getNodeChildren,onEnter:(s,o)=>{var l;if(!this.isSameNode(s,t)){if((l=e.skip)!=null&&l.call(e,{value:this.getNodeValue(s),node:s,indexPath:o}))return"skip";o.length>0&&!this.getNodeDisabled(s)&&(i=s)}}}),i}),h(this,"at",t=>E(this.rootNode,t,{getChildren:this.getNodeChildren})),h(this,"findNode",(t,e=this.rootNode)=>q(e,{getChildren:this.getNodeChildren,predicate:i=>this.getNodeValue(i)===t})),h(this,"findNodes",(t,e=this.rootNode)=>{const i=new Set(t.filter(s=>s!=null));return J(e,{getChildren:this.getNodeChildren,predicate:s=>i.has(this.getNodeValue(s))})}),h(this,"sort",t=>t.reduce((e,i)=>{const s=this.getIndexPath(i);return s&&e.push({value:i,indexPath:s}),e},[]).sort((e,i)=>S(e.indexPath,i.indexPath)).map(({value:e})=>e)),h(this,"getIndexPath",t=>b(this.rootNode,{getChildren:this.getNodeChildren,predicate:e=>this.getNodeValue(e)===t})),h(this,"getValue",t=>{const e=this.at(t);return e?this.getNodeValue(e):void 0}),h(this,"getValuePath",t=>{if(!t)return[];const e=[];let i=[...t];for(;i.length>0;){const s=this.at(i);s&&e.unshift(this.getNodeValue(s)),i.pop()}return e}),h(this,"getDepth",t=>{const e=b(this.rootNode,{getChildren:this.getNodeChildren,predicate:i=>this.getNodeValue(i)===t});return(e==null?void 0:e.length)??0}),h(this,"isSameNode",(t,e)=>this.getNodeValue(t)===this.getNodeValue(e)),h(this,"isRootNode",t=>this.isSameNode(t,this.rootNode)),h(this,"contains",(t,e)=>!t||!e?!1:e.slice(0,t.length).every((i,s)=>t[s]===e[s])),h(this,"getNextNode",(t,e={})=>{let i=!1,s;return g(this.rootNode,{getChildren:this.getNodeChildren,onEnter:(o,l)=>{var d;if(this.isRootNode(o))return;const u=this.getNodeValue(o);if((d=e.skip)!=null&&d.call(e,{value:u,node:o,indexPath:l}))return u===t&&(i=!0),"skip";if(i&&!this.getNodeDisabled(o))return s=o,"stop";u===t&&(i=!0)}}),s}),h(this,"getPreviousNode",(t,e={})=>{let i,s=!1;return g(this.rootNode,{getChildren:this.getNodeChildren,onEnter:(o,l)=>{var d;if(this.isRootNode(o))return;const u=this.getNodeValue(o);if((d=e.skip)!=null&&d.call(e,{value:u,node:o,indexPath:l}))return"skip";if(u===t)return s=!0,"stop";this.getNodeDisabled(o)||(i=o)}}),s?i:void 0}),h(this,"getParentNodes",t=>{var e;const i=(e=this.resolveIndexPath(t))==null?void 0:e.slice();if(!i)return[];const s=[];for(;i.length>0;){i.pop();const o=this.at(i);o&&!this.isRootNode(o)&&s.unshift(o)}return s}),h(this,"getDescendantNodes",(t,e)=>{const i=this.resolveNode(t);if(!i)return[];const s=[];return g(i,{getChildren:this.getNodeChildren,onEnter:(o,l)=>{l.length!==0&&(!(e!=null&&e.withBranch)&&this.isBranchNode(o)||s.push(o))}}),s}),h(this,"getDescendantValues",(t,e)=>this.getDescendantNodes(t,e).map(i=>this.getNodeValue(i))),h(this,"getParentIndexPath",t=>t.slice(0,-1)),h(this,"getParentNode",t=>{const e=this.resolveIndexPath(t);return e?this.at(this.getParentIndexPath(e)):void 0}),h(this,"visit",t=>{const{skip:e,...i}=t;g(this.rootNode,{...i,getChildren:this.getNodeChildren,onEnter:(s,o)=>{var l;if(!this.isRootNode(s))return e!=null&&e({value:this.getNodeValue(s),node:s,indexPath:o})?"skip":(l=i.onEnter)==null?void 0:l.call(i,s,o)}})}),h(this,"getPreviousSibling",t=>{const e=this.getParentNode(t);if(!e)return;const i=this.getNodeChildren(e);let s=t[t.length-1];for(;--s>=0;){const o=i[s];if(!this.getNodeDisabled(o))return o}}),h(this,"getNextSibling",t=>{const e=this.getParentNode(t);if(!e)return;const i=this.getNodeChildren(e);let s=t[t.length-1];for(;++s<i.length;){const o=i[s];if(!this.getNodeDisabled(o))return o}}),h(this,"getSiblingNodes",t=>{const e=this.getParentNode(t);return e?this.getNodeChildren(e):[]}),h(this,"getValues",(t=this.rootNode)=>$(t,{getChildren:this.getNodeChildren,transform:e=>[this.getNodeValue(e)]}).slice(1)),h(this,"isValidDepth",(t,e)=>e==null?!0:typeof e=="function"?e(t.length):t.length===e),h(this,"isBranchNode",t=>this.getNodeChildren(t).length>0||this.getNodeChildrenCount(t)!=null),h(this,"getBranchValues",(t=this.rootNode,e={})=>{let i=[];return g(t,{getChildren:this.getNodeChildren,onEnter:(s,o)=>{var l;if(o.length===0)return;const d=this.getNodeValue(s);if((l=e.skip)!=null&&l.call(e,{value:d,node:s,indexPath:o}))return"skip";this.isBranchNode(s)&&this.isValidDepth(o,e.depth)&&i.push(this.getNodeValue(s))}}),i}),h(this,"flatten",(t=this.rootNode)=>H(t,{getChildren:this.getNodeChildren})),h(this,"_create",(t,e)=>this.getNodeChildren(t).length>0||e.length>0?{...t,children:e}:{...t}),h(this,"_insert",(t,e,i)=>this.copy(Y(t,{at:e,nodes:i,getChildren:this.getNodeChildren,create:this._create}))),h(this,"copy",t=>new _({...this.options,rootNode:t})),h(this,"_replace",(t,e,i)=>this.copy(Z(t,{at:e,node:i,getChildren:this.getNodeChildren,create:this._create}))),h(this,"_move",(t,e,i)=>this.copy(et(t,{indexPaths:e,to:i,getChildren:this.getNodeChildren,create:this._create}))),h(this,"_remove",(t,e)=>this.copy(tt(t,{indexPaths:e,getChildren:this.getNodeChildren,create:this._create}))),h(this,"replace",(t,e)=>this._replace(this.rootNode,t,e)),h(this,"remove",t=>this._remove(this.rootNode,t)),h(this,"insertBefore",(t,e)=>this.getParentNode(t)?this._insert(this.rootNode,t,e):void 0),h(this,"insertAfter",(t,e)=>{if(!this.getParentNode(t))return;const i=[...t.slice(0,-1),t[t.length-1]+1];return this._insert(this.rootNode,i,e)}),h(this,"move",(t,e)=>this._move(this.rootNode,t,e)),h(this,"filter",t=>{const e=G(this.rootNode,{predicate:t,getChildren:this.getNodeChildren,create:this._create});return this.copy(e)}),h(this,"toJSON",()=>this.getValues(this.rootNode)),this.rootNode=r.rootNode}},v={nodeToValue(n){return typeof n=="string"?n:p(n)&&m(n,"value")?n.value:""},nodeToString(n){return typeof n=="string"?n:p(n)&&m(n,"label")?n.label:v.nodeToValue(n)},isNodeDisabled(n){return p(n)&&m(n,"disabled")?!!n.disabled:!1},nodeToChildren(n){return n.children},nodeToChildrenCount(n){if(p(n)&&m(n,"childrenCount"))return n.childrenCount}};export{st as r,nt as s};
